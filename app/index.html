<!DOCTYPE html>
<html lang="en">
  <script>
    window.addEventListener('message', async (event) => {
      if (typeof(event.data) !== "object") return;

      if (event.data.type === "pluginMessage") {
        if (typeof(event.data.content) !== "object") return;
        const arr = new Uint8Array(event.data.content);
        if (arr[0] == 'r'.charCodeAt(0) && arr[1] == '3'.charCodeAt(0) && arr[2] == 'd'.charCodeAt(0)) {
          const animated = arr[3] == '1';
          document.getElementById("text").innerText += `\nmessage ${event.data.content.byteLength} bytes animated=${animated}`
        }
      }
    });
  </script>
  <head>
    <style>
      body {
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <p id="text">Hello World</p>
  </body>
</html>
