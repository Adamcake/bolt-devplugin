(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const jr=!1;var Cr=Array.isArray,Bn=Array.prototype.indexOf,Lr=Array.from,On=Object.defineProperty,$t=Object.getOwnPropertyDescriptor,vn=Object.getOwnPropertyDescriptors,Vn=Object.prototype,Hn=Array.prototype,kr=Object.getPrototypeOf,qr=Object.isExtensible;function Wn(e){return e()}function Ur(e){for(var r=0;r<e.length;r++)e[r]()}const Xe=2,hn=4,hr=8,Nr=16,it=32,Mt=64,or=128,Ve=256,sr=512,Me=1024,ot=2048,Rt=4096,nt=8192,xr=16384,Xn=32768,Br=65536,xn=1<<17,zn=1<<19,pn=1<<20,Dr=1<<21,Ft=Symbol("$state"),Yn=Symbol("legacy props"),jn=Symbol("");function gn(e){return e===this.v}function qn(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Or(e){return!qn(e,this.v)}function Gn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Kn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Zn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Qn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Jn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ea(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ta(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ra(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let jt=!1,na=!1;function aa(){jt=!0}const Vr=1,Hr=2,mn=4,ia=8,oa=16,sa=1,ua=2,fa=4,la=8,ca=16,da=1,_a=2,Pe=Symbol(),va="http://www.w3.org/1999/xhtml";let se=null;function Gr(e){se=e}function gt(e,r=!1,t){var i=se={p:se,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};jt&&!r&&(se.l={s:null,u:null,r1:[],r2:Wt(!1)}),ba(()=>{i.d=!0})}function mt(e){const r=se;if(r!==null){const d=r.e;if(d!==null){var t=ie,i=te;r.e=null;try{for(var o=0;o<d.length;o++){var s=d[o];pt(s.effect),Ke(s.reaction),Xr(s.fn)}}finally{pt(t),Ke(i)}}se=r.p,r.m=!0}return{}}function pr(){return!jt||se!==null&&se.l===null}function At(e,r){if(typeof e!="object"||e===null||Ft in e)return e;const t=kr(e);if(t!==Vn&&t!==Hn)return e;var i=new Map,o=Cr(e),s=ct(0),d=te,x=v=>{var u=te;Ke(d);var h;return h=v(),Ke(u),h};return o&&i.set("length",ct(e.length)),new Proxy(e,{defineProperty(v,u,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&ea();var p=i.get(u);return p===void 0?(p=x(()=>ct(h.value)),i.set(u,p)):M(p,x(()=>At(h.value))),!0},deleteProperty(v,u){var h=i.get(u);if(h===void 0)u in v&&i.set(u,x(()=>ct(Pe)));else{if(o&&typeof u=="string"){var p=i.get("length"),l=Number(u);Number.isInteger(l)&&l<p.v&&M(p,l)}M(h,Pe),Kr(s)}return!0},get(v,u,h){var y;if(u===Ft)return e;var p=i.get(u),l=u in v;if(p===void 0&&(!l||(y=$t(v,u))!=null&&y.writable)&&(p=x(()=>ct(At(l?v[u]:Pe))),i.set(u,p)),p!==void 0){var w=n(p);return w===Pe?void 0:w}return Reflect.get(v,u,h)},getOwnPropertyDescriptor(v,u){var h=Reflect.getOwnPropertyDescriptor(v,u);if(h&&"value"in h){var p=i.get(u);p&&(h.value=n(p))}else if(h===void 0){var l=i.get(u),w=l==null?void 0:l.v;if(l!==void 0&&w!==Pe)return{enumerable:!0,configurable:!0,value:w,writable:!0}}return h},has(v,u){var w;if(u===Ft)return!0;var h=i.get(u),p=h!==void 0&&h.v!==Pe||Reflect.has(v,u);if(h!==void 0||ie!==null&&(!p||(w=$t(v,u))!=null&&w.writable)){h===void 0&&(h=x(()=>ct(p?At(v[u]):Pe)),i.set(u,h));var l=n(h);if(l===Pe)return!1}return p},set(v,u,h,p){var ne;var l=i.get(u),w=u in v;if(o&&u==="length")for(var y=h;y<l.v;y+=1){var V=i.get(y+"");V!==void 0?M(V,Pe):y in v&&(V=x(()=>ct(Pe)),i.set(y+"",V))}l===void 0?(!w||(ne=$t(v,u))!=null&&ne.writable)&&(l=x(()=>ct(void 0)),M(l,x(()=>At(h))),i.set(u,l)):(w=l.v!==Pe,M(l,x(()=>At(h))));var Z=Reflect.getOwnPropertyDescriptor(v,u);if(Z!=null&&Z.set&&Z.set.call(p,h),!w){if(o&&typeof u=="string"){var G=i.get("length"),K=Number(u);Number.isInteger(K)&&K>=G.v&&M(G,K+1)}Kr(s)}return!0},ownKeys(v){n(s);var u=Reflect.ownKeys(v).filter(l=>{var w=i.get(l);return w===void 0||w.v!==Pe});for(var[h,p]of i)p.v!==Pe&&!(h in v)&&u.push(h);return u},setPrototypeOf(){ta()}})}function Kr(e,r=1){M(e,e.v+r)}const Ht=new Map;function Wt(e,r){var t={f:0,v:e,reactions:null,equals:gn,rv:0,wv:0};return t}function ct(e,r){const t=Wt(e);return Ua(t),t}function W(e,r=!1){var i;const t=Wt(e);return r||(t.equals=Or),jt&&se!==null&&se.l!==null&&((i=se.l).s??(i.s=[])).push(t),t}function nr(e,r){return M(e,at(()=>n(e))),r}function M(e,r,t=!1){te!==null&&!Ge&&pr()&&(te.f&(Xe|Nr))!==0&&!(Se!=null&&Se.includes(e))&&ra();let i=t?At(r):r;return Xt(e,i)}function Xt(e,r){if(!e.equals(r)){var t=e.v;Gt?Ht.set(e,r):Ht.set(e,t),e.v=r,e.wv=Mn(),wn(e,ot),pr()&&ie!==null&&(ie.f&Me)!==0&&(ie.f&(it|Mt))===0&&(Ne===null?Da([e]):Ne.push(e))}return r}function wn(e,r){var t=e.reactions;if(t!==null)for(var i=pr(),o=t.length,s=0;s<o;s++){var d=t[s],x=d.f;(x&ot)===0&&(!i&&d===ie||(ze(d,r),(x&(Me|Ve))!==0&&((x&Xe)!==0?wn(d,Rt):br(d))))}}let ha=!1;var Zr,bn,yn,En;function xa(){if(Zr===void 0){Zr=window,bn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,t=Text.prototype;yn=$t(r,"firstChild").get,En=$t(r,"nextSibling").get,qr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),qr(t)&&(t.__t=void 0)}}function Wr(e=""){return document.createTextNode(e)}function ur(e){return yn.call(e)}function gr(e){return En.call(e)}function Re(e,r){return ur(e)}function oe(e,r){{var t=ur(e);return t instanceof Comment&&t.data===""?gr(t):t}}function q(e,r=1,t=!1){let i=e;for(;r--;)i=gr(i);return i}function pa(e){e.textContent=""}function zt(e){var r=Xe|ot,t=te!==null&&(te.f&Xe)!==0?te:null;return ie===null||t!==null&&(t.f&Ve)!==0?r|=Ve:ie.f|=pn,{ctx:se,deps:null,effects:null,equals:gn,f:r,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??ie}}function J(e){const r=zt(e);return r.equals=Or,r}function An(e){var r=e.effects;if(r!==null){e.effects=null;for(var t=0;t<r.length;t+=1)xt(r[t])}}function ga(e){for(var r=e.parent;r!==null;){if((r.f&Xe)===0)return r;r=r.parent}return null}function ma(e){var r,t=ie;pt(ga(e));try{An(e),r=Ln(e)}finally{pt(t)}return r}function Fn(e){var r=ma(e),t=(ht||(e.f&Ve)!==0)&&e.deps!==null?Rt:Me;ze(e,t),e.equals(r)||(e.v=r,e.wv=Mn())}function Tn(e){ie===null&&te===null&&Zn(),te!==null&&(te.f&Ve)!==0&&ie===null&&Kn(),Gt&&Gn()}function wa(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function Ct(e,r,t,i=!0){var o=ie,s={ctx:se,deps:null,nodes_start:null,nodes_end:null,f:e|ot,first:null,fn:r,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(t)try{wr(s),s.f|=Xn}catch(v){throw xt(s),v}else r!==null&&br(s);var d=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(pn|or))===0;if(!d&&i&&(o!==null&&wa(s,o),te!==null&&(te.f&Xe)!==0)){var x=te;(x.effects??(x.effects=[])).push(s)}return s}function ba(e){const r=Ct(hr,null,!1);return ze(r,Me),r.teardown=e,r}function Qr(e){Tn();var r=ie!==null&&(ie.f&it)!==0&&se!==null&&!se.m;if(r){var t=se;(t.e??(t.e=[])).push({fn:e,effect:ie,reaction:te})}else{var i=Xr(e);return i}}function ya(e){return Tn(),qt(e)}function Ea(e){const r=Ct(Mt,e,!0);return(t={})=>new Promise(i=>{t.outro?fr(r,()=>{xt(r),i(void 0)}):(xt(r),i(void 0))})}function Xr(e){return Ct(hn,e,!1)}function Aa(e,r){var t=se,i={effect:null,ran:!1};t.l.r1.push(i),i.effect=qt(()=>{e(),!i.ran&&(i.ran=!0,M(t.l.r2,!0),at(r))})}function Fa(){var e=se;qt(()=>{if(n(e.l.r2)){for(var r of e.l.r1){var t=r.effect;(t.f&Me)!==0&&ze(t,Rt),Lt(t)&&wr(t),r.ran=!1}e.l.r2.v=!1}})}function qt(e){return Ct(hr,e,!0)}function Oe(e,r=[],t=zt){const i=r.map(t);return zr(()=>e(...i.map(n)))}function zr(e,r=0){return Ct(hr|Nr|r,e,!0)}function Yt(e,r=!0){return Ct(hr|it,e,!0,r)}function Rn(e){var r=e.teardown;if(r!==null){const t=Gt,i=te;Jr(!0),Ke(null);try{r.call(null)}finally{Jr(t),Ke(i)}}}function Sn(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var i=t.next;(t.f&Mt)!==0?t.parent=null:xt(t,r),t=i}}function Ta(e){for(var r=e.first;r!==null;){var t=r.next;(r.f&it)===0&&xt(r),r=t}}function xt(e,r=!0){var t=!1;if((r||(e.f&zn)!==0)&&e.nodes_start!==null){for(var i=e.nodes_start,o=e.nodes_end;i!==null;){var s=i===o?null:gr(i);i.remove(),i=s}t=!0}Sn(e,r&&!t),vr(e,0),ze(e,xr);var d=e.transitions;if(d!==null)for(const v of d)v.stop();Rn(e);var x=e.parent;x!==null&&x.first!==null&&Un(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Un(e){var r=e.parent,t=e.prev,i=e.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),r!==null&&(r.first===e&&(r.first=i),r.last===e&&(r.last=t))}function fr(e,r){var t=[];Yr(e,t,!0),Dn(t,()=>{xt(e),r&&r()})}function Dn(e,r){var t=e.length;if(t>0){var i=()=>--t||r();for(var o of e)o.out(i)}else r()}function Yr(e,r,t){if((e.f&nt)===0){if(e.f^=nt,e.transitions!==null)for(const d of e.transitions)(d.is_global||t)&&r.push(d);for(var i=e.first;i!==null;){var o=i.next,s=(i.f&Br)!==0||(i.f&it)!==0;Yr(i,r,s?t:!1),i=o}}}function lr(e){In(e,!0)}function In(e,r){if((e.f&nt)!==0){e.f^=nt,(e.f&Me)===0&&(e.f^=Me),Lt(e)&&(ze(e,ot),br(e));for(var t=e.first;t!==null;){var i=t.next,o=(t.f&Br)!==0||(t.f&it)!==0;In(t,o?r:!1),t=i}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&s.in()}}let cr=[];function Ra(){var e=cr;cr=[],Ur(e)}function Pn(e){cr.length===0&&queueMicrotask(Ra),cr.push(e)}let ar=!1,Ir=!1,dr=null,Tt=!1,Gt=!1;function Jr(e){Gt=e}let ir=[];let te=null,Ge=!1;function Ke(e){te=e}let ie=null;function pt(e){ie=e}let Se=null;function Sa(e){Se=e}function Ua(e){te!==null&&te.f&Dr&&(Se===null?Sa([e]):Se.push(e))}let Te=null,Ce=0,Ne=null;function Da(e){Ne=e}let $n=1,_r=0,ht=!1,vt=null;function Mn(){return++$n}function Lt(e){var p;var r=e.f;if((r&ot)!==0)return!0;if((r&Rt)!==0){var t=e.deps,i=(r&Ve)!==0;if(t!==null){var o,s,d=(r&sr)!==0,x=i&&ie!==null&&!ht,v=t.length;if(d||x){var u=e,h=u.parent;for(o=0;o<v;o++)s=t[o],(d||!((p=s==null?void 0:s.reactions)!=null&&p.includes(u)))&&(s.reactions??(s.reactions=[])).push(u);d&&(u.f^=sr),x&&h!==null&&(h.f&Ve)===0&&(u.f^=Ve)}for(o=0;o<v;o++)if(s=t[o],Lt(s)&&Fn(s),s.wv>e.wv)return!0}(!i||ie!==null&&!ht)&&ze(e,Me)}return!1}function Ia(e,r){for(var t=r;t!==null;){if((t.f&or)!==0)try{t.fn(e);return}catch{t.f^=or}t=t.parent}throw ar=!1,e}function Pa(e){return(e.f&xr)===0&&(e.parent===null||(e.parent.f&or)===0)}function mr(e,r,t,i){if(ar){if(t===null&&(ar=!1),Pa(r))throw e;return}t!==null&&(ar=!0);{Ia(e,r);return}}function Cn(e,r,t=!0){var i=e.reactions;if(i!==null)for(var o=0;o<i.length;o++){var s=i[o];Se!=null&&Se.includes(e)||((s.f&Xe)!==0?Cn(s,r,!1):r===s&&(t?ze(s,ot):(s.f&Me)!==0&&ze(s,Rt),br(s)))}}function Ln(e){var w;var r=Te,t=Ce,i=Ne,o=te,s=ht,d=Se,x=se,v=Ge,u=e.f;Te=null,Ce=0,Ne=null,ht=(u&Ve)!==0&&(Ge||!Tt||te===null),te=(u&(it|Mt))===0?e:null,Se=null,Gr(e.ctx),Ge=!1,_r++,e.f|=Dr;try{var h=(0,e.fn)(),p=e.deps;if(Te!==null){var l;if(vr(e,Ce),p!==null&&Ce>0)for(p.length=Ce+Te.length,l=0;l<Te.length;l++)p[Ce+l]=Te[l];else e.deps=p=Te;if(!ht)for(l=Ce;l<p.length;l++)((w=p[l]).reactions??(w.reactions=[])).push(e)}else p!==null&&Ce<p.length&&(vr(e,Ce),p.length=Ce);if(pr()&&Ne!==null&&!Ge&&p!==null&&(e.f&(Xe|Rt|ot))===0)for(l=0;l<Ne.length;l++)Cn(Ne[l],e);return o!==null&&(_r++,Ne!==null&&(i===null?i=Ne:i.push(...Ne))),h}finally{Te=r,Ce=t,Ne=i,te=o,ht=s,Se=d,Gr(x),Ge=v,e.f^=Dr}}function $a(e,r){let t=r.reactions;if(t!==null){var i=Bn.call(t,e);if(i!==-1){var o=t.length-1;o===0?t=r.reactions=null:(t[i]=t[o],t.pop())}}t===null&&(r.f&Xe)!==0&&(Te===null||!Te.includes(r))&&(ze(r,Rt),(r.f&(Ve|sr))===0&&(r.f^=sr),An(r),vr(r,0))}function vr(e,r){var t=e.deps;if(t!==null)for(var i=r;i<t.length;i++)$a(e,t[i])}function wr(e){var r=e.f;if((r&xr)===0){ze(e,Me);var t=ie,i=se,o=Tt;ie=e,Tt=!0;try{(r&Nr)!==0?Ta(e):Sn(e),Rn(e);var s=Ln(e);e.teardown=typeof s=="function"?s:null,e.wv=$n;var d=e.deps,x;jr&&na&&e.f&ot}catch(v){mr(v,e,t,i||e.ctx)}finally{Tt=o,ie=t}}}function Ma(){try{Qn()}catch(e){if(dr!==null)mr(e,dr,null);else throw e}}function Ca(){var e=Tt;try{var r=0;for(Tt=!0;ir.length>0;){r++>1e3&&Ma();var t=ir,i=t.length;ir=[];for(var o=0;o<i;o++){var s=ka(t[o]);La(s)}}}finally{Ir=!1,Tt=e,dr=null,Ht.clear()}}function La(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var i=e[t];if((i.f&(xr|nt))===0)try{Lt(i)&&(wr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Un(i):i.fn=null))}catch(o){mr(o,i,null,i.ctx)}}}function br(e){Ir||(Ir=!0,queueMicrotask(Ca));for(var r=dr=e;r.parent!==null;){r=r.parent;var t=r.f;if((t&(Mt|it))!==0){if((t&Me)===0)return;r.f^=Me}}ir.push(r)}function ka(e){for(var r=[],t=e;t!==null;){var i=t.f,o=(i&(it|Mt))!==0,s=o&&(i&Me)!==0;if(!s&&(i&nt)===0){if((i&hn)!==0)r.push(t);else if(o)t.f^=Me;else{var d=te;try{te=t,Lt(t)&&wr(t)}catch(u){mr(u,t,null,t.ctx)}finally{te=d}}var x=t.first;if(x!==null){t=x;continue}}var v=t.parent;for(t=t.next;t===null&&v!==null;)t=v.next,v=v.parent}return r}function n(e){var r=e.f,t=(r&Xe)!==0;if(vt!==null&&vt.add(e),te!==null&&!Ge){if(!(Se!=null&&Se.includes(e))){var i=te.deps;e.rv<_r&&(e.rv=_r,Te===null&&i!==null&&i[Ce]===e?Ce++:Te===null?Te=[e]:(!ht||!Te.includes(e))&&Te.push(e))}}else if(t&&e.deps===null&&e.effects===null){var o=e,s=o.parent;s!==null&&(s.f&Ve)===0&&(o.f^=Ve)}return t&&(o=e,Lt(o)&&Fn(o)),Gt&&Ht.has(e)?Ht.get(e):e.v}function Na(e){var r=vt;vt=new Set;var t=vt,i;try{if(at(e),r!==null)for(i of vt)r.add(i)}finally{vt=r}return t}function $e(e){var r=Na(()=>at(e));for(var t of r)if((t.f&xn)!==0)for(const i of t.deps||[])(i.f&Xe)===0&&Xt(i,i.v);else Xt(t,t.v)}function at(e){var r=Ge;try{return Ge=!0,e()}finally{Ge=r}}const Ba=-7169;function ze(e,r){e.f=e.f&Ba|r}function Oa(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ft in e)Pr(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&Ft in t&&Pr(t)}}}function Pr(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Pr(e[i],r)}catch{}const t=kr(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=vn(t);for(let o in i){const s=i[o].get;if(s)try{s.call(e)}catch{}}}}}const Va=["touchstart","touchmove"];function Ha(e){return Va.includes(e)}let en=!1;function Wa(){en||(en=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function Xa(e){var r=te,t=ie;Ke(null),pt(null);try{return e()}finally{Ke(r),pt(t)}}function za(e,r,t,i=t){e.addEventListener(r,()=>Xa(t));const o=e.__on_r;o?e.__on_r=()=>{o(),i(!0)}:e.__on_r=()=>i(!0),Wa()}const kn=new Set,$r=new Set;function yr(e){for(var r=0;r<e.length;r++)kn.add(e[r]);for(var t of $r)t(e)}function er(e){var K;var r=this,t=r.ownerDocument,i=e.type,o=((K=e.composedPath)==null?void 0:K.call(e))||[],s=o[0]||e.target,d=0,x=e.__root;if(x){var v=o.indexOf(x);if(v!==-1&&(r===document||r===window)){e.__root=r;return}var u=o.indexOf(r);if(u===-1)return;v<=u&&(d=v)}if(s=o[d]||e.target,s!==r){On(e,"currentTarget",{configurable:!0,get(){return s||t}});var h=te,p=ie;Ke(null),pt(null);try{for(var l,w=[];s!==null;){var y=s.assignedSlot||s.parentNode||s.host||null;try{var V=s["__"+i];if(V!=null&&(!s.disabled||e.target===s))if(Cr(V)){var[Z,...G]=V;Z.apply(s,[e,...G])}else V.call(s,e)}catch(ne){l?w.push(ne):l=ne}if(e.cancelBubble||y===r||y===null)break;s=y}if(l){for(let ne of w)queueMicrotask(()=>{throw ne});throw l}}finally{e.__root=r,delete e.currentTarget,Ke(h),pt(p)}}}function Ya(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Mr(e,r){var t=ie;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function Y(e,r){var t=(r&da)!==0,i=(r&_a)!==0,o,s=!e.startsWith("<!>");return()=>{o===void 0&&(o=Ya(s?e:"<!>"+e),t||(o=ur(o)));var d=i||bn?document.importNode(o,!0):o.cloneNode(!0);if(t){var x=ur(d),v=d.lastChild;Mr(x,v)}else Mr(d,d);return d}}function tr(){var e=document.createDocumentFragment(),r=document.createComment(""),t=Wr();return e.append(r,t),Mr(r,t),e}function O(e,r){e!==null&&e.before(r)}function ve(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function ja(e,r){return qa(e,r)}const It=new Map;function qa(e,{target:r,anchor:t,props:i={},events:o,context:s,intro:d=!0}){xa();var x=new Set,v=p=>{for(var l=0;l<p.length;l++){var w=p[l];if(!x.has(w)){x.add(w);var y=Ha(w);r.addEventListener(w,er,{passive:y});var V=It.get(w);V===void 0?(document.addEventListener(w,er,{passive:y}),It.set(w,1)):It.set(w,V+1)}}};v(Lr(kn)),$r.add(v);var u=void 0,h=Ea(()=>{var p=t??r.appendChild(Wr());return Yt(()=>{if(s){gt({});var l=se;l.c=s}o&&(i.$$events=o),u=e(p,i)||{},s&&mt()}),()=>{var y;for(var l of x){r.removeEventListener(l,er);var w=It.get(l);--w===0?(document.removeEventListener(l,er),It.delete(l)):It.set(l,w)}$r.delete(v),p!==t&&((y=p.parentNode)==null||y.removeChild(p))}});return Ga.set(u,h),u}let Ga=new WeakMap;function re(e,r,[t,i]=[0,0]){var o=e,s=null,d=null,x=Pe,v=t>0?Br:0,u=!1;const h=(l,w=!0)=>{u=!0,p(w,l)},p=(l,w)=>{x!==(x=l)&&(x?(s?lr(s):w&&(s=Yt(()=>w(o))),d&&fr(d,()=>{d=null})):(d?lr(d):w&&(d=Yt(()=>w(o,[t+1,i]))),s&&fr(s,()=>{s=null})))};zr(()=>{u=!1,r(h),u||p(null,null)},v)}function tt(e,r){return r}function Ka(e,r,t,i){for(var o=[],s=r.length,d=0;d<s;d++)Yr(r[d].e,o,!0);var x=s>0&&o.length===0&&t!==null;if(x){var v=t.parentNode;pa(v),v.append(t),i.clear(),_t(e,r[0].prev,r[s-1].next)}Dn(o,()=>{for(var u=0;u<s;u++){var h=r[u];x||(i.delete(h.k),_t(e,h.prev,h.next)),xt(h.e,!x)}})}function rt(e,r,t,i,o,s=null){var d=e,x={flags:r,items:new Map,first:null},v=(r&mn)!==0;if(v){var u=e;d=u.appendChild(Wr())}var h=null,p=!1,l=J(()=>{var w=t();return Cr(w)?w:w==null?[]:Lr(w)});zr(()=>{var w=n(l),y=w.length;p&&y===0||(p=y===0,Za(w,x,d,o,r,i,t),s!==null&&(y===0?h?lr(h):h=Yt(()=>s(d)):h!==null&&fr(h,()=>{h=null})),n(l))})}function Za(e,r,t,i,o,s,d){var bt,yt,Qe,Ye;var x=(o&ia)!==0,v=(o&(Vr|Hr))!==0,u=e.length,h=r.items,p=r.first,l=p,w,y=null,V,Z=[],G=[],K,ne,k,z;if(x)for(z=0;z<u;z+=1)K=e[z],ne=s(K,z),k=h.get(ne),k!==void 0&&((bt=k.a)==null||bt.measure(),(V??(V=new Set)).add(k));for(z=0;z<u;z+=1){if(K=e[z],ne=s(K,z),k=h.get(ne),k===void 0){var ue=l?l.e.nodes_start:t;y=Ja(ue,r,y,y===null?r.first:y.next,K,ne,z,i,o,d),h.set(ne,y),Z=[],G=[],l=y.next;continue}if(v&&Qa(k,K,z,o),(k.e.f&nt)!==0&&(lr(k.e),x&&((yt=k.a)==null||yt.unfix(),(V??(V=new Set)).delete(k))),k!==l){if(w!==void 0&&w.has(k)){if(Z.length<G.length){var Ue=G[0],X;y=Ue.prev;var he=Z[0],be=Z[Z.length-1];for(X=0;X<Z.length;X+=1)tn(Z[X],Ue,t);for(X=0;X<G.length;X+=1)w.delete(G[X]);_t(r,he.prev,be.next),_t(r,y,he),_t(r,be,Ue),l=Ue,y=be,z-=1,Z=[],G=[]}else w.delete(k),tn(k,l,t),_t(r,k.prev,k.next),_t(r,k,y===null?r.first:y.next),_t(r,y,k),y=k;continue}for(Z=[],G=[];l!==null&&l.k!==ne;)(l.e.f&nt)===0&&(w??(w=new Set)).add(l),G.push(l),l=l.next;if(l===null)continue;k=l}Z.push(k),y=k,l=k.next}if(l!==null||w!==void 0){for(var He=w===void 0?[]:Lr(w);l!==null;)(l.e.f&nt)===0&&He.push(l),l=l.next;var Ze=He.length;if(Ze>0){var wt=(o&mn)!==0&&u===0?t:null;if(x){for(z=0;z<Ze;z+=1)(Qe=He[z].a)==null||Qe.measure();for(z=0;z<Ze;z+=1)(Ye=He[z].a)==null||Ye.fix()}Ka(r,He,wt,h)}}x&&Pn(()=>{var Et;if(V!==void 0)for(k of V)(Et=k.a)==null||Et.apply()}),ie.first=r.first&&r.first.e,ie.last=y&&y.e}function Qa(e,r,t,i){(i&Vr)!==0&&Xt(e.v,r),(i&Hr)!==0?Xt(e.i,t):e.i=t}function Ja(e,r,t,i,o,s,d,x,v,u){var h=(v&Vr)!==0,p=(v&oa)===0,l=h?p?W(o):Wt(o):o,w=(v&Hr)===0?d:Wt(d),y={i:w,v:l,k:s,a:null,e:null,prev:t,next:i};try{return y.e=Yt(()=>x(e,l,w,u),ha),y.e.prev=t&&t.e,y.e.next=i&&i.e,t===null?r.first=y:(t.next=y,t.e.next=y.e),i!==null&&(i.prev=y,i.e.prev=y.e),y}finally{}}function tn(e,r,t){for(var i=e.next?e.next.e.nodes_start:t,o=r?r.e.nodes_start:t,s=e.e.nodes_start;s!==i;){var d=gr(s);o.before(s),s=d}}function _t(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Nn(e){var r,t,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(t=Nn(e[r]))&&(i&&(i+=" "),i+=t)}else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function ei(){for(var e,r,t=0,i="",o=arguments.length;t<o;t++)(e=arguments[t])&&(r=Nn(e))&&(i&&(i+=" "),i+=r);return i}function ti(e){return typeof e=="object"?ei(e):e??""}function ri(e,r,t){var i=e==null?"":""+e;return i===""?null:i}function rn(e,r,t,i,o,s){var d=e.__className;if(d!==t){var x=ri(t);x==null?e.removeAttribute("class"):e.className=x,e.__className=t}return s}const ni=Symbol("is custom element"),ai=Symbol("is html");function Bt(e,r,t,i){var o=ii(e);o[r]!==(o[r]=t)&&(r==="loading"&&(e[jn]=t),t==null?e.removeAttribute(r):typeof t!="string"&&oi(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function ii(e){return e.__attributes??(e.__attributes={[ni]:e.nodeName.includes("-"),[ai]:e.namespaceURI===va})}var nn=new Map;function oi(e){var r=nn.get(e.nodeName);if(r)return r;nn.set(e.nodeName,r=[]);for(var t,i=e,o=Element.prototype;o!==i;){t=vn(i);for(var s in t)t[s].set&&r.push(s);i=kr(i)}return r}function si(e,r,t=r){za(e,"change",i=>{var o=i?e.defaultChecked:e.checked;t(o)}),at(r)==null&&t(e.checked),qt(()=>{var i=r();e.checked=!!i})}function an(e,r){return e===r||(e==null?void 0:e[Ft])===r}function ui(e={},r,t,i){return Xr(()=>{var o,s;return qt(()=>{o=s,s=[],at(()=>{e!==t(...s)&&(r(e,...s),o&&an(t(...o),e)&&r(null,...o))})}),()=>{Pn(()=>{s&&an(t(...s),e)&&r(null,...s)})}}),e}function St(e=!1){const r=se,t=r.l.u;if(!t)return;let i=()=>Oa(r.s);if(e){let o=0,s={};const d=zt(()=>{let x=!1;const v=r.s;for(const u in v)v[u]!==s[u]&&(s[u]=v[u],x=!0);return x&&o++,o});i=()=>n(d)}t.b.length&&ya(()=>{on(r,i),Ur(t.b)}),Qr(()=>{const o=at(()=>t.m.map(Wn));return()=>{for(const s of o)typeof s=="function"&&s()}}),t.a.length&&Qr(()=>{on(r,i),Ur(t.a)})}function on(e,r){if(e.l.s)for(const t of e.l.s)n(t);r()}let rr=!1;function fi(e){var r=rr;try{return rr=!1,[e(),rr]}finally{rr=r}}function sn(e){var r;return((r=e.ctx)==null?void 0:r.d)??!1}function Be(e,r,t,i){var Ue;var o=(t&sa)!==0,s=!jt||(t&ua)!==0,d=(t&la)!==0,x=(t&ca)!==0,v=!1,u;d?[u,v]=fi(()=>e[r]):u=e[r];var h=Ft in e||Yn in e,p=d&&(((Ue=$t(e,r))==null?void 0:Ue.set)??(h&&r in e&&(X=>e[r]=X)))||void 0,l=i,w=!0,y=!1,V=()=>(y=!0,w&&(w=!1,x?l=at(i):l=i),l);u===void 0&&i!==void 0&&(p&&s&&Jn(),u=V(),p&&p(u));var Z;if(s)Z=()=>{var X=e[r];return X===void 0?V():(w=!0,y=!1,X)};else{var G=(o?zt:J)(()=>e[r]);G.f|=xn,Z=()=>{var X=n(G);return X!==void 0&&(l=void 0),X===void 0?l:X}}if((t&fa)===0)return Z;if(p){var K=e.$$legacy;return function(X,he){return arguments.length>0?((!s||!he||K||v)&&p(he?Z():X),X):Z()}}var ne=!1,k=!1,z=W(u),ue=zt(()=>{var X=Z(),he=n(z);return ne?(ne=!1,k=!0,he):(k=!1,z.v=X)});return d&&n(ue),o||(ue.equals=Or),function(X,he){if(vt!==null&&(ne=k,Z(),n(z)),arguments.length>0){const be=he?n(ue):s&&d?At(X):X;if(!ue.equals(be)){if(ne=!0,M(z,be),y&&l!==void 0&&(l=be),sn(ue))return X;at(()=>n(ue))}return X}return sn(ue)?ue.v:n(ue)}}const li="5";var _n;typeof window<"u"&&((_n=window.__svelte??(window.__svelte={})).v??(_n.v=new Set)).add(li);aa();const ci=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,di=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,_i=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,vi=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,hi=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,xi=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,pi=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,gi=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,Ot=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],un=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],mi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],wi=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],bi=[{count:2,offset:0}],dt=(e,r,t,i)=>{const o=e.createShader(r);if(!o)throw new Error(`failed to create shader '${i}'`);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){const s=e.getShaderInfoLog(o);throw new Error(`compilation error in shader '${i}':
${s}`)}return o},Vt=(e,r,t,i)=>{const o=e.createProgram();if(!o)throw new Error(`failed to create program '${i}'`);if(e.attachShader(o,r),e.attachShader(o,t),e.linkProgram(o),e.detachShader(o,r),e.detachShader(o,t),!e.getProgramParameter(o,e.LINK_STATUS)){const s=e.getProgramInfoLog(o);throw new Error(`link error in program '${i}':
${s}`)}return o};function*yi(e,r){let t=0;for(;!(t>e.length);){const i=t+r;yield e.slice(t,i),t=i}}function*Ei(e,r){let t=0;for(;;){const i=t+r;if(i>e.length)break;yield e.slice(t,i),t=i}}function Rr(e,r,t,i){const o=r*2,s=e.map(t);return s.length<o?s:yi(s,r).map(d=>[...d]).map(i).toArray()}var Ai=(e,r)=>r(!1),Fi=Y('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),Ti=(e,r)=>r(!0),Ri=Y('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),Si=Y('<input type="checkbox">'),Ui=Y("<!> <!> <label> </label> <br>",1);function Fe(e,r){gt(r,!1);let t=Be(r,"expanded",12),i=Be(r,"id",8),o=Be(r,"text",8),s=Be(r,"checked",12,null),d=Be(r,"onexpandedchange",8,null),x=Be(r,"oncheckedchange",8,null);const v=G=>{t(G),d()&&d()()};St();var u=Ui(),h=oe(u);{var p=G=>{var K=Fi();K.__click=[Ai,v],Oe(()=>Bt(K,"id",s()===null?i():null)),O(G,K)},l=G=>{var K=Ri();K.__click=[Ti,v],Oe(()=>Bt(K,"id",s()===null?i():null)),O(G,K)};re(h,G=>{t()?G(p):G(l,!1)})}var w=q(h,2);{var y=G=>{var K=Si();Bt(K,"draggable",!0),K.__change=function(...ne){var k;(k=x())==null||k.apply(this,ne)},Oe(()=>Bt(K,"id",i())),si(K,s),O(G,K)};re(w,G=>{s()!==null&&G(y)})}var V=q(w,2),Z=Re(V);Oe(()=>{Bt(V,"for",i()),ve(Z,o())}),O(e,u),mt()}yr(["click","change"]);var Di=Y('<div class="ml-2 w-full"> <br> <br> <br> <br></div>');function fn(e,r){gt(r,!1);let t=Be(r,"image",8);St();var i=Di(),o=Re(i),s=q(o,2),d=q(s,2),x=q(d,2);Oe((v,u,h,p)=>{ve(o,`screen: ${t().x??""},${t().y??""}
  ${t().w??""}x${t().h??""} `),ve(s,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),ve(d,` rgb: ${v??""}, ${u??""}, ${h??""} `),ve(x,` alpha: ${p??""} `)},[()=>t().r.toPrecision(4),()=>t().g.toPrecision(4),()=>t().b.toPrecision(4),()=>t().a.toPrecision(4)],J),O(e,i),mt()}var Ii=Y(" <br>",1),Pi=Y('<div class="ml-2 w-full"><!> <br> <br> <br> <br></div>');function ln(e,r){gt(r,!1);let t=Be(r,"vertex",8);St();var i=Pi(),o=Re(i);{var s=h=>{var p=Ii(),l=oe(p);Oe(()=>ve(l,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `)),O(h,p)};re(o,h=>{t().modelpoint&&h(s)})}var d=q(o),x=q(d,2),v=q(x,2),u=q(v,2);Oe((h,p,l,w,y,V)=>{ve(d,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),ve(x,` uv: ${h??""}, ${p??""} `),ve(v,` rgb: ${l??""}, ${w??""}, ${y??""} `),ve(u,` alpha: ${V??""} `)},[()=>t().u.toPrecision(4),()=>t().v.toPrecision(4),()=>t().r.toPrecision(4),()=>t().g.toPrecision(4),()=>t().b.toPrecision(4),()=>t().a.toPrecision(4)],J),O(e,i),mt()}var $i=Y('<div class="ml-2 w-full"> <br> <br> <br></div>');function cn(e,r){gt(r,!1);let t=Be(r,"vertex",8);St();var i=$i(),o=Re(i),s=q(o,2),d=q(s,2);Oe((x,v,u,h)=>{ve(o,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `),ve(s,` rgb: ${x??""}, ${v??""}, ${u??""} `),ve(d,` alpha: ${h??""} `)},[()=>t().r.toPrecision(4),()=>t().g.toPrecision(4),()=>t().b.toPrecision(4),()=>t().a.toPrecision(4)],J),O(e,i),mt()}var Mi=Y("<div> </div>"),Ci=(e,r,t)=>{const i=r().textureId;t(t().selectedTextureId=i.toString(),!0),t(t().selectedTexture=t().textures[i],!0),t().redraw()},Li=Y('<button class="hover:bg-gray-200"> </button> <br>',1),ki=Y("<!> <!>",1),Ni=Y('<div class="ml-1"></div>'),Bi=Y("<!> <!>",1),Oi=Y("<!> <!>",1),Vi=Y('<div class="ml-1"><!></div>'),Hi=Y("<!> <!>",1),Wi=Y("<!> <!>",1),Xi=Y('<div class="ml-1"></div>'),zi=Y("<!> <!>",1),Yi=Y("<!> <!>",1),ji=Y('<div class="ml-1"><!></div>'),qi=Y("<!> <!>",1),Gi=Y("<!> <!>",1),Ki=Y('<div class="ml-1"></div>'),Zi=Y("<!> <!>",1),Qi=Y("<!> <!>",1),Ji=Y('<div class="ml-1"><!></div>'),eo=Y("<!> <!>",1),to=Y('<div class="ml-1"><!> <!></div>'),ro=Y(" <br> <!> <!>",1),no=Y('<div class="ml-3 text-sm"><!> <!> <!> <!> <!></div>');function ao(e,r){gt(r,!1);let t=Be(r,"entity",12),i=Be(r,"menuData",12);const o=6,s=100;let d=W(!1),x=W(!1),v=W(!1);function u(U){return"images"in U}function h(U){return"vertices"in U}function p(U){return"vertices"in U}const l=(U,j)=>{const H=U[0];let fe=H.x,xe=H.x,ce=H.y,de=H.y;for(const ee of U)ee.x<fe&&(fe=ee.x),ee.x>xe&&(xe=ee.x),ee.y<ce&&(ce=ee.y),ee.y>de&&(de=ee.y);return{x:fe,y:ce,w:xe-fe,h:de-ce,ax:H.ax,ay:H.ay,aw:H.aw,ah:H.ah,r:H.r,g:H.g,b:H.b,a:H.a,expanded:!1,index:j}},w=(U,j)=>{const H=j*s,fe=H*o;return{images:U,desc:`${H}-${H+U.length-1}`,expanded:!1,vertexRangeStart:fe,vertexRangeEnd:fe+U.length*o}},y=(U,j)=>({modelpoint:{...U},expanded:!1,index:j,...U}),V=(U,j)=>({modelpoint:null,expanded:!1,index:j,...U}),Z=(U,j)=>{const H=j*s;return{vertices:U,desc:`${H}-${H+U.length-1}`,expanded:!1}},G=(U,j)=>({modelpoint:{...U},expanded:!1,index:j,...U}),K=(U,j)=>{const H=j*s;return{vertices:U,desc:`${H}-${H+U.length-1}`,expanded:!1}},ne=(U,j)=>({vertices:Rr(U.vertices,s,G,K),expanded:!1,verticesExpanded:!1,index:j});let k=W(null),z=W(0),ue=W(null),Ue=W(0),X=W(null),he=W(0);if(t().type==="batch2d"||t().type==="minimap2d"){const U=[...Ei(t().vertices,o)];M(z,U.length),M(k,Rr(U,s,l,w))}else if(t().vertices){const U=t().type!=="renderparticles"?y:V;M(Ue,t().vertices.length),M(ue,Rr(t().vertices,s,U,Z))}t().models&&(M(he,t().models.length),M(X,t().models.map(ne))),St();var be=no(),He=Re(be);{var Ze=U=>{var j=Mi(),H=Re(j);Oe(()=>ve(H,`animated: ${t().animated??""}`)),O(U,j)};re(He,U=>{typeof t().animated=="boolean"&&U(Ze)})}var wt=q(He,2);{var bt=U=>{var j=Li(),H=oe(j);H.__click=[Ci,t,i];var fe=Re(H);Oe(()=>ve(fe,`texture: #${t().textureId??""}`)),O(U,j)};re(wt,U=>{typeof t().textureId=="number"&&U(bt)})}var yt=q(wt,2);{var Qe=U=>{var j=Hi(),H=oe(j);const fe=J(()=>`${t().uuid}-images2d`),xe=J(()=>`2D images (${n(z)})`);Fe(H,{get id(){return n(fe)},get text(){return n(xe)},get expanded(){return n(d)},set expanded(ee){M(d,ee)},$$legacy:!0});var ce=q(H,2);{var de=ee=>{var De=tr(),je=oe(De);rt(je,1,()=>n(k),tt,(Je,P,_)=>{var pe=Vi(),ge=Re(pe);{var st=le=>{var me=Bi(),ye=oe(me),Ee=()=>n(P).images.every(c=>t().enabledVerticesList[c.index*o]),Le=c=>{for(let C=n(P).vertexRangeStart;C<n(P).vertexRangeEnd;C+=1)t(t().enabledVerticesList[C]=c,!0)};const ke=J(()=>`${t().uuid}-images-${n(P).desc}`),g=J(()=>`[Images ${n(P).desc}]`);Fe(ye,{get checked(){return Ee()},set checked(c){Le(c)},get oncheckedchange(){return i().redraw},get id(){return n(ke)},get text(){return n(g)},get expanded(){return n(P).expanded},set expanded(c){n(P).expanded=c,$e(()=>n(k))},$$legacy:!0});var a=q(ye,2);{var f=c=>{var C=Ni();rt(C,5,()=>n(P).images,tt,(E,b,I)=>{var m=ki(),Q=oe(m),R=()=>t().enabledVerticesList[n(b).index*o],ae=A=>{for(let N=0;N<o;N+=1)t(t().enabledVerticesList[n(b).index*o+N]=A,!0)};const F=J(()=>`${t().uuid}-images-${n(P).desc}-${I}`);Fe(Q,{get checked(){return R()},set checked(A){ae(A)},get oncheckedchange(){return i().redraw},get id(){return n(F)},text:`Image ${_*s+I}`,get expanded(){return n(b).expanded},set expanded(A){n(b).expanded=A,$e(()=>(n(k),n(P).images))},$$legacy:!0});var D=q(Q,2);{var S=A=>{fn(A,{get image(){return n(b)}})};re(D,A=>{n(b).expanded&&A(S)})}O(E,m)}),O(c,C)};re(a,c=>{n(P).expanded&&c(f)})}O(le,me)},ut=le=>{var me=Oi(),ye=oe(me),Ee=()=>t().enabledVerticesList[n(P).index*o],Le=f=>{for(let c=0;c<o;c+=1)t(t().enabledVerticesList[n(P).index*o+c]=f,!0)};const ke=J(()=>`${t().uuid}-images-${_}`);Fe(ye,{get checked(){return Ee()},set checked(f){Le(f)},get oncheckedchange(){return i().redraw},get id(){return n(ke)},text:`Image ${_}`,get expanded(){return n(P).expanded},set expanded(f){n(P).expanded=f,$e(()=>n(k))},$$legacy:!0});var g=q(ye,2);{var a=f=>{fn(f,{get image(){return n(P)}})};re(g,f=>{n(P).expanded&&f(a)})}O(le,me)};re(ge,le=>{u(n(P))?le(st):le(ut,!1)})}O(Je,pe)}),O(ee,De)};re(ce,ee=>{n(d)&&ee(de)})}O(U,j)};re(yt,U=>{n(k)&&n(z)&&U(Qe)})}var Ye=q(yt,2);{var Et=U=>{var j=qi(),H=oe(j);const fe=J(()=>`${t().uuid}-vertices3d`),xe=J(()=>`3D vertices (${n(Ue)})`);Fe(H,{get id(){return n(fe)},get text(){return n(xe)},get expanded(){return n(x)},set expanded(ee){M(x,ee)},$$legacy:!0});var ce=q(H,2);{var de=ee=>{var De=tr(),je=oe(De);rt(je,1,()=>n(ue),tt,(Je,P,_)=>{var pe=ji(),ge=Re(pe);{var st=le=>{var me=zi(),ye=oe(me);const Ee=J(()=>`${t().uuid}-vertices-${n(P).desc}`),Le=J(()=>`[Vertices ${n(P).desc}]`);Fe(ye,{get id(){return n(Ee)},get text(){return n(Le)},get expanded(){return n(P).expanded},set expanded(a){n(P).expanded=a,$e(()=>n(ue))},$$legacy:!0});var ke=q(ye,2);{var g=a=>{var f=Xi();rt(f,5,()=>n(P).vertices,tt,(c,C,E)=>{var b=Wi(),I=oe(b);const m=J(()=>`${t().uuid}-vertices-${n(P).desc}-${n(C).index}`),Q=J(()=>`Vertex ${n(C).index}`);Fe(I,{get id(){return n(m)},get text(){return n(Q)},get expanded(){return n(C).expanded},set expanded(F){n(C).expanded=F,$e(()=>(n(ue),n(P).vertices))},$$legacy:!0});var R=q(I,2);{var ae=F=>{ln(F,{get vertex(){return n(C)}})};re(R,F=>{n(C).expanded&&F(ae)})}O(c,b)}),O(a,f)};re(ke,a=>{n(P).expanded&&a(g)})}O(le,me)},ut=le=>{var me=Yi(),ye=oe(me);const Ee=J(()=>`${t().uuid}-vertices-${n(P).index}`),Le=J(()=>`Vertex ${n(P).index}`);Fe(ye,{get id(){return n(Ee)},get text(){return n(Le)},get expanded(){return n(P).expanded},set expanded(a){n(P).expanded=a,$e(()=>n(ue))},$$legacy:!0});var ke=q(ye,2);{var g=a=>{ln(a,{get vertex(){return n(P)}})};re(ke,a=>{n(P).expanded&&a(g)})}O(le,me)};re(ge,le=>{h(n(P))?le(st):le(ut,!1)})}O(Je,pe)}),O(ee,De)};re(ce,ee=>{n(x)&&ee(de)})}O(U,j)};re(Ye,U=>{n(ue)&&n(Ue)&&U(Et)})}var Kt=q(Ye,2);{var kt=U=>{var j=ro(),H=oe(j),fe=q(H,3);const xe=J(()=>`${t().uuid}-models`),ce=J(()=>`Models (${n(he)})`);Fe(fe,{get id(){return n(xe)},get text(){return n(ce)},get expanded(){return n(v)},set expanded(De){M(v,De)},$$legacy:!0});var de=q(fe,2);{var ee=De=>{var je=tr(),Je=oe(je);rt(Je,1,()=>n(X),tt,(P,_,pe)=>{var ge=to(),st=Re(ge);const ut=J(()=>`${t().uuid}-models`),le=J(()=>`Model ${n(_).index}`);Fe(st,{get id(){return n(ut)},get text(){return n(le)},get expanded(){return n(_).expanded},set expanded(Ee){n(_).expanded=Ee,$e(()=>n(X))},$$legacy:!0});var me=q(st,2);{var ye=Ee=>{var Le=eo(),ke=oe(Le);const g=J(()=>`${t().uuid}-vertices`),a=J(()=>`Vertices (${n(_).vertices.length})`);Fe(ke,{get id(){return n(g)},get text(){return n(a)},get expanded(){return n(_).verticesExpanded},set expanded(C){n(_).verticesExpanded=C,$e(()=>n(X))},$$legacy:!0});var f=q(ke,2);{var c=C=>{var E=tr(),b=oe(E);rt(b,1,()=>n(_).vertices,tt,(I,m,Q)=>{var R=Ji(),ae=Re(R);{var F=S=>{var A=Zi(),N=oe(A);const $=J(()=>`${t().uuid}-vertices-${n(m).desc}`),T=J(()=>`[Vertices ${n(m).desc}]`);Fe(N,{get id(){return n($)},get text(){return n(T)},get expanded(){return n(m).expanded},set expanded(L){n(m).expanded=L,$e(()=>(n(X),n(_).vertices))},$$legacy:!0});var B=q(N,2);{var we=L=>{var Ae=Ki();rt(Ae,5,()=>n(m).vertices,tt,(ft,qe,Zt)=>{var Nt=Gi(),Ut=oe(Nt);const Dt=J(()=>`${t().uuid}-vertices-${n(m).desc}-${n(qe).index}`),Qt=J(()=>`Vertex ${n(qe).index}`);Fe(Ut,{get id(){return n(Dt)},get text(){return n(Qt)},get expanded(){return n(qe).expanded},set expanded(et){n(qe).expanded=et,$e(()=>(n(X),n(_).vertices,n(m).vertices))},$$legacy:!0});var Er=q(Ut,2);{var Ie=et=>{cn(et,{get vertex(){return n(qe)}})};re(Er,et=>{n(qe).expanded&&et(Ie)})}O(ft,Nt)}),O(L,Ae)};re(B,L=>{n(m).expanded&&L(we)})}O(S,A)},D=S=>{var A=Qi(),N=oe(A);const $=J(()=>`${t().uuid}-${n(_).index}-vertex-${n(m).index}`),T=J(()=>`Vertex ${n(m).index}`);Fe(N,{get id(){return n($)},get text(){return n(T)},get expanded(){return n(m).expanded},set expanded(L){n(m).expanded=L,$e(()=>(n(X),n(_).vertices))},$$legacy:!0});var B=q(N,2);{var we=L=>{cn(L,{get vertex(){return n(m)}})};re(B,L=>{n(m).expanded&&L(we)})}O(S,A)};re(ae,S=>{p(n(m))?S(F):S(D,!1)})}O(I,R)}),O(C,E)};re(f,C=>{n(_).verticesExpanded&&C(c)})}O(Ee,Le)};re(me,Ee=>{n(_).expanded&&Ee(ye)})}O(P,ge)}),O(De,je)};re(de,De=>{n(v)&&De(ee)})}Oe(()=>ve(H,`screen: ${t().targetx??""},${t().targety??""}
    ${t().targetw??""}x${t().targeth??""} `)),O(U,j)};re(Kt,U=>{n(X)&&n(he)&&U(kt)})}O(e,be),mt()}yr(["click"]);var io=(e,r,t,i)=>r(t(),i()),oo=Y('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),so=Y("<div><!> <!></div>"),uo=Y('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function fo(e,r){gt(r,!1);let t=Be(r,"data",12);const i=(x,v)=>{t().selectedTexture===v?t(t().selectedTexture=null,!0):(t(t().selectedTextureId=x,!0),t(t().selectedTexture=v,!0)),t().redraw()};St();var o=uo(),s=q(oe(o),2);rt(s,1,()=>Object.entries(t().textures),tt,(x,v)=>{let u=()=>n(v)[0],h=()=>n(v)[1];var p=oo(),l=Re(p);l.__click=[io,i,u,h];var w=Re(l);Oe(()=>{rn(l,1,ti(t().selectedTexture===h()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),ve(w,`#${u()??""}`)}),O(x,p)});var d=q(s,6);rt(d,1,()=>t().entities,tt,(x,v,u)=>{var h=so();rn(h,1,`select-none m-0 border-none w-full ${u&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var p=Re(h);Fe(p,{id:`menu${u}`,get text(){return t().entities[u].type},get oncheckedchange(){return t().redraw},get expanded(){return t().entities[u].expanded},set expanded(y){t().entities[u].expanded=y,$e(()=>t().entities)},get checked(){return t().entities[u].enabled},set checked(y){t().entities[u].enabled=y,$e(()=>t().entities)},$$legacy:!0});var l=q(p,2);{var w=y=>{ao(y,{get entity(){return t().entities[u]},set entity(V){t().entities[u]=V,$e(()=>t().entities)},get menuData(){return t()},set menuData(V){t(V)},$$legacy:!0})};re(l,y=>{t().entities[u].expanded&&y(w)})}O(x,h)}),O(e,o),mt()}yr(["click"]);const _e=[];for(let e=0;e<256;++e)_e.push((e+256).toString(16).slice(1));function lo(e,r=0){return(_e[e[r+0]]+_e[e[r+1]]+_e[e[r+2]]+_e[e[r+3]]+"-"+_e[e[r+4]]+_e[e[r+5]]+"-"+_e[e[r+6]]+_e[e[r+7]]+"-"+_e[e[r+8]]+_e[e[r+9]]+"-"+_e[e[r+10]]+_e[e[r+11]]+_e[e[r+12]]+_e[e[r+13]]+_e[e[r+14]]+_e[e[r+15]]).toLowerCase()}let Sr;const co=new Uint8Array(16);function _o(){if(!Sr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Sr=crypto.getRandomValues.bind(crypto)}return Sr(co)}const vo=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),dn={randomUUID:vo};function Pt(e,r,t){var o;if(dn.randomUUID&&!e)return dn.randomUUID();e=e||{};const i=e.random??((o=e.rng)==null?void 0:o.call(e))??_o();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,lo(i)}var ho=(e,r)=>M(r,!1),xo=Y('<div class="overflow-auto absolute w-60 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),po=(e,r)=>M(r,!0),go=Y('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),mo=(e,r,t,i,o)=>{nr(r,n(r).selectedTexture=null),t(n(i),n(o))},wo=Y('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),bo=Y('<canvas class="absolute right-0"></canvas> <!> <!>',1);function yo(e,r){gt(r,!1);let t=W({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",redraw:()=>ge(n(P),n(_))});const i=g=>{const a=wt.get(g);return a?parseInt(a):0},o=(g,a,f,c,C)=>new Float32Array([f/(g*C),0,0,0,0,f/(a*C),0,0,0,0,(c+f)/(c-f),1,0,0,-2*c*f/(c-f),0]),s=0;let d=W(null),x=W(null),v=W(null),u=W(null),h=W(null),p=W(null),l=W(null),w=W(null),y=W(null),V=W(null),Z=W(null),G=W(null),K=W(null),ne=W(null),k=W(null),z=W(null),ue=W(null),Ue=W(null),X=W(null),he=W(null),be=W(null),He=W(null),Ze=null;const wt=new URLSearchParams(window.location.search),bt=wt.get("n"),yt=bt?Math.max(parseInt(bt),1):1,Qe=i("w"),Ye=i("h"),Et=i("gx"),Kt=i("gy"),kt=i("gw"),U=i("gh");let j=0,H=W(0),fe=W(),xe=null,ce=null,de=0,ee=0,De=o(kt,U,460,66560,5/16),je=W(!1),Je=W(!1),P=W(null),_=W(null);const pe=(g,a,f,c)=>{g.bindBuffer(g.ARRAY_BUFFER,a.vbo);for(let E=0;E<n(H);E+=1){const b=a.attribs[E];if(!b){g.disableVertexAttribArray(E);continue}g.enableVertexAttribArray(E),g.vertexAttribPointer(E,b.count,g.FLOAT,!1,a.step,b.offset)}if(!c){g.drawArrays(g.TRIANGLES,0,f);return}let C=null;for(let E=0;E<f;E+=1){const b=c[E];C===null?b&&(C=E):b||(g.drawArrays(g.TRIANGLES,C,E-C),C=null)}C!==null&&g.drawArrays(g.TRIANGLES,C,f-C)},ge=(g,a)=>{if(a.viewport(0,0,g.width,g.height),a.scissor(0,0,g.width,g.height),a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),!n(je)){a.viewport(0,0,g.width,g.height);const f=()=>{a.clearColor(.525,.968,.495,1),a.clear(a.COLOR_BUFFER_BIT)},c=()=>{a.clearColor(.2,.2,.2,1),a.clear(a.COLOR_BUFFER_BIT)},C=Math.min(j/yt,1),E=Math.floor(g.width*.65)&-2,b=70,I=8,m=I*2,Q=E*C;if(f(),g.width<=m||g.height<=m)return;a.scissor(I,I,g.width-m,g.height-m),c(),a.scissor(g.width/2-(E/2+I),g.height/2-(b/2+I),E+m,b+m),f(),a.scissor(g.width/2-E/2+Q,g.height/2-b/2,E-Q,b),c();return}if(n(t).selectedTexture){if(a.useProgram(n(be)),a.viewport(0,0,g.width,g.height),a.uniform2fv(n(He),[g.width,g.height]),!Ze){const S=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,S),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),a.STATIC_DRAW),Ze={vbo:S,step:8,attribs:bi}}pe(a,Ze,6);const f=n(t).selectedTexture,c=g.width/g.height,C=f.width/f.height,E=c>=C,b=E?f.width*g.height/f.height:g.width,I=E?g.height:f.height*g.width/f.width,m=E?(g.width-g.height)/2:0,Q=b+m,R=E?0:(g.height-g.width)/2,ae=I+R;a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST),a.useProgram(n(d)),a.uniform4fv(n(x),[f.width,f.height,g.width,g.height]),a.bindTexture(a.TEXTURE_2D,f.texture),a.uniform1i(n(v),s);const F=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,F),a.bufferData(a.ARRAY_BUFFER,new Float32Array([m,R,0,0,0,0,f.width,f.height,1,1,1,1,0,0,0,Q,R,1,0,0,0,f.width,f.height,1,1,1,1,0,0,0,m,ae,0,1,0,0,f.width,f.height,1,1,1,1,0,0,0,Q,R,1,0,0,0,f.width,f.height,1,1,1,1,0,0,0,Q,ae,1,1,0,0,f.width,f.height,1,1,1,1,0,0,0,m,ae,0,1,0,0,f.width,f.height,1,1,1,1,0,0,0]),a.STATIC_DRAW),pe(a,{vbo:F,step:60,attribs:Ot},6),a.deleteBuffer(F);return}ce&&(a.bindFramebuffer(a.DRAW_FRAMEBUFFER,ce),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)),a.disable(a.SCISSOR_TEST);for(let f of n(t).entities)if(f.enabled){if(f.type==="batch2d"){a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST);const c=n(t).textures[f.textureId];a.useProgram(n(d)),a.viewport(0,0,Qe,Ye),a.uniform4fv(n(x),[c.width,c.height,f.targetWidth,f.targetHeight]),a.bindTexture(a.TEXTURE_2D,c.texture),a.uniform1i(n(v),s),pe(a,f.buffer,f.vertexCount,f.enabledVerticesList)}if(f.type==="render3d"){a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.DEPTH_TEST);const c=n(t).textures[f.textureId];a.useProgram(f.animated?n(V):n(u)),a.viewport(Et,Kt,kt,U),a.uniformMatrix4fv(f.animated?n(Z):n(h),!1,f.modelMatrix),a.uniformMatrix4fv(f.animated?n(G):n(p),!1,f.viewMatrix),a.uniformMatrix4fv(f.animated?n(K):n(l),!1,De),a.uniform2fv(f.animated?n(ne):n(w),[c.width,c.height]),a.bindTexture(a.TEXTURE_2D,c.texture),a.uniform1i(f.animated?n(k):n(y),s),pe(a,f.buffer,f.vertexCount)}if(f.type==="renderparticles"){a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.DEPTH_TEST);const c=n(t).textures[f.textureId];a.useProgram(n(z)),a.viewport(Et,Kt,kt,U),a.uniformMatrix4fv(n(ue),!1,f.viewMatrix),a.uniformMatrix4fv(n(Ue),!1,De),a.uniform2fv(n(he),[c.width,c.height]),a.bindTexture(a.TEXTURE_2D,c.texture),a.uniform1i(n(X),s),pe(a,f.buffer,f.vertexCount)}if(f.type==="icon"||f.type==="bigicon"){const c=f.texSize;a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST),a.useProgram(n(d)),a.viewport(0,0,Qe,Ye),a.bindTexture(a.TEXTURE_2D,f.texture),a.uniform1i(n(v),s),a.uniform4fv(n(x),[c,c,f.targetWidth,f.targetHeight]),pe(a,f.buffer,6)}if(f.type==="minimap2d"){!xe||!ce?(xe=a.createTexture(),a.bindTexture(a.TEXTURE_2D,xe),a.texStorage2D(a.TEXTURE_2D,1,a.RGBA8,de,ee),ce=a.createFramebuffer(),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,ce),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,xe,0)):a.bindFramebuffer(a.DRAW_FRAMEBUFFER,ce),a.viewport(0,0,de,ee),a.disable(a.DEPTH_TEST);const c=n(t).textures[f.textureId];a.useProgram(n(d)),a.uniform4fv(n(x),[c.width,c.height,de,ee]),a.bindTexture(a.TEXTURE_2D,c.texture),a.uniform1i(n(v),s),pe(a,f.buffer,f.vertexCount,f.enabledVerticesList),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)}if(f.type==="minimap"){if(xe===null)continue;a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST),a.useProgram(n(d)),a.viewport(0,0,Qe,Ye),a.uniform4fv(n(x),[de,ee,f.targetWidth,f.targetHeight]),a.bindTexture(a.TEXTURE_2D,xe),a.uniform1i(n(v),s),pe(a,f.buffer,6)}}},st=(g,a,f)=>{const c=new DataView(f),C=c.getUint32(0,!0);switch(C){case 0:{M(je,!0),ge(g,a);break}case 1:{const E=c.getUint32(4,!0),b=c.getUint32(8,!0),I=c.getUint32(12,!0),m=a.createTexture(),Q=new Uint8Array(f,16,b*I*4);a.bindTexture(a.TEXTURE_2D,m),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,I,0,a.RGBA,a.UNSIGNED_BYTE,Q),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),nr(t,n(t).textures[E]={texture:m,width:b,height:I,data:Q});break}case 2:case 3:{const E=C===3,b=E?104:40,I=E?120:56,m=c.getUint32(4,!0),Q=c.getUint32(8,!0),R=new Float32Array(16);R.set(new Float32Array(f,16,16));const ae=new Float32Array(16);ae.set(new Float32Array(f,80,16));const F=new DataView(f,144,m*b),D=new Array(m),S=new ArrayBuffer(m*I),A=new DataView(S);for(let $=0;$<m;$+=1){const T=b*$,B=I*$;let we=null;E&&(we=new Float32Array(16),we.set(new Float32Array(f,144+b*$+40,16)));const L={x:F.getInt16(T,!0),y:F.getInt16(T+2,!0),z:F.getInt16(T+4,!0),u:F.getFloat32(T+8,!0),v:F.getFloat32(T+12,!0),ax:F.getUint16(T+16,!0),ay:F.getUint16(T+18,!0),aw:F.getUint16(T+20,!0),ah:F.getUint16(T+22,!0),r:F.getFloat32(T+24,!0),g:F.getFloat32(T+28,!0),b:F.getFloat32(T+32,!0),a:F.getFloat32(T+36,!0),anim:we};if(D[$]=L,A.setFloat32(B,L.x,!0),A.setFloat32(B+4,L.y,!0),A.setFloat32(B+8,L.z,!0),A.setFloat32(B+12,0,!0),A.setFloat32(B+16,L.u,!0),A.setFloat32(B+20,L.v,!0),A.setFloat32(B+24,L.ax,!0),A.setFloat32(B+28,L.ay,!0),A.setFloat32(B+32,L.aw,!0),A.setFloat32(B+36,L.ah,!0),A.setFloat32(B+40,L.r,!0),A.setFloat32(B+44,L.g,!0),A.setFloat32(B+48,L.b,!0),A.setFloat32(B+52,L.a,!0),we)for(let Ae=0;Ae<16;Ae+=1)A.setFloat32(B+56+Ae*4,we[Ae],!0)}const N=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,N),a.bufferData(a.ARRAY_BUFFER,A,a.STATIC_DRAW),n(t).entities.push({type:"render3d",animated:E,textureId:Q,vertexCount:m,modelMatrix:R,viewMatrix:ae,vertices:D,buffer:{vbo:N,step:I,attribs:E?mi:un},enabled:!0,expanded:!1,uuid:Pt()}),j+=m,ge(g,a);break}case 4:{const I=c.getUint32(4,!0),m=c.getUint32(8,!0),Q=c.getUint16(12,!0),R=c.getUint16(14,!0),ae=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ae);const F=new DataView(f,16,I*40),D=new ArrayBuffer(I*60),S=new DataView(D),A=new Array(I);for(let N=0;N<I;N+=1){const $=40*N,T=60*N,B={x:F.getInt16($,!0),y:F.getInt16($+2,!0),ax:F.getInt16($+4,!0),ay:F.getInt16($+6,!0),aw:F.getInt16($+8,!0),ah:F.getInt16($+10,!0),discard:F.getUint8($+12),wrapx:F.getUint8($+13),wrapy:F.getUint8($+14),u:F.getFloat32($+16,!0),v:F.getFloat32($+20,!0),r:F.getFloat32($+24,!0),g:F.getFloat32($+28,!0),b:F.getFloat32($+32,!0),a:F.getFloat32($+36,!0)};A[N]=B,S.setFloat32(T,B.x,!0),S.setFloat32(T+4,B.y,!0),S.setFloat32(T+8,B.u,!0),S.setFloat32(T+12,B.v,!0),S.setFloat32(T+16,B.ax,!0),S.setFloat32(T+20,B.ay,!0),S.setFloat32(T+24,B.aw,!0),S.setFloat32(T+28,B.ah,!0),S.setFloat32(T+32,B.r,!0),S.setFloat32(T+36,B.g,!0),S.setFloat32(T+40,B.b,!0),S.setFloat32(T+44,B.a,!0),S.setFloat32(T+48,B.discard,!0),S.setFloat32(T+52,B.wrapx,!0),S.setFloat32(T+56,B.wrapy,!0)}a.bufferData(a.ARRAY_BUFFER,S,a.STATIC_DRAW),n(t).entities.push({type:"batch2d",textureId:m,vertexCount:I,vertices:A,targetWidth:Q,targetHeight:R,buffer:{vbo:ae,step:60,attribs:Ot},enabled:!0,expanded:!1,uuid:Pt(),enabledVerticesList:Array(Math.floor(I)).fill(!0)}),j+=I,ge(g,a);break}case 5:case 8:{const b=C===5?64:512,I=c.getInt16(4,!0),m=c.getInt16(6,!0),Q=c.getInt16(8,!0),R=c.getInt16(10,!0),ae=c.getUint32(12,!0),F=c.getFloat32(16,!0),D=c.getFloat32(20,!0),S=c.getFloat32(24,!0),A=c.getFloat32(28,!0),N=c.getUint16(32,!0),$=c.getUint16(34,!0),T=a.createTexture(),B=a.createFramebuffer();a.bindTexture(a.TEXTURE_2D,T),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,B),a.texStorage2D(a.TEXTURE_2D,1,a.RGBA8,b,b),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,T,0),a.enable(a.CULL_FACE),a.cullFace(a.FRONT),a.viewport(0,0,b,b),a.scissor(0,0,b,b);let we=Array(ae),L=36;for(let Ut=0;Ut<ae;Ut+=1){const Dt=c.getUint32(L,!0);let Qt=Array(Dt);const Er=new ArrayBuffer(Dt*56),Ie=new DataView(Er),et=new Float32Array(16);et.set(new Float32Array(f,L+4,16));const Ar=new Float32Array(16);Ar.set(new Float32Array(f,L+68,16));const Fr=new Float32Array(16);Fr.set(new Float32Array(f,L+132,16)),L+=196;for(let Jt=0;Jt<Dt;Jt+=1){const lt={x:c.getInt16(L,!0),y:c.getInt16(L+2,!0),z:c.getInt16(L+4,!0),r:c.getFloat32(L+8,!0),g:c.getFloat32(L+12,!0),b:c.getFloat32(L+16,!0),a:c.getFloat32(L+20,!0)},We=Jt*56;Ie.setFloat32(We,lt.x,!0),Ie.setFloat32(We+4,lt.y,!0),Ie.setFloat32(We+8,lt.z,!0),Ie.setFloat32(We+24,0,!0),Ie.setFloat32(We+28,0,!0),Ie.setFloat32(We+32,b,!0),Ie.setFloat32(We+36,b,!0),Ie.setFloat32(We+40,lt.r,!0),Ie.setFloat32(We+44,lt.g,!0),Ie.setFloat32(We+48,lt.b,!0),Ie.setFloat32(We+52,lt.a,!0),Qt[Jt]=lt,L+=24}we[Ut]={vertices:Qt,modelMatrix:et,viewMatrix:Ar,projMatrix:Fr};const Tr=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Tr),a.bufferData(a.ARRAY_BUFFER,Ie,a.STATIC_DRAW),a.useProgram(n(u)),a.uniformMatrix4fv(n(h),!1,et),a.uniformMatrix4fv(n(p),!1,Ar),a.uniformMatrix4fv(n(l),!1,Fr),a.uniform2fv(n(w),[1,1]),a.bindTexture(a.TEXTURE_2D,n(fe)),a.uniform1i(n(y),s),pe(a,{vbo:Tr,attribs:un,step:56},Dt),a.deleteBuffer(Tr)}const Ae=I,ft=I+Q,qe=m,Zt=m+R,Nt=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Nt),a.bufferData(a.ARRAY_BUFFER,new Float32Array([Ae,qe,0,1,0,0,b,b,F,S,D,A,0,0,0,ft,qe,1,1,0,0,b,b,F,S,D,A,0,0,0,Ae,Zt,0,0,0,0,b,b,F,S,D,A,0,0,0,ft,qe,1,1,0,0,b,b,F,S,D,A,0,0,0,ft,Zt,1,0,0,0,b,b,F,S,D,A,0,0,0,Ae,Zt,0,0,0,0,b,b,F,S,D,A,0,0,0]),a.STATIC_DRAW),n(t).entities.push({type:C===5?"icon":"bigicon",models:we,texture:T,targetWidth:N,targetHeight:$,texSize:b,buffer:{vbo:Nt,step:60,attribs:Ot},targetx:I,targety:m,targetw:Q,targeth:R,enabled:!0,expanded:!1,uuid:Pt()}),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.deleteFramebuffer(B),a.disable(a.CULL_FACE);break}case 6:{const E=c.getUint32(4,!0),b=c.getUint32(8,!0);de=c.getUint16(12,!0),ee=c.getUint16(14,!0);const I=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,I);const m=new DataView(f,16,E*40),Q=new ArrayBuffer(E*60),R=new DataView(Q),ae=new Array(E);for(let F=0;F<E;F+=1){const D=40*F,S=60*F,A={x:m.getInt16(D,!0),y:m.getInt16(D+2,!0),ax:m.getInt16(D+4,!0),ay:m.getInt16(D+6,!0),aw:m.getInt16(D+8,!0),ah:m.getInt16(D+10,!0),discard:m.getUint8(D+12),wrapx:m.getUint8(D+13),wrapy:m.getUint8(D+14),u:m.getFloat32(D+16,!0),v:m.getFloat32(D+20,!0),r:m.getFloat32(D+24,!0),g:m.getFloat32(D+28,!0),b:m.getFloat32(D+32,!0),a:m.getFloat32(D+36,!0)};ae[F]=A,R.setFloat32(S,A.x,!0),R.setFloat32(S+4,A.y,!0),R.setFloat32(S+8,A.u,!0),R.setFloat32(S+12,A.v,!0),R.setFloat32(S+16,A.ax,!0),R.setFloat32(S+20,A.ay,!0),R.setFloat32(S+24,A.aw,!0),R.setFloat32(S+28,A.ah,!0),R.setFloat32(S+32,A.r,!0),R.setFloat32(S+36,A.g,!0),R.setFloat32(S+40,A.b,!0),R.setFloat32(S+44,A.a,!0),R.setFloat32(S+48,A.discard,!0),R.setFloat32(S+52,A.wrapx,!0),R.setFloat32(S+56,A.wrapy,!0)}a.bufferData(a.ARRAY_BUFFER,R,a.STATIC_DRAW),n(t).entities.push({type:"minimap2d",textureId:b,buffer:{vbo:I,attribs:Ot,step:60},vertices:ae,vertexCount:E,enabled:!0,expanded:!1,enabledVerticesList:Array(Math.floor(E)).fill(!0),uuid:Pt()}),j+=E,ge(g,a);break}case 7:{const E=c.getInt16(4,!0),b=c.getInt16(6,!0),I=c.getUint16(8,!0),m=c.getUint16(10,!0),Q=c.getInt16(12,!0),R=c.getInt16(14,!0),ae=c.getUint16(16,!0),F=c.getUint16(18,!0),D=c.getUint16(20,!0),S=c.getUint16(22,!0),A=Q,N=Q+ae,$=R,T=R+F,B=E/de,we=(E+I)/de,L=b/ee,Ae=(b+m)/ee,ft=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ft),a.bufferData(a.ARRAY_BUFFER,new Float32Array([A,$,B,Ae,E,b,I,m,1,1,1,1,0,0,0,N,$,we,Ae,E,b,I,m,1,1,1,1,0,0,0,A,T,B,L,E,b,I,m,1,1,1,1,0,0,0,N,$,we,Ae,E,b,I,m,1,1,1,1,0,0,0,N,T,we,L,E,b,I,m,1,1,1,1,0,0,0,A,T,B,L,E,b,I,m,1,1,1,1,0,0,0]),a.STATIC_DRAW),n(t).entities.push({type:"minimap",sourcex:E,sourcey:b,sourcew:I,sourceh:m,targetx:Q,targety:R,targetw:ae,targeth:F,targetWidth:D,targetHeight:S,buffer:{vbo:ft,step:60,attribs:Ot},enabled:!0,expanded:!1,uuid:Pt()}),ge(g,a);break}case 9:{const E=c.getUint32(4,!0),b=c.getUint32(8,!0),I=64,m=72,Q=new Float32Array(16);Q.set(new Float32Array(f,16,16));const R=new DataView(f,80,E*I),ae=new Array(E),F=new ArrayBuffer(E*m),D=new DataView(F);for(let A=0;A<E;A+=1){const N=I*A,$=m*A,T={x:R.getFloat32(N,!0),y:R.getFloat32(N+4,!0),z:R.getFloat32(N+8,!0),offsetx2d:R.getFloat32(N+12,!0),offsety2d:R.getFloat32(N+16,!0),offsetx3d:R.getFloat32(N+20,!0),offsety3d:R.getFloat32(N+24,!0),offsetz3d:R.getFloat32(N+28,!0),ax:R.getUint16(N+32,!0),ay:R.getUint16(N+34,!0),aw:R.getUint16(N+36,!0),ah:R.getUint16(N+38,!0),r:R.getFloat32(N+40,!0),g:R.getFloat32(N+44,!0),b:R.getFloat32(N+48,!0),a:R.getFloat32(N+52,!0),u:R.getFloat32(N+56,!0),v:R.getFloat32(N+60,!0)};ae[A]=T,D.setFloat32($,T.x,!0),D.setFloat32($+4,T.y,!0),D.setFloat32($+8,T.z,!0),D.setFloat32($+12,T.ax,!0),D.setFloat32($+16,T.ay,!0),D.setFloat32($+20,T.aw,!0),D.setFloat32($+24,T.ah,!0),D.setFloat32($+28,T.r,!0),D.setFloat32($+32,T.g,!0),D.setFloat32($+36,T.b,!0),D.setFloat32($+40,T.a,!0),D.setFloat32($+44,T.offsetx2d,!0),D.setFloat32($+48,T.offsety2d,!0),D.setFloat32($+52,T.offsetx3d,!0),D.setFloat32($+56,T.offsety3d,!0),D.setFloat32($+60,T.offsetz3d,!0),D.setFloat32($+64,T.u,!0),D.setFloat32($+68,T.v,!0)}const S=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,S),a.bufferData(a.ARRAY_BUFFER,D,a.STATIC_DRAW),n(t).entities.push({type:"renderparticles",textureId:b,vertexCount:E,vertices:ae,viewMatrix:Q,buffer:{vbo:S,step:m,attribs:wi},enabled:!0,expanded:!1,uuid:Pt()}),j+=E,ge(g,a);break}}};window.addEventListener("message",async g=>{if(typeof g.data=="object"&&g.data.type==="pluginMessage"){if(typeof g.data.content!="object"||!n(P)||!n(_))return;st(n(P),n(_),g.data.content)}}),Aa(()=>(n(P),n(_),n(fe),n(d),n(u),n(V),n(z),n(be)),()=>{if(n(P)&&(nr(P,n(P).width=Qe),nr(P,n(P).height=Ye),M(_,n(P).getContext("webgl2")),n(_))){M(H,n(_).getParameter(n(_).MAX_VERTEX_ATTRIBS)),M(fe,n(_).createTexture()),n(_).bindTexture(n(_).TEXTURE_2D,n(fe));const g=new Uint8Array([255,255,255,255]);n(_).texImage2D(n(_).TEXTURE_2D,0,n(_).RGBA,1,1,0,n(_).RGBA,n(_).UNSIGNED_BYTE,g);const a=dt(n(_),n(_).VERTEX_SHADER,ci,"2D vertex shader"),f=dt(n(_),n(_).FRAGMENT_SHADER,di,"2D fragment shader"),c=dt(n(_),n(_).VERTEX_SHADER,_i,"3D vertex shader"),C=dt(n(_),n(_).VERTEX_SHADER,vi,"3D anim vertex shader"),E=dt(n(_),n(_).FRAGMENT_SHADER,hi,"3D fragment shader"),b=dt(n(_),n(_).VERTEX_SHADER,xi,"particle vertex shader"),I=dt(n(_),n(_).VERTEX_SHADER,pi,"checkers vertex shader"),m=dt(n(_),n(_).FRAGMENT_SHADER,gi,"checkers fragment shader");M(d,Vt(n(_),a,f,"2D program")),M(x,n(_).getUniformLocation(n(d),"atlas_wh_screen_wh")),M(v,n(_).getUniformLocation(n(d),"tex")),M(u,Vt(n(_),c,E,"3D program")),M(h,n(_).getUniformLocation(n(u),"modelmatrix")),M(p,n(_).getUniformLocation(n(u),"viewmatrix")),M(l,n(_).getUniformLocation(n(u),"projmatrix")),M(w,n(_).getUniformLocation(n(u),"atlas_wh")),M(y,n(_).getUniformLocation(n(u),"tex")),M(V,Vt(n(_),C,E,"3D animated program")),M(Z,n(_).getUniformLocation(n(V),"modelmatrix")),M(G,n(_).getUniformLocation(n(V),"viewmatrix")),M(K,n(_).getUniformLocation(n(V),"projmatrix")),M(ne,n(_).getUniformLocation(n(V),"atlas_wh")),M(k,n(_).getUniformLocation(n(V),"tex")),M(z,Vt(n(_),b,E,"Particles program")),M(ue,n(_).getUniformLocation(n(z),"viewmatrix")),M(Ue,n(_).getUniformLocation(n(z),"projmatrix")),M(X,n(_).getUniformLocation(n(z),"tex")),M(he,n(_).getUniformLocation(n(z),"atlas_wh")),M(be,Vt(n(_),I,m,"Checkers program")),M(He,n(_).getUniformLocation(n(be),"screen_wh")),n(_).deleteShader(a),n(_).deleteShader(f),n(_).deleteShader(c),n(_).deleteShader(E),n(_).deleteShader(C),n(_).deleteShader(b),n(_).deleteShader(I),n(_).deleteShader(m),n(_).activeTexture(n(_).TEXTURE0+s),n(_).enable(n(_).SCISSOR_TEST),n(_).disable(n(_).CULL_FACE),n(_).disable(n(_).DEPTH_TEST),n(_).enable(n(_).BLEND),n(_).blendEquationSeparate(n(_).FUNC_ADD,n(_).FUNC_ADD),n(_).depthFunc(n(_).LEQUAL),ge(n(P),n(_))}}),Fa(),St();var ut=bo(),le=oe(ut);ui(le,g=>M(P,g),()=>n(P));var me=q(le,2);{var ye=g=>{var a=xo(),f=oe(a),c=Re(f);fo(c,{get data(){return n(t)},set data(E){M(t,E)},$$legacy:!0});var C=q(f,2);C.__click=[ho,Je],O(g,a)},Ee=(g,a)=>{{var f=c=>{var C=go();C.__click=[po,Je],O(c,C)};re(g,c=>{n(je)&&c(f)},a)}};re(me,g=>{n(Je)?g(ye):g(Ee,!1)})}var Le=q(me,2);{var ke=g=>{var a=wo();a.__click=[mo,t,ge,P,_],O(g,a)};re(Le,g=>{n(t).selectedTexture&&g(ke)})}O(e,ut),mt()}yr(["click"]);ja(yo,{target:document.body});
