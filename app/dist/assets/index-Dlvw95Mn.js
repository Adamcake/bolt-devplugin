(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function t(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(i){if(i.ep)return;i.ep=!0;const u=t(i);fetch(i.href,u)}})();const Fn=!1;var cn=Array.isArray,ma=Array.prototype.indexOf,dn=Array.from,ya=Object.defineProperty,ur=Object.getOwnPropertyDescriptor,Yn=Object.getOwnPropertyDescriptors,Ea=Object.prototype,Aa=Array.prototype,vn=Object.getPrototypeOf,Tn=Object.isExtensible;function Fa(e){return e()}function an(e){for(var n=0;n<e.length;n++)e[n]()}const lt=2,zn=4,Wr=8,_n=16,Ft=32,sr=64,$r=128,at=256,Pr=512,je=1024,Tt=2048,qt=4096,Et=8192,Xr=16384,Ta=32768,xn=65536,jn=1<<17,Ra=1<<19,qn=1<<20,on=1<<21,zt=Symbol("$state"),Sa=Symbol("legacy props"),Ba=Symbol("");function Gn(e){return e===this.v}function Ua(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function hn(e){return!Ua(e,this.v)}function Ia(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Da(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ma(e){throw new Error("https://svelte.dev/e/effect_orphan")}function $a(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pa(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ka(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ca(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function La(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Er=!1,Va=!1;function Na(){Er=!0}const pn=1,gn=2,Kn=4,Oa=8,Ha=16,Wa=1,Xa=2,Ya=4,za=8,ja=16,qa=1,Ga=2,Ye=Symbol(),Ka="http://www.w3.org/1999/xhtml";let we=null;function Rn(e){we=e}function Vt(e,n=!1,t){var a=we={p:we,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Er&&!n&&(we.l={s:null,u:null,r1:[],r2:wr(!1)}),aa(()=>{a.d=!0})}function Nt(e){const n=we;if(n!==null){const f=n.e;if(f!==null){var t=fe,a=ae;n.e=null;try{for(var i=0;i<f.length;i++){var u=f[i];Lt(u.effect),pt(u.reaction),bn(u.fn)}}finally{Lt(t),pt(a)}}we=n.p,n.m=!0}return{}}function Ar(){return!Er||we!==null&&we.l===null}function Yt(e,n){if(typeof e!="object"||e===null||zt in e)return e;const t=vn(e);if(t!==Ea&&t!==Aa)return e;var a=new Map,i=cn(e),u=Dt(0),f=ae,p=d=>{var s=ae;pt(f);var _;return _=d(),pt(s),_};return i&&a.set("length",Dt(e.length)),new Proxy(e,{defineProperty(d,s,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&ka();var w=a.get(s);return w===void 0?(w=p(()=>Dt(_.value)),a.set(s,w)):F(w,p(()=>Yt(_.value))),!0},deleteProperty(d,s){var _=a.get(s);if(_===void 0)s in d&&a.set(s,p(()=>Dt(Ye)));else{if(i&&typeof s=="string"){var w=a.get("length"),l=Number(s);Number.isInteger(l)&&l<w.v&&F(w,l)}F(_,Ye),Sn(u)}return!0},get(d,s,_){var y;if(s===zt)return e;var w=a.get(s),l=s in d;if(w===void 0&&(!l||(y=ur(d,s))!=null&&y.writable)&&(w=p(()=>Dt(Yt(l?d[s]:Ye))),a.set(s,w)),w!==void 0){var g=r(w);return g===Ye?void 0:g}return Reflect.get(d,s,_)},getOwnPropertyDescriptor(d,s){var _=Reflect.getOwnPropertyDescriptor(d,s);if(_&&"value"in _){var w=a.get(s);w&&(_.value=r(w))}else if(_===void 0){var l=a.get(s),g=l==null?void 0:l.v;if(l!==void 0&&g!==Ye)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return _},has(d,s){var g;if(s===zt)return!0;var _=a.get(s),w=_!==void 0&&_.v!==Ye||Reflect.has(d,s);if(_!==void 0||fe!==null&&(!w||(g=ur(d,s))!=null&&g.writable)){_===void 0&&(_=p(()=>Dt(w?Yt(d[s]):Ye)),a.set(s,_));var l=r(_);if(l===Ye)return!1}return w},set(d,s,_,w){var le;var l=a.get(s),g=s in d;if(i&&s==="length")for(var y=_;y<l.v;y+=1){var L=a.get(y+"");L!==void 0?F(L,Ye):y in d&&(L=p(()=>Dt(Ye)),a.set(y+"",L))}l===void 0?(!g||(le=ur(d,s))!=null&&le.writable)&&(l=p(()=>Dt(void 0)),F(l,p(()=>Yt(_))),a.set(s,l)):(g=l.v!==Ye,F(l,p(()=>Yt(_))));var q=Reflect.getOwnPropertyDescriptor(d,s);if(q!=null&&q.set&&q.set.call(w,_),!g){if(i&&typeof s=="string"){var ce=a.get("length"),de=Number(s);Number.isInteger(de)&&de>=ce.v&&F(ce,de+1)}Sn(u)}return!0},ownKeys(d){r(u);var s=Reflect.ownKeys(d).filter(l=>{var g=a.get(l);return g===void 0||g.v!==Ye});for(var[_,w]of a)w.v!==Ye&&!(_ in d)&&s.push(_);return s},setPrototypeOf(){Ca()}})}function Sn(e,n=1){F(e,e.v+n)}const gr=new Map;function wr(e,n){var t={f:0,v:e,reactions:null,equals:Gn,rv:0,wv:0};return t}function Dt(e,n){const t=wr(e);return lo(t),t}function P(e,n=!1){var a;const t=wr(e);return n||(t.equals=hn),Er&&we!==null&&we.l!==null&&((a=we.l).s??(a.s=[])).push(t),t}function Ze(e,n){return F(e,gt(()=>r(e))),n}function F(e,n,t=!1){ae!==null&&!ht&&Ar()&&(ae.f&(lt|_n))!==0&&!(Oe!=null&&Oe.includes(e))&&La();let a=t?Yt(n):n;return br(e,a)}function br(e,n){if(!e.equals(n)){var t=e.v;Fr?gr.set(e,n):gr.set(e,t),e.v=n,e.wv=ca(),Zn(e,Tt),Ar()&&fe!==null&&(fe.f&je)!==0&&(fe.f&(Ft|sr))===0&&(nt===null?fo([e]):nt.push(e))}return n}function Zn(e,n){var t=e.reactions;if(t!==null)for(var a=Ar(),i=t.length,u=0;u<i;u++){var f=t[u],p=f.f;(p&Tt)===0&&(!a&&f===fe||(ft(f,n),(p&(je|at))!==0&&((p&lt)!==0?Zn(f,qt):qr(f))))}}let Za=!1;var Bn,Qn,Jn,ea;function Qa(){if(Bn===void 0){Bn=window,Qn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,n=Node.prototype,t=Text.prototype;Jn=ur(n,"firstChild").get,ea=ur(n,"nextSibling").get,Tn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Tn(t)&&(t.__t=void 0)}}function wn(e=""){return document.createTextNode(e)}function kr(e){return Jn.call(e)}function Yr(e){return ea.call(e)}function ge(e,n){return kr(e)}function ue(e,n){{var t=kr(e);return t instanceof Comment&&t.data===""?Yr(t):t}}function C(e,n=1,t=!1){let a=e;for(;n--;)a=Yr(a);return a}function Ja(e){e.textContent=""}function mr(e){var n=lt|Tt,t=ae!==null&&(ae.f&lt)!==0?ae:null;return fe===null||t!==null&&(t.f&at)!==0?n|=at:fe.f|=qn,{ctx:we,deps:null,effects:null,equals:Gn,f:n,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??fe}}function z(e){const n=mr(e);return n.equals=hn,n}function ta(e){var n=e.effects;if(n!==null){e.effects=null;for(var t=0;t<n.length;t+=1)Ct(n[t])}}function eo(e){for(var n=e.parent;n!==null;){if((n.f&lt)===0)return n;n=n.parent}return null}function to(e){var n,t=fe;Lt(eo(e));try{ta(e),n=va(e)}finally{Lt(t)}return n}function ra(e){var n=to(e),t=(kt||(e.f&at)!==0)&&e.deps!==null?qt:je;ft(e,t),e.equals(n)||(e.v=n,e.wv=ca())}function na(e){fe===null&&ae===null&&Ma(),ae!==null&&(ae.f&at)!==0&&fe===null&&Da(),Fr&&Ia()}function ro(e,n){var t=n.last;t===null?n.last=n.first=e:(t.next=e,e.prev=t,n.last=e)}function lr(e,n,t,a=!0){var i=fe,u={ctx:we,deps:null,nodes_start:null,nodes_end:null,f:e|Tt,first:null,fn:n,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(t)try{jr(u),u.f|=Ta}catch(d){throw Ct(u),d}else n!==null&&qr(u);var f=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(qn|$r))===0;if(!f&&a&&(i!==null&&ro(u,i),ae!==null&&(ae.f&lt)!==0)){var p=ae;(p.effects??(p.effects=[])).push(u)}return u}function aa(e){const n=lr(Wr,null,!1);return ft(n,je),n.teardown=e,n}function Un(e){na();var n=fe!==null&&(fe.f&Ft)!==0&&we!==null&&!we.m;if(n){var t=we;(t.e??(t.e=[])).push({fn:e,effect:fe,reaction:ae})}else{var a=bn(e);return a}}function no(e){return na(),fr(e)}function ao(e){const n=lr(sr,e,!0);return(t={})=>new Promise(a=>{t.outro?Cr(n,()=>{Ct(n),a(void 0)}):(Ct(n),a(void 0))})}function bn(e){return lr(zn,e,!1)}function Jr(e,n){var t=we,a={effect:null,ran:!1};t.l.r1.push(a),a.effect=fr(()=>{e(),!a.ran&&(a.ran=!0,F(t.l.r2,!0),gt(n))})}function oo(){var e=we;fr(()=>{if(r(e.l.r2)){for(var n of e.l.r1){var t=n.effect;(t.f&je)!==0&&ft(t,qt),cr(t)&&jr(t),n.ran=!1}e.l.r2.v=!1}})}function fr(e){return lr(Wr,e,!0)}function Je(e,n=[],t=mr){const a=n.map(t);return mn(()=>e(...a.map(r)))}function mn(e,n=0){return lr(Wr|_n|n,e,!0)}function yr(e,n=!0){return lr(Wr|Ft,e,!0,n)}function oa(e){var n=e.teardown;if(n!==null){const t=Fr,a=ae;In(!0),pt(null);try{n.call(null)}finally{In(t),pt(a)}}}function ia(e,n=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var a=t.next;(t.f&sr)!==0?t.parent=null:Ct(t,n),t=a}}function io(e){for(var n=e.first;n!==null;){var t=n.next;(n.f&Ft)===0&&Ct(n),n=t}}function Ct(e,n=!0){var t=!1;if((n||(e.f&Ra)!==0)&&e.nodes_start!==null){for(var a=e.nodes_start,i=e.nodes_end;a!==null;){var u=a===i?null:Yr(a);a.remove(),a=u}t=!0}ia(e,n&&!t),Hr(e,0),ft(e,Xr);var f=e.transitions;if(f!==null)for(const d of f)d.stop();oa(e);var p=e.parent;p!==null&&p.first!==null&&ua(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function ua(e){var n=e.parent,t=e.prev,a=e.next;t!==null&&(t.next=a),a!==null&&(a.prev=t),n!==null&&(n.first===e&&(n.first=a),n.last===e&&(n.last=t))}function Cr(e,n){var t=[];yn(e,t,!0),sa(t,()=>{Ct(e),n&&n()})}function sa(e,n){var t=e.length;if(t>0){var a=()=>--t||n();for(var i of e)i.out(a)}else n()}function yn(e,n,t){if((e.f&Et)===0){if(e.f^=Et,e.transitions!==null)for(const f of e.transitions)(f.is_global||t)&&n.push(f);for(var a=e.first;a!==null;){var i=a.next,u=(a.f&xn)!==0||(a.f&Ft)!==0;yn(a,n,u?t:!1),a=i}}}function Lr(e){la(e,!0)}function la(e,n){if((e.f&Et)!==0){e.f^=Et,(e.f&je)===0&&(e.f^=je),cr(e)&&(ft(e,Tt),qr(e));for(var t=e.first;t!==null;){var a=t.next,i=(t.f&xn)!==0||(t.f&Ft)!==0;la(t,i?n:!1),t=a}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||n)&&u.in()}}let Vr=[];function uo(){var e=Vr;Vr=[],an(e)}function En(e){Vr.length===0&&queueMicrotask(uo),Vr.push(e)}let Ir=!1,un=!1,Nr=null,jt=!1,Fr=!1;function In(e){Fr=e}let Dr=[];let ae=null,ht=!1;function pt(e){ae=e}let fe=null;function Lt(e){fe=e}let Oe=null;function so(e){Oe=e}function lo(e){ae!==null&&ae.f&on&&(Oe===null?so([e]):Oe.push(e))}let Ne=null,Qe=0,nt=null;function fo(e){nt=e}let fa=1,Or=0,kt=!1,Pt=null;function ca(){return++fa}function cr(e){var w;var n=e.f;if((n&Tt)!==0)return!0;if((n&qt)!==0){var t=e.deps,a=(n&at)!==0;if(t!==null){var i,u,f=(n&Pr)!==0,p=a&&fe!==null&&!kt,d=t.length;if(f||p){var s=e,_=s.parent;for(i=0;i<d;i++)u=t[i],(f||!((w=u==null?void 0:u.reactions)!=null&&w.includes(s)))&&(u.reactions??(u.reactions=[])).push(s);f&&(s.f^=Pr),p&&_!==null&&(_.f&at)===0&&(s.f^=at)}for(i=0;i<d;i++)if(u=t[i],cr(u)&&ra(u),u.wv>e.wv)return!0}(!a||fe!==null&&!kt)&&ft(e,je)}return!1}function co(e,n){for(var t=n;t!==null;){if((t.f&$r)!==0)try{t.fn(e);return}catch{t.f^=$r}t=t.parent}throw Ir=!1,e}function vo(e){return(e.f&Xr)===0&&(e.parent===null||(e.parent.f&$r)===0)}function zr(e,n,t,a){if(Ir){if(t===null&&(Ir=!1),vo(n))throw e;return}t!==null&&(Ir=!0);{co(e,n);return}}function da(e,n,t=!0){var a=e.reactions;if(a!==null)for(var i=0;i<a.length;i++){var u=a[i];Oe!=null&&Oe.includes(e)||((u.f&lt)!==0?da(u,n,!1):n===u&&(t?ft(u,Tt):(u.f&je)!==0&&ft(u,qt),qr(u)))}}function va(e){var g;var n=Ne,t=Qe,a=nt,i=ae,u=kt,f=Oe,p=we,d=ht,s=e.f;Ne=null,Qe=0,nt=null,kt=(s&at)!==0&&(ht||!jt||ae===null),ae=(s&(Ft|sr))===0?e:null,Oe=null,Rn(e.ctx),ht=!1,Or++,e.f|=on;try{var _=(0,e.fn)(),w=e.deps;if(Ne!==null){var l;if(Hr(e,Qe),w!==null&&Qe>0)for(w.length=Qe+Ne.length,l=0;l<Ne.length;l++)w[Qe+l]=Ne[l];else e.deps=w=Ne;if(!kt)for(l=Qe;l<w.length;l++)((g=w[l]).reactions??(g.reactions=[])).push(e)}else w!==null&&Qe<w.length&&(Hr(e,Qe),w.length=Qe);if(Ar()&&nt!==null&&!ht&&w!==null&&(e.f&(lt|qt|Tt))===0)for(l=0;l<nt.length;l++)da(nt[l],e);return i!==null&&(Or++,nt!==null&&(a===null?a=nt:a.push(...nt))),_}finally{Ne=n,Qe=t,nt=a,ae=i,kt=u,Oe=f,Rn(p),ht=d,e.f^=on}}function _o(e,n){let t=n.reactions;if(t!==null){var a=ma.call(t,e);if(a!==-1){var i=t.length-1;i===0?t=n.reactions=null:(t[a]=t[i],t.pop())}}t===null&&(n.f&lt)!==0&&(Ne===null||!Ne.includes(n))&&(ft(n,qt),(n.f&(at|Pr))===0&&(n.f^=Pr),ta(n),Hr(n,0))}function Hr(e,n){var t=e.deps;if(t!==null)for(var a=n;a<t.length;a++)_o(e,t[a])}function jr(e){var n=e.f;if((n&Xr)===0){ft(e,je);var t=fe,a=we,i=jt;fe=e,jt=!0;try{(n&_n)!==0?io(e):ia(e),oa(e);var u=va(e);e.teardown=typeof u=="function"?u:null,e.wv=fa;var f=e.deps,p;Fn&&Va&&e.f&Tt}catch(d){zr(d,e,t,a||e.ctx)}finally{jt=i,fe=t}}}function xo(){try{$a()}catch(e){if(Nr!==null)zr(e,Nr,null);else throw e}}function ho(){var e=jt;try{var n=0;for(jt=!0;Dr.length>0;){n++>1e3&&xo();var t=Dr,a=t.length;Dr=[];for(var i=0;i<a;i++){var u=go(t[i]);po(u)}}}finally{un=!1,jt=e,Nr=null,gr.clear()}}function po(e){var n=e.length;if(n!==0)for(var t=0;t<n;t++){var a=e[t];if((a.f&(Xr|Et))===0)try{cr(a)&&(jr(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?ua(a):a.fn=null))}catch(i){zr(i,a,null,a.ctx)}}}function qr(e){un||(un=!0,queueMicrotask(ho));for(var n=Nr=e;n.parent!==null;){n=n.parent;var t=n.f;if((t&(sr|Ft))!==0){if((t&je)===0)return;n.f^=je}}Dr.push(n)}function go(e){for(var n=[],t=e;t!==null;){var a=t.f,i=(a&(Ft|sr))!==0,u=i&&(a&je)!==0;if(!u&&(a&Et)===0){if((a&zn)!==0)n.push(t);else if(i)t.f^=je;else{var f=ae;try{ae=t,cr(t)&&jr(t)}catch(s){zr(s,t,null,t.ctx)}finally{ae=f}}var p=t.first;if(p!==null){t=p;continue}}var d=t.parent;for(t=t.next;t===null&&d!==null;)t=d.next,d=d.parent}return n}function r(e){var n=e.f,t=(n&lt)!==0;if(Pt!==null&&Pt.add(e),ae!==null&&!ht){if(!(Oe!=null&&Oe.includes(e))){var a=ae.deps;e.rv<Or&&(e.rv=Or,Ne===null&&a!==null&&a[Qe]===e?Qe++:Ne===null?Ne=[e]:(!kt||!Ne.includes(e))&&Ne.push(e))}}else if(t&&e.deps===null&&e.effects===null){var i=e,u=i.parent;u!==null&&(u.f&at)===0&&(i.f^=at)}return t&&(i=e,cr(i)&&ra(i)),Fr&&gr.has(e)?gr.get(e):e.v}function wo(e){var n=Pt;Pt=new Set;var t=Pt,a;try{if(gt(e),n!==null)for(a of Pt)n.add(a)}finally{Pt=n}return t}function ze(e){var n=wo(()=>gt(e));for(var t of n)if((t.f&jn)!==0)for(const a of t.deps||[])(a.f&lt)===0&&br(a,a.v);else br(t,t.v)}function gt(e){var n=ht;try{return ht=!0,e()}finally{ht=n}}const bo=-7169;function ft(e,n){e.f=e.f&bo|n}function mo(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(zt in e)sn(e);else if(!Array.isArray(e))for(let n in e){const t=e[n];typeof t=="object"&&t&&zt in t&&sn(t)}}}function sn(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let a in e)try{sn(e[a],n)}catch{}const t=vn(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const a=Yn(t);for(let i in a){const u=a[i].get;if(u)try{u.call(e)}catch{}}}}}const yo=["touchstart","touchmove"];function Eo(e){return yo.includes(e)}let Dn=!1;function Ao(){Dn||(Dn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var n;if(!e.defaultPrevented)for(const t of e.target.elements)(n=t.__on_r)==null||n.call(t)})},{capture:!0}))}function _a(e){var n=ae,t=fe;pt(null),Lt(null);try{return e()}finally{pt(n),Lt(t)}}function xa(e,n,t,a=t){e.addEventListener(n,()=>_a(t));const i=e.__on_r;i?e.__on_r=()=>{i(),a(!0)}:e.__on_r=()=>a(!0),Ao()}const ha=new Set,ln=new Set;function Fo(e,n,t,a={}){function i(u){if(a.capture||pr.call(n,u),!u.cancelBubble)return _a(()=>t==null?void 0:t.call(this,u))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?En(()=>{n.addEventListener(e,i,a)}):n.addEventListener(e,i,a),i}function Ve(e,n,t,a,i){var u={capture:a,passive:i},f=Fo(e,n,t,u);(n===document.body||n===window||n===document)&&aa(()=>{n.removeEventListener(e,f,u)})}function Gt(e){for(var n=0;n<e.length;n++)ha.add(e[n]);for(var t of ln)t(e)}function pr(e){var de;var n=this,t=n.ownerDocument,a=e.type,i=((de=e.composedPath)==null?void 0:de.call(e))||[],u=i[0]||e.target,f=0,p=e.__root;if(p){var d=i.indexOf(p);if(d!==-1&&(n===document||n===window)){e.__root=n;return}var s=i.indexOf(n);if(s===-1)return;d<=s&&(f=d)}if(u=i[f]||e.target,u!==n){ya(e,"currentTarget",{configurable:!0,get(){return u||t}});var _=ae,w=fe;pt(null),Lt(null);try{for(var l,g=[];u!==null;){var y=u.assignedSlot||u.parentNode||u.host||null;try{var L=u["__"+a];if(L!=null&&(!u.disabled||e.target===u))if(cn(L)){var[q,...ce]=L;q.apply(u,[e,...ce])}else L.call(u,e)}catch(le){l?g.push(le):l=le}if(e.cancelBubble||y===n||y===null)break;u=y}if(l){for(let le of g)queueMicrotask(()=>{throw le});throw l}}finally{e.__root=n,delete e.currentTarget,pt(_),Lt(w)}}}function To(e){var n=document.createElement("template");return n.innerHTML=e,n.content}function fn(e,n){var t=fe;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=n)}function O(e,n){var t=(n&qa)!==0,a=(n&Ga)!==0,i,u=!e.startsWith("<!>");return()=>{i===void 0&&(i=To(u?e:"<!>"+e),t||(i=kr(i)));var f=a||Qn?document.importNode(i,!0):i.cloneNode(!0);if(t){var p=kr(f),d=f.lastChild;fn(p,d)}else fn(f,f);return f}}function Br(){var e=document.createDocumentFragment(),n=document.createComment(""),t=wn();return e.append(n,t),fn(n,t),e}function N(e,n){e!==null&&e.before(n)}function me(e,n){var t=n==null?"":typeof n=="object"?n+"":n;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function Ro(e,n){return So(e,n)}const ar=new Map;function So(e,{target:n,anchor:t,props:a={},events:i,context:u,intro:f=!0}){Qa();var p=new Set,d=w=>{for(var l=0;l<w.length;l++){var g=w[l];if(!p.has(g)){p.add(g);var y=Eo(g);n.addEventListener(g,pr,{passive:y});var L=ar.get(g);L===void 0?(document.addEventListener(g,pr,{passive:y}),ar.set(g,1)):ar.set(g,L+1)}}};d(dn(ha)),ln.add(d);var s=void 0,_=ao(()=>{var w=t??n.appendChild(wn());return yr(()=>{if(u){Vt({});var l=we;l.c=u}i&&(a.$$events=i),s=e(w,a)||{},u&&Nt()}),()=>{var y;for(var l of p){n.removeEventListener(l,pr);var g=ar.get(l);--g===0?(document.removeEventListener(l,pr),ar.delete(l)):ar.set(l,g)}ln.delete(d),w!==t&&((y=w.parentNode)==null||y.removeChild(w))}});return Bo.set(s,_),s}let Bo=new WeakMap;function te(e,n,[t,a]=[0,0]){var i=e,u=null,f=null,p=Ye,d=t>0?xn:0,s=!1;const _=(l,g=!0)=>{s=!0,w(g,l)},w=(l,g)=>{p!==(p=l)&&(p?(u?Lr(u):g&&(u=yr(()=>g(i))),f&&Cr(f,()=>{f=null})):(f?Lr(f):g&&(f=yr(()=>g(i,[t+1,a]))),u&&Cr(u,()=>{u=null})))};mn(()=>{s=!1,n(_),s||w(null,null)},d)}function mt(e,n){return n}function Uo(e,n,t,a){for(var i=[],u=n.length,f=0;f<u;f++)yn(n[f].e,i,!0);var p=u>0&&i.length===0&&t!==null;if(p){var d=t.parentNode;Ja(d),d.append(t),a.clear(),$t(e,n[0].prev,n[u-1].next)}sa(i,()=>{for(var s=0;s<u;s++){var _=n[s];p||(a.delete(_.k),$t(e,_.prev,_.next)),Ct(_.e,!p)}})}function yt(e,n,t,a,i,u=null){var f=e,p={flags:n,items:new Map,first:null},d=(n&Kn)!==0;if(d){var s=e;f=s.appendChild(wn())}var _=null,w=!1,l=z(()=>{var g=t();return cn(g)?g:g==null?[]:dn(g)});mn(()=>{var g=r(l),y=g.length;w&&y===0||(w=y===0,Io(g,p,f,i,n,a,t),u!==null&&(y===0?_?Lr(_):_=yr(()=>u(f)):_!==null&&Cr(_,()=>{_=null})),r(l))})}function Io(e,n,t,a,i,u,f){var Ot,Rt,Qt,St;var p=(i&Oa)!==0,d=(i&(pn|gn))!==0,s=e.length,_=n.items,w=n.first,l=w,g,y=null,L,q=[],ce=[],de,le,H,W;if(p)for(W=0;W<s;W+=1)de=e[W],le=u(de,W),H=_.get(le),H!==void 0&&((Ot=H.a)==null||Ot.measure(),(L??(L=new Set)).add(H));for(W=0;W<s;W+=1){if(de=e[W],le=u(de,W),H=_.get(le),H===void 0){var J=l?l.e.nodes_start:t;y=Mo(J,n,y,y===null?n.first:y.next,de,le,W,a,i,f),_.set(le,y),q=[],ce=[],l=y.next;continue}if(d&&Do(H,de,W,i),(H.e.f&Et)!==0&&(Lr(H.e),p&&((Rt=H.a)==null||Rt.unfix(),(L??(L=new Set)).delete(H))),H!==l){if(g!==void 0&&g.has(H)){if(q.length<ce.length){var K=ce[0],Z;y=K.prev;var ve=q[0],Ie=q[q.length-1];for(Z=0;Z<q.length;Z+=1)Mn(q[Z],K,t);for(Z=0;Z<ce.length;Z+=1)g.delete(ce[Z]);$t(n,ve.prev,Ie.next),$t(n,y,ve),$t(n,Ie,K),l=K,y=Ie,W-=1,q=[],ce=[]}else g.delete(H),Mn(H,l,t),$t(n,H.prev,H.next),$t(n,H,y===null?n.first:y.next),$t(n,y,H),y=H;continue}for(q=[],ce=[];l!==null&&l.k!==le;)(l.e.f&Et)===0&&(g??(g=new Set)).add(l),ce.push(l),l=l.next;if(l===null)continue;H=l}q.push(H),y=H,l=H.next}if(l!==null||g!==void 0){for(var qe=g===void 0?[]:dn(g);l!==null;)(l.e.f&Et)===0&&qe.push(l),l=l.next;var ct=qe.length;if(ct>0){var Zt=(i&Kn)!==0&&s===0?t:null;if(p){for(W=0;W<ct;W+=1)(Qt=qe[W].a)==null||Qt.measure();for(W=0;W<ct;W+=1)(St=qe[W].a)==null||St.fix()}Uo(n,qe,Zt,_)}}p&&En(()=>{var Ht;if(L!==void 0)for(H of L)(Ht=H.a)==null||Ht.apply()}),fe.first=n.first&&n.first.e,fe.last=y&&y.e}function Do(e,n,t,a){(a&pn)!==0&&br(e.v,n),(a&gn)!==0?br(e.i,t):e.i=t}function Mo(e,n,t,a,i,u,f,p,d,s){var _=(d&pn)!==0,w=(d&Ha)===0,l=_?w?P(i):wr(i):i,g=(d&gn)===0?f:wr(f),y={i:g,v:l,k:u,a:null,e:null,prev:t,next:a};try{return y.e=yr(()=>p(e,l,g,s),Za),y.e.prev=t&&t.e,y.e.next=a&&a.e,t===null?n.first=y:(t.next=y,t.e.next=y.e),a!==null&&(a.prev=y,a.e.prev=y.e),y}finally{}}function Mn(e,n,t){for(var a=e.next?e.next.e.nodes_start:t,i=n?n.e.nodes_start:t,u=e.e.nodes_start;u!==a;){var f=Yr(u);i.before(u),u=f}}function $t(e,n,t){n===null?e.first=t:(n.next=t,n.e.next=t&&t.e),t!==null&&(t.prev=n,t.e.prev=n&&n.e)}function pa(e){var n,t,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(t=pa(e[n]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function $o(){for(var e,n,t=0,a="",i=arguments.length;t<i;t++)(e=arguments[t])&&(n=pa(e))&&(a&&(a+=" "),a+=n);return a}function Po(e){return typeof e=="object"?$o(e):e??""}function ko(e,n,t){var a=e==null?"":""+e;return a===""?null:a}function $n(e,n,t,a,i,u){var f=e.__className;if(f!==t){var p=ko(t);p==null?e.removeAttribute("class"):e.className=p,e.__className=t}return u}const Co=Symbol("is custom element"),Lo=Symbol("is html");function or(e,n,t,a){var i=Vo(e);i[n]!==(i[n]=t)&&(n==="loading"&&(e[Ba]=t),t==null?e.removeAttribute(n):typeof t!="string"&&No(e).includes(n)?e[n]=t:e.setAttribute(n,t))}function Vo(e){return e.__attributes??(e.__attributes={[Co]:e.nodeName.includes("-"),[Lo]:e.namespaceURI===Ka})}var Pn=new Map;function No(e){var n=Pn.get(e.nodeName);if(n)return n;Pn.set(e.nodeName,n=[]);for(var t,a=e,i=Element.prototype;i!==a;){t=Yn(a);for(var u in t)t[u].set&&n.push(u);a=vn(a)}return n}function Mr(e,n,t=n){var a=Ar();xa(e,"input",i=>{var u=i?e.defaultValue:e.value;if(u=en(e)?tn(u):u,t(u),a&&u!==(u=n())){var f=e.selectionStart,p=e.selectionEnd;e.value=u??"",p!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(p,e.value.length))}}),gt(n)==null&&e.value&&t(en(e)?tn(e.value):e.value),fr(()=>{var i=n();en(e)&&i===tn(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ga(e,n,t=n){xa(e,"change",a=>{var i=a?e.defaultChecked:e.checked;t(i)}),gt(n)==null&&t(e.checked),fr(()=>{var a=n();e.checked=!!a})}function en(e){var n=e.type;return n==="number"||n==="range"}function tn(e){return e===""?null:+e}function kn(e,n){return e===n||(e==null?void 0:e[zt])===n}function wa(e={},n,t,a){return bn(()=>{var i,u;return fr(()=>{i=u,u=[],gt(()=>{e!==t(...u)&&(n(e,...u),i&&kn(t(...i),e)&&n(null,...i))})}),()=>{En(()=>{u&&kn(t(...u),e)&&n(null,...u)})}}),e}function Kt(e=!1){const n=we,t=n.l.u;if(!t)return;let a=()=>mo(n.s);if(e){let i=0,u={};const f=mr(()=>{let p=!1;const d=n.s;for(const s in d)d[s]!==u[s]&&(u[s]=d[s],p=!0);return p&&i++,i});a=()=>r(f)}t.b.length&&no(()=>{Cn(n,a),an(t.b)}),Un(()=>{const i=gt(()=>t.m.map(Fa));return()=>{for(const u of i)typeof u=="function"&&u()}}),t.a.length&&Un(()=>{Cn(n,a),an(t.a)})}function Cn(e,n){if(e.l.s)for(const t of e.l.s)r(t);n()}let Ur=!1;function Oo(e){var n=Ur;try{return Ur=!1,[e(),Ur]}finally{Ur=n}}function Ln(e){var n;return((n=e.ctx)==null?void 0:n.d)??!1}function Ue(e,n,t,a){var K;var i=(t&Wa)!==0,u=!Er||(t&Xa)!==0,f=(t&za)!==0,p=(t&ja)!==0,d=!1,s;f?[s,d]=Oo(()=>e[n]):s=e[n];var _=zt in e||Sa in e,w=f&&(((K=ur(e,n))==null?void 0:K.set)??(_&&n in e&&(Z=>e[n]=Z)))||void 0,l=a,g=!0,y=!1,L=()=>(y=!0,g&&(g=!1,p?l=gt(a):l=a),l);s===void 0&&a!==void 0&&(w&&u&&Pa(),s=L(),w&&w(s));var q;if(u)q=()=>{var Z=e[n];return Z===void 0?L():(g=!0,y=!1,Z)};else{var ce=(i?mr:z)(()=>e[n]);ce.f|=jn,q=()=>{var Z=r(ce);return Z!==void 0&&(l=void 0),Z===void 0?l:Z}}if((t&Ya)===0)return q;if(w){var de=e.$$legacy;return function(Z,ve){return arguments.length>0?((!u||!ve||de||d)&&w(ve?q():Z),Z):q()}}var le=!1,H=!1,W=P(s),J=mr(()=>{var Z=q(),ve=r(W);return le?(le=!1,H=!0,ve):(H=!1,W.v=Z)});return f&&r(J),i||(J.equals=hn),function(Z,ve){if(Pt!==null&&(le=H,q(),r(W)),arguments.length>0){const Ie=ve?r(J):u&&f?Yt(Z):Z;if(!J.equals(Ie)){if(le=!0,F(W,Ie),y&&l!==void 0&&(l=Ie),Ln(J))return Z;gt(()=>r(J))}return Z}return Ln(J)?J.v:r(J)}}const Ho="5";var Xn;typeof window<"u"&&((Xn=window.__svelte??(window.__svelte={})).v??(Xn.v=new Set)).add(Ho);Na();const Wo=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,Xo=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,Yo=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,zo=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,jo=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,qo=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,Go=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,Ko=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,ir=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],Vn=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],Zo=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],Qo=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],Jo=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:2,offset:56}],ei=[{count:2,offset:0}],Mt=(e,n,t,a)=>{const i=e.createShader(n);if(!i)throw new Error(`failed to create shader '${a}'`);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(i);throw new Error(`compilation error in shader '${a}':
${u}`)}return i},hr=(e,n,t,a)=>{const i=e.createProgram();if(!i)throw new Error(`failed to create program '${a}'`);if(e.attachShader(i,n),e.attachShader(i,t),e.linkProgram(i),e.detachShader(i,n),e.detachShader(i,t),!e.getProgramParameter(i,e.LINK_STATUS)){const u=e.getProgramInfoLog(i);throw new Error(`link error in program '${a}':
${u}`)}return i};function*ti(e,n){let t=0;for(;!(t>e.length);){const a=t+n;yield e.slice(t,a),t=a}}function*ri(e,n){let t=0;for(;;){const a=t+n;if(a>e.length)break;yield e.slice(t,a),t=a}}function rn(e,n,t,a){const i=n*2,u=e.map(t);return u.length<i?u:ti(u,n).map(f=>[...f]).map(a).toArray()}function At(e){return Math.round(e*255)}let xt=null;const ni=(e,n,t,a)=>{xt={value:e,level:n,draggedID:t,set:a}},ai=()=>{xt=null},oi=(e,n,t)=>{!xt||xt.level!==e||xt.draggedID===n||(xt.set&&(xt.set(xt.value),xt.set=null),t(xt.value))};var ii=(e,n)=>n(!1),ui=O('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),si=(e,n)=>n(!0),li=O('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),fi=O('<input type="checkbox">'),ci=O("<!> <!> <label> </label> <br>",1);function Le(e,n){Vt(n,!1);let t=Ue(n,"expanded",12),a=Ue(n,"id",8),i=Ue(n,"text",8),u=Ue(n,"checked",12,null),f=Ue(n,"level",8),p=Ue(n,"onexpandedchange",8,null),d=Ue(n,"oncheckedchange",8,null);const s=J=>{t(J),p()&&p()()},_=J=>{u(J),d()&&d()()},w=()=>ni(!u(),f(),a(),_),l=()=>oi(f(),a(),_),g=ai;Kt();var y=ci(),L=ue(y);{var q=J=>{var K=ui();K.__click=[ii,s],Je(()=>or(K,"id",u()===null?a():null)),N(J,K)},ce=J=>{var K=li();K.__click=[si,s],Je(()=>or(K,"id",u()===null?a():null)),N(J,K)};te(L,J=>{t()?J(q):J(ce,!1)})}var de=C(L,2);{var le=J=>{var K=fi();or(K,"draggable",!0),K.__change=function(...Z){var ve;(ve=d())==null||ve.apply(this,Z)},Je(()=>or(K,"id",a())),Ve("dragstart",K,w),Ve("dragenter",K,l),Ve("dragend",K,g),ga(K,u),N(J,K)};te(de,J=>{u()!==null&&J(le)})}var H=C(de,2);or(H,"draggable",!0),H.__change=function(...J){var K;(K=d())==null||K.apply(this,J)};var W=ge(H);Je(()=>{or(H,"for",a()),me(W,i())}),Ve("dragstart",H,w),Ve("dragenter",H,l),Ve("dragend",H,g),N(e,y),Nt()}Gt(["click","change"]);var di=(e,n,t)=>n()(t()),vi=O('<button class="px-1 bg-gray-200 hover:bg-gray-100">view image</button> <br>',1),_i=O('<div class="ml-2 w-full"><!> <br> <br> <br> <br></div>');function Nn(e,n){Vt(n,!1);let t=Ue(n,"image",8),a=Ue(n,"view",8,null);Kt();var i=_i(),u=ge(i);{var f=w=>{var l=vi(),g=ue(l);g.__click=[di,a,t],N(w,l)};te(u,w=>{a()&&w(f)})}var p=C(u),d=C(p,2),s=C(d,2),_=C(s,2);Je((w,l,g,y)=>{me(p,` screen: ${t().x??""},${t().y??""}
  ${t().w??""}x${t().h??""} `),me(d,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),me(s,` rgb: ${w??""}, ${l??""}, ${g??""} `),me(_,` alpha: ${y??""} `)},[()=>At(t().r),()=>At(t().g),()=>At(t().b),()=>t().a.toPrecision(4)],z),N(e,i),Nt()}Gt(["click"]);var xi=(e,n,t)=>n()(t()),hi=O('<button class="px-1 bg-gray-200 hover:bg-gray-100">view texture</button> <br>',1),pi=O(" <br>",1),gi=O('<div class="ml-2 w-full"><!> <!> <br> <br> <br> <br></div>');function On(e,n){Vt(n,!1);let t=Ue(n,"vertex",8),a=Ue(n,"view",8,null);Kt();var i=gi(),u=ge(i);{var f=g=>{var y=hi(),L=ue(y);L.__click=[xi,a,t],N(g,y)};te(u,g=>{a()&&g(f)})}var p=C(u,2);{var d=g=>{var y=pi(),L=ue(y);Je(()=>me(L,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `)),N(g,y)};te(p,g=>{t().modelpoint&&g(d)})}var s=C(p),_=C(s,2),w=C(_,2),l=C(w,2);Je((g,y,L,q,ce,de)=>{me(s,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),me(_,` uv: ${g??""}, ${y??""} `),me(w,` rgb: ${L??""}, ${q??""}, ${ce??""} `),me(l,` alpha: ${de??""} `)},[()=>t().u.toPrecision(4),()=>t().v.toPrecision(4),()=>At(t().r),()=>At(t().g),()=>At(t().b),()=>t().a.toPrecision(4)],z),N(e,i),Nt()}Gt(["click"]);var wi=O('<div class="ml-2 w-full"> <br> <br> <br></div>');function Hn(e,n){Vt(n,!1);let t=Ue(n,"vertex",8);Kt();var a=wi(),i=ge(a),u=C(i,2),f=C(u,2);Je((p,d,s,_)=>{me(i,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `),me(u,` rgb: ${p??""}, ${d??""}, ${s??""} `),me(f,` alpha: ${_??""} `)},[()=>At(t().r),()=>At(t().g),()=>At(t().b),()=>t().a.toPrecision(4)],z),N(e,a),Nt()}var bi=O("<div> </div>"),mi=(e,n,t)=>{const a=n().textureId,i=t().textures[a];t(t().selectedTextureId=a.toString(),!0),t(t().selectedTexture=i,!0),t(t().textureBoundX=0,!0),t(t().textureBoundY=0,!0),t(t().textureBoundW=i.width,!0),t(t().textureBoundH=i.height,!0),t(t().textureViewX=0,!0),t(t().textureViewY=0,!0),t(t().textureViewScale=100,!0),t(t().viewIsWholeAtlas=!0,!0),t().redraw()},yi=O('<button class="px-1 bg-gray-200 hover:bg-gray-100"> </button> <br>',1),Ei=O("<!> <!>",1),Ai=O('<div class="ml-1"></div>'),Fi=O("<!> <!>",1),Ti=O("<!> <!>",1),Ri=O('<div class="ml-1"><!></div>'),Si=O("<!> <!>",1),Bi=O("<!> <!>",1),Ui=O('<div class="ml-1"></div>'),Ii=O("<!> <!>",1),Di=O("<!> <!>",1),Mi=O('<div class="ml-1"><!></div>'),$i=O("<!> <!>",1),Pi=O("<!> <!>",1),ki=O('<div class="ml-1"></div>'),Ci=O("<!> <!>",1),Li=O("<!> <!>",1),Vi=O('<div class="ml-1"><!></div>'),Ni=O("<!> <!>",1),Oi=O('<div class="ml-1"><!> <!></div>'),Hi=O(" <br> <!> <!>",1),Wi=O('<div class="ml-3 text-sm"><!> <!> <!> <!> <!></div>');function Xi(e,n){Vt(n,!1);let t=Ue(n,"entity",12),a=Ue(n,"menuData",12),i=Ue(n,"level",8);const u=6,f=100;let p=P(!1),d=P(!1),s=P(!1);function _(I){return"images"in I}function w(I){return"vertices"in I}function l(I){return"vertices"in I}const g=(I,ee)=>{const X=I[0];let xe=X.x,et=X.x,$e=X.y,De=X.y;for(const oe of I)oe.x<xe&&(xe=oe.x),oe.x>et&&(et=oe.x),oe.y<$e&&($e=oe.y),oe.y>De&&(De=oe.y);return{x:xe,y:$e,w:et-xe,h:De-$e,ax:X.ax,ay:X.ay,aw:X.aw,ah:X.ah,r:X.r,g:X.g,b:X.b,a:X.a,expanded:!1,index:ee}},y=(I,ee)=>{const X=ee*f,xe=X*u;return{images:I,desc:`${X}-${X+I.length-1}`,expanded:!1,vertexRangeStart:xe,vertexRangeEnd:xe+I.length*u}},L=(I,ee)=>({modelpoint:{...I},expanded:!1,index:ee,...I}),q=(I,ee)=>({modelpoint:null,expanded:!1,index:ee,...I}),ce=(I,ee)=>{const X=ee*f;return{vertices:I,desc:`${X}-${X+I.length-1}`,expanded:!1}},de=(I,ee)=>({modelpoint:{...I},expanded:!1,index:ee,...I}),le=(I,ee)=>{const X=ee*f;return{vertices:I,desc:`${X}-${X+I.length-1}`,expanded:!1}},H=(I,ee)=>({vertices:rn(I.vertices,f,de,le),vertexCount:I.vertices.length,expanded:!1,verticesExpanded:!1,index:ee});let W=P(null),J=P(0),K=P(null),Z=P(0),ve=P(null),Ie=P(0);if(t().type==="batch2d"||t().type==="minimap2d"||t().type==="billboard"){const I=[...ri(t().vertices,u)];F(J,I.length),F(W,rn(I,f,g,y))}else if(t().vertices){const I=t().type!=="renderparticles"?L:q;F(Z,t().vertices.length),F(K,rn(t().vertices,f,I,ce))}t().models&&(F(Ie,t().models.length),F(ve,t().models.map(H)));const qe=I=>{const ee=t().textureId,X=a().textures[ee];a(a().selectedTextureId=t().uuid,!0),a(a().selectedTexture=X,!0),a(a().textureBoundX=I.ax,!0),a(a().textureBoundY=I.ay,!0),a(a().textureBoundW=I.aw,!0),a(a().textureBoundH=I.ah,!0),a(a().textureViewX=0,!0),a(a().textureViewY=0,!0),a(a().textureViewScale=100,!0),a(a().viewIsWholeAtlas=!1,!0),a().redraw()};Kt();var ct=Wi(),Zt=ge(ct);{var Ot=I=>{var ee=bi(),X=ge(ee);Je(()=>me(X,`animated: ${t().animated??""}`)),N(I,ee)};te(Zt,I=>{typeof t().animated=="boolean"&&I(Ot)})}var Rt=C(Zt,2);{var Qt=I=>{var ee=yi(),X=ue(ee);X.__click=[mi,t,a];var xe=ge(X);Je(()=>me(xe,`texture: #${t().textureId??""}`)),N(I,ee)};te(Rt,I=>{typeof t().textureId=="number"&&I(Qt)})}var St=C(Rt,2);{var Ht=I=>{var ee=Si(),X=ue(ee);const xe=z(()=>`${t().uuid}-images2d`),et=z(()=>`2D images (${r(J)})`);Le(X,{get id(){return r(xe)},get text(){return r(et)},get level(){return i()},get expanded(){return r(p)},set expanded(oe){F(p,oe)},$$legacy:!0});var $e=C(X,2);{var De=oe=>{var Ee=Br(),He=ue(Ee);yt(He,1,()=>r(W),mt,(wt,j,he)=>{var dt=Ri(),ot=ge(dt);{var Ge=_e=>{var be=Fi(),Ae=ue(be),Xe=()=>r(j).images.every(re=>t().enabledVerticesList[re.index*u]),Fe=re=>{for(let se=r(j).vertexRangeStart;se<r(j).vertexRangeEnd;se+=1)t(t().enabledVerticesList[se]=re,!0)};const Pe=z(()=>`${t().uuid}-images-${r(j).desc}`),Te=z(()=>`[Images ${r(j).desc}]`),ke=z(()=>i()+1);Le(Ae,{get checked(){return Xe()},set checked(re){Fe(re)},get oncheckedchange(){return a().redraw},get id(){return r(Pe)},get text(){return r(Te)},get level(){return r(ke)},get expanded(){return r(j).expanded},set expanded(re){r(j).expanded=re,ze(()=>r(W))},$$legacy:!0});var Q=C(Ae,2);{var x=re=>{var se=Ai();yt(se,5,()=>r(j).images,mt,(vt,Ce,bt)=>{var it=Ei(),pe=ue(it),tr=()=>t().enabledVerticesList[r(Ce).index*u],ut=Se=>{for(let tt=0;tt<u;tt+=1)t(t().enabledVerticesList[r(Ce).index*u+tt]=Se,!0)};const Bt=z(()=>`${t().uuid}-images-${r(j).desc}-${bt}`),Me=z(()=>i()+2);Le(pe,{get checked(){return tr()},set checked(Se){ut(Se)},get oncheckedchange(){return a().redraw},get id(){return r(Bt)},text:`Image ${he*f+bt}`,get level(){return r(Me)},get expanded(){return r(Ce).expanded},set expanded(Se){r(Ce).expanded=Se,ze(()=>(r(W),r(j).images))},$$legacy:!0});var rr=C(pe,2);{var _t=Se=>{Nn(Se,{get image(){return r(Ce)},view:qe})};te(rr,Se=>{r(Ce).expanded&&Se(_t)})}N(vt,it)}),N(re,se)};te(Q,re=>{r(j).expanded&&re(x)})}N(_e,be)},We=_e=>{var be=Ti(),Ae=ue(be),Xe=()=>t().enabledVerticesList[r(j).index*u],Fe=x=>{for(let re=0;re<u;re+=1)t(t().enabledVerticesList[r(j).index*u+re]=x,!0)};const Pe=z(()=>`${t().uuid}-images-${he}`),Te=z(()=>i()+1);Le(Ae,{get checked(){return Xe()},set checked(x){Fe(x)},get oncheckedchange(){return a().redraw},get id(){return r(Pe)},text:`Image ${he}`,get level(){return r(Te)},get expanded(){return r(j).expanded},set expanded(x){r(j).expanded=x,ze(()=>r(W))},$$legacy:!0});var ke=C(Ae,2);{var Q=x=>{Nn(x,{get image(){return r(j)},view:qe})};te(ke,x=>{r(j).expanded&&x(Q)})}N(_e,be)};te(ot,_e=>{_(r(j))?_e(Ge):_e(We,!1)})}N(wt,dt)}),N(oe,Ee)};te($e,oe=>{r(p)&&oe(De)})}N(I,ee)};te(St,I=>{r(W)&&r(J)&&I(Ht)})}var Tr=C(St,2);{var Jt=I=>{var ee=$i(),X=ue(ee);const xe=z(()=>`${t().uuid}-vertices3d`),et=z(()=>`3D vertices (${r(Z)})`);Le(X,{get id(){return r(xe)},get text(){return r(et)},get level(){return i()},get expanded(){return r(d)},set expanded(oe){F(d,oe)},$$legacy:!0});var $e=C(X,2);{var De=oe=>{var Ee=Br(),He=ue(Ee);yt(He,1,()=>r(K),mt,(wt,j,he)=>{var dt=Mi(),ot=ge(dt);{var Ge=_e=>{var be=Ii(),Ae=ue(be);const Xe=z(()=>`${t().uuid}-vertices-${r(j).desc}`),Fe=z(()=>`[Vertices ${r(j).desc}]`),Pe=z(()=>i()+1);Le(Ae,{get id(){return r(Xe)},get text(){return r(Fe)},get level(){return r(Pe)},get expanded(){return r(j).expanded},set expanded(Q){r(j).expanded=Q,ze(()=>r(K))},$$legacy:!0});var Te=C(Ae,2);{var ke=Q=>{var x=Ui();yt(x,5,()=>r(j).vertices,mt,(re,se,vt)=>{var Ce=Bi(),bt=ue(Ce);const it=z(()=>`${t().uuid}-vertices-${r(j).desc}-${r(se).index}`),pe=z(()=>`Vertex ${r(se).index}`),tr=z(()=>i()+2);Le(bt,{get id(){return r(it)},get text(){return r(pe)},get level(){return r(tr)},get expanded(){return r(se).expanded},set expanded(Me){r(se).expanded=Me,ze(()=>(r(K),r(j).vertices))},$$legacy:!0});var ut=C(bt,2);{var Bt=Me=>{On(Me,{get vertex(){return r(se)},view:qe})};te(ut,Me=>{r(se).expanded&&Me(Bt)})}N(re,Ce)}),N(Q,x)};te(Te,Q=>{r(j).expanded&&Q(ke)})}N(_e,be)},We=_e=>{var be=Di(),Ae=ue(be);const Xe=z(()=>`${t().uuid}-vertices-${r(j).index}`),Fe=z(()=>`Vertex ${r(j).index}`),Pe=z(()=>i()+1);Le(Ae,{get id(){return r(Xe)},get text(){return r(Fe)},get level(){return r(Pe)},get expanded(){return r(j).expanded},set expanded(Q){r(j).expanded=Q,ze(()=>r(K))},$$legacy:!0});var Te=C(Ae,2);{var ke=Q=>{On(Q,{get vertex(){return r(j)},view:qe})};te(Te,Q=>{r(j).expanded&&Q(ke)})}N(_e,be)};te(ot,_e=>{w(r(j))?_e(Ge):_e(We,!1)})}N(wt,dt)}),N(oe,Ee)};te($e,oe=>{r(d)&&oe(De)})}N(I,ee)};te(Tr,I=>{r(K)&&r(Z)&&I(Jt)})}var er=C(Tr,2);{var Rr=I=>{var ee=Hi(),X=ue(ee),xe=C(X,3);const et=z(()=>`${t().uuid}-models`),$e=z(()=>`Models (${r(Ie)})`);Le(xe,{get id(){return r(et)},get text(){return r($e)},get level(){return i()},get expanded(){return r(s)},set expanded(Ee){F(s,Ee)},$$legacy:!0});var De=C(xe,2);{var oe=Ee=>{var He=Br(),wt=ue(He);yt(wt,1,()=>r(ve),mt,(j,he,dt)=>{var ot=Oi(),Ge=ge(ot);const We=z(()=>`${t().uuid}-models`),_e=z(()=>`Model ${r(he).index}`),be=z(()=>i()+1);Le(Ge,{get id(){return r(We)},get text(){return r(_e)},get level(){return r(be)},get expanded(){return r(he).expanded},set expanded(Fe){r(he).expanded=Fe,ze(()=>r(ve))},$$legacy:!0});var Ae=C(Ge,2);{var Xe=Fe=>{var Pe=Ni(),Te=ue(Pe);const ke=z(()=>`${t().uuid}-vertices`),Q=z(()=>`Vertices (${r(he).vertexCount})`),x=z(()=>i()+2);Le(Te,{get id(){return r(ke)},get text(){return r(Q)},get level(){return r(x)},get expanded(){return r(he).verticesExpanded},set expanded(vt){r(he).verticesExpanded=vt,ze(()=>r(ve))},$$legacy:!0});var re=C(Te,2);{var se=vt=>{var Ce=Br(),bt=ue(Ce);yt(bt,1,()=>r(he).vertices,mt,(it,pe,tr)=>{var ut=Vi(),Bt=ge(ut);{var Me=_t=>{var Se=Ci(),tt=ue(Se);const dr=z(()=>`${t().uuid}-vertices-${r(pe).desc}`),vr=z(()=>`[Vertices ${r(pe).desc}]`),_r=z(()=>i()+3);Le(tt,{get id(){return r(dr)},get text(){return r(vr)},get level(){return r(_r)},get expanded(){return r(pe).expanded},set expanded(c){r(pe).expanded=c,ze(()=>(r(ve),r(he).vertices))},$$legacy:!0});var h=C(tt,2);{var o=c=>{var v=ki();yt(v,5,()=>r(pe).vertices,mt,(G,m,T)=>{var U=Pi(),S=ue(U);const k=z(()=>`${t().uuid}-vertices-${r(pe).desc}-${r(m).index}`),M=z(()=>`Vertex ${r(m).index}`),Y=z(()=>i()+4);Le(S,{get id(){return r(k)},get text(){return r(M)},get level(){return r(Y)},get expanded(){return r(m).expanded},set expanded(b){r(m).expanded=b,ze(()=>(r(ve),r(he).vertices,r(pe).vertices))},$$legacy:!0});var R=C(S,2);{var D=b=>{Hn(b,{get vertex(){return r(m)}})};te(R,b=>{r(m).expanded&&b(D)})}N(G,U)}),N(c,v)};te(h,c=>{r(pe).expanded&&c(o)})}N(_t,Se)},rr=_t=>{var Se=Li(),tt=ue(Se);const dr=z(()=>`${t().uuid}-${r(he).index}-vertex-${r(pe).index}`),vr=z(()=>`Vertex ${r(pe).index}`),_r=z(()=>i()+3);Le(tt,{get id(){return r(dr)},get text(){return r(vr)},get level(){return r(_r)},get expanded(){return r(pe).expanded},set expanded(c){r(pe).expanded=c,ze(()=>(r(ve),r(he).vertices))},$$legacy:!0});var h=C(tt,2);{var o=c=>{Hn(c,{get vertex(){return r(pe)}})};te(h,c=>{r(pe).expanded&&c(o)})}N(_t,Se)};te(Bt,_t=>{l(r(pe))?_t(Me):_t(rr,!1)})}N(it,ut)}),N(vt,Ce)};te(re,vt=>{r(he).verticesExpanded&&vt(se)})}N(Fe,Pe)};te(Ae,Fe=>{r(he).expanded&&Fe(Xe)})}N(j,ot)}),N(Ee,He)};te(De,Ee=>{r(s)&&Ee(oe)})}Je(()=>me(X,`screen: ${t().targetx??""},${t().targety??""}
    ${t().targetw??""}x${t().targeth??""} `)),N(I,ee)};te(er,I=>{r(ve)&&r(Ie)&&I(Rr)})}N(e,ct),Nt()}Gt(["click"]);var Yi=(e,n,t,a)=>n(t(),a()),zi=O('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),ji=O("<div><!> <!></div>"),qi=O('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function Gi(e,n){Vt(n,!1);let t=Ue(n,"data",12);const a=(d,s)=>{t().selectedTexture===s?t(t().selectedTexture=null,!0):(t(t().selectedTextureId=d,!0),t(t().selectedTexture=s,!0),t(t().textureBoundX=0,!0),t(t().textureBoundY=0,!0),t(t().textureBoundW=s.width,!0),t(t().textureBoundH=s.height,!0),t(t().textureViewX=0,!0),t(t().textureViewY=0,!0),t(t().textureViewScale=100,!0),t(t().viewIsWholeAtlas=!0,!0)),t().redraw()},i=1;Kt();var u=qi(),f=C(ue(u),2);yt(f,1,()=>Object.entries(t().textures),mt,(d,s)=>{let _=()=>r(s)[0],w=()=>r(s)[1];var l=zi(),g=ge(l);g.__click=[Yi,a,_,w];var y=ge(g);Je(()=>{$n(g,1,Po(t().selectedTexture===w()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),me(y,`#${_()??""}`)}),N(d,l)});var p=C(f,6);yt(p,1,()=>t().entities,mt,(d,s,_)=>{var w=ji();$n(w,1,`select-none m-0 border-none w-full ${_&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var l=ge(w);Le(l,{id:`menu${_}`,get text(){return t().entities[_].type},get oncheckedchange(){return t().redraw},level:i,get expanded(){return t().entities[_].expanded},set expanded(L){t().entities[_].expanded=L,ze(()=>t().entities)},get checked(){return t().entities[_].enabled},set checked(L){t().entities[_].enabled=L,ze(()=>t().entities)},$$legacy:!0});var g=C(l,2);{var y=L=>{Xi(L,{level:i+1,get entity(){return t().entities[_]},set entity(q){t().entities[_]=q,ze(()=>t().entities)},get menuData(){return t()},set menuData(q){t(q)},$$legacy:!0})};te(g,L=>{t().entities[_].expanded&&L(y)})}N(d,w)}),N(e,u),Nt()}Gt(["click"]);const Be=[];for(let e=0;e<256;++e)Be.push((e+256).toString(16).slice(1));function Ki(e,n=0){return(Be[e[n+0]]+Be[e[n+1]]+Be[e[n+2]]+Be[e[n+3]]+"-"+Be[e[n+4]]+Be[e[n+5]]+"-"+Be[e[n+6]]+Be[e[n+7]]+"-"+Be[e[n+8]]+Be[e[n+9]]+"-"+Be[e[n+10]]+Be[e[n+11]]+Be[e[n+12]]+Be[e[n+13]]+Be[e[n+14]]+Be[e[n+15]]).toLowerCase()}let nn;const Zi=new Uint8Array(16);function Qi(){if(!nn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");nn=crypto.getRandomValues.bind(crypto)}return nn(Zi)}const Ji=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wn={randomUUID:Ji};function Xt(e,n,t){var i;if(Wn.randomUUID&&!e)return Wn.randomUUID();e=e||{};const a=e.random??((i=e.rng)==null?void 0:i.call(e))??Qi();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Ki(a)}const eu=(e,n)=>r(n).select();var tu=(e,n)=>{e.key==="Escape"&&(e.preventDefault(),n(null))},ru=(e,n)=>n(null),nu=O('<div class="absolute backdrop-blur-sm h-full w-full left-0 top-0 m-0 p-12 overflow-none focus-visible:outline-none"><div class="w-full h-full p-4 bg-slate-100 rounded-lg flex flex-col"><textarea class="w-full flex-grow border border-black resize-none rounded-md"></textarea> <button class="w-full h-fit rounded-sm p-2 mt-1 text-xl font-bold bg-blue-500 opacity-90 hover:opacity-100">Select all</button></div></div> <input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 top-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">',1);function au(e,n){let t=Ue(n,"text",12),a=P();var i=nu(),u=ue(i);u.__keydown=[tu,t];var f=ge(u),p=ge(f);wa(p,_=>F(a,_),()=>r(a));var d=C(p,2);d.__click=[eu,a];var s=C(u,2);s.__click=[ru,t],Mr(p,t),N(e,i)}Gt(["keydown","click"]);const ou=(e,n,t,a,i,u,f,p)=>{const d=r(n).selectedTexture;if(!d){F(t,"error: no texture selected");return}if(r(a)===null||r(a)<0||r(a)>=r(n).textureBoundH){F(t,"error: selected row is out-of-bounds");return}const s=r(i)?r(u):0,_=r(n).textureBoundX+s,w=r(a)+r(n).textureBoundY,l=r(i)?r(f)+1-r(u):r(n).textureBoundW;if(s<0||s+l>r(n).textureBoundW){F(t,"error: selection is out-of-bounds");return}const g=(w*d.width+_)*4,y=d.data.slice(g,g+l*4),L=p(y);F(t,`'${L}'`)};var iu=(e,n,t)=>F(n,t),uu=(e,n,t)=>F(n,t),su=(e,n)=>F(n,!1),lu=O('<div class="overflow-auto absolute w-60 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),fu=(e,n)=>F(n,!0),cu=O('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),du=(e,n,t,a,i)=>{Ze(n,r(n).selectedTexture=null),t(r(a),r(i))},vu=O('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),_u=O('<input type="checkbox"> from x: <input class="w-14 border border-black" type="number"> to <input class="w-14 border border-black" type="number">',1),xu=O('RGBA data for all rows: <input class="w-4 h-4 opacity-75 hover:opacity-100" type="image" src="plugin://app/images/clipboard-solid.svg" alt="copy">',1),hu=O('<!> <div class="absolute top-1 w-full h-fit grid place-items-center pointer-events-none"><div class="w-fit h-full rounded-lg bg-gray-100 pointer-events-auto px-2 py-1"><div class="w-16 h-full table-cell"> <br> </div> <div class="w-28 h-full table-cell px-1 mx-1"> <br> </div> <div class="w-fit h-full table-cell px-1">RGBA data for row: <input class="w-18 border border-black" type="number"> <input class="w-4 h-4 opacity-75 enabled:hover:opacity-100" type="image" src="plugin://app/images/clipboard-solid.svg" alt="copy"> <br> <!></div></div></div>',1),pu=O('<canvas class="absolute right-0"></canvas> <!> <!> <!>',1);function gu(e,n){Vt(n,!1);const t=P();let a=P({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",textureBoundX:0,textureBoundY:0,textureBoundW:1,textureBoundH:1,textureViewX:0,textureViewY:0,textureViewScale:100,viewIsWholeAtlas:!1,redraw:()=>se(r(Q),r(x))});const i=h=>{const o=St.get(h);return o?parseInt(o):0},u=0;let f=P(null),p=P(null),d=P(null),s=P(null),_=P(null),w=P(null),l=P(null),g=P(null),y=P(null),L=P(null),q=P(null),ce=P(null),de=P(null),le=P(null),H=P(null),W=P(null),J=P(null),K=P(null),Z=P(null),ve=P(null),Ie=P(null),qe=P(null),ct=null;const Zt=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),Ot=10,Rt=1e3,Qt=10,St=new URLSearchParams(window.location.search),Ht=St.get("n"),Tr=Ht?Math.max(parseInt(Ht),1):1,Jt=i("w"),er=i("h"),Rr=i("gx"),I=i("gy"),ee=i("gw"),X=i("gh");let xe=0,et=P(0),$e=P(),De=null,oe=null,Ee=0,He=0,wt,j,he=P(!1),dt=P(!1),ot=P(null),Ge=P(null),We=P(null),_e=P(null),be=P(!1),Ae=P(!1),Xe=P(!1),Fe=P(!1),Pe=P(!1),Te=P(null),ke=P(!1),Q=P(null),x=P(null);const re=(h,o,c,v)=>{h.bindBuffer(h.ARRAY_BUFFER,o.vbo);for(let m=0;m<r(et);m+=1){const T=o.attribs[m];if(!T){h.disableVertexAttribArray(m);continue}h.enableVertexAttribArray(m),h.vertexAttribPointer(m,T.count,h.FLOAT,!1,o.step,T.offset)}if(!v){h.drawArrays(h.TRIANGLES,0,c);return}let G=null;for(let m=0;m<c;m+=1){const T=v[m];G===null?T&&(G=m):T||(h.drawArrays(h.TRIANGLES,G,m-G),G=null)}G!==null&&h.drawArrays(h.TRIANGLES,G,c-G)},se=(h,o)=>{if(o.viewport(0,0,h.width,h.height),o.scissor(0,0,h.width,h.height),o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),!r(he)){o.viewport(0,0,h.width,h.height);const c=()=>{o.clearColor(.525,.968,.495,1),o.clear(o.COLOR_BUFFER_BIT)},v=()=>{o.clearColor(.2,.2,.2,1),o.clear(o.COLOR_BUFFER_BIT)},G=Math.min(xe/Tr,1),m=Math.floor(h.width*.65)&-2,T=70,U=8,S=U*2,k=m*G;if(c(),h.width<=S||h.height<=S)return;o.scissor(U,U,h.width-S,h.height-S),v(),o.scissor(h.width/2-(m/2+U),h.height/2-(T/2+U),m+S,T+S),c(),o.scissor(h.width/2-m/2+k,h.height/2-T/2,m-k,T),v();return}if(r(a).selectedTexture){r(a).textureViewScale<Ot&&Ze(a,r(a).textureViewScale=Ot),r(a).textureViewScale>Rt&&Ze(a,r(a).textureViewScale=Rt);const c=r(a).textureViewScale/100,v=c*2,G=r(a).textureBoundX,m=r(a).textureBoundX+r(a).textureBoundW,T=r(a).textureBoundY,U=r(a).textureBoundY+r(a).textureBoundH;let S=r(a).textureViewX+h.width/v,k=r(a).textureViewY+h.height/v,M=!1;if(S<G&&(S=G,M=!0),k<T&&(k=T,M=!0),S>m&&(S=m,M=!0),k>U&&(k=U,M=!0),r(a).textureBoundW*c<=h.width&&(S=G+r(a).textureBoundW/2,M=!0),r(a).textureBoundH*c<=h.height&&(k=T+r(a).textureBoundH/2,M=!0),M&&(Ze(a,r(a).textureViewX=S-h.width/v),Ze(a,r(a).textureViewY=k-h.height/v)),o.useProgram(r(Ie)),o.viewport(0,0,h.width,h.height),o.uniform2fv(r(qe),[h.width,h.height]),!ct){const Re=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Re),o.bufferData(o.ARRAY_BUFFER,Zt,o.STATIC_DRAW),ct={vbo:Re,step:8,attribs:ei}}re(o,ct,6);const Y=r(a).selectedTexture,R=(r(a).textureBoundX-r(a).textureViewX)*c,D=R+r(a).textureBoundW*c,b=(r(a).textureBoundY-r(a).textureViewY)*c,B=b+r(a).textureBoundH*c,$=G/Y.width,E=m/Y.width,A=T/Y.height,V=U/Y.height;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(r(f)),o.uniform4fv(r(p),[Y.width,Y.height,h.width,h.height]),o.bindTexture(o.TEXTURE_2D,Y.texture),o.uniform1i(r(d),u);const ne=o.createBuffer();if(o.bindBuffer(o.ARRAY_BUFFER,ne),o.bufferData(o.ARRAY_BUFFER,new Float32Array([R,b,$,A,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,D,b,E,A,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,R,B,$,V,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,D,b,E,A,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,D,B,E,V,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,R,B,$,V,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0]),o.STATIC_DRAW),re(o,{vbo:ne,step:60,attribs:ir},6),o.deleteBuffer(ne),r(ke)){const Re=r(Ge)??0,ye=R+(r(be)&&r(We)?r(We)*c:0),Ke=r(be)&&r(_e)?R+(r(_e)+1)*c:D,Ut=b+Re*c,nr=Math.max(b+(Re+1)*c,Ut+1),Wt=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Wt),o.bufferData(o.ARRAY_BUFFER,new Float32Array([ye,Ut,0,0,0,0,1,1,1,.15,.15,.4,1,0,0,Ke,Ut,1,0,0,0,1,1,1,.15,.15,.4,1,0,0,ye,nr,0,1,0,0,1,1,1,.15,.15,.4,1,0,0,Ke,Ut,1,0,0,0,1,1,1,.15,.15,.4,1,0,0,Ke,nr,1,1,0,0,1,1,1,.15,.15,.4,1,0,0,ye,nr,0,1,0,0,1,1,1,.15,.15,.4,1,0,0]),o.STATIC_DRAW),re(o,{vbo:Wt,step:60,attribs:ir},6),o.deleteBuffer(Wt)}return}oe&&(o.bindFramebuffer(o.DRAW_FRAMEBUFFER,oe),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)),o.disable(o.SCISSOR_TEST);for(let c of r(a).entities)if(c.enabled){if(c.type==="batch2d"){o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST);const v=r(a).textures[c.textureId];o.useProgram(r(f)),o.viewport(0,0,Jt,er),o.uniform4fv(r(p),[v.width,v.height,c.targetWidth,c.targetHeight]),o.bindTexture(o.TEXTURE_2D,v.texture),o.uniform1i(r(d),u),re(o,c.buffer,c.vertexCount,c.enabledVerticesList)}if(c.type==="render3d"){o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.DEPTH_TEST);const v=r(a).textures[c.textureId];o.useProgram(c.animated?r(L):r(s)),o.viewport(Rr,I,ee,X),o.uniformMatrix4fv(c.animated?r(q):r(_),!1,c.modelMatrix),o.uniformMatrix4fv(c.animated?r(ce):r(w),!1,wt),o.uniformMatrix4fv(c.animated?r(de):r(l),!1,j),o.uniform2fv(c.animated?r(le):r(g),[v.width,v.height]),o.bindTexture(o.TEXTURE_2D,v.texture),o.uniform1i(c.animated?r(H):r(y),u),re(o,c.buffer,c.vertexCount)}if(c.type==="renderparticles"){o.blendFuncSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.DEPTH_TEST);const v=r(a).textures[c.textureId];o.useProgram(r(W)),o.viewport(Rr,I,ee,X),o.uniformMatrix4fv(r(J),!1,wt),o.uniformMatrix4fv(r(K),!1,j),o.uniform2fv(r(ve),[v.width,v.height]),o.bindTexture(o.TEXTURE_2D,v.texture),o.uniform1i(r(Z),u),re(o,c.buffer,c.vertexCount)}if(c.type==="icon"||c.type==="bigicon"){const v=c.texSize;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(r(f)),o.viewport(0,0,Jt,er),o.bindTexture(o.TEXTURE_2D,c.texture),o.uniform1i(r(d),u),o.uniform4fv(r(p),[v,v,c.targetWidth,c.targetHeight]),re(o,c.buffer,6)}if(c.type==="minimap2d"){!De||!oe?(De=o.createTexture(),o.bindTexture(o.TEXTURE_2D,De),o.texStorage2D(o.TEXTURE_2D,1,o.RGBA8,Ee,He),oe=o.createFramebuffer(),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,oe),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,De,0)):o.bindFramebuffer(o.DRAW_FRAMEBUFFER,oe),o.viewport(0,0,Ee,He),o.disable(o.DEPTH_TEST);const v=r(a).textures[c.textureId];o.useProgram(r(f)),o.uniform4fv(r(p),[v.width,v.height,Ee,He]),o.bindTexture(o.TEXTURE_2D,v.texture),o.uniform1i(r(d),u),re(o,c.buffer,c.vertexCount,c.enabledVerticesList),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}if(c.type==="minimap"){if(De===null)continue;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(r(f)),o.viewport(0,0,Jt,er),o.uniform4fv(r(p),[Ee,He,c.targetWidth,c.targetHeight]),o.bindTexture(o.TEXTURE_2D,De),o.uniform1i(r(d),u),re(o,c.buffer,6)}}},vt=(h,o,c)=>{const v=new DataView(c),G=v.getUint32(0,!0);switch(G){case 0:{F(he,!0),se(h,o);break}case 1:{const m=v.getUint32(4,!0),T=v.getUint32(8,!0),U=v.getUint32(12,!0),S=o.createTexture(),k=new Uint8Array(c,16,T*U*4);o.bindTexture(o.TEXTURE_2D,S),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,T,U,0,o.RGBA,o.UNSIGNED_BYTE,k),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),Ze(a,r(a).textures[m]={texture:S,width:T,height:U,data:k});break}case 2:case 3:{const m=G===3,T=m?104:40,U=m?120:56,S=v.getUint32(4,!0),k=v.getUint32(8,!0),M=new Float32Array(16);M.set(new Float32Array(c,16,16));const Y=new DataView(c,80,S*T),R=new Array(S),D=new ArrayBuffer(S*U),b=new DataView(D);for(let $=0;$<S;$+=1){const E=T*$,A=U*$;let V=null;m&&(V=new Float32Array(16),V.set(new Float32Array(c,80+T*$+40,16)));const ne={x:Y.getInt16(E,!0),y:Y.getInt16(E+2,!0),z:Y.getInt16(E+4,!0),u:Y.getFloat32(E+8,!0),v:Y.getFloat32(E+12,!0),ax:Y.getUint16(E+16,!0),ay:Y.getUint16(E+18,!0),aw:Y.getUint16(E+20,!0),ah:Y.getUint16(E+22,!0),r:Y.getFloat32(E+24,!0),g:Y.getFloat32(E+28,!0),b:Y.getFloat32(E+32,!0),a:Y.getFloat32(E+36,!0),anim:V};if(R[$]=ne,b.setFloat32(A,ne.x,!0),b.setFloat32(A+4,ne.y,!0),b.setFloat32(A+8,ne.z,!0),b.setFloat32(A+12,0,!0),b.setFloat32(A+16,ne.u,!0),b.setFloat32(A+20,ne.v,!0),b.setFloat32(A+24,ne.ax,!0),b.setFloat32(A+28,ne.ay,!0),b.setFloat32(A+32,ne.aw,!0),b.setFloat32(A+36,ne.ah,!0),b.setFloat32(A+40,ne.r,!0),b.setFloat32(A+44,ne.g,!0),b.setFloat32(A+48,ne.b,!0),b.setFloat32(A+52,ne.a,!0),V)for(let ie=0;ie<16;ie+=1)b.setFloat32(A+56+ie*4,V[ie],!0)}const B=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,B),o.bufferData(o.ARRAY_BUFFER,b,o.STATIC_DRAW),r(a).entities.push({type:"render3d",animated:m,textureId:k,vertexCount:S,modelMatrix:M,vertices:R,buffer:{vbo:B,step:U,attribs:m?Zo:Vn},enabled:!0,expanded:!1,uuid:Xt()}),xe+=S,se(h,o);break}case 4:{const U=v.getUint32(4,!0),S=v.getUint32(8,!0),k=v.getUint16(12,!0),M=v.getUint16(14,!0),Y=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Y);const R=new DataView(c,16,U*40),D=new ArrayBuffer(U*60),b=new DataView(D),B=new Array(U);for(let $=0;$<U;$+=1){const E=40*$,A=60*$,V={x:R.getInt16(E,!0),y:R.getInt16(E+2,!0),ax:R.getInt16(E+4,!0),ay:R.getInt16(E+6,!0),aw:R.getInt16(E+8,!0),ah:R.getInt16(E+10,!0),discard:R.getUint8(E+12),wrapx:R.getUint8(E+13),wrapy:R.getUint8(E+14),u:R.getFloat32(E+16,!0),v:R.getFloat32(E+20,!0),r:R.getFloat32(E+24,!0),g:R.getFloat32(E+28,!0),b:R.getFloat32(E+32,!0),a:R.getFloat32(E+36,!0)};B[$]=V,b.setFloat32(A,V.x,!0),b.setFloat32(A+4,V.y,!0),b.setFloat32(A+8,V.u,!0),b.setFloat32(A+12,V.v,!0),b.setFloat32(A+16,V.ax,!0),b.setFloat32(A+20,V.ay,!0),b.setFloat32(A+24,V.aw,!0),b.setFloat32(A+28,V.ah,!0),b.setFloat32(A+32,V.r,!0),b.setFloat32(A+36,V.g,!0),b.setFloat32(A+40,V.b,!0),b.setFloat32(A+44,V.a,!0),b.setFloat32(A+48,V.discard,!0),b.setFloat32(A+52,V.wrapx,!0),b.setFloat32(A+56,V.wrapy,!0)}o.bufferData(o.ARRAY_BUFFER,b,o.STATIC_DRAW),r(a).entities.push({type:"batch2d",textureId:S,vertexCount:U,vertices:B,targetWidth:k,targetHeight:M,buffer:{vbo:Y,step:60,attribs:ir},enabled:!0,expanded:!1,uuid:Xt(),enabledVerticesList:Array(Math.floor(U)).fill(!0)}),xe+=U,se(h,o);break}case 5:case 8:{const T=G===5?64:512,U=v.getInt16(4,!0),S=v.getInt16(6,!0),k=v.getInt16(8,!0),M=v.getInt16(10,!0),Y=v.getUint32(12,!0),R=v.getFloat32(16,!0),D=v.getFloat32(20,!0),b=v.getFloat32(24,!0),B=v.getFloat32(28,!0),$=v.getUint16(32,!0),E=v.getUint16(34,!0),A=o.createTexture(),V=o.createFramebuffer();o.bindTexture(o.TEXTURE_2D,A),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,V),o.texStorage2D(o.TEXTURE_2D,1,o.RGBA8,T,T),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,A,0),o.enable(o.CULL_FACE),o.cullFace(o.FRONT),o.viewport(0,0,T,T),o.scissor(0,0,T,T);let ne=Array(Y),ie=36;for(let Wt=0;Wt<Y;Wt+=1){const xr=v.getUint32(ie,!0);let An=Array(xr);const ba=new ArrayBuffer(xr*56),rt=new DataView(ba),Gr=new Float32Array(16);Gr.set(new Float32Array(c,ie+4,16));const Kr=new Float32Array(16);Kr.set(new Float32Array(c,ie+68,16));const Zr=new Float32Array(16);Zr.set(new Float32Array(c,ie+132,16)),ie+=196;for(let Sr=0;Sr<xr;Sr+=1){const It={x:v.getInt16(ie,!0),y:v.getInt16(ie+2,!0),z:v.getInt16(ie+4,!0),r:v.getFloat32(ie+8,!0),g:v.getFloat32(ie+12,!0),b:v.getFloat32(ie+16,!0),a:v.getFloat32(ie+20,!0)},st=Sr*56;rt.setFloat32(st,It.x,!0),rt.setFloat32(st+4,It.y,!0),rt.setFloat32(st+8,It.z,!0),rt.setFloat32(st+24,0,!0),rt.setFloat32(st+28,0,!0),rt.setFloat32(st+32,T,!0),rt.setFloat32(st+36,T,!0),rt.setFloat32(st+40,It.r,!0),rt.setFloat32(st+44,It.g,!0),rt.setFloat32(st+48,It.b,!0),rt.setFloat32(st+52,It.a,!0),An[Sr]=It,ie+=24}ne[Wt]={vertices:An,modelMatrix:Gr,viewMatrix:Kr,projMatrix:Zr};const Qr=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Qr),o.bufferData(o.ARRAY_BUFFER,rt,o.STATIC_DRAW),o.useProgram(r(s)),o.uniformMatrix4fv(r(_),!1,Gr),o.uniformMatrix4fv(r(w),!1,Kr),o.uniformMatrix4fv(r(l),!1,Zr),o.uniform2fv(r(g),[1,1]),o.bindTexture(o.TEXTURE_2D,r($e)),o.uniform1i(r(y),u),re(o,{vbo:Qr,attribs:Vn,step:56},xr),o.deleteBuffer(Qr)}const Re=U,ye=U+k,Ke=S,Ut=S+M,nr=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,nr),o.bufferData(o.ARRAY_BUFFER,new Float32Array([Re,Ke,0,1,0,0,T,T,R,b,D,B,0,0,0,ye,Ke,1,1,0,0,T,T,R,b,D,B,0,0,0,Re,Ut,0,0,0,0,T,T,R,b,D,B,0,0,0,ye,Ke,1,1,0,0,T,T,R,b,D,B,0,0,0,ye,Ut,1,0,0,0,T,T,R,b,D,B,0,0,0,Re,Ut,0,0,0,0,T,T,R,b,D,B,0,0,0]),o.STATIC_DRAW),r(a).entities.push({type:G===5?"icon":"bigicon",models:ne,texture:A,targetWidth:$,targetHeight:E,texSize:T,buffer:{vbo:nr,step:60,attribs:ir},targetx:U,targety:S,targetw:k,targeth:M,enabled:!0,expanded:!1,uuid:Xt()}),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null),o.deleteFramebuffer(V),o.disable(o.CULL_FACE);break}case 6:{const m=v.getUint32(4,!0),T=v.getUint32(8,!0);Ee=v.getUint16(12,!0),He=v.getUint16(14,!0);const U=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,U);const S=new DataView(c,16,m*40),k=new ArrayBuffer(m*60),M=new DataView(k),Y=new Array(m);for(let R=0;R<m;R+=1){const D=40*R,b=60*R,B={x:S.getInt16(D,!0),y:S.getInt16(D+2,!0),ax:S.getInt16(D+4,!0),ay:S.getInt16(D+6,!0),aw:S.getInt16(D+8,!0),ah:S.getInt16(D+10,!0),discard:S.getUint8(D+12),wrapx:S.getUint8(D+13),wrapy:S.getUint8(D+14),u:S.getFloat32(D+16,!0),v:S.getFloat32(D+20,!0),r:S.getFloat32(D+24,!0),g:S.getFloat32(D+28,!0),b:S.getFloat32(D+32,!0),a:S.getFloat32(D+36,!0)};Y[R]=B,M.setFloat32(b,B.x,!0),M.setFloat32(b+4,B.y,!0),M.setFloat32(b+8,B.u,!0),M.setFloat32(b+12,B.v,!0),M.setFloat32(b+16,B.ax,!0),M.setFloat32(b+20,B.ay,!0),M.setFloat32(b+24,B.aw,!0),M.setFloat32(b+28,B.ah,!0),M.setFloat32(b+32,B.r,!0),M.setFloat32(b+36,B.g,!0),M.setFloat32(b+40,B.b,!0),M.setFloat32(b+44,B.a,!0),M.setFloat32(b+48,B.discard,!0),M.setFloat32(b+52,B.wrapx,!0),M.setFloat32(b+56,B.wrapy,!0)}o.bufferData(o.ARRAY_BUFFER,M,o.STATIC_DRAW),r(a).entities.push({type:"minimap2d",textureId:T,buffer:{vbo:U,attribs:ir,step:60},vertices:Y,vertexCount:m,enabled:!0,expanded:!1,enabledVerticesList:Array(Math.floor(m)).fill(!0),uuid:Xt()}),xe+=m,se(h,o);break}case 7:{const m=v.getInt16(4,!0),T=v.getInt16(6,!0),U=v.getUint16(8,!0),S=v.getUint16(10,!0),k=v.getInt16(12,!0),M=v.getInt16(14,!0),Y=v.getUint16(16,!0),R=v.getUint16(18,!0),D=v.getUint16(20,!0),b=v.getUint16(22,!0),B=k,$=k+Y,E=M,A=M+R,V=m/Ee,ne=(m+U)/Ee,ie=T/He,Re=(T+S)/He,ye=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,ye),o.bufferData(o.ARRAY_BUFFER,new Float32Array([B,E,V,Re,m,T,U,S,1,1,1,1,0,0,0,$,E,ne,Re,m,T,U,S,1,1,1,1,0,0,0,B,A,V,ie,m,T,U,S,1,1,1,1,0,0,0,$,E,ne,Re,m,T,U,S,1,1,1,1,0,0,0,$,A,ne,ie,m,T,U,S,1,1,1,1,0,0,0,B,A,V,ie,m,T,U,S,1,1,1,1,0,0,0]),o.STATIC_DRAW),r(a).entities.push({type:"minimap",sourcex:m,sourcey:T,sourcew:U,sourceh:S,targetx:k,targety:M,targetw:Y,targeth:R,targetWidth:D,targetHeight:b,buffer:{vbo:ye,step:60,attribs:ir},enabled:!0,expanded:!1,uuid:Xt()}),se(h,o);break}case 9:{const m=v.getUint32(4,!0),T=v.getUint32(8,!0),U=64,S=72,k=new DataView(c,16,m*U),M=new Array(m),Y=new ArrayBuffer(m*S),R=new DataView(Y);for(let b=0;b<m;b+=1){const B=U*b,$=S*b,E={x:k.getFloat32(B,!0),y:k.getFloat32(B+4,!0),z:k.getFloat32(B+8,!0),offsetx2d:k.getFloat32(B+12,!0),offsety2d:k.getFloat32(B+16,!0),offsetx3d:k.getFloat32(B+20,!0),offsety3d:k.getFloat32(B+24,!0),offsetz3d:k.getFloat32(B+28,!0),ax:k.getUint16(B+32,!0),ay:k.getUint16(B+34,!0),aw:k.getUint16(B+36,!0),ah:k.getUint16(B+38,!0),r:k.getFloat32(B+40,!0),g:k.getFloat32(B+44,!0),b:k.getFloat32(B+48,!0),a:k.getFloat32(B+52,!0),u:k.getFloat32(B+56,!0),v:k.getFloat32(B+60,!0)};M[b]=E,R.setFloat32($,E.x,!0),R.setFloat32($+4,E.y,!0),R.setFloat32($+8,E.z,!0),R.setFloat32($+12,E.ax,!0),R.setFloat32($+16,E.ay,!0),R.setFloat32($+20,E.aw,!0),R.setFloat32($+24,E.ah,!0),R.setFloat32($+28,E.r,!0),R.setFloat32($+32,E.g,!0),R.setFloat32($+36,E.b,!0),R.setFloat32($+40,E.a,!0),R.setFloat32($+44,E.offsetx2d,!0),R.setFloat32($+48,E.offsety2d,!0),R.setFloat32($+52,E.offsetx3d,!0),R.setFloat32($+56,E.offsety3d,!0),R.setFloat32($+60,E.offsetz3d,!0),R.setFloat32($+64,E.u,!0),R.setFloat32($+68,E.v,!0)}const D=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,D),o.bufferData(o.ARRAY_BUFFER,R,o.STATIC_DRAW),r(a).entities.push({type:"renderparticles",textureId:T,vertexCount:m,vertices:M,buffer:{vbo:D,step:S,attribs:Qo},enabled:!0,expanded:!1,uuid:Xt()}),xe+=m,se(h,o);break}case 10:{wt=new Float32Array(c,4,16),j=new Float32Array(c,68,16);break}case 11:{const U=v.getUint32(4,!0),S=v.getUint32(8,!0),k=new Float32Array(16);k.set(new Float32Array(c,16,16));const M=new DataView(c,80,U*48),Y=new Array(U),R=new ArrayBuffer(U*64),D=new DataView(R);for(let B=0;B<U;B+=1){const $=48*B,E=64*B,A={x:M.getInt16($,!0),y:M.getInt16($+2,!0),z:M.getInt16($+4,!0),offsetx:M.getFloat32($+8,!0),offsety:M.getFloat32($+12,!0),u:M.getFloat32($+16,!0),v:M.getFloat32($+20,!0),ax:M.getUint16($+24,!0),ay:M.getUint16($+26,!0),aw:M.getUint16($+28,!0),ah:M.getUint16($+30,!0),r:M.getFloat32($+32,!0),g:M.getFloat32($+36,!0),b:M.getFloat32($+40,!0),a:M.getFloat32($+44,!0)};Y[B]=A,D.setFloat32(E,A.x,!0),D.setFloat32(E+4,A.y,!0),D.setFloat32(E+8,A.z,!0),D.setFloat32(E+12,0,!0),D.setFloat32(E+16,A.u,!0),D.setFloat32(E+20,A.v,!0),D.setFloat32(E+24,A.ax,!0),D.setFloat32(E+28,A.ay,!0),D.setFloat32(E+32,A.aw,!0),D.setFloat32(E+36,A.ah,!0),D.setFloat32(E+40,A.r,!0),D.setFloat32(E+44,A.g,!0),D.setFloat32(E+48,A.b,!0),D.setFloat32(E+52,A.a,!0),D.setFloat32(E+56,A.offsetx,!0),D.setFloat32(E+60,A.offsety,!0)}const b=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,b),o.bufferData(o.ARRAY_BUFFER,D,o.STATIC_DRAW),r(a).entities.push({type:"billboard",textureId:S,vertexCount:U,modelMatrix:k,vertices:Y,buffer:{vbo:b,step:64,attribs:Jo},enabled:!0,expanded:!1,uuid:Xt(),enabledVerticesList:Array(Math.floor(U)).fill(!0)}),xe+=U,se(h,o);break}}};window.addEventListener("message",async h=>{if(typeof h.data=="object"&&h.data.type==="pluginMessage"){if(typeof h.data.content!="object"||!r(Q)||!r(x))return;vt(r(Q),r(x),h.data.content)}});const Ce=h=>Array.from(h).map(o=>{const c=o.toString(16);return c.length===1?"\\x0".concat(c):"\\x".concat(c)}).join(""),bt=()=>{const h=r(a).selectedTexture;if(!h){F(Te,"error: no texture selected");return}const o=r(a).textureBoundW*4,c=new Array(r(a).textureBoundH);for(let v=0;v<r(a).textureBoundH;v+=1){const G=(r(a).textureBoundY+v)*h.width*4+r(a).textureBoundX*4,m=h.data.slice(G,G+o),T=Ce(m);c[v]=`  [${v+1}] = '${T}',`}F(Te,`local data = {
${c.join(`
`)}
}`)},it=h=>{const o=r(a).textureViewScale/100,c=Math.floor(r(a).textureViewX+h.offsetX/o-r(a).textureBoundX),v=Math.floor(r(a).textureViewY+h.offsetY/o-r(a).textureBoundY);if(c<0||v<0||c>=r(a).textureBoundW||v>=r(a).textureBoundH){F(ot,null);return}F(ot,{x:c,y:v})},pe=h=>{if(it(h),!(h.buttons&1)){F(ut,it);return}const o=r(a).textureViewScale/100;Ze(a,r(a).textureViewX-=h.movementX/o),Ze(a,r(a).textureViewY-=h.movementY/o),r(a).redraw()},tr=h=>{const o=r(Q),c=r(a).textureViewScale,v=r(a).textureViewScale-Qt*Math.sign(h.deltaY);Ze(a,r(a).textureViewScale=v);const G=2*c/100,m=2*v/100,T=r(a).textureViewX+o.width/G,U=r(a).textureViewY+o.height/G;Ze(a,r(a).textureViewX=T-o.width/m),Ze(a,r(a).textureViewY=U-o.height/m),se(o,r(x))};let ut=P(it);Jr(()=>(r(Ge),r(be),r(We),r(_e)),()=>{F(t,r(Ge)===null||r(be)&&(r(We)===null||r(_e)===null||r(We)>r(_e)))}),Jr(()=>(r(Q),r(x),r($e),r(f),r(s),r(L),r(W),r(Ie)),()=>{if(r(Q)&&(Ze(Q,r(Q).width=Jt),Ze(Q,r(Q).height=er),F(x,r(Q).getContext("webgl2")),r(x))){F(et,r(x).getParameter(r(x).MAX_VERTEX_ATTRIBS)),F($e,r(x).createTexture()),r(x).bindTexture(r(x).TEXTURE_2D,r($e));const h=new Uint8Array([255,255,255,255]);r(x).texImage2D(r(x).TEXTURE_2D,0,r(x).RGBA,1,1,0,r(x).RGBA,r(x).UNSIGNED_BYTE,h);const o=Mt(r(x),r(x).VERTEX_SHADER,Wo,"2D vertex shader"),c=Mt(r(x),r(x).FRAGMENT_SHADER,Xo,"2D fragment shader"),v=Mt(r(x),r(x).VERTEX_SHADER,Yo,"3D vertex shader"),G=Mt(r(x),r(x).VERTEX_SHADER,zo,"3D anim vertex shader"),m=Mt(r(x),r(x).FRAGMENT_SHADER,jo,"3D fragment shader"),T=Mt(r(x),r(x).VERTEX_SHADER,qo,"particle vertex shader"),U=Mt(r(x),r(x).VERTEX_SHADER,Go,"checkers vertex shader"),S=Mt(r(x),r(x).FRAGMENT_SHADER,Ko,"checkers fragment shader");F(f,hr(r(x),o,c,"2D program")),F(p,r(x).getUniformLocation(r(f),"atlas_wh_screen_wh")),F(d,r(x).getUniformLocation(r(f),"tex")),F(s,hr(r(x),v,m,"3D program")),F(_,r(x).getUniformLocation(r(s),"modelmatrix")),F(w,r(x).getUniformLocation(r(s),"viewmatrix")),F(l,r(x).getUniformLocation(r(s),"projmatrix")),F(g,r(x).getUniformLocation(r(s),"atlas_wh")),F(y,r(x).getUniformLocation(r(s),"tex")),F(L,hr(r(x),G,m,"3D animated program")),F(q,r(x).getUniformLocation(r(L),"modelmatrix")),F(ce,r(x).getUniformLocation(r(L),"viewmatrix")),F(de,r(x).getUniformLocation(r(L),"projmatrix")),F(le,r(x).getUniformLocation(r(L),"atlas_wh")),F(H,r(x).getUniformLocation(r(L),"tex")),F(W,hr(r(x),T,m,"Particles program")),F(J,r(x).getUniformLocation(r(W),"viewmatrix")),F(K,r(x).getUniformLocation(r(W),"projmatrix")),F(Z,r(x).getUniformLocation(r(W),"tex")),F(ve,r(x).getUniformLocation(r(W),"atlas_wh")),F(Ie,hr(r(x),U,S,"Checkers program")),F(qe,r(x).getUniformLocation(r(Ie),"screen_wh")),r(x).deleteShader(o),r(x).deleteShader(c),r(x).deleteShader(v),r(x).deleteShader(m),r(x).deleteShader(G),r(x).deleteShader(T),r(x).deleteShader(U),r(x).deleteShader(S),r(x).activeTexture(r(x).TEXTURE0+u),r(x).enable(r(x).SCISSOR_TEST),r(x).disable(r(x).CULL_FACE),r(x).disable(r(x).DEPTH_TEST),r(x).enable(r(x).BLEND),r(x).blendEquationSeparate(r(x).FUNC_ADD,r(x).FUNC_ADD),r(x).depthFunc(r(x).LEQUAL),se(r(Q),r(x))}}),Jr(()=>(r(ke),r(Ae),r(Xe),r(Fe),r(Pe),r(t),r(Q),r(x)),()=>{const h=r(ke);F(ke,(r(Ae)||r(Xe)||r(Fe)||r(Pe))&&!r(t)),r(Q)&&r(x)&&r(ke)!==h&&se(r(Q),r(x))}),oo(),Kt();var Bt=pu(),Me=ue(Bt);Me.__mousedown=[iu,ut,pe],Me.__mouseup=[uu,ut,it],Me.__mousemove=function(...h){var o;(o=r(ut))==null||o.apply(this,h)},wa(Me,h=>F(Q,h),()=>r(Q));var rr=C(Me,2);{var _t=h=>{var o=lu(),c=ue(o),v=ge(c);Gi(v,{get data(){return r(a)},set data(m){F(a,m)},$$legacy:!0});var G=C(c,2);G.__click=[su,dt],N(h,o)},Se=(h,o)=>{{var c=v=>{var G=cu();G.__click=[fu,dt],N(v,G)};te(h,v=>{r(he)&&v(c)},o)}};te(rr,h=>{r(dt)?h(_t):h(Se,!1)})}var tt=C(rr,2);{var dr=h=>{var o=hu(),c=ue(o);{var v=A=>{var V=vu();V.__click=[du,a,se,Q,x],N(A,V)};te(c,A=>{r(Te)===null&&A(v)})}var G=C(c,2),m=ge(G),T=ge(m),U=ge(T),S=C(U,2),k=C(T,2),M=ge(k),Y=C(M,2),R=C(k,2),D=C(ge(R));D.__change=function(...A){var V;(V=r(a).redraw)==null||V.apply(this,A)};var b=C(D,2);b.__click=[ou,a,Te,Ge,be,We,_e,Ce];var B=C(b,4);{var $=A=>{var V=_u(),ne=ue(V),ie=C(ne,2);ie.__change=function(...ye){var Ke;(Ke=r(a).redraw)==null||Ke.apply(this,ye)};var Re=C(ie,2);Re.__change=function(...ye){var Ke;(Ke=r(a).redraw)==null||Ke.apply(this,ye)},ga(ne,()=>r(be),ye=>F(be,ye)),Ve("focus",ie,()=>F(Fe,!0)),Ve("blur",ie,()=>F(Fe,!1)),Mr(ie,()=>r(We),ye=>F(We,ye)),Ve("focus",Re,()=>F(Pe,!0)),Ve("blur",Re,()=>F(Pe,!1)),Mr(Re,()=>r(_e),ye=>F(_e,ye)),N(A,V)},E=A=>{var V=xu(),ne=C(ue(V));ne.__click=bt,N(A,V)};te(B,A=>{r(a).viewIsWholeAtlas?A($):A(E,!1)})}Je(()=>{var A,V;me(U,`x: ${((A=r(ot))==null?void 0:A.x)??""} `),me(S,` y: ${((V=r(ot))==null?void 0:V.y)??""}`),me(M,`${r(a).textureBoundW??""}x${r(a).textureBoundH??""} `),me(Y,` zoom: ${r(a).textureViewScale??""}%`),b.disabled=r(t)}),Ve("mouseenter",R,()=>F(Ae,!0)),Ve("mouseleave",R,()=>F(Ae,!1)),Ve("focus",D,()=>F(Xe,!0)),Ve("blur",D,()=>F(Xe,!1)),Mr(D,()=>r(Ge),A=>F(Ge,A)),N(h,o)};te(tt,h=>{r(a).selectedTexture&&h(dr)})}var vr=C(tt,2);{var _r=h=>{au(h,{get text(){return r(Te)},set text(o){F(Te,o)},$$legacy:!0})};te(vr,h=>{r(Te)!==null&&h(_r)})}Ve("wheel",Me,tr),N(e,Bt),Nt()}Gt(["mousedown","mouseup","mousemove","click","change"]);Ro(gu,{target:document.body});
