(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(i){if(i.ep)return;i.ep=!0;const u=t(i);fetch(i.href,u)}})();const En=!1;var ln=Array.isArray,ga=Array.prototype.indexOf,cn=Array.from,wa=Object.defineProperty,ir=Object.getOwnPropertyDescriptor,Wn=Object.getOwnPropertyDescriptors,ba=Object.prototype,ma=Array.prototype,fn=Object.getPrototypeOf,An=Object.isExtensible;function ya(e){return e()}function rn(e){for(var n=0;n<e.length;n++)e[n]()}const lt=2,Xn=4,Nr=8,dn=16,At=32,ur=64,Ir=128,rt=256,Dr=512,qe=1024,Ft=2048,jt=4096,yt=8192,Or=16384,Ea=32768,vn=65536,Yn=1<<17,Aa=1<<19,zn=1<<20,nn=1<<21,Yt=Symbol("$state"),Fa=Symbol("legacy props"),Ta=Symbol("");function jn(e){return e===this.v}function Ra(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function _n(e){return!Ra(e,this.v)}function Sa(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ba(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ua(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ia(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Da(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ma(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function $a(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Pa(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let mr=!1,Ca=!1;function ka(){mr=!0}const xn=1,hn=2,qn=4,La=8,Va=16,Na=1,Oa=2,Ha=4,Wa=8,Xa=16,Ya=1,za=2,ze=Symbol(),ja="http://www.w3.org/1999/xhtml";let be=null;function Fn(e){be=e}function Lt(e,n=!1,t){var a=be={p:be,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};mr&&!n&&(be.l={s:null,u:null,r1:[],r2:pr(!1)}),ra(()=>{a.d=!0})}function Vt(e){const n=be;if(n!==null){const c=n.e;if(c!==null){var t=ce,a=ne;n.e=null;try{for(var i=0;i<c.length;i++){var u=c[i];kt(u.effect),ht(u.reaction),gn(u.fn)}}finally{kt(t),ht(a)}}be=n.p,n.m=!0}return{}}function yr(){return!mr||be!==null&&be.l===null}function Xt(e,n){if(typeof e!="object"||e===null||Yt in e)return e;const t=fn(e);if(t!==ba&&t!==ma)return e;var a=new Map,i=ln(e),u=It(0),c=ne,g=_=>{var s=ne;ht(c);var x;return x=_(),ht(s),x};return i&&a.set("length",It(e.length)),new Proxy(e,{defineProperty(_,s,x){(!("value"in x)||x.configurable===!1||x.enumerable===!1||x.writable===!1)&&Ma();var w=a.get(s);return w===void 0?(w=g(()=>It(x.value)),a.set(s,w)):T(w,g(()=>Xt(x.value))),!0},deleteProperty(_,s){var x=a.get(s);if(x===void 0)s in _&&a.set(s,g(()=>It(ze)));else{if(i&&typeof s=="string"){var w=a.get("length"),l=Number(s);Number.isInteger(l)&&l<w.v&&T(w,l)}T(x,ze),Tn(u)}return!0},get(_,s,x){var m;if(s===Yt)return e;var w=a.get(s),l=s in _;if(w===void 0&&(!l||(m=ir(_,s))!=null&&m.writable)&&(w=g(()=>It(Xt(l?_[s]:ze))),a.set(s,w)),w!==void 0){var p=r(w);return p===ze?void 0:p}return Reflect.get(_,s,x)},getOwnPropertyDescriptor(_,s){var x=Reflect.getOwnPropertyDescriptor(_,s);if(x&&"value"in x){var w=a.get(s);w&&(x.value=r(w))}else if(x===void 0){var l=a.get(s),p=l==null?void 0:l.v;if(l!==void 0&&p!==ze)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return x},has(_,s){var p;if(s===Yt)return!0;var x=a.get(s),w=x!==void 0&&x.v!==ze||Reflect.has(_,s);if(x!==void 0||ce!==null&&(!w||(p=ir(_,s))!=null&&p.writable)){x===void 0&&(x=g(()=>It(w?Xt(_[s]):ze)),a.set(s,x));var l=r(x);if(l===ze)return!1}return w},set(_,s,x,w){var se;var l=a.get(s),p=s in _;if(i&&s==="length")for(var m=x;m<l.v;m+=1){var k=a.get(m+"");k!==void 0?T(k,ze):m in _&&(k=g(()=>It(ze)),a.set(m+"",k))}l===void 0?(!p||(se=ir(_,s))!=null&&se.writable)&&(l=g(()=>It(void 0)),T(l,g(()=>Xt(x))),a.set(s,l)):(p=l.v!==ze,T(l,g(()=>Xt(x))));var q=Reflect.getOwnPropertyDescriptor(_,s);if(q!=null&&q.set&&q.set.call(w,x),!p){if(i&&typeof s=="string"){var fe=a.get("length"),de=Number(s);Number.isInteger(de)&&de>=fe.v&&T(fe,de+1)}Tn(u)}return!0},ownKeys(_){r(u);var s=Reflect.ownKeys(_).filter(l=>{var p=a.get(l);return p===void 0||p.v!==ze});for(var[x,w]of a)w.v!==ze&&!(x in _)&&s.push(x);return s},setPrototypeOf(){$a()}})}function Tn(e,n=1){T(e,e.v+n)}const hr=new Map;function pr(e,n){var t={f:0,v:e,reactions:null,equals:jn,rv:0,wv:0};return t}function It(e,n){const t=pr(e);return io(t),t}function D(e,n=!1){var a;const t=pr(e);return n||(t.equals=_n),mr&&be!==null&&be.l!==null&&((a=be.l).s??(a.s=[])).push(t),t}function Ke(e,n){return T(e,pt(()=>r(e))),n}function T(e,n,t=!1){ne!==null&&!xt&&yr()&&(ne.f&(lt|dn))!==0&&!(He!=null&&He.includes(e))&&Pa();let a=t?Xt(n):n;return gr(e,a)}function gr(e,n){if(!e.equals(n)){var t=e.v;Er?hr.set(e,n):hr.set(e,t),e.v=n,e.wv=la(),Gn(e,Ft),yr()&&ce!==null&&(ce.f&qe)!==0&&(ce.f&(At|ur))===0&&(tt===null?uo([e]):tt.push(e))}return n}function Gn(e,n){var t=e.reactions;if(t!==null)for(var a=yr(),i=t.length,u=0;u<i;u++){var c=t[u],g=c.f;(g&Ft)===0&&(!a&&c===ce||(ct(c,n),(g&(qe|rt))!==0&&((g&lt)!==0?Gn(c,jt):Yr(c))))}}let qa=!1;var Rn,Kn,Zn,Qn;function Ga(){if(Rn===void 0){Rn=window,Kn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,n=Node.prototype,t=Text.prototype;Zn=ir(n,"firstChild").get,Qn=ir(n,"nextSibling").get,An(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),An(t)&&(t.__t=void 0)}}function pn(e=""){return document.createTextNode(e)}function Mr(e){return Zn.call(e)}function Hr(e){return Qn.call(e)}function ye(e,n){return Mr(e)}function ue(e,n){{var t=Mr(e);return t instanceof Comment&&t.data===""?Hr(t):t}}function C(e,n=1,t=!1){let a=e;for(;n--;)a=Hr(a);return a}function Ka(e){e.textContent=""}function wr(e){var n=lt|Ft,t=ne!==null&&(ne.f&lt)!==0?ne:null;return ce===null||t!==null&&(t.f&rt)!==0?n|=rt:ce.f|=zn,{ctx:be,deps:null,effects:null,equals:jn,f:n,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??ce}}function X(e){const n=wr(e);return n.equals=_n,n}function Jn(e){var n=e.effects;if(n!==null){e.effects=null;for(var t=0;t<n.length;t+=1)Ct(n[t])}}function Za(e){for(var n=e.parent;n!==null;){if((n.f&lt)===0)return n;n=n.parent}return null}function Qa(e){var n,t=ce;kt(Za(e));try{Jn(e),n=fa(e)}finally{kt(t)}return n}function ea(e){var n=Qa(e),t=(Pt||(e.f&rt)!==0)&&e.deps!==null?jt:qe;ct(e,t),e.equals(n)||(e.v=n,e.wv=la())}function ta(e){ce===null&&ne===null&&Ua(),ne!==null&&(ne.f&rt)!==0&&ce===null&&Ba(),Er&&Sa()}function Ja(e,n){var t=n.last;t===null?n.last=n.first=e:(t.next=e,e.prev=t,n.last=e)}function sr(e,n,t,a=!0){var i=ce,u={ctx:be,deps:null,nodes_start:null,nodes_end:null,f:e|Ft,first:null,fn:n,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(t)try{Xr(u),u.f|=Ea}catch(_){throw Ct(u),_}else n!==null&&Yr(u);var c=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(zn|Ir))===0;if(!c&&a&&(i!==null&&Ja(u,i),ne!==null&&(ne.f&lt)!==0)){var g=ne;(g.effects??(g.effects=[])).push(u)}return u}function ra(e){const n=sr(Nr,null,!1);return ct(n,qe),n.teardown=e,n}function Sn(e){ta();var n=ce!==null&&(ce.f&At)!==0&&be!==null&&!be.m;if(n){var t=be;(t.e??(t.e=[])).push({fn:e,effect:ce,reaction:ne})}else{var a=gn(e);return a}}function eo(e){return ta(),lr(e)}function to(e){const n=sr(ur,e,!0);return(t={})=>new Promise(a=>{t.outro?$r(n,()=>{Ct(n),a(void 0)}):(Ct(n),a(void 0))})}function gn(e){return sr(Xn,e,!1)}function Kr(e,n){var t=be,a={effect:null,ran:!1};t.l.r1.push(a),a.effect=lr(()=>{e(),!a.ran&&(a.ran=!0,T(t.l.r2,!0),pt(n))})}function ro(){var e=be;lr(()=>{if(r(e.l.r2)){for(var n of e.l.r1){var t=n.effect;(t.f&qe)!==0&&ct(t,jt),cr(t)&&Xr(t),n.ran=!1}e.l.r2.v=!1}})}function lr(e){return sr(Nr,e,!0)}function Qe(e,n=[],t=wr){const a=n.map(t);return wn(()=>e(...a.map(r)))}function wn(e,n=0){return sr(Nr|dn|n,e,!0)}function br(e,n=!0){return sr(Nr|At,e,!0,n)}function na(e){var n=e.teardown;if(n!==null){const t=Er,a=ne;Bn(!0),ht(null);try{n.call(null)}finally{Bn(t),ht(a)}}}function aa(e,n=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var a=t.next;(t.f&ur)!==0?t.parent=null:Ct(t,n),t=a}}function no(e){for(var n=e.first;n!==null;){var t=n.next;(n.f&At)===0&&Ct(n),n=t}}function Ct(e,n=!0){var t=!1;if((n||(e.f&Aa)!==0)&&e.nodes_start!==null){for(var a=e.nodes_start,i=e.nodes_end;a!==null;){var u=a===i?null:Hr(a);a.remove(),a=u}t=!0}aa(e,n&&!t),Vr(e,0),ct(e,Or);var c=e.transitions;if(c!==null)for(const _ of c)_.stop();na(e);var g=e.parent;g!==null&&g.first!==null&&oa(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function oa(e){var n=e.parent,t=e.prev,a=e.next;t!==null&&(t.next=a),a!==null&&(a.prev=t),n!==null&&(n.first===e&&(n.first=a),n.last===e&&(n.last=t))}function $r(e,n){var t=[];bn(e,t,!0),ia(t,()=>{Ct(e),n&&n()})}function ia(e,n){var t=e.length;if(t>0){var a=()=>--t||n();for(var i of e)i.out(a)}else n()}function bn(e,n,t){if((e.f&yt)===0){if(e.f^=yt,e.transitions!==null)for(const c of e.transitions)(c.is_global||t)&&n.push(c);for(var a=e.first;a!==null;){var i=a.next,u=(a.f&vn)!==0||(a.f&At)!==0;bn(a,n,u?t:!1),a=i}}}function Pr(e){ua(e,!0)}function ua(e,n){if((e.f&yt)!==0){e.f^=yt,(e.f&qe)===0&&(e.f^=qe),cr(e)&&(ct(e,Ft),Yr(e));for(var t=e.first;t!==null;){var a=t.next,i=(t.f&vn)!==0||(t.f&At)!==0;ua(t,i?n:!1),t=a}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||n)&&u.in()}}let Cr=[];function ao(){var e=Cr;Cr=[],rn(e)}function mn(e){Cr.length===0&&queueMicrotask(ao),Cr.push(e)}let Br=!1,an=!1,kr=null,zt=!1,Er=!1;function Bn(e){Er=e}let Ur=[];let ne=null,xt=!1;function ht(e){ne=e}let ce=null;function kt(e){ce=e}let He=null;function oo(e){He=e}function io(e){ne!==null&&ne.f&nn&&(He===null?oo([e]):He.push(e))}let Oe=null,Ze=0,tt=null;function uo(e){tt=e}let sa=1,Lr=0,Pt=!1,$t=null;function la(){return++sa}function cr(e){var w;var n=e.f;if((n&Ft)!==0)return!0;if((n&jt)!==0){var t=e.deps,a=(n&rt)!==0;if(t!==null){var i,u,c=(n&Dr)!==0,g=a&&ce!==null&&!Pt,_=t.length;if(c||g){var s=e,x=s.parent;for(i=0;i<_;i++)u=t[i],(c||!((w=u==null?void 0:u.reactions)!=null&&w.includes(s)))&&(u.reactions??(u.reactions=[])).push(s);c&&(s.f^=Dr),g&&x!==null&&(x.f&rt)===0&&(s.f^=rt)}for(i=0;i<_;i++)if(u=t[i],cr(u)&&ea(u),u.wv>e.wv)return!0}(!a||ce!==null&&!Pt)&&ct(e,qe)}return!1}function so(e,n){for(var t=n;t!==null;){if((t.f&Ir)!==0)try{t.fn(e);return}catch{t.f^=Ir}t=t.parent}throw Br=!1,e}function lo(e){return(e.f&Or)===0&&(e.parent===null||(e.parent.f&Ir)===0)}function Wr(e,n,t,a){if(Br){if(t===null&&(Br=!1),lo(n))throw e;return}t!==null&&(Br=!0);{so(e,n);return}}function ca(e,n,t=!0){var a=e.reactions;if(a!==null)for(var i=0;i<a.length;i++){var u=a[i];He!=null&&He.includes(e)||((u.f&lt)!==0?ca(u,n,!1):n===u&&(t?ct(u,Ft):(u.f&qe)!==0&&ct(u,jt),Yr(u)))}}function fa(e){var p;var n=Oe,t=Ze,a=tt,i=ne,u=Pt,c=He,g=be,_=xt,s=e.f;Oe=null,Ze=0,tt=null,Pt=(s&rt)!==0&&(xt||!zt||ne===null),ne=(s&(At|ur))===0?e:null,He=null,Fn(e.ctx),xt=!1,Lr++,e.f|=nn;try{var x=(0,e.fn)(),w=e.deps;if(Oe!==null){var l;if(Vr(e,Ze),w!==null&&Ze>0)for(w.length=Ze+Oe.length,l=0;l<Oe.length;l++)w[Ze+l]=Oe[l];else e.deps=w=Oe;if(!Pt)for(l=Ze;l<w.length;l++)((p=w[l]).reactions??(p.reactions=[])).push(e)}else w!==null&&Ze<w.length&&(Vr(e,Ze),w.length=Ze);if(yr()&&tt!==null&&!xt&&w!==null&&(e.f&(lt|jt|Ft))===0)for(l=0;l<tt.length;l++)ca(tt[l],e);return i!==null&&(Lr++,tt!==null&&(a===null?a=tt:a.push(...tt))),x}finally{Oe=n,Ze=t,tt=a,ne=i,Pt=u,He=c,Fn(g),xt=_,e.f^=nn}}function co(e,n){let t=n.reactions;if(t!==null){var a=ga.call(t,e);if(a!==-1){var i=t.length-1;i===0?t=n.reactions=null:(t[a]=t[i],t.pop())}}t===null&&(n.f&lt)!==0&&(Oe===null||!Oe.includes(n))&&(ct(n,jt),(n.f&(rt|Dr))===0&&(n.f^=Dr),Jn(n),Vr(n,0))}function Vr(e,n){var t=e.deps;if(t!==null)for(var a=n;a<t.length;a++)co(e,t[a])}function Xr(e){var n=e.f;if((n&Or)===0){ct(e,qe);var t=ce,a=be,i=zt;ce=e,zt=!0;try{(n&dn)!==0?no(e):aa(e),na(e);var u=fa(e);e.teardown=typeof u=="function"?u:null,e.wv=sa;var c=e.deps,g;En&&Ca&&e.f&Ft}catch(_){Wr(_,e,t,a||e.ctx)}finally{zt=i,ce=t}}}function fo(){try{Ia()}catch(e){if(kr!==null)Wr(e,kr,null);else throw e}}function vo(){var e=zt;try{var n=0;for(zt=!0;Ur.length>0;){n++>1e3&&fo();var t=Ur,a=t.length;Ur=[];for(var i=0;i<a;i++){var u=xo(t[i]);_o(u)}}}finally{an=!1,zt=e,kr=null,hr.clear()}}function _o(e){var n=e.length;if(n!==0)for(var t=0;t<n;t++){var a=e[t];if((a.f&(Or|yt))===0)try{cr(a)&&(Xr(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?oa(a):a.fn=null))}catch(i){Wr(i,a,null,a.ctx)}}}function Yr(e){an||(an=!0,queueMicrotask(vo));for(var n=kr=e;n.parent!==null;){n=n.parent;var t=n.f;if((t&(ur|At))!==0){if((t&qe)===0)return;n.f^=qe}}Ur.push(n)}function xo(e){for(var n=[],t=e;t!==null;){var a=t.f,i=(a&(At|ur))!==0,u=i&&(a&qe)!==0;if(!u&&(a&yt)===0){if((a&Xn)!==0)n.push(t);else if(i)t.f^=qe;else{var c=ne;try{ne=t,cr(t)&&Xr(t)}catch(s){Wr(s,t,null,t.ctx)}finally{ne=c}}var g=t.first;if(g!==null){t=g;continue}}var _=t.parent;for(t=t.next;t===null&&_!==null;)t=_.next,_=_.parent}return n}function r(e){var n=e.f,t=(n&lt)!==0;if($t!==null&&$t.add(e),ne!==null&&!xt){if(!(He!=null&&He.includes(e))){var a=ne.deps;e.rv<Lr&&(e.rv=Lr,Oe===null&&a!==null&&a[Ze]===e?Ze++:Oe===null?Oe=[e]:(!Pt||!Oe.includes(e))&&Oe.push(e))}}else if(t&&e.deps===null&&e.effects===null){var i=e,u=i.parent;u!==null&&(u.f&rt)===0&&(i.f^=rt)}return t&&(i=e,cr(i)&&ea(i)),Er&&hr.has(e)?hr.get(e):e.v}function ho(e){var n=$t;$t=new Set;var t=$t,a;try{if(pt(e),n!==null)for(a of $t)n.add(a)}finally{$t=n}return t}function je(e){var n=ho(()=>pt(e));for(var t of n)if((t.f&Yn)!==0)for(const a of t.deps||[])(a.f&lt)===0&&gr(a,a.v);else gr(t,t.v)}function pt(e){var n=xt;try{return xt=!0,e()}finally{xt=n}}const po=-7169;function ct(e,n){e.f=e.f&po|n}function go(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Yt in e)on(e);else if(!Array.isArray(e))for(let n in e){const t=e[n];typeof t=="object"&&t&&Yt in t&&on(t)}}}function on(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let a in e)try{on(e[a],n)}catch{}const t=fn(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const a=Wn(t);for(let i in a){const u=a[i].get;if(u)try{u.call(e)}catch{}}}}}const wo=["touchstart","touchmove"];function bo(e){return wo.includes(e)}let Un=!1;function mo(){Un||(Un=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var n;if(!e.defaultPrevented)for(const t of e.target.elements)(n=t.__on_r)==null||n.call(t)})},{capture:!0}))}function da(e){var n=ne,t=ce;ht(null),kt(null);try{return e()}finally{ht(n),kt(t)}}function va(e,n,t,a=t){e.addEventListener(n,()=>da(t));const i=e.__on_r;i?e.__on_r=()=>{i(),a(!0)}:e.__on_r=()=>a(!0),mo()}const _a=new Set,un=new Set;function yo(e,n,t,a={}){function i(u){if(a.capture||xr.call(n,u),!u.cancelBubble)return da(()=>t==null?void 0:t.call(this,u))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?mn(()=>{n.addEventListener(e,i,a)}):n.addEventListener(e,i,a),i}function Ne(e,n,t,a,i){var u={capture:a,passive:i},c=yo(e,n,t,u);(n===document.body||n===window||n===document)&&ra(()=>{n.removeEventListener(e,c,u)})}function fr(e){for(var n=0;n<e.length;n++)_a.add(e[n]);for(var t of un)t(e)}function xr(e){var de;var n=this,t=n.ownerDocument,a=e.type,i=((de=e.composedPath)==null?void 0:de.call(e))||[],u=i[0]||e.target,c=0,g=e.__root;if(g){var _=i.indexOf(g);if(_!==-1&&(n===document||n===window)){e.__root=n;return}var s=i.indexOf(n);if(s===-1)return;_<=s&&(c=_)}if(u=i[c]||e.target,u!==n){wa(e,"currentTarget",{configurable:!0,get(){return u||t}});var x=ne,w=ce;ht(null),kt(null);try{for(var l,p=[];u!==null;){var m=u.assignedSlot||u.parentNode||u.host||null;try{var k=u["__"+a];if(k!=null&&(!u.disabled||e.target===u))if(ln(k)){var[q,...fe]=k;q.apply(u,[e,...fe])}else k.call(u,e)}catch(se){l?p.push(se):l=se}if(e.cancelBubble||m===n||m===null)break;u=m}if(l){for(let se of p)queueMicrotask(()=>{throw se});throw l}}finally{e.__root=n,delete e.currentTarget,ht(x),kt(w)}}}function Eo(e){var n=document.createElement("template");return n.innerHTML=e,n.content}function sn(e,n){var t=ce;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=n)}function Y(e,n){var t=(n&Ya)!==0,a=(n&za)!==0,i,u=!e.startsWith("<!>");return()=>{i===void 0&&(i=Eo(u?e:"<!>"+e),t||(i=Mr(i)));var c=a||Kn?document.importNode(i,!0):i.cloneNode(!0);if(t){var g=Mr(c),_=c.lastChild;sn(g,_)}else sn(c,c);return c}}function Rr(){var e=document.createDocumentFragment(),n=document.createComment(""),t=pn();return e.append(n,t),sn(n,t),e}function L(e,n){e!==null&&e.before(n)}function me(e,n){var t=n==null?"":typeof n=="object"?n+"":n;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function Ao(e,n){return Fo(e,n)}const rr=new Map;function Fo(e,{target:n,anchor:t,props:a={},events:i,context:u,intro:c=!0}){Ga();var g=new Set,_=w=>{for(var l=0;l<w.length;l++){var p=w[l];if(!g.has(p)){g.add(p);var m=bo(p);n.addEventListener(p,xr,{passive:m});var k=rr.get(p);k===void 0?(document.addEventListener(p,xr,{passive:m}),rr.set(p,1)):rr.set(p,k+1)}}};_(cn(_a)),un.add(_);var s=void 0,x=to(()=>{var w=t??n.appendChild(pn());return br(()=>{if(u){Lt({});var l=be;l.c=u}i&&(a.$$events=i),s=e(w,a)||{},u&&Vt()}),()=>{var m;for(var l of g){n.removeEventListener(l,xr);var p=rr.get(l);--p===0?(document.removeEventListener(l,xr),rr.delete(l)):rr.set(l,p)}un.delete(_),w!==t&&((m=w.parentNode)==null||m.removeChild(w))}});return To.set(s,x),s}let To=new WeakMap;function ee(e,n,[t,a]=[0,0]){var i=e,u=null,c=null,g=ze,_=t>0?vn:0,s=!1;const x=(l,p=!0)=>{s=!0,w(p,l)},w=(l,p)=>{g!==(g=l)&&(g?(u?Pr(u):p&&(u=br(()=>p(i))),c&&$r(c,()=>{c=null})):(c?Pr(c):p&&(c=br(()=>p(i,[t+1,a]))),u&&$r(u,()=>{u=null})))};wn(()=>{s=!1,n(x),s||w(null,null)},_)}function bt(e,n){return n}function Ro(e,n,t,a){for(var i=[],u=n.length,c=0;c<u;c++)bn(n[c].e,i,!0);var g=u>0&&i.length===0&&t!==null;if(g){var _=t.parentNode;Ka(_),_.append(t),a.clear(),Mt(e,n[0].prev,n[u-1].next)}ia(i,()=>{for(var s=0;s<u;s++){var x=n[s];g||(a.delete(x.k),Mt(e,x.prev,x.next)),Ct(x.e,!g)}})}function mt(e,n,t,a,i,u=null){var c=e,g={flags:n,items:new Map,first:null},_=(n&qn)!==0;if(_){var s=e;c=s.appendChild(pn())}var x=null,w=!1,l=X(()=>{var p=t();return ln(p)?p:p==null?[]:cn(p)});wn(()=>{var p=r(l),m=p.length;w&&m===0||(w=m===0,So(p,g,c,i,n,a,t),u!==null&&(m===0?x?Pr(x):x=br(()=>u(c)):x!==null&&$r(x,()=>{x=null})),r(l))})}function So(e,n,t,a,i,u,c){var Nt,Tt,Kt,Rt;var g=(i&La)!==0,_=(i&(xn|hn))!==0,s=e.length,x=n.items,w=n.first,l=w,p,m=null,k,q=[],fe=[],de,se,N,O;if(g)for(O=0;O<s;O+=1)de=e[O],se=u(de,O),N=x.get(se),N!==void 0&&((Nt=N.a)==null||Nt.measure(),(k??(k=new Set)).add(N));for(O=0;O<s;O+=1){if(de=e[O],se=u(de,O),N=x.get(se),N===void 0){var Q=l?l.e.nodes_start:t;m=Uo(Q,n,m,m===null?n.first:m.next,de,se,O,a,i,c),x.set(se,m),q=[],fe=[],l=m.next;continue}if(_&&Bo(N,de,O,i),(N.e.f&yt)!==0&&(Pr(N.e),g&&((Tt=N.a)==null||Tt.unfix(),(k??(k=new Set)).delete(N))),N!==l){if(p!==void 0&&p.has(N)){if(q.length<fe.length){var K=fe[0],Z;m=K.prev;var ve=q[0],Be=q[q.length-1];for(Z=0;Z<q.length;Z+=1)In(q[Z],K,t);for(Z=0;Z<fe.length;Z+=1)p.delete(fe[Z]);Mt(n,ve.prev,Be.next),Mt(n,m,ve),Mt(n,Be,K),l=K,m=Be,O-=1,q=[],fe=[]}else p.delete(N),In(N,l,t),Mt(n,N.prev,N.next),Mt(n,N,m===null?n.first:m.next),Mt(n,m,N),m=N;continue}for(q=[],fe=[];l!==null&&l.k!==se;)(l.e.f&yt)===0&&(p??(p=new Set)).add(l),fe.push(l),l=l.next;if(l===null)continue;N=l}q.push(N),m=N,l=N.next}if(l!==null||p!==void 0){for(var Ge=p===void 0?[]:cn(p);l!==null;)(l.e.f&yt)===0&&Ge.push(l),l=l.next;var ft=Ge.length;if(ft>0){var Gt=(i&qn)!==0&&s===0?t:null;if(g){for(O=0;O<ft;O+=1)(Kt=Ge[O].a)==null||Kt.measure();for(O=0;O<ft;O+=1)(Rt=Ge[O].a)==null||Rt.fix()}Ro(n,Ge,Gt,x)}}g&&mn(()=>{var Ot;if(k!==void 0)for(N of k)(Ot=N.a)==null||Ot.apply()}),ce.first=n.first&&n.first.e,ce.last=m&&m.e}function Bo(e,n,t,a){(a&xn)!==0&&gr(e.v,n),(a&hn)!==0?gr(e.i,t):e.i=t}function Uo(e,n,t,a,i,u,c,g,_,s){var x=(_&xn)!==0,w=(_&Va)===0,l=x?w?D(i):pr(i):i,p=(_&hn)===0?c:pr(c),m={i:p,v:l,k:u,a:null,e:null,prev:t,next:a};try{return m.e=br(()=>g(e,l,p,s),qa),m.e.prev=t&&t.e,m.e.next=a&&a.e,t===null?n.first=m:(t.next=m,t.e.next=m.e),a!==null&&(a.prev=m,a.e.prev=m.e),m}finally{}}function In(e,n,t){for(var a=e.next?e.next.e.nodes_start:t,i=n?n.e.nodes_start:t,u=e.e.nodes_start;u!==a;){var c=Hr(u);i.before(u),u=c}}function Mt(e,n,t){n===null?e.first=t:(n.next=t,n.e.next=t&&t.e),t!==null&&(t.prev=n,t.e.prev=n&&n.e)}function xa(e){var n,t,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(t=xa(e[n]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function Io(){for(var e,n,t=0,a="",i=arguments.length;t<i;t++)(e=arguments[t])&&(n=xa(e))&&(a&&(a+=" "),a+=n);return a}function Do(e){return typeof e=="object"?Io(e):e??""}function Mo(e,n,t){var a=e==null?"":""+e;return a===""?null:a}function Dn(e,n,t,a,i,u){var c=e.__className;if(c!==t){var g=Mo(t);g==null?e.removeAttribute("class"):e.className=g,e.__className=t}return u}const $o=Symbol("is custom element"),Po=Symbol("is html");function nr(e,n,t,a){var i=Co(e);i[n]!==(i[n]=t)&&(n==="loading"&&(e[Ta]=t),t==null?e.removeAttribute(n):typeof t!="string"&&ko(e).includes(n)?e[n]=t:e.setAttribute(n,t))}function Co(e){return e.__attributes??(e.__attributes={[$o]:e.nodeName.includes("-"),[Po]:e.namespaceURI===ja})}var Mn=new Map;function ko(e){var n=Mn.get(e.nodeName);if(n)return n;Mn.set(e.nodeName,n=[]);for(var t,a=e,i=Element.prototype;i!==a;){t=Wn(a);for(var u in t)t[u].set&&n.push(u);a=fn(a)}return n}function Zr(e,n,t=n){var a=yr();va(e,"input",i=>{var u=i?e.defaultValue:e.value;if(u=Qr(e)?Jr(u):u,t(u),a&&u!==(u=n())){var c=e.selectionStart,g=e.selectionEnd;e.value=u??"",g!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(g,e.value.length))}}),pt(n)==null&&e.value&&t(Qr(e)?Jr(e.value):e.value),lr(()=>{var i=n();Qr(e)&&i===Jr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ha(e,n,t=n){va(e,"change",a=>{var i=a?e.defaultChecked:e.checked;t(i)}),pt(n)==null&&t(e.checked),lr(()=>{var a=n();e.checked=!!a})}function Qr(e){var n=e.type;return n==="number"||n==="range"}function Jr(e){return e===""?null:+e}function $n(e,n){return e===n||(e==null?void 0:e[Yt])===n}function Lo(e={},n,t,a){return gn(()=>{var i,u;return lr(()=>{i=u,u=[],pt(()=>{e!==t(...u)&&(n(e,...u),i&&$n(t(...i),e)&&n(null,...i))})}),()=>{mn(()=>{u&&$n(t(...u),e)&&n(null,...u)})}}),e}function qt(e=!1){const n=be,t=n.l.u;if(!t)return;let a=()=>go(n.s);if(e){let i=0,u={};const c=wr(()=>{let g=!1;const _=n.s;for(const s in _)_[s]!==u[s]&&(u[s]=_[s],g=!0);return g&&i++,i});a=()=>r(c)}t.b.length&&eo(()=>{Pn(n,a),rn(t.b)}),Sn(()=>{const i=pt(()=>t.m.map(ya));return()=>{for(const u of i)typeof u=="function"&&u()}}),t.a.length&&Sn(()=>{Pn(n,a),rn(t.a)})}function Pn(e,n){if(e.l.s)for(const t of e.l.s)r(t);n()}let Sr=!1;function Vo(e){var n=Sr;try{return Sr=!1,[e(),Sr]}finally{Sr=n}}function Cn(e){var n;return((n=e.ctx)==null?void 0:n.d)??!1}function Pe(e,n,t,a){var K;var i=(t&Na)!==0,u=!mr||(t&Oa)!==0,c=(t&Wa)!==0,g=(t&Xa)!==0,_=!1,s;c?[s,_]=Vo(()=>e[n]):s=e[n];var x=Yt in e||Fa in e,w=c&&(((K=ir(e,n))==null?void 0:K.set)??(x&&n in e&&(Z=>e[n]=Z)))||void 0,l=a,p=!0,m=!1,k=()=>(m=!0,p&&(p=!1,g?l=pt(a):l=a),l);s===void 0&&a!==void 0&&(w&&u&&Da(),s=k(),w&&w(s));var q;if(u)q=()=>{var Z=e[n];return Z===void 0?k():(p=!0,m=!1,Z)};else{var fe=(i?wr:X)(()=>e[n]);fe.f|=Yn,q=()=>{var Z=r(fe);return Z!==void 0&&(l=void 0),Z===void 0?l:Z}}if((t&Ha)===0)return q;if(w){var de=e.$$legacy;return function(Z,ve){return arguments.length>0?((!u||!ve||de||_)&&w(ve?q():Z),Z):q()}}var se=!1,N=!1,O=D(s),Q=wr(()=>{var Z=q(),ve=r(O);return se?(se=!1,N=!0,ve):(N=!1,O.v=Z)});return c&&r(Q),i||(Q.equals=_n),function(Z,ve){if($t!==null&&(se=N,q(),r(O)),arguments.length>0){const Be=ve?r(Q):u&&c?Xt(Z):Z;if(!Q.equals(Be)){if(se=!0,T(O,Be),m&&l!==void 0&&(l=Be),Cn(Q))return Z;pt(()=>r(Q))}return Z}return Cn(Q)?Q.v:r(Q)}}const No="5";var Hn;typeof window<"u"&&((Hn=window.__svelte??(window.__svelte={})).v??(Hn.v=new Set)).add(No);ka();const Oo=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,Ho=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,Wo=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,Xo=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,Yo=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,zo=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,jo=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,qo=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,ar=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],kn=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],Go=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],Ko=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],Zo=[{count:2,offset:0}],Dt=(e,n,t,a)=>{const i=e.createShader(n);if(!i)throw new Error(`failed to create shader '${a}'`);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(i);throw new Error(`compilation error in shader '${a}':
${u}`)}return i},_r=(e,n,t,a)=>{const i=e.createProgram();if(!i)throw new Error(`failed to create program '${a}'`);if(e.attachShader(i,n),e.attachShader(i,t),e.linkProgram(i),e.detachShader(i,n),e.detachShader(i,t),!e.getProgramParameter(i,e.LINK_STATUS)){const u=e.getProgramInfoLog(i);throw new Error(`link error in program '${a}':
${u}`)}return i};function*Qo(e,n){let t=0;for(;!(t>e.length);){const a=t+n;yield e.slice(t,a),t=a}}function*Jo(e,n){let t=0;for(;;){const a=t+n;if(a>e.length)break;yield e.slice(t,a),t=a}}function en(e,n,t,a){const i=n*2,u=e.map(t);return u.length<i?u:Qo(u,n).map(c=>[...c]).map(a).toArray()}function Et(e){return Math.round(e*255)}let _t=null;const ei=(e,n,t,a)=>{_t={value:e,level:n,draggedID:t,set:a}},ti=()=>{_t=null},ri=(e,n,t)=>{!_t||_t.level!==e||_t.draggedID===n||(_t.set&&(_t.set(_t.value),_t.set=null),t(_t.value))};var ni=(e,n)=>n(!1),ai=Y('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),oi=(e,n)=>n(!0),ii=Y('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),ui=Y('<input type="checkbox">'),si=Y("<!> <!> <label> </label> <br>",1);function Ve(e,n){Lt(n,!1);let t=Pe(n,"expanded",12),a=Pe(n,"id",8),i=Pe(n,"text",8),u=Pe(n,"checked",12,null),c=Pe(n,"level",8),g=Pe(n,"onexpandedchange",8,null),_=Pe(n,"oncheckedchange",8,null);const s=Q=>{t(Q),g()&&g()()},x=Q=>{u(Q),_()&&_()()},w=()=>ei(!u(),c(),a(),x),l=()=>ri(c(),a(),x),p=ti;qt();var m=si(),k=ue(m);{var q=Q=>{var K=ai();K.__click=[ni,s],Qe(()=>nr(K,"id",u()===null?a():null)),L(Q,K)},fe=Q=>{var K=ii();K.__click=[oi,s],Qe(()=>nr(K,"id",u()===null?a():null)),L(Q,K)};ee(k,Q=>{t()?Q(q):Q(fe,!1)})}var de=C(k,2);{var se=Q=>{var K=ui();nr(K,"draggable",!0),K.__change=function(...Z){var ve;(ve=_())==null||ve.apply(this,Z)},Qe(()=>nr(K,"id",a())),Ne("dragstart",K,w),Ne("dragenter",K,l),Ne("dragend",K,p),ha(K,u),L(Q,K)};ee(de,Q=>{u()!==null&&Q(se)})}var N=C(de,2);nr(N,"draggable",!0),N.__change=function(...Q){var K;(K=_())==null||K.apply(this,Q)};var O=ye(N);Qe(()=>{nr(N,"for",a()),me(O,i())}),Ne("dragstart",N,w),Ne("dragenter",N,l),Ne("dragend",N,p),L(e,m),Vt()}fr(["click","change"]);var li=(e,n,t)=>n()(t()),ci=Y('<button class="px-1 bg-gray-200 hover:bg-gray-100">view image</button> <br>',1),fi=Y('<div class="ml-2 w-full"><!> <br> <br> <br> <br></div>');function Ln(e,n){Lt(n,!1);let t=Pe(n,"image",8),a=Pe(n,"view",8,null);qt();var i=fi(),u=ye(i);{var c=w=>{var l=ci(),p=ue(l);p.__click=[li,a,t],L(w,l)};ee(u,w=>{a()&&w(c)})}var g=C(u),_=C(g,2),s=C(_,2),x=C(s,2);Qe((w,l,p,m)=>{me(g,` screen: ${t().x??""},${t().y??""}
  ${t().w??""}x${t().h??""} `),me(_,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),me(s,` rgb: ${w??""}, ${l??""}, ${p??""} `),me(x,` alpha: ${m??""} `)},[()=>Et(t().r),()=>Et(t().g),()=>Et(t().b),()=>t().a.toPrecision(4)],X),L(e,i),Vt()}fr(["click"]);var di=(e,n,t)=>n()(t()),vi=Y('<button class="px-1 bg-gray-200 hover:bg-gray-100">view texture</button> <br>',1),_i=Y(" <br>",1),xi=Y('<div class="ml-2 w-full"><!> <!> <br> <br> <br> <br></div>');function Vn(e,n){Lt(n,!1);let t=Pe(n,"vertex",8),a=Pe(n,"view",8,null);qt();var i=xi(),u=ye(i);{var c=p=>{var m=vi(),k=ue(m);k.__click=[di,a,t],L(p,m)};ee(u,p=>{a()&&p(c)})}var g=C(u,2);{var _=p=>{var m=_i(),k=ue(m);Qe(()=>me(k,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `)),L(p,m)};ee(g,p=>{t().modelpoint&&p(_)})}var s=C(g),x=C(s,2),w=C(x,2),l=C(w,2);Qe((p,m,k,q,fe,de)=>{me(s,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),me(x,` uv: ${p??""}, ${m??""} `),me(w,` rgb: ${k??""}, ${q??""}, ${fe??""} `),me(l,` alpha: ${de??""} `)},[()=>t().u.toPrecision(4),()=>t().v.toPrecision(4),()=>Et(t().r),()=>Et(t().g),()=>Et(t().b),()=>t().a.toPrecision(4)],X),L(e,i),Vt()}fr(["click"]);var hi=Y('<div class="ml-2 w-full"> <br> <br> <br></div>');function Nn(e,n){Lt(n,!1);let t=Pe(n,"vertex",8);qt();var a=hi(),i=ye(a),u=C(i,2),c=C(u,2);Qe((g,_,s,x)=>{me(i,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `),me(u,` rgb: ${g??""}, ${_??""}, ${s??""} `),me(c,` alpha: ${x??""} `)},[()=>Et(t().r),()=>Et(t().g),()=>Et(t().b),()=>t().a.toPrecision(4)],X),L(e,a),Vt()}var pi=Y("<div> </div>"),gi=(e,n,t)=>{const a=n().textureId,i=t().textures[a];t(t().selectedTextureId=a.toString(),!0),t(t().selectedTexture=i,!0),t(t().textureBoundX=0,!0),t(t().textureBoundY=0,!0),t(t().textureBoundW=i.width,!0),t(t().textureBoundH=i.height,!0),t(t().textureViewX=0,!0),t(t().textureViewY=0,!0),t(t().textureViewScale=100,!0),t().redraw()},wi=Y('<button class="px-1 bg-gray-200 hover:bg-gray-100"> </button> <br>',1),bi=Y("<!> <!>",1),mi=Y('<div class="ml-1"></div>'),yi=Y("<!> <!>",1),Ei=Y("<!> <!>",1),Ai=Y('<div class="ml-1"><!></div>'),Fi=Y("<!> <!>",1),Ti=Y("<!> <!>",1),Ri=Y('<div class="ml-1"></div>'),Si=Y("<!> <!>",1),Bi=Y("<!> <!>",1),Ui=Y('<div class="ml-1"><!></div>'),Ii=Y("<!> <!>",1),Di=Y("<!> <!>",1),Mi=Y('<div class="ml-1"></div>'),$i=Y("<!> <!>",1),Pi=Y("<!> <!>",1),Ci=Y('<div class="ml-1"><!></div>'),ki=Y("<!> <!>",1),Li=Y('<div class="ml-1"><!> <!></div>'),Vi=Y(" <br> <!> <!>",1),Ni=Y('<div class="ml-3 text-sm"><!> <!> <!> <!> <!></div>');function Oi(e,n){Lt(n,!1);let t=Pe(n,"entity",12),a=Pe(n,"menuData",12),i=Pe(n,"level",8);const u=6,c=100;let g=D(!1),_=D(!1),s=D(!1);function x(S){return"images"in S}function w(S){return"vertices"in S}function l(S){return"vertices"in S}const p=(S,J)=>{const H=S[0];let he=H.x,Je=H.x,Ce=H.y,Ue=H.y;for(const ae of S)ae.x<he&&(he=ae.x),ae.x>Je&&(Je=ae.x),ae.y<Ce&&(Ce=ae.y),ae.y>Ue&&(Ue=ae.y);return{x:he,y:Ce,w:Je-he,h:Ue-Ce,ax:H.ax,ay:H.ay,aw:H.aw,ah:H.ah,r:H.r,g:H.g,b:H.b,a:H.a,expanded:!1,index:J}},m=(S,J)=>{const H=J*c,he=H*u;return{images:S,desc:`${H}-${H+S.length-1}`,expanded:!1,vertexRangeStart:he,vertexRangeEnd:he+S.length*u}},k=(S,J)=>({modelpoint:{...S},expanded:!1,index:J,...S}),q=(S,J)=>({modelpoint:null,expanded:!1,index:J,...S}),fe=(S,J)=>{const H=J*c;return{vertices:S,desc:`${H}-${H+S.length-1}`,expanded:!1}},de=(S,J)=>({modelpoint:{...S},expanded:!1,index:J,...S}),se=(S,J)=>{const H=J*c;return{vertices:S,desc:`${H}-${H+S.length-1}`,expanded:!1}},N=(S,J)=>({vertices:en(S.vertices,c,de,se),vertexCount:S.vertices.length,expanded:!1,verticesExpanded:!1,index:J});let O=D(null),Q=D(0),K=D(null),Z=D(0),ve=D(null),Be=D(0);if(t().type==="batch2d"||t().type==="minimap2d"){const S=[...Jo(t().vertices,u)];T(Q,S.length),T(O,en(S,c,p,m))}else if(t().vertices){const S=t().type!=="renderparticles"?k:q;T(Z,t().vertices.length),T(K,en(t().vertices,c,S,fe))}t().models&&(T(Be,t().models.length),T(ve,t().models.map(N)));const Ge=S=>{const J=t().textureId,H=a().textures[J];a(a().selectedTextureId=t().uuid,!0),a(a().selectedTexture=H,!0),a(a().textureBoundX=S.ax,!0),a(a().textureBoundY=S.ay,!0),a(a().textureBoundW=S.aw,!0),a(a().textureBoundH=S.ah,!0),a(a().textureViewX=0,!0),a(a().textureViewY=0,!0),a(a().textureViewScale=100,!0),a(a().viewIsWholeAtlas=!1,!0),a().redraw()};qt();var ft=Ni(),Gt=ye(ft);{var Nt=S=>{var J=pi(),H=ye(J);Qe(()=>me(H,`animated: ${t().animated??""}`)),L(S,J)};ee(Gt,S=>{typeof t().animated=="boolean"&&S(Nt)})}var Tt=C(Gt,2);{var Kt=S=>{var J=wi(),H=ue(J);H.__click=[gi,t,a];var he=ye(H);Qe(()=>me(he,`texture: #${t().textureId??""}`)),L(S,J)};ee(Tt,S=>{typeof t().textureId=="number"&&S(Kt)})}var Rt=C(Tt,2);{var Ot=S=>{var J=Fi(),H=ue(J);const he=X(()=>`${t().uuid}-images2d`),Je=X(()=>`2D images (${r(Q)})`);Ve(H,{get id(){return r(he)},get text(){return r(Je)},get level(){return i()},get expanded(){return r(g)},set expanded(ae){T(g,ae)},$$legacy:!0});var Ce=C(H,2);{var Ue=ae=>{var Ee=Rr(),We=ue(Ee);mt(We,1,()=>r(O),bt,(gt,j,pe)=>{var dt=Ai(),nt=ye(dt);{var Ie=_e=>{var ge=yi(),Ae=ue(ge),Xe=()=>r(j).images.every(te=>t().enabledVerticesList[te.index*u]),Fe=te=>{for(let Te=r(j).vertexRangeStart;Te<r(j).vertexRangeEnd;Te+=1)t(t().enabledVerticesList[Te]=te,!0)};const Le=X(()=>`${t().uuid}-images-${r(j).desc}`),De=X(()=>`[Images ${r(j).desc}]`),oe=X(()=>i()+1);Ve(Ae,{get checked(){return Xe()},set checked(te){Fe(te)},get oncheckedchange(){return a().redraw},get id(){return r(Le)},get text(){return r(De)},get level(){return r(oe)},get expanded(){return r(j).expanded},set expanded(te){r(j).expanded=te,je(()=>r(O))},$$legacy:!0});var v=C(Ae,2);{var le=te=>{var Te=mi();mt(Te,5,()=>r(j).images,bt,(at,Ye,wt)=>{var ot=bi(),we=ue(ot),Jt=()=>t().enabledVerticesList[r(Ye).index*u],it=Re=>{for(let ut=0;ut<u;ut+=1)t(t().enabledVerticesList[r(Ye).index*u+ut]=Re,!0)};const St=X(()=>`${t().uuid}-images-${r(j).desc}-${wt}`),Me=X(()=>i()+2);Ve(we,{get checked(){return Jt()},set checked(Re){it(Re)},get oncheckedchange(){return a().redraw},get id(){return r(St)},text:`Image ${pe*c+wt}`,get level(){return r(Me)},get expanded(){return r(Ye).expanded},set expanded(Re){r(Ye).expanded=Re,je(()=>(r(O),r(j).images))},$$legacy:!0});var er=C(we,2);{var vt=Re=>{Ln(Re,{get image(){return r(Ye)},view:Ge})};ee(er,Re=>{r(Ye).expanded&&Re(vt)})}L(at,ot)}),L(te,Te)};ee(v,te=>{r(j).expanded&&te(le)})}L(_e,ge)},ke=_e=>{var ge=Ei(),Ae=ue(ge),Xe=()=>t().enabledVerticesList[r(j).index*u],Fe=le=>{for(let te=0;te<u;te+=1)t(t().enabledVerticesList[r(j).index*u+te]=le,!0)};const Le=X(()=>`${t().uuid}-images-${pe}`),De=X(()=>i()+1);Ve(Ae,{get checked(){return Xe()},set checked(le){Fe(le)},get oncheckedchange(){return a().redraw},get id(){return r(Le)},text:`Image ${pe}`,get level(){return r(De)},get expanded(){return r(j).expanded},set expanded(le){r(j).expanded=le,je(()=>r(O))},$$legacy:!0});var oe=C(Ae,2);{var v=le=>{Ln(le,{get image(){return r(j)},view:Ge})};ee(oe,le=>{r(j).expanded&&le(v)})}L(_e,ge)};ee(nt,_e=>{x(r(j))?_e(Ie):_e(ke,!1)})}L(gt,dt)}),L(ae,Ee)};ee(Ce,ae=>{r(g)&&ae(Ue)})}L(S,J)};ee(Rt,S=>{r(O)&&r(Q)&&S(Ot)})}var Ar=C(Rt,2);{var Zt=S=>{var J=Ii(),H=ue(J);const he=X(()=>`${t().uuid}-vertices3d`),Je=X(()=>`3D vertices (${r(Z)})`);Ve(H,{get id(){return r(he)},get text(){return r(Je)},get level(){return i()},get expanded(){return r(_)},set expanded(ae){T(_,ae)},$$legacy:!0});var Ce=C(H,2);{var Ue=ae=>{var Ee=Rr(),We=ue(Ee);mt(We,1,()=>r(K),bt,(gt,j,pe)=>{var dt=Ui(),nt=ye(dt);{var Ie=_e=>{var ge=Si(),Ae=ue(ge);const Xe=X(()=>`${t().uuid}-vertices-${r(j).desc}`),Fe=X(()=>`[Vertices ${r(j).desc}]`),Le=X(()=>i()+1);Ve(Ae,{get id(){return r(Xe)},get text(){return r(Fe)},get level(){return r(Le)},get expanded(){return r(j).expanded},set expanded(v){r(j).expanded=v,je(()=>r(K))},$$legacy:!0});var De=C(Ae,2);{var oe=v=>{var le=Ri();mt(le,5,()=>r(j).vertices,bt,(te,Te,at)=>{var Ye=Ti(),wt=ue(Ye);const ot=X(()=>`${t().uuid}-vertices-${r(j).desc}-${r(Te).index}`),we=X(()=>`Vertex ${r(Te).index}`),Jt=X(()=>i()+2);Ve(wt,{get id(){return r(ot)},get text(){return r(we)},get level(){return r(Jt)},get expanded(){return r(Te).expanded},set expanded(Me){r(Te).expanded=Me,je(()=>(r(K),r(j).vertices))},$$legacy:!0});var it=C(wt,2);{var St=Me=>{Vn(Me,{get vertex(){return r(Te)},view:Ge})};ee(it,Me=>{r(Te).expanded&&Me(St)})}L(te,Ye)}),L(v,le)};ee(De,v=>{r(j).expanded&&v(oe)})}L(_e,ge)},ke=_e=>{var ge=Bi(),Ae=ue(ge);const Xe=X(()=>`${t().uuid}-vertices-${r(j).index}`),Fe=X(()=>`Vertex ${r(j).index}`),Le=X(()=>i()+1);Ve(Ae,{get id(){return r(Xe)},get text(){return r(Fe)},get level(){return r(Le)},get expanded(){return r(j).expanded},set expanded(v){r(j).expanded=v,je(()=>r(K))},$$legacy:!0});var De=C(Ae,2);{var oe=v=>{Vn(v,{get vertex(){return r(j)},view:Ge})};ee(De,v=>{r(j).expanded&&v(oe)})}L(_e,ge)};ee(nt,_e=>{w(r(j))?_e(Ie):_e(ke,!1)})}L(gt,dt)}),L(ae,Ee)};ee(Ce,ae=>{r(_)&&ae(Ue)})}L(S,J)};ee(Ar,S=>{r(K)&&r(Z)&&S(Zt)})}var Qt=C(Ar,2);{var Fr=S=>{var J=Vi(),H=ue(J),he=C(H,3);const Je=X(()=>`${t().uuid}-models`),Ce=X(()=>`Models (${r(Be)})`);Ve(he,{get id(){return r(Je)},get text(){return r(Ce)},get level(){return i()},get expanded(){return r(s)},set expanded(Ee){T(s,Ee)},$$legacy:!0});var Ue=C(he,2);{var ae=Ee=>{var We=Rr(),gt=ue(We);mt(gt,1,()=>r(ve),bt,(j,pe,dt)=>{var nt=Li(),Ie=ye(nt);const ke=X(()=>`${t().uuid}-models`),_e=X(()=>`Model ${r(pe).index}`),ge=X(()=>i()+1);Ve(Ie,{get id(){return r(ke)},get text(){return r(_e)},get level(){return r(ge)},get expanded(){return r(pe).expanded},set expanded(Fe){r(pe).expanded=Fe,je(()=>r(ve))},$$legacy:!0});var Ae=C(Ie,2);{var Xe=Fe=>{var Le=ki(),De=ue(Le);const oe=X(()=>`${t().uuid}-vertices`),v=X(()=>`Vertices (${r(pe).vertexCount})`),le=X(()=>i()+2);Ve(De,{get id(){return r(oe)},get text(){return r(v)},get level(){return r(le)},get expanded(){return r(pe).verticesExpanded},set expanded(at){r(pe).verticesExpanded=at,je(()=>r(ve))},$$legacy:!0});var te=C(De,2);{var Te=at=>{var Ye=Rr(),wt=ue(Ye);mt(wt,1,()=>r(pe).vertices,bt,(ot,we,Jt)=>{var it=Ci(),St=ye(it);{var Me=vt=>{var Re=$i(),ut=ue(Re);const dr=X(()=>`${t().uuid}-vertices-${r(we).desc}`),h=X(()=>`[Vertices ${r(we).desc}]`),o=X(()=>i()+3);Ve(ut,{get id(){return r(dr)},get text(){return r(h)},get level(){return r(o)},get expanded(){return r(we).expanded},set expanded(M){r(we).expanded=M,je(()=>(r(ve),r(pe).vertices))},$$legacy:!0});var d=C(ut,2);{var f=M=>{var b=Mi();mt(b,5,()=>r(we).vertices,bt,(y,U,R)=>{var $=Di(),V=ue($);const z=X(()=>`${t().uuid}-vertices-${r(we).desc}-${r(U).index}`),F=X(()=>`Vertex ${r(U).index}`),W=X(()=>i()+4);Ve(V,{get id(){return r(z)},get text(){return r(F)},get level(){return r(W)},get expanded(){return r(U).expanded},set expanded(P){r(U).expanded=P,je(()=>(r(ve),r(pe).vertices,r(we).vertices))},$$legacy:!0});var E=C(V,2);{var B=P=>{Nn(P,{get vertex(){return r(U)}})};ee(E,P=>{r(U).expanded&&P(B)})}L(y,$)}),L(M,b)};ee(d,M=>{r(we).expanded&&M(f)})}L(vt,Re)},er=vt=>{var Re=Pi(),ut=ue(Re);const dr=X(()=>`${t().uuid}-${r(pe).index}-vertex-${r(we).index}`),h=X(()=>`Vertex ${r(we).index}`),o=X(()=>i()+3);Ve(ut,{get id(){return r(dr)},get text(){return r(h)},get level(){return r(o)},get expanded(){return r(we).expanded},set expanded(M){r(we).expanded=M,je(()=>(r(ve),r(pe).vertices))},$$legacy:!0});var d=C(ut,2);{var f=M=>{Nn(M,{get vertex(){return r(we)}})};ee(d,M=>{r(we).expanded&&M(f)})}L(vt,Re)};ee(St,vt=>{l(r(we))?vt(Me):vt(er,!1)})}L(ot,it)}),L(at,Ye)};ee(te,at=>{r(pe).verticesExpanded&&at(Te)})}L(Fe,Le)};ee(Ae,Fe=>{r(pe).expanded&&Fe(Xe)})}L(j,nt)}),L(Ee,We)};ee(Ue,Ee=>{r(s)&&Ee(ae)})}Qe(()=>me(H,`screen: ${t().targetx??""},${t().targety??""}
    ${t().targetw??""}x${t().targeth??""} `)),L(S,J)};ee(Qt,S=>{r(ve)&&r(Be)&&S(Fr)})}L(e,ft),Vt()}fr(["click"]);var Hi=(e,n,t,a)=>n(t(),a()),Wi=Y('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),Xi=Y("<div><!> <!></div>"),Yi=Y('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function zi(e,n){Lt(n,!1);let t=Pe(n,"data",12);const a=(_,s)=>{t().selectedTexture===s?t(t().selectedTexture=null,!0):(t(t().selectedTextureId=_,!0),t(t().selectedTexture=s,!0),t(t().textureBoundX=0,!0),t(t().textureBoundY=0,!0),t(t().textureBoundW=s.width,!0),t(t().textureBoundH=s.height,!0),t(t().textureViewX=0,!0),t(t().textureViewY=0,!0),t(t().textureViewScale=100,!0),t(t().viewIsWholeAtlas=!0,!0)),t().redraw()},i=1;qt();var u=Yi(),c=C(ue(u),2);mt(c,1,()=>Object.entries(t().textures),bt,(_,s)=>{let x=()=>r(s)[0],w=()=>r(s)[1];var l=Wi(),p=ye(l);p.__click=[Hi,a,x,w];var m=ye(p);Qe(()=>{Dn(p,1,Do(t().selectedTexture===w()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),me(m,`#${x()??""}`)}),L(_,l)});var g=C(c,6);mt(g,1,()=>t().entities,bt,(_,s,x)=>{var w=Xi();Dn(w,1,`select-none m-0 border-none w-full ${x&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var l=ye(w);Ve(l,{id:`menu${x}`,get text(){return t().entities[x].type},get oncheckedchange(){return t().redraw},level:i,get expanded(){return t().entities[x].expanded},set expanded(k){t().entities[x].expanded=k,je(()=>t().entities)},get checked(){return t().entities[x].enabled},set checked(k){t().entities[x].enabled=k,je(()=>t().entities)},$$legacy:!0});var p=C(l,2);{var m=k=>{Oi(k,{level:i+1,get entity(){return t().entities[x]},set entity(q){t().entities[x]=q,je(()=>t().entities)},get menuData(){return t()},set menuData(q){t(q)},$$legacy:!0})};ee(p,k=>{t().entities[x].expanded&&k(m)})}L(_,w)}),L(e,u),Vt()}fr(["click"]);const Se=[];for(let e=0;e<256;++e)Se.push((e+256).toString(16).slice(1));function ji(e,n=0){return(Se[e[n+0]]+Se[e[n+1]]+Se[e[n+2]]+Se[e[n+3]]+"-"+Se[e[n+4]]+Se[e[n+5]]+"-"+Se[e[n+6]]+Se[e[n+7]]+"-"+Se[e[n+8]]+Se[e[n+9]]+"-"+Se[e[n+10]]+Se[e[n+11]]+Se[e[n+12]]+Se[e[n+13]]+Se[e[n+14]]+Se[e[n+15]]).toLowerCase()}let tn;const qi=new Uint8Array(16);function Gi(){if(!tn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");tn=crypto.getRandomValues.bind(crypto)}return tn(qi)}const Ki=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),On={randomUUID:Ki};function or(e,n,t){var i;if(On.randomUUID&&!e)return On.randomUUID();e=e||{};const a=e.random??((i=e.rng)==null?void 0:i.call(e))??Gi();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,ji(a)}var Zi=(e,n,t)=>T(n,t),Qi=(e,n,t)=>T(n,t),Ji=(e,n)=>T(n,!1),eu=Y('<div class="overflow-auto absolute w-60 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),tu=(e,n)=>T(n,!0),ru=Y('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),nu=(e,n,t,a,i)=>{Ke(n,r(n).selectedTexture=null),t(r(a),r(i))},au=Y('<input type="checkbox"> from x: <input class="w-14 border border-black" type="number"> to <input class="w-14 border border-black" type="number">',1),ou=Y('RGBA data for all rows: <input class="w-4 h-4 opacity-75 hover:opacity-100" type="image" src="plugin://app/images/clipboard-solid.svg" alt="copy">',1),iu=Y('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close"> <div class="absolute top-1 w-full h-fit grid place-items-center pointer-events-none"><div class="w-fit h-full rounded-lg bg-gray-100 pointer-events-auto px-2 py-1"><div class="w-16 h-full table-cell"> <br> </div> <div class="w-28 h-full table-cell px-1 mx-1"> <br> </div> <div class="w-fit h-full table-cell px-1">RGBA data for row: <input class="w-18 border border-black" type="number"> <input class="w-4 h-4 opacity-75 enabled:hover:opacity-100" type="image" src="plugin://app/images/clipboard-solid.svg" alt="copy"> <br> <!></div></div></div>',1),uu=Y('<canvas class="absolute right-0"></canvas> <!> <!>',1);function su(e,n){Lt(n,!1);const t=D();let a=D({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",textureBoundX:0,textureBoundY:0,textureBoundW:1,textureBoundH:1,textureViewX:0,textureViewY:0,textureViewScale:100,viewIsWholeAtlas:!1,redraw:()=>te(r(oe),r(v))});const i=h=>{const o=Rt.get(h);return o?parseInt(o):0},u=0;let c=D(null),g=D(null),_=D(null),s=D(null),x=D(null),w=D(null),l=D(null),p=D(null),m=D(null),k=D(null),q=D(null),fe=D(null),de=D(null),se=D(null),N=D(null),O=D(null),Q=D(null),K=D(null),Z=D(null),ve=D(null),Be=D(null),Ge=D(null),ft=null;const Gt=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),Nt=10,Tt=1e3,Kt=10,Rt=new URLSearchParams(window.location.search),Ot=Rt.get("n"),Ar=Ot?Math.max(parseInt(Ot),1):1,Zt=i("w"),Qt=i("h"),Fr=i("gx"),S=i("gy"),J=i("gw"),H=i("gh");let he=0,Je=D(0),Ce=D(),Ue=null,ae=null,Ee=0,We=0,gt,j,pe=D(!1),dt=D(!1),nt=D(null),Ie=D(null),ke=D(null),_e=D(null),ge=D(!1),Ae=D(!1),Xe=D(!1),Fe=D(!1),Le=D(!1),De=D(!1),oe=D(null),v=D(null);const le=(h,o,d,f)=>{h.bindBuffer(h.ARRAY_BUFFER,o.vbo);for(let b=0;b<r(Je);b+=1){const y=o.attribs[b];if(!y){h.disableVertexAttribArray(b);continue}h.enableVertexAttribArray(b),h.vertexAttribPointer(b,y.count,h.FLOAT,!1,o.step,y.offset)}if(!f){h.drawArrays(h.TRIANGLES,0,d);return}let M=null;for(let b=0;b<d;b+=1){const y=f[b];M===null?y&&(M=b):y||(h.drawArrays(h.TRIANGLES,M,b-M),M=null)}M!==null&&h.drawArrays(h.TRIANGLES,M,d-M)},te=(h,o)=>{if(o.viewport(0,0,h.width,h.height),o.scissor(0,0,h.width,h.height),o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),!r(pe)){o.viewport(0,0,h.width,h.height);const d=()=>{o.clearColor(.525,.968,.495,1),o.clear(o.COLOR_BUFFER_BIT)},f=()=>{o.clearColor(.2,.2,.2,1),o.clear(o.COLOR_BUFFER_BIT)},M=Math.min(he/Ar,1),b=Math.floor(h.width*.65)&-2,y=70,U=8,R=U*2,$=b*M;if(d(),h.width<=R||h.height<=R)return;o.scissor(U,U,h.width-R,h.height-R),f(),o.scissor(h.width/2-(b/2+U),h.height/2-(y/2+U),b+R,y+R),d(),o.scissor(h.width/2-b/2+$,h.height/2-y/2,b-$,y),f();return}if(r(a).selectedTexture){r(a).textureViewScale<Nt&&Ke(a,r(a).textureViewScale=Nt),r(a).textureViewScale>Tt&&Ke(a,r(a).textureViewScale=Tt);const d=r(a).textureViewScale/100,f=d*2,M=r(a).textureBoundX,b=r(a).textureBoundX+r(a).textureBoundW,y=r(a).textureBoundY,U=r(a).textureBoundY+r(a).textureBoundH;let R=r(a).textureViewX+h.width/f,$=r(a).textureViewY+h.height/f,V=!1;if(R<M&&(R=M,V=!0),$<y&&($=y,V=!0),R>b&&(R=b,V=!0),$>U&&($=U,V=!0),r(a).textureBoundW*d<=h.width&&(R=M+r(a).textureBoundW/2,V=!0),r(a).textureBoundH*d<=h.height&&($=y+r(a).textureBoundH/2,V=!0),V&&(Ke(a,r(a).textureViewX=R-h.width/f),Ke(a,r(a).textureViewY=$-h.height/f)),o.useProgram(r(Be)),o.viewport(0,0,h.width,h.height),o.uniform2fv(r(Ge),[h.width,h.height]),!ft){const xe=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,xe),o.bufferData(o.ARRAY_BUFFER,Gt,o.STATIC_DRAW),ft={vbo:xe,step:8,attribs:Zo}}le(o,ft,6);const z=r(a).selectedTexture,F=(r(a).textureBoundX-r(a).textureViewX)*d,W=F+r(a).textureBoundW*d,E=(r(a).textureBoundY-r(a).textureViewY)*d,B=E+r(a).textureBoundH*d,P=M/z.width,A=b/z.width,I=y/z.height,G=U/z.height;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(r(c)),o.uniform4fv(r(g),[z.width,z.height,h.width,h.height]),o.bindTexture(o.TEXTURE_2D,z.texture),o.uniform1i(r(_),u);const re=o.createBuffer();if(o.bindBuffer(o.ARRAY_BUFFER,re),o.bufferData(o.ARRAY_BUFFER,new Float32Array([F,E,P,I,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,W,E,A,I,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,F,B,P,G,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,W,E,A,I,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,W,B,A,G,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,F,B,P,G,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0]),o.STATIC_DRAW),le(o,{vbo:re,step:60,attribs:ar},6),o.deleteBuffer(re),r(De)){const xe=r(Ie)??0,$e=F+(r(ge)&&r(ke)?r(ke)*d:0),Ht=r(ge)&&r(_e)?F+(r(_e)+1)*d:W,Bt=E+xe*d,tr=Math.max(E+(xe+1)*d,Bt+1),Wt=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Wt),o.bufferData(o.ARRAY_BUFFER,new Float32Array([$e,Bt,0,0,0,0,1,1,1,.15,.15,.4,1,0,0,Ht,Bt,1,0,0,0,1,1,1,.15,.15,.4,1,0,0,$e,tr,0,1,0,0,1,1,1,.15,.15,.4,1,0,0,Ht,Bt,1,0,0,0,1,1,1,.15,.15,.4,1,0,0,Ht,tr,1,1,0,0,1,1,1,.15,.15,.4,1,0,0,$e,tr,0,1,0,0,1,1,1,.15,.15,.4,1,0,0]),o.STATIC_DRAW),le(o,{vbo:Wt,step:60,attribs:ar},6),o.deleteBuffer(Wt)}return}ae&&(o.bindFramebuffer(o.DRAW_FRAMEBUFFER,ae),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)),o.disable(o.SCISSOR_TEST);for(let d of r(a).entities)if(d.enabled){if(d.type==="batch2d"){o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST);const f=r(a).textures[d.textureId];o.useProgram(r(c)),o.viewport(0,0,Zt,Qt),o.uniform4fv(r(g),[f.width,f.height,d.targetWidth,d.targetHeight]),o.bindTexture(o.TEXTURE_2D,f.texture),o.uniform1i(r(_),u),le(o,d.buffer,d.vertexCount,d.enabledVerticesList)}if(d.type==="render3d"){o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.DEPTH_TEST);const f=r(a).textures[d.textureId];o.useProgram(d.animated?r(k):r(s)),o.viewport(Fr,S,J,H),o.uniformMatrix4fv(d.animated?r(q):r(x),!1,d.modelMatrix),o.uniformMatrix4fv(d.animated?r(fe):r(w),!1,gt),o.uniformMatrix4fv(d.animated?r(de):r(l),!1,j),o.uniform2fv(d.animated?r(se):r(p),[f.width,f.height]),o.bindTexture(o.TEXTURE_2D,f.texture),o.uniform1i(d.animated?r(N):r(m),u),le(o,d.buffer,d.vertexCount)}if(d.type==="renderparticles"){o.blendFuncSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.DEPTH_TEST);const f=r(a).textures[d.textureId];o.useProgram(r(O)),o.viewport(Fr,S,J,H),o.uniformMatrix4fv(r(Q),!1,gt),o.uniformMatrix4fv(r(K),!1,j),o.uniform2fv(r(ve),[f.width,f.height]),o.bindTexture(o.TEXTURE_2D,f.texture),o.uniform1i(r(Z),u),le(o,d.buffer,d.vertexCount)}if(d.type==="icon"||d.type==="bigicon"){const f=d.texSize;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(r(c)),o.viewport(0,0,Zt,Qt),o.bindTexture(o.TEXTURE_2D,d.texture),o.uniform1i(r(_),u),o.uniform4fv(r(g),[f,f,d.targetWidth,d.targetHeight]),le(o,d.buffer,6)}if(d.type==="minimap2d"){!Ue||!ae?(Ue=o.createTexture(),o.bindTexture(o.TEXTURE_2D,Ue),o.texStorage2D(o.TEXTURE_2D,1,o.RGBA8,Ee,We),ae=o.createFramebuffer(),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,ae),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,Ue,0)):o.bindFramebuffer(o.DRAW_FRAMEBUFFER,ae),o.viewport(0,0,Ee,We),o.disable(o.DEPTH_TEST);const f=r(a).textures[d.textureId];o.useProgram(r(c)),o.uniform4fv(r(g),[f.width,f.height,Ee,We]),o.bindTexture(o.TEXTURE_2D,f.texture),o.uniform1i(r(_),u),le(o,d.buffer,d.vertexCount,d.enabledVerticesList),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}if(d.type==="minimap"){if(Ue===null)continue;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(r(c)),o.viewport(0,0,Zt,Qt),o.uniform4fv(r(g),[Ee,We,d.targetWidth,d.targetHeight]),o.bindTexture(o.TEXTURE_2D,Ue),o.uniform1i(r(_),u),le(o,d.buffer,6)}}},Te=(h,o,d)=>{const f=new DataView(d),M=f.getUint32(0,!0);switch(M){case 0:{T(pe,!0),te(h,o);break}case 1:{const b=f.getUint32(4,!0),y=f.getUint32(8,!0),U=f.getUint32(12,!0),R=o.createTexture(),$=new Uint8Array(d,16,y*U*4);o.bindTexture(o.TEXTURE_2D,R),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,y,U,0,o.RGBA,o.UNSIGNED_BYTE,$),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),Ke(a,r(a).textures[b]={texture:R,width:y,height:U,data:$});break}case 2:case 3:{const b=M===3,y=b?104:40,U=b?120:56,R=f.getUint32(4,!0),$=f.getUint32(8,!0),V=new Float32Array(16);V.set(new Float32Array(d,16,16));const z=new DataView(d,80,R*y),F=new Array(R),W=new ArrayBuffer(R*U),E=new DataView(W);for(let P=0;P<R;P+=1){const A=y*P,I=U*P;let G=null;b&&(G=new Float32Array(16),G.set(new Float32Array(d,80+y*P+40,16)));const re={x:z.getInt16(A,!0),y:z.getInt16(A+2,!0),z:z.getInt16(A+4,!0),u:z.getFloat32(A+8,!0),v:z.getFloat32(A+12,!0),ax:z.getUint16(A+16,!0),ay:z.getUint16(A+18,!0),aw:z.getUint16(A+20,!0),ah:z.getUint16(A+22,!0),r:z.getFloat32(A+24,!0),g:z.getFloat32(A+28,!0),b:z.getFloat32(A+32,!0),a:z.getFloat32(A+36,!0),anim:G};if(F[P]=re,E.setFloat32(I,re.x,!0),E.setFloat32(I+4,re.y,!0),E.setFloat32(I+8,re.z,!0),E.setFloat32(I+12,0,!0),E.setFloat32(I+16,re.u,!0),E.setFloat32(I+20,re.v,!0),E.setFloat32(I+24,re.ax,!0),E.setFloat32(I+28,re.ay,!0),E.setFloat32(I+32,re.aw,!0),E.setFloat32(I+36,re.ah,!0),E.setFloat32(I+40,re.r,!0),E.setFloat32(I+44,re.g,!0),E.setFloat32(I+48,re.b,!0),E.setFloat32(I+52,re.a,!0),G)for(let ie=0;ie<16;ie+=1)E.setFloat32(I+56+ie*4,G[ie],!0)}const B=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,B),o.bufferData(o.ARRAY_BUFFER,E,o.STATIC_DRAW),r(a).entities.push({type:"render3d",animated:b,textureId:$,vertexCount:R,modelMatrix:V,vertices:F,buffer:{vbo:B,step:U,attribs:b?Go:kn},enabled:!0,expanded:!1,uuid:or()}),he+=R,te(h,o);break}case 4:{const U=f.getUint32(4,!0),R=f.getUint32(8,!0),$=f.getUint16(12,!0),V=f.getUint16(14,!0),z=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,z);const F=new DataView(d,16,U*40),W=new ArrayBuffer(U*60),E=new DataView(W),B=new Array(U);for(let P=0;P<U;P+=1){const A=40*P,I=60*P,G={x:F.getInt16(A,!0),y:F.getInt16(A+2,!0),ax:F.getInt16(A+4,!0),ay:F.getInt16(A+6,!0),aw:F.getInt16(A+8,!0),ah:F.getInt16(A+10,!0),discard:F.getUint8(A+12),wrapx:F.getUint8(A+13),wrapy:F.getUint8(A+14),u:F.getFloat32(A+16,!0),v:F.getFloat32(A+20,!0),r:F.getFloat32(A+24,!0),g:F.getFloat32(A+28,!0),b:F.getFloat32(A+32,!0),a:F.getFloat32(A+36,!0)};B[P]=G,E.setFloat32(I,G.x,!0),E.setFloat32(I+4,G.y,!0),E.setFloat32(I+8,G.u,!0),E.setFloat32(I+12,G.v,!0),E.setFloat32(I+16,G.ax,!0),E.setFloat32(I+20,G.ay,!0),E.setFloat32(I+24,G.aw,!0),E.setFloat32(I+28,G.ah,!0),E.setFloat32(I+32,G.r,!0),E.setFloat32(I+36,G.g,!0),E.setFloat32(I+40,G.b,!0),E.setFloat32(I+44,G.a,!0),E.setFloat32(I+48,G.discard,!0),E.setFloat32(I+52,G.wrapx,!0),E.setFloat32(I+56,G.wrapy,!0)}o.bufferData(o.ARRAY_BUFFER,E,o.STATIC_DRAW),r(a).entities.push({type:"batch2d",textureId:R,vertexCount:U,vertices:B,targetWidth:$,targetHeight:V,buffer:{vbo:z,step:60,attribs:ar},enabled:!0,expanded:!1,uuid:or(),enabledVerticesList:Array(Math.floor(U)).fill(!0)}),he+=U,te(h,o);break}case 5:case 8:{const y=M===5?64:512,U=f.getInt16(4,!0),R=f.getInt16(6,!0),$=f.getInt16(8,!0),V=f.getInt16(10,!0),z=f.getUint32(12,!0),F=f.getFloat32(16,!0),W=f.getFloat32(20,!0),E=f.getFloat32(24,!0),B=f.getFloat32(28,!0),P=f.getUint16(32,!0),A=f.getUint16(34,!0),I=o.createTexture(),G=o.createFramebuffer();o.bindTexture(o.TEXTURE_2D,I),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,G),o.texStorage2D(o.TEXTURE_2D,1,o.RGBA8,y,y),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,I,0),o.enable(o.CULL_FACE),o.cullFace(o.FRONT),o.viewport(0,0,y,y),o.scissor(0,0,y,y);let re=Array(z),ie=36;for(let Wt=0;Wt<z;Wt+=1){const vr=f.getUint32(ie,!0);let yn=Array(vr);const pa=new ArrayBuffer(vr*56),et=new DataView(pa),zr=new Float32Array(16);zr.set(new Float32Array(d,ie+4,16));const jr=new Float32Array(16);jr.set(new Float32Array(d,ie+68,16));const qr=new Float32Array(16);qr.set(new Float32Array(d,ie+132,16)),ie+=196;for(let Tr=0;Tr<vr;Tr+=1){const Ut={x:f.getInt16(ie,!0),y:f.getInt16(ie+2,!0),z:f.getInt16(ie+4,!0),r:f.getFloat32(ie+8,!0),g:f.getFloat32(ie+12,!0),b:f.getFloat32(ie+16,!0),a:f.getFloat32(ie+20,!0)},st=Tr*56;et.setFloat32(st,Ut.x,!0),et.setFloat32(st+4,Ut.y,!0),et.setFloat32(st+8,Ut.z,!0),et.setFloat32(st+24,0,!0),et.setFloat32(st+28,0,!0),et.setFloat32(st+32,y,!0),et.setFloat32(st+36,y,!0),et.setFloat32(st+40,Ut.r,!0),et.setFloat32(st+44,Ut.g,!0),et.setFloat32(st+48,Ut.b,!0),et.setFloat32(st+52,Ut.a,!0),yn[Tr]=Ut,ie+=24}re[Wt]={vertices:yn,modelMatrix:zr,viewMatrix:jr,projMatrix:qr};const Gr=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Gr),o.bufferData(o.ARRAY_BUFFER,et,o.STATIC_DRAW),o.useProgram(r(s)),o.uniformMatrix4fv(r(x),!1,zr),o.uniformMatrix4fv(r(w),!1,jr),o.uniformMatrix4fv(r(l),!1,qr),o.uniform2fv(r(p),[1,1]),o.bindTexture(o.TEXTURE_2D,r(Ce)),o.uniform1i(r(m),u),le(o,{vbo:Gr,attribs:kn,step:56},vr),o.deleteBuffer(Gr)}const xe=U,$e=U+$,Ht=R,Bt=R+V,tr=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,tr),o.bufferData(o.ARRAY_BUFFER,new Float32Array([xe,Ht,0,1,0,0,y,y,F,E,W,B,0,0,0,$e,Ht,1,1,0,0,y,y,F,E,W,B,0,0,0,xe,Bt,0,0,0,0,y,y,F,E,W,B,0,0,0,$e,Ht,1,1,0,0,y,y,F,E,W,B,0,0,0,$e,Bt,1,0,0,0,y,y,F,E,W,B,0,0,0,xe,Bt,0,0,0,0,y,y,F,E,W,B,0,0,0]),o.STATIC_DRAW),r(a).entities.push({type:M===5?"icon":"bigicon",models:re,texture:I,targetWidth:P,targetHeight:A,texSize:y,buffer:{vbo:tr,step:60,attribs:ar},targetx:U,targety:R,targetw:$,targeth:V,enabled:!0,expanded:!1,uuid:or()}),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null),o.deleteFramebuffer(G),o.disable(o.CULL_FACE);break}case 6:{const b=f.getUint32(4,!0),y=f.getUint32(8,!0);Ee=f.getUint16(12,!0),We=f.getUint16(14,!0);const U=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,U);const R=new DataView(d,16,b*40),$=new ArrayBuffer(b*60),V=new DataView($),z=new Array(b);for(let F=0;F<b;F+=1){const W=40*F,E=60*F,B={x:R.getInt16(W,!0),y:R.getInt16(W+2,!0),ax:R.getInt16(W+4,!0),ay:R.getInt16(W+6,!0),aw:R.getInt16(W+8,!0),ah:R.getInt16(W+10,!0),discard:R.getUint8(W+12),wrapx:R.getUint8(W+13),wrapy:R.getUint8(W+14),u:R.getFloat32(W+16,!0),v:R.getFloat32(W+20,!0),r:R.getFloat32(W+24,!0),g:R.getFloat32(W+28,!0),b:R.getFloat32(W+32,!0),a:R.getFloat32(W+36,!0)};z[F]=B,V.setFloat32(E,B.x,!0),V.setFloat32(E+4,B.y,!0),V.setFloat32(E+8,B.u,!0),V.setFloat32(E+12,B.v,!0),V.setFloat32(E+16,B.ax,!0),V.setFloat32(E+20,B.ay,!0),V.setFloat32(E+24,B.aw,!0),V.setFloat32(E+28,B.ah,!0),V.setFloat32(E+32,B.r,!0),V.setFloat32(E+36,B.g,!0),V.setFloat32(E+40,B.b,!0),V.setFloat32(E+44,B.a,!0),V.setFloat32(E+48,B.discard,!0),V.setFloat32(E+52,B.wrapx,!0),V.setFloat32(E+56,B.wrapy,!0)}o.bufferData(o.ARRAY_BUFFER,V,o.STATIC_DRAW),r(a).entities.push({type:"minimap2d",textureId:y,buffer:{vbo:U,attribs:ar,step:60},vertices:z,vertexCount:b,enabled:!0,expanded:!1,enabledVerticesList:Array(Math.floor(b)).fill(!0),uuid:or()}),he+=b,te(h,o);break}case 7:{const b=f.getInt16(4,!0),y=f.getInt16(6,!0),U=f.getUint16(8,!0),R=f.getUint16(10,!0),$=f.getInt16(12,!0),V=f.getInt16(14,!0),z=f.getUint16(16,!0),F=f.getUint16(18,!0),W=f.getUint16(20,!0),E=f.getUint16(22,!0),B=$,P=$+z,A=V,I=V+F,G=b/Ee,re=(b+U)/Ee,ie=y/We,xe=(y+R)/We,$e=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,$e),o.bufferData(o.ARRAY_BUFFER,new Float32Array([B,A,G,xe,b,y,U,R,1,1,1,1,0,0,0,P,A,re,xe,b,y,U,R,1,1,1,1,0,0,0,B,I,G,ie,b,y,U,R,1,1,1,1,0,0,0,P,A,re,xe,b,y,U,R,1,1,1,1,0,0,0,P,I,re,ie,b,y,U,R,1,1,1,1,0,0,0,B,I,G,ie,b,y,U,R,1,1,1,1,0,0,0]),o.STATIC_DRAW),r(a).entities.push({type:"minimap",sourcex:b,sourcey:y,sourcew:U,sourceh:R,targetx:$,targety:V,targetw:z,targeth:F,targetWidth:W,targetHeight:E,buffer:{vbo:$e,step:60,attribs:ar},enabled:!0,expanded:!1,uuid:or()}),te(h,o);break}case 9:{const b=f.getUint32(4,!0),y=f.getUint32(8,!0),U=64,R=72,$=new DataView(d,16,b*U),V=new Array(b),z=new ArrayBuffer(b*R),F=new DataView(z);for(let E=0;E<b;E+=1){const B=U*E,P=R*E,A={x:$.getFloat32(B,!0),y:$.getFloat32(B+4,!0),z:$.getFloat32(B+8,!0),offsetx2d:$.getFloat32(B+12,!0),offsety2d:$.getFloat32(B+16,!0),offsetx3d:$.getFloat32(B+20,!0),offsety3d:$.getFloat32(B+24,!0),offsetz3d:$.getFloat32(B+28,!0),ax:$.getUint16(B+32,!0),ay:$.getUint16(B+34,!0),aw:$.getUint16(B+36,!0),ah:$.getUint16(B+38,!0),r:$.getFloat32(B+40,!0),g:$.getFloat32(B+44,!0),b:$.getFloat32(B+48,!0),a:$.getFloat32(B+52,!0),u:$.getFloat32(B+56,!0),v:$.getFloat32(B+60,!0)};V[E]=A,F.setFloat32(P,A.x,!0),F.setFloat32(P+4,A.y,!0),F.setFloat32(P+8,A.z,!0),F.setFloat32(P+12,A.ax,!0),F.setFloat32(P+16,A.ay,!0),F.setFloat32(P+20,A.aw,!0),F.setFloat32(P+24,A.ah,!0),F.setFloat32(P+28,A.r,!0),F.setFloat32(P+32,A.g,!0),F.setFloat32(P+36,A.b,!0),F.setFloat32(P+40,A.a,!0),F.setFloat32(P+44,A.offsetx2d,!0),F.setFloat32(P+48,A.offsety2d,!0),F.setFloat32(P+52,A.offsetx3d,!0),F.setFloat32(P+56,A.offsety3d,!0),F.setFloat32(P+60,A.offsetz3d,!0),F.setFloat32(P+64,A.u,!0),F.setFloat32(P+68,A.v,!0)}const W=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,W),o.bufferData(o.ARRAY_BUFFER,F,o.STATIC_DRAW),r(a).entities.push({type:"renderparticles",textureId:y,vertexCount:b,vertices:V,buffer:{vbo:W,step:R,attribs:Ko},enabled:!0,expanded:!1,uuid:or()}),he+=b,te(h,o);break}case 10:{gt=new Float32Array(d,4,16),j=new Float32Array(d,68,16);break}}};window.addEventListener("message",async h=>{if(typeof h.data=="object"&&h.data.type==="pluginMessage"){if(typeof h.data.content!="object"||!r(oe)||!r(v))return;Te(r(oe),r(v),h.data.content)}});const at=h=>Array.from(h).map(o=>{const d=o.toString(16);return d.length===1?"\\x0".concat(d):"\\x".concat(d)}).join(""),Ye=()=>{const h=r(a).selectedTexture;if(!h||r(Ie)===null||r(Ie)<0||r(Ie)>=r(a).textureBoundH)return;const o=r(ge)?r(ke):0,d=r(a).textureBoundX+o,f=r(Ie)+r(a).textureBoundY,M=r(ge)?r(_e)+1-r(ke):r(a).textureBoundW;if(o<0||o+M>r(a).textureBoundW)return;const b=(f*h.width+d)*4,y=h.data.slice(b,b+M*4);at(y)},wt=()=>{const h=r(a).selectedTexture;if(!h)return;const o=r(a).textureBoundW*4,d=new Array(r(a).textureBoundH);for(let f=0;f<r(a).textureBoundH;f+=1){const M=(r(a).textureBoundY+f)*h.width*4+r(a).textureBoundX*4,b=h.data.slice(M,M+o),y=at(b);d[f]=`  [${f+1}] = '${y}',`}`${d.join(`
`)}`},ot=h=>{const o=r(a).textureViewScale/100,d=Math.floor(r(a).textureViewX+h.offsetX/o-r(a).textureBoundX),f=Math.floor(r(a).textureViewY+h.offsetY/o-r(a).textureBoundY);if(d<0||f<0||d>=r(a).textureBoundW||f>=r(a).textureBoundH){T(nt,null);return}T(nt,{x:d,y:f})},we=h=>{if(ot(h),!(h.buttons&1)){T(it,ot);return}const o=r(a).textureViewScale/100;Ke(a,r(a).textureViewX-=h.movementX/o),Ke(a,r(a).textureViewY-=h.movementY/o),r(a).redraw()},Jt=h=>{const o=r(oe),d=r(a).textureViewScale,f=r(a).textureViewScale-Kt*Math.sign(h.deltaY);Ke(a,r(a).textureViewScale=f);const M=2*d/100,b=2*f/100,y=r(a).textureViewX+o.width/M,U=r(a).textureViewY+o.height/M;Ke(a,r(a).textureViewX=y-o.width/b),Ke(a,r(a).textureViewY=U-o.height/b),te(o,r(v))};let it=D(ot);Kr(()=>(r(Ie),r(ge),r(ke),r(_e)),()=>{T(t,r(Ie)===null||r(ge)&&(r(ke)===null||r(_e)===null||r(ke)>r(_e)))}),Kr(()=>(r(oe),r(v),r(Ce),r(c),r(s),r(k),r(O),r(Be)),()=>{if(r(oe)&&(Ke(oe,r(oe).width=Zt),Ke(oe,r(oe).height=Qt),T(v,r(oe).getContext("webgl2")),r(v))){T(Je,r(v).getParameter(r(v).MAX_VERTEX_ATTRIBS)),T(Ce,r(v).createTexture()),r(v).bindTexture(r(v).TEXTURE_2D,r(Ce));const h=new Uint8Array([255,255,255,255]);r(v).texImage2D(r(v).TEXTURE_2D,0,r(v).RGBA,1,1,0,r(v).RGBA,r(v).UNSIGNED_BYTE,h);const o=Dt(r(v),r(v).VERTEX_SHADER,Oo,"2D vertex shader"),d=Dt(r(v),r(v).FRAGMENT_SHADER,Ho,"2D fragment shader"),f=Dt(r(v),r(v).VERTEX_SHADER,Wo,"3D vertex shader"),M=Dt(r(v),r(v).VERTEX_SHADER,Xo,"3D anim vertex shader"),b=Dt(r(v),r(v).FRAGMENT_SHADER,Yo,"3D fragment shader"),y=Dt(r(v),r(v).VERTEX_SHADER,zo,"particle vertex shader"),U=Dt(r(v),r(v).VERTEX_SHADER,jo,"checkers vertex shader"),R=Dt(r(v),r(v).FRAGMENT_SHADER,qo,"checkers fragment shader");T(c,_r(r(v),o,d,"2D program")),T(g,r(v).getUniformLocation(r(c),"atlas_wh_screen_wh")),T(_,r(v).getUniformLocation(r(c),"tex")),T(s,_r(r(v),f,b,"3D program")),T(x,r(v).getUniformLocation(r(s),"modelmatrix")),T(w,r(v).getUniformLocation(r(s),"viewmatrix")),T(l,r(v).getUniformLocation(r(s),"projmatrix")),T(p,r(v).getUniformLocation(r(s),"atlas_wh")),T(m,r(v).getUniformLocation(r(s),"tex")),T(k,_r(r(v),M,b,"3D animated program")),T(q,r(v).getUniformLocation(r(k),"modelmatrix")),T(fe,r(v).getUniformLocation(r(k),"viewmatrix")),T(de,r(v).getUniformLocation(r(k),"projmatrix")),T(se,r(v).getUniformLocation(r(k),"atlas_wh")),T(N,r(v).getUniformLocation(r(k),"tex")),T(O,_r(r(v),y,b,"Particles program")),T(Q,r(v).getUniformLocation(r(O),"viewmatrix")),T(K,r(v).getUniformLocation(r(O),"projmatrix")),T(Z,r(v).getUniformLocation(r(O),"tex")),T(ve,r(v).getUniformLocation(r(O),"atlas_wh")),T(Be,_r(r(v),U,R,"Checkers program")),T(Ge,r(v).getUniformLocation(r(Be),"screen_wh")),r(v).deleteShader(o),r(v).deleteShader(d),r(v).deleteShader(f),r(v).deleteShader(b),r(v).deleteShader(M),r(v).deleteShader(y),r(v).deleteShader(U),r(v).deleteShader(R),r(v).activeTexture(r(v).TEXTURE0+u),r(v).enable(r(v).SCISSOR_TEST),r(v).disable(r(v).CULL_FACE),r(v).disable(r(v).DEPTH_TEST),r(v).enable(r(v).BLEND),r(v).blendEquationSeparate(r(v).FUNC_ADD,r(v).FUNC_ADD),r(v).depthFunc(r(v).LEQUAL),te(r(oe),r(v))}}),Kr(()=>(r(De),r(Ae),r(Xe),r(Fe),r(Le),r(t),r(oe),r(v)),()=>{const h=r(De);T(De,(r(Ae)||r(Xe)||r(Fe)||r(Le))&&!r(t)),r(oe)&&r(v)&&r(De)!==h&&te(r(oe),r(v))}),ro(),qt();var St=uu(),Me=ue(St);Me.__mousedown=[Zi,it,we],Me.__mouseup=[Qi,it,ot],Me.__mousemove=function(...h){var o;(o=r(it))==null||o.apply(this,h)},Lo(Me,h=>T(oe,h),()=>r(oe));var er=C(Me,2);{var vt=h=>{var o=eu(),d=ue(o),f=ye(d);zi(f,{get data(){return r(a)},set data(b){T(a,b)},$$legacy:!0});var M=C(d,2);M.__click=[Ji,dt],L(h,o)},Re=(h,o)=>{{var d=f=>{var M=ru();M.__click=[tu,dt],L(f,M)};ee(h,f=>{r(pe)&&f(d)},o)}};ee(er,h=>{r(dt)?h(vt):h(Re,!1)})}var ut=C(er,2);{var dr=h=>{var o=iu(),d=ue(o);d.__click=[nu,a,te,oe,v];var f=C(d,2),M=ye(f),b=ye(M),y=ye(b),U=C(y,2),R=C(b,2),$=ye(R),V=C($,2),z=C(R,2),F=C(ye(z));F.__change=function(...A){var I;(I=r(a).redraw)==null||I.apply(this,A)};var W=C(F,2);W.__click=Ye;var E=C(W,4);{var B=A=>{var I=au(),G=ue(I),re=C(G,2);re.__change=function(...xe){var $e;($e=r(a).redraw)==null||$e.apply(this,xe)};var ie=C(re,2);ie.__change=function(...xe){var $e;($e=r(a).redraw)==null||$e.apply(this,xe)},ha(G,()=>r(ge),xe=>T(ge,xe)),Ne("focus",re,()=>T(Fe,!0)),Ne("blur",re,()=>T(Fe,!1)),Zr(re,()=>r(ke),xe=>T(ke,xe)),Ne("focus",ie,()=>T(Le,!0)),Ne("blur",ie,()=>T(Le,!1)),Zr(ie,()=>r(_e),xe=>T(_e,xe)),L(A,I)},P=A=>{var I=ou(),G=C(ue(I));G.__click=wt,L(A,I)};ee(E,A=>{r(a).viewIsWholeAtlas?A(B):A(P,!1)})}Qe(()=>{var A,I;me(y,`x: ${((A=r(nt))==null?void 0:A.x)??""} `),me(U,` y: ${((I=r(nt))==null?void 0:I.y)??""}`),me($,`${r(a).textureBoundW??""}x${r(a).textureBoundH??""} `),me(V,` zoom: ${r(a).textureViewScale??""}%`),W.disabled=r(t)}),Ne("mouseenter",z,()=>T(Ae,!0)),Ne("mouseleave",z,()=>T(Ae,!1)),Ne("focus",F,()=>T(Xe,!0)),Ne("blur",F,()=>T(Xe,!1)),Zr(F,()=>r(Ie),A=>T(Ie,A)),L(h,o)};ee(ut,h=>{r(a).selectedTexture&&h(dr)})}Ne("wheel",Me,Jt),L(e,St),Vt()}fr(["mousedown","mouseup","mousemove","click","change"]);Ao(su,{target:document.body});
