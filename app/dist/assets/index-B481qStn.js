(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function r(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(i){if(i.ep)return;i.ep=!0;const u=r(i);fetch(i.href,u)}})();const Dn=!1;var pn=Array.isArray,Ra=Array.prototype.indexOf,gn=Array.from,Ba=Object.defineProperty,cr=Object.getOwnPropertyDescriptor,Qn=Object.getOwnPropertyDescriptors,Ua=Object.prototype,Ia=Array.prototype,wn=Object.getPrototypeOf,Mn=Object.isExtensible;function Da(e){return e()}function cn(e){for(var n=0;n<e.length;n++)e[n]()}const ht=2,Jn=4,jr=8,mn=16,Bt=32,dr=64,Lr=128,dt=256,Vr=512,qe=1024,Ut=2048,tr=4096,Tt=8192,qr=16384,Ma=32768,bn=65536,ea=1<<17,$a=1<<19,ta=1<<20,dn=1<<21,Jt=Symbol("$state"),Pa=Symbol("legacy props"),ka=Symbol("");function ra(e){return e===this.v}function Ca(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function yn(e){return!Ca(e,this.v)}function La(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Va(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Na(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Oa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ha(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Wa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xa(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ya(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Sr=!1,za=!1;function ja(){Sr=!0}const En=1,An=2,na=4,qa=8,Ga=16,Ka=1,Za=2,Qa=4,Ja=8,eo=16,to=1,ro=2,ze=Symbol(),no="http://www.w3.org/1999/xhtml";let he=null;function $n(e){he=e}function Xt(e,n=!1,r){var a=he={p:he,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Sr&&!n&&(he.l={s:null,u:null,r1:[],r2:yr(!1)}),ca(()=>{a.d=!0})}function Yt(e){const n=he;if(n!==null){const f=n.e;if(f!==null){var r=ie,a=re;n.e=null;try{for(var i=0;i<f.length;i++){var u=f[i];Wt(u.effect),yt(u.reaction),Sn(u.fn)}}finally{Wt(r),yt(a)}}he=n.p,n.m=!0}return{}}function Tr(){return!Sr||he!==null&&he.l===null}function Qt(e,n){if(typeof e!="object"||e===null||Jt in e)return e;const r=wn(e);if(r!==Ua&&r!==Ia)return e;var a=new Map,i=pn(e),u=Lt(0),f=re,p=_=>{var s=re;yt(f);var x;return x=_(),yt(s),x};return i&&a.set("length",Lt(e.length)),new Proxy(e,{defineProperty(_,s,x){(!("value"in x)||x.configurable===!1||x.enumerable===!1||x.writable===!1)&&Wa();var w=a.get(s);return w===void 0?(w=p(()=>Lt(x.value)),a.set(s,w)):m(w,p(()=>Qt(x.value))),!0},deleteProperty(_,s){var x=a.get(s);if(x===void 0)s in _&&a.set(s,p(()=>Lt(ze)));else{if(i&&typeof s=="string"){var w=a.get("length"),l=Number(s);Number.isInteger(l)&&l<w.v&&m(w,l)}m(x,ze),Pn(u)}return!0},get(_,s,x){var b;if(s===Jt)return e;var w=a.get(s),l=s in _;if(w===void 0&&(!l||(b=cr(_,s))!=null&&b.writable)&&(w=p(()=>Lt(Qt(l?_[s]:ze))),a.set(s,w)),w!==void 0){var g=t(w);return g===ze?void 0:g}return Reflect.get(_,s,x)},getOwnPropertyDescriptor(_,s){var x=Reflect.getOwnPropertyDescriptor(_,s);if(x&&"value"in x){var w=a.get(s);w&&(x.value=t(w))}else if(x===void 0){var l=a.get(s),g=l==null?void 0:l.v;if(l!==void 0&&g!==ze)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return x},has(_,s){var g;if(s===Jt)return!0;var x=a.get(s),w=x!==void 0&&x.v!==ze||Reflect.has(_,s);if(x!==void 0||ie!==null&&(!w||(g=cr(_,s))!=null&&g.writable)){x===void 0&&(x=p(()=>Lt(w?Qt(_[s]):ze)),a.set(s,x));var l=t(x);if(l===ze)return!1}return w},set(_,s,x,w){var oe;var l=a.get(s),g=s in _;if(i&&s==="length")for(var b=x;b<l.v;b+=1){var L=a.get(b+"");L!==void 0?m(L,ze):b in _&&(L=p(()=>Lt(ze)),a.set(b+"",L))}l===void 0?(!g||(oe=cr(_,s))!=null&&oe.writable)&&(l=p(()=>Lt(void 0)),m(l,p(()=>Qt(x))),a.set(s,l)):(g=l.v!==ze,m(l,p(()=>Qt(x))));var q=Reflect.getOwnPropertyDescriptor(_,s);if(q!=null&&q.set&&q.set.call(w,x),!g){if(i&&typeof s=="string"){var se=a.get("length"),le=Number(s);Number.isInteger(le)&&le>=se.v&&m(se,le+1)}Pn(u)}return!0},ownKeys(_){t(u);var s=Reflect.ownKeys(_).filter(l=>{var g=a.get(l);return g===void 0||g.v!==ze});for(var[x,w]of a)w.v!==ze&&!(x in _)&&s.push(x);return s},setPrototypeOf(){Xa()}})}function Pn(e,n=1){m(e,e.v+n)}const br=new Map;function yr(e,n){var r={f:0,v:e,reactions:null,equals:ra,rv:0,wv:0};return r}function Lt(e,n){const r=yr(e);return po(r),r}function M(e,n=!1){var a;const r=yr(e);return n||(r.equals=yn),Sr&&he!==null&&he.l!==null&&((a=he.l).s??(a.s=[])).push(r),r}function ot(e,n){return m(e,Et(()=>t(e))),n}function m(e,n,r=!1){re!==null&&!bt&&Tr()&&(re.f&(ht|mn))!==0&&!(We!=null&&We.includes(e))&&Ya();let a=r?Qt(n):n;return Er(e,a)}function Er(e,n){if(!e.equals(n)){var r=e.v;Rr?br.set(e,n):br.set(e,r),e.v=n,e.wv=ga(),aa(e,Ut),Tr()&&ie!==null&&(ie.f&qe)!==0&&(ie.f&(Bt|dr))===0&&(ct===null?go([e]):ct.push(e))}return n}function aa(e,n){var r=e.reactions;if(r!==null)for(var a=Tr(),i=r.length,u=0;u<i;u++){var f=r[u],p=f.f;(p&Ut)===0&&(!a&&f===ie||(pt(f,n),(p&(qe|dt))!==0&&((p&ht)!==0?aa(f,tr):Qr(f))))}}let ao=!1;var kn,oa,ia,ua;function oo(){if(kn===void 0){kn=window,oa=/Firefox/.test(navigator.userAgent);var e=Element.prototype,n=Node.prototype,r=Text.prototype;ia=cr(n,"firstChild").get,ua=cr(n,"nextSibling").get,Mn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Mn(r)&&(r.__t=void 0)}}function Fn(e=""){return document.createTextNode(e)}function Nr(e){return ia.call(e)}function Gr(e){return ua.call(e)}function xe(e,n){return Nr(e)}function ae(e,n){{var r=Nr(e);return r instanceof Comment&&r.data===""?Gr(r):r}}function C(e,n=1,r=!1){let a=e;for(;n--;)a=Gr(a);return a}function io(e){e.textContent=""}function Ar(e){var n=ht|Ut,r=re!==null&&(re.f&ht)!==0?re:null;return ie===null||r!==null&&(r.f&dt)!==0?n|=dt:ie.f|=ta,{ctx:he,deps:null,effects:null,equals:ra,f:n,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??ie}}function X(e){const n=Ar(e);return n.equals=yn,n}function sa(e){var n=e.effects;if(n!==null){e.effects=null;for(var r=0;r<n.length;r+=1)Ht(n[r])}}function uo(e){for(var n=e.parent;n!==null;){if((n.f&ht)===0)return n;n=n.parent}return null}function so(e){var n,r=ie;Wt(uo(e));try{sa(e),n=ma(e)}finally{Wt(r)}return n}function la(e){var n=so(e),r=(Ot||(e.f&dt)!==0)&&e.deps!==null?tr:qe;pt(e,r),e.equals(n)||(e.v=n,e.wv=ga())}function fa(e){ie===null&&re===null&&Na(),re!==null&&(re.f&dt)!==0&&ie===null&&Va(),Rr&&La()}function lo(e,n){var r=n.last;r===null?n.last=n.first=e:(r.next=e,e.prev=r,n.last=e)}function vr(e,n,r,a=!0){var i=ie,u={ctx:he,deps:null,nodes_start:null,nodes_end:null,f:e|Ut,first:null,fn:n,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(r)try{Zr(u),u.f|=Ma}catch(_){throw Ht(u),_}else n!==null&&Qr(u);var f=r&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(ta|Lr))===0;if(!f&&a&&(i!==null&&lo(u,i),re!==null&&(re.f&ht)!==0)){var p=re;(p.effects??(p.effects=[])).push(u)}return u}function ca(e){const n=vr(jr,null,!1);return pt(n,qe),n.teardown=e,n}function Cn(e){fa();var n=ie!==null&&(ie.f&Bt)!==0&&he!==null&&!he.m;if(n){var r=he;(r.e??(r.e=[])).push({fn:e,effect:ie,reaction:re})}else{var a=Sn(e);return a}}function fo(e){return fa(),_r(e)}function co(e){const n=vr(dr,e,!0);return(r={})=>new Promise(a=>{r.outro?Or(n,()=>{Ht(n),a(void 0)}):(Ht(n),a(void 0))})}function Sn(e){return vr(Jn,e,!1)}function on(e,n){var r=he,a={effect:null,ran:!1};r.l.r1.push(a),a.effect=_r(()=>{e(),!a.ran&&(a.ran=!0,m(r.l.r2,!0),Et(n))})}function vo(){var e=he;_r(()=>{if(t(e.l.r2)){for(var n of e.l.r1){var r=n.effect;(r.f&qe)!==0&&pt(r,tr),xr(r)&&Zr(r),n.ran=!1}e.l.r2.v=!1}})}function _r(e){return vr(jr,e,!0)}function ut(e,n=[],r=Ar){const a=n.map(r);return Tn(()=>e(...a.map(t)))}function Tn(e,n=0){return vr(jr|mn|n,e,!0)}function Fr(e,n=!0){return vr(jr|Bt,e,!0,n)}function da(e){var n=e.teardown;if(n!==null){const r=Rr,a=re;Ln(!0),yt(null);try{n.call(null)}finally{Ln(r),yt(a)}}}function va(e,n=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var a=r.next;(r.f&dr)!==0?r.parent=null:Ht(r,n),r=a}}function _o(e){for(var n=e.first;n!==null;){var r=n.next;(n.f&Bt)===0&&Ht(n),n=r}}function Ht(e,n=!0){var r=!1;if((n||(e.f&$a)!==0)&&e.nodes_start!==null){for(var a=e.nodes_start,i=e.nodes_end;a!==null;){var u=a===i?null:Gr(a);a.remove(),a=u}r=!0}va(e,n&&!r),zr(e,0),pt(e,qr);var f=e.transitions;if(f!==null)for(const _ of f)_.stop();da(e);var p=e.parent;p!==null&&p.first!==null&&_a(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function _a(e){var n=e.parent,r=e.prev,a=e.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),n!==null&&(n.first===e&&(n.first=a),n.last===e&&(n.last=r))}function Or(e,n){var r=[];Rn(e,r,!0),xa(r,()=>{Ht(e),n&&n()})}function xa(e,n){var r=e.length;if(r>0){var a=()=>--r||n();for(var i of e)i.out(a)}else n()}function Rn(e,n,r){if((e.f&Tt)===0){if(e.f^=Tt,e.transitions!==null)for(const f of e.transitions)(f.is_global||r)&&n.push(f);for(var a=e.first;a!==null;){var i=a.next,u=(a.f&bn)!==0||(a.f&Bt)!==0;Rn(a,n,u?r:!1),a=i}}}function Hr(e){ha(e,!0)}function ha(e,n){if((e.f&Tt)!==0){e.f^=Tt,(e.f&qe)===0&&(e.f^=qe),xr(e)&&(pt(e,Ut),Qr(e));for(var r=e.first;r!==null;){var a=r.next,i=(r.f&bn)!==0||(r.f&Bt)!==0;ha(r,i?n:!1),r=a}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||n)&&u.in()}}let Wr=[];function xo(){var e=Wr;Wr=[],cn(e)}function Bn(e){Wr.length===0&&queueMicrotask(xo),Wr.push(e)}let Pr=!1,vn=!1,Xr=null,er=!1,Rr=!1;function Ln(e){Rr=e}let kr=[];let re=null,bt=!1;function yt(e){re=e}let ie=null;function Wt(e){ie=e}let We=null;function ho(e){We=e}function po(e){re!==null&&re.f&dn&&(We===null?ho([e]):We.push(e))}let He=null,it=0,ct=null;function go(e){ct=e}let pa=1,Yr=0,Ot=!1,Nt=null;function ga(){return++pa}function xr(e){var w;var n=e.f;if((n&Ut)!==0)return!0;if((n&tr)!==0){var r=e.deps,a=(n&dt)!==0;if(r!==null){var i,u,f=(n&Vr)!==0,p=a&&ie!==null&&!Ot,_=r.length;if(f||p){var s=e,x=s.parent;for(i=0;i<_;i++)u=r[i],(f||!((w=u==null?void 0:u.reactions)!=null&&w.includes(s)))&&(u.reactions??(u.reactions=[])).push(s);f&&(s.f^=Vr),p&&x!==null&&(x.f&dt)===0&&(s.f^=dt)}for(i=0;i<_;i++)if(u=r[i],xr(u)&&la(u),u.wv>e.wv)return!0}(!a||ie!==null&&!Ot)&&pt(e,qe)}return!1}function wo(e,n){for(var r=n;r!==null;){if((r.f&Lr)!==0)try{r.fn(e);return}catch{r.f^=Lr}r=r.parent}throw Pr=!1,e}function mo(e){return(e.f&qr)===0&&(e.parent===null||(e.parent.f&Lr)===0)}function Kr(e,n,r,a){if(Pr){if(r===null&&(Pr=!1),mo(n))throw e;return}r!==null&&(Pr=!0);{wo(e,n);return}}function wa(e,n,r=!0){var a=e.reactions;if(a!==null)for(var i=0;i<a.length;i++){var u=a[i];We!=null&&We.includes(e)||((u.f&ht)!==0?wa(u,n,!1):n===u&&(r?pt(u,Ut):(u.f&qe)!==0&&pt(u,tr),Qr(u)))}}function ma(e){var g;var n=He,r=it,a=ct,i=re,u=Ot,f=We,p=he,_=bt,s=e.f;He=null,it=0,ct=null,Ot=(s&dt)!==0&&(bt||!er||re===null),re=(s&(Bt|dr))===0?e:null,We=null,$n(e.ctx),bt=!1,Yr++,e.f|=dn;try{var x=(0,e.fn)(),w=e.deps;if(He!==null){var l;if(zr(e,it),w!==null&&it>0)for(w.length=it+He.length,l=0;l<He.length;l++)w[it+l]=He[l];else e.deps=w=He;if(!Ot)for(l=it;l<w.length;l++)((g=w[l]).reactions??(g.reactions=[])).push(e)}else w!==null&&it<w.length&&(zr(e,it),w.length=it);if(Tr()&&ct!==null&&!bt&&w!==null&&(e.f&(ht|tr|Ut))===0)for(l=0;l<ct.length;l++)wa(ct[l],e);return i!==null&&(Yr++,ct!==null&&(a===null?a=ct:a.push(...ct))),x}finally{He=n,it=r,ct=a,re=i,Ot=u,We=f,$n(p),bt=_,e.f^=dn}}function bo(e,n){let r=n.reactions;if(r!==null){var a=Ra.call(r,e);if(a!==-1){var i=r.length-1;i===0?r=n.reactions=null:(r[a]=r[i],r.pop())}}r===null&&(n.f&ht)!==0&&(He===null||!He.includes(n))&&(pt(n,tr),(n.f&(dt|Vr))===0&&(n.f^=Vr),sa(n),zr(n,0))}function zr(e,n){var r=e.deps;if(r!==null)for(var a=n;a<r.length;a++)bo(e,r[a])}function Zr(e){var n=e.f;if((n&qr)===0){pt(e,qe);var r=ie,a=he,i=er;ie=e,er=!0;try{(n&mn)!==0?_o(e):va(e),da(e);var u=ma(e);e.teardown=typeof u=="function"?u:null,e.wv=pa;var f=e.deps,p;Dn&&za&&e.f&Ut}catch(_){Kr(_,e,r,a||e.ctx)}finally{er=i,ie=r}}}function yo(){try{Oa()}catch(e){if(Xr!==null)Kr(e,Xr,null);else throw e}}function Eo(){var e=er;try{var n=0;for(er=!0;kr.length>0;){n++>1e3&&yo();var r=kr,a=r.length;kr=[];for(var i=0;i<a;i++){var u=Fo(r[i]);Ao(u)}}}finally{vn=!1,er=e,Xr=null,br.clear()}}function Ao(e){var n=e.length;if(n!==0)for(var r=0;r<n;r++){var a=e[r];if((a.f&(qr|Tt))===0)try{xr(a)&&(Zr(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?_a(a):a.fn=null))}catch(i){Kr(i,a,null,a.ctx)}}}function Qr(e){vn||(vn=!0,queueMicrotask(Eo));for(var n=Xr=e;n.parent!==null;){n=n.parent;var r=n.f;if((r&(dr|Bt))!==0){if((r&qe)===0)return;n.f^=qe}}kr.push(n)}function Fo(e){for(var n=[],r=e;r!==null;){var a=r.f,i=(a&(Bt|dr))!==0,u=i&&(a&qe)!==0;if(!u&&(a&Tt)===0){if((a&Jn)!==0)n.push(r);else if(i)r.f^=qe;else{var f=re;try{re=r,xr(r)&&Zr(r)}catch(s){Kr(s,r,null,r.ctx)}finally{re=f}}var p=r.first;if(p!==null){r=p;continue}}var _=r.parent;for(r=r.next;r===null&&_!==null;)r=_.next,_=_.parent}return n}function t(e){var n=e.f,r=(n&ht)!==0;if(Nt!==null&&Nt.add(e),re!==null&&!bt){if(!(We!=null&&We.includes(e))){var a=re.deps;e.rv<Yr&&(e.rv=Yr,He===null&&a!==null&&a[it]===e?it++:He===null?He=[e]:(!Ot||!He.includes(e))&&He.push(e))}}else if(r&&e.deps===null&&e.effects===null){var i=e,u=i.parent;u!==null&&(u.f&dt)===0&&(i.f^=dt)}return r&&(i=e,xr(i)&&la(i)),Rr&&br.has(e)?br.get(e):e.v}function So(e){var n=Nt;Nt=new Set;var r=Nt,a;try{if(Et(e),n!==null)for(a of Nt)n.add(a)}finally{Nt=n}return r}function je(e){var n=So(()=>Et(e));for(var r of n)if((r.f&ea)!==0)for(const a of r.deps||[])(a.f&ht)===0&&Er(a,a.v);else Er(r,r.v)}function Et(e){var n=bt;try{return bt=!0,e()}finally{bt=n}}const To=-7169;function pt(e,n){e.f=e.f&To|n}function Ro(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Jt in e)_n(e);else if(!Array.isArray(e))for(let n in e){const r=e[n];typeof r=="object"&&r&&Jt in r&&_n(r)}}}function _n(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let a in e)try{_n(e[a],n)}catch{}const r=wn(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=Qn(r);for(let i in a){const u=a[i].get;if(u)try{u.call(e)}catch{}}}}}const Bo=["touchstart","touchmove"];function Uo(e){return Bo.includes(e)}let Vn=!1;function Io(){Vn||(Vn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var n;if(!e.defaultPrevented)for(const r of e.target.elements)(n=r.__on_r)==null||n.call(r)})},{capture:!0}))}function ba(e){var n=re,r=ie;yt(null),Wt(null);try{return e()}finally{yt(n),Wt(r)}}function ya(e,n,r,a=r){e.addEventListener(n,()=>ba(r));const i=e.__on_r;i?e.__on_r=()=>{i(),a(!0)}:e.__on_r=()=>a(!0),Io()}const Ea=new Set,xn=new Set;function Do(e,n,r,a={}){function i(u){if(a.capture||mr.call(n,u),!u.cancelBubble)return ba(()=>r==null?void 0:r.call(this,u))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Bn(()=>{n.addEventListener(e,i,a)}):n.addEventListener(e,i,a),i}function Oe(e,n,r,a,i){var u={capture:a,passive:i},f=Do(e,n,r,u);(n===document.body||n===window||n===document)&&ca(()=>{n.removeEventListener(e,f,u)})}function rr(e){for(var n=0;n<e.length;n++)Ea.add(e[n]);for(var r of xn)r(e)}function mr(e){var le;var n=this,r=n.ownerDocument,a=e.type,i=((le=e.composedPath)==null?void 0:le.call(e))||[],u=i[0]||e.target,f=0,p=e.__root;if(p){var _=i.indexOf(p);if(_!==-1&&(n===document||n===window)){e.__root=n;return}var s=i.indexOf(n);if(s===-1)return;_<=s&&(f=_)}if(u=i[f]||e.target,u!==n){Ba(e,"currentTarget",{configurable:!0,get(){return u||r}});var x=re,w=ie;yt(null),Wt(null);try{for(var l,g=[];u!==null;){var b=u.assignedSlot||u.parentNode||u.host||null;try{var L=u["__"+a];if(L!=null&&(!u.disabled||e.target===u))if(pn(L)){var[q,...se]=L;q.apply(u,[e,...se])}else L.call(u,e)}catch(oe){l?g.push(oe):l=oe}if(e.cancelBubble||b===n||b===null)break;u=b}if(l){for(let oe of g)queueMicrotask(()=>{throw oe});throw l}}finally{e.__root=n,delete e.currentTarget,yt(x),Wt(w)}}}function Mo(e){var n=document.createElement("template");return n.innerHTML=e,n.content}function hn(e,n){var r=ie;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=n)}function O(e,n){var r=(n&to)!==0,a=(n&ro)!==0,i,u=!e.startsWith("<!>");return()=>{i===void 0&&(i=Mo(u?e:"<!>"+e),r||(i=Nr(i)));var f=a||oa?document.importNode(i,!0):i.cloneNode(!0);if(r){var p=Nr(f),_=f.lastChild;hn(p,_)}else hn(f,f);return f}}function Mr(){var e=document.createDocumentFragment(),n=document.createComment(""),r=Fn();return e.append(n,r),hn(n,r),e}function N(e,n){e!==null&&e.before(n)}function we(e,n){var r=n==null?"":typeof n=="object"?n+"":n;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function $o(e,n){return Po(e,n)}const ur=new Map;function Po(e,{target:n,anchor:r,props:a={},events:i,context:u,intro:f=!0}){oo();var p=new Set,_=w=>{for(var l=0;l<w.length;l++){var g=w[l];if(!p.has(g)){p.add(g);var b=Uo(g);n.addEventListener(g,mr,{passive:b});var L=ur.get(g);L===void 0?(document.addEventListener(g,mr,{passive:b}),ur.set(g,1)):ur.set(g,L+1)}}};_(gn(Ea)),xn.add(_);var s=void 0,x=co(()=>{var w=r??n.appendChild(Fn());return Fr(()=>{if(u){Xt({});var l=he;l.c=u}i&&(a.$$events=i),s=e(w,a)||{},u&&Yt()}),()=>{var b;for(var l of p){n.removeEventListener(l,mr);var g=ur.get(l);--g===0?(document.removeEventListener(l,mr),ur.delete(l)):ur.set(l,g)}xn.delete(_),w!==r&&((b=w.parentNode)==null||b.removeChild(w))}});return ko.set(s,x),s}let ko=new WeakMap;function ee(e,n,[r,a]=[0,0]){var i=e,u=null,f=null,p=ze,_=r>0?bn:0,s=!1;const x=(l,g=!0)=>{s=!0,w(g,l)},w=(l,g)=>{p!==(p=l)&&(p?(u?Hr(u):g&&(u=Fr(()=>g(i))),f&&Or(f,()=>{f=null})):(f?Hr(f):g&&(f=Fr(()=>g(i,[r+1,a]))),u&&Or(u,()=>{u=null})))};Tn(()=>{s=!1,n(x),s||w(null,null)},_)}function Ft(e,n){return n}function Co(e,n,r,a){for(var i=[],u=n.length,f=0;f<u;f++)Rn(n[f].e,i,!0);var p=u>0&&i.length===0&&r!==null;if(p){var _=r.parentNode;io(_),_.append(r),a.clear(),Vt(e,n[0].prev,n[u-1].next)}xa(i,()=>{for(var s=0;s<u;s++){var x=n[s];p||(a.delete(x.k),Vt(e,x.prev,x.next)),Ht(x.e,!p)}})}function St(e,n,r,a,i,u=null){var f=e,p={flags:n,items:new Map,first:null},_=(n&na)!==0;if(_){var s=e;f=s.appendChild(Fn())}var x=null,w=!1,l=X(()=>{var g=r();return pn(g)?g:g==null?[]:gn(g)});Tn(()=>{var g=t(l),b=g.length;w&&b===0||(w=b===0,Lo(g,p,f,i,n,a,r),u!==null&&(b===0?x?Hr(x):x=Fr(()=>u(f)):x!==null&&Or(x,()=>{x=null})),t(l))})}function Lo(e,n,r,a,i,u,f){var jt,It,qt,Dt;var p=(i&qa)!==0,_=(i&(En|An))!==0,s=e.length,x=n.items,w=n.first,l=w,g,b=null,L,q=[],se=[],le,oe,H,W;if(p)for(W=0;W<s;W+=1)le=e[W],oe=u(le,W),H=x.get(oe),H!==void 0&&((jt=H.a)==null||jt.measure(),(L??(L=new Set)).add(H));for(W=0;W<s;W+=1){if(le=e[W],oe=u(le,W),H=x.get(oe),H===void 0){var Q=l?l.e.nodes_start:r;b=No(Q,n,b,b===null?n.first:b.next,le,oe,W,a,i,f),x.set(oe,b),q=[],se=[],l=b.next;continue}if(_&&Vo(H,le,W,i),(H.e.f&Tt)!==0&&(Hr(H.e),p&&((It=H.a)==null||It.unfix(),(L??(L=new Set)).delete(H))),H!==l){if(g!==void 0&&g.has(H)){if(q.length<se.length){var K=se[0],Z;b=K.prev;var de=q[0],Pe=q[q.length-1];for(Z=0;Z<q.length;Z+=1)Nn(q[Z],K,r);for(Z=0;Z<se.length;Z+=1)g.delete(se[Z]);Vt(n,de.prev,Pe.next),Vt(n,b,de),Vt(n,Pe,K),l=K,b=Pe,W-=1,q=[],se=[]}else g.delete(H),Nn(H,l,r),Vt(n,H.prev,H.next),Vt(n,H,b===null?n.first:b.next),Vt(n,b,H),b=H;continue}for(q=[],se=[];l!==null&&l.k!==oe;)(l.e.f&Tt)===0&&(g??(g=new Set)).add(l),se.push(l),l=l.next;if(l===null)continue;H=l}q.push(H),b=H,l=H.next}if(l!==null||g!==void 0){for(var Ge=g===void 0?[]:gn(g);l!==null;)(l.e.f&Tt)===0&&Ge.push(l),l=l.next;var Le=Ge.length;if(Le>0){var zt=(i&na)!==0&&s===0?r:null;if(p){for(W=0;W<Le;W+=1)(qt=Ge[W].a)==null||qt.measure();for(W=0;W<Le;W+=1)(Dt=Ge[W].a)==null||Dt.fix()}Co(n,Ge,zt,x)}}p&&Bn(()=>{var Mt;if(L!==void 0)for(H of L)(Mt=H.a)==null||Mt.apply()}),ie.first=n.first&&n.first.e,ie.last=b&&b.e}function Vo(e,n,r,a){(a&En)!==0&&Er(e.v,n),(a&An)!==0?Er(e.i,r):e.i=r}function No(e,n,r,a,i,u,f,p,_,s){var x=(_&En)!==0,w=(_&Ga)===0,l=x?w?M(i):yr(i):i,g=(_&An)===0?f:yr(f),b={i:g,v:l,k:u,a:null,e:null,prev:r,next:a};try{return b.e=Fr(()=>p(e,l,g,s),ao),b.e.prev=r&&r.e,b.e.next=a&&a.e,r===null?n.first=b:(r.next=b,r.e.next=b.e),a!==null&&(a.prev=b,a.e.prev=b.e),b}finally{}}function Nn(e,n,r){for(var a=e.next?e.next.e.nodes_start:r,i=n?n.e.nodes_start:r,u=e.e.nodes_start;u!==a;){var f=Gr(u);i.before(u),u=f}}function Vt(e,n,r){n===null?e.first=r:(n.next=r,n.e.next=r&&r.e),r!==null&&(r.prev=n,r.e.prev=n&&n.e)}function Aa(e){var n,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(r=Aa(e[n]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Oo(){for(var e,n,r=0,a="",i=arguments.length;r<i;r++)(e=arguments[r])&&(n=Aa(e))&&(a&&(a+=" "),a+=n);return a}function Ho(e){return typeof e=="object"?Oo(e):e??""}function Wo(e,n,r){var a=e==null?"":""+e;return a===""?null:a}function On(e,n,r,a,i,u){var f=e.__className;if(f!==r){var p=Wo(r);p==null?e.removeAttribute("class"):e.className=p,e.__className=r}return u}const Xo=Symbol("is custom element"),Yo=Symbol("is html");function sr(e,n,r,a){var i=zo(e);i[n]!==(i[n]=r)&&(n==="loading"&&(e[ka]=r),r==null?e.removeAttribute(n):typeof r!="string"&&jo(e).includes(n)?e[n]=r:e.setAttribute(n,r))}function zo(e){return e.__attributes??(e.__attributes={[Xo]:e.nodeName.includes("-"),[Yo]:e.namespaceURI===no})}var Hn=new Map;function jo(e){var n=Hn.get(e.nodeName);if(n)return n;Hn.set(e.nodeName,n=[]);for(var r,a=e,i=Element.prototype;i!==a;){r=Qn(a);for(var u in r)r[u].set&&n.push(u);a=wn(a)}return n}function Cr(e,n,r=n){var a=Tr();ya(e,"input",i=>{var u=i?e.defaultValue:e.value;if(u=un(e)?sn(u):u,r(u),a&&u!==(u=n())){var f=e.selectionStart,p=e.selectionEnd;e.value=u??"",p!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(p,e.value.length))}}),Et(n)==null&&e.value&&r(un(e)?sn(e.value):e.value),_r(()=>{var i=n();un(e)&&i===sn(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Fa(e,n,r=n){ya(e,"change",a=>{var i=a?e.defaultChecked:e.checked;r(i)}),Et(n)==null&&r(e.checked),_r(()=>{var a=n();e.checked=!!a})}function un(e){var n=e.type;return n==="number"||n==="range"}function sn(e){return e===""?null:+e}function Wn(e,n){return e===n||(e==null?void 0:e[Jt])===n}function Sa(e={},n,r,a){return Sn(()=>{var i,u;return _r(()=>{i=u,u=[],Et(()=>{e!==r(...u)&&(n(e,...u),i&&Wn(r(...i),e)&&n(null,...i))})}),()=>{Bn(()=>{u&&Wn(r(...u),e)&&n(null,...u)})}}),e}function nr(e=!1){const n=he,r=n.l.u;if(!r)return;let a=()=>Ro(n.s);if(e){let i=0,u={};const f=Ar(()=>{let p=!1;const _=n.s;for(const s in _)_[s]!==u[s]&&(u[s]=_[s],p=!0);return p&&i++,i});a=()=>t(f)}r.b.length&&fo(()=>{Xn(n,a),cn(r.b)}),Cn(()=>{const i=Et(()=>r.m.map(Da));return()=>{for(const u of i)typeof u=="function"&&u()}}),r.a.length&&Cn(()=>{Xn(n,a),cn(r.a)})}function Xn(e,n){if(e.l.s)for(const r of e.l.s)t(r);n()}let $r=!1;function qo(e){var n=$r;try{return $r=!1,[e(),$r]}finally{$r=n}}function Yn(e){var n;return((n=e.ctx)==null?void 0:n.d)??!1}function $e(e,n,r,a){var K;var i=(r&Ka)!==0,u=!Sr||(r&Za)!==0,f=(r&Ja)!==0,p=(r&eo)!==0,_=!1,s;f?[s,_]=qo(()=>e[n]):s=e[n];var x=Jt in e||Pa in e,w=f&&(((K=cr(e,n))==null?void 0:K.set)??(x&&n in e&&(Z=>e[n]=Z)))||void 0,l=a,g=!0,b=!1,L=()=>(b=!0,g&&(g=!1,p?l=Et(a):l=a),l);s===void 0&&a!==void 0&&(w&&u&&Ha(),s=L(),w&&w(s));var q;if(u)q=()=>{var Z=e[n];return Z===void 0?L():(g=!0,b=!1,Z)};else{var se=(i?Ar:X)(()=>e[n]);se.f|=ea,q=()=>{var Z=t(se);return Z!==void 0&&(l=void 0),Z===void 0?l:Z}}if((r&Qa)===0)return q;if(w){var le=e.$$legacy;return function(Z,de){return arguments.length>0?((!u||!de||le||_)&&w(de?q():Z),Z):q()}}var oe=!1,H=!1,W=M(s),Q=Ar(()=>{var Z=q(),de=t(W);return oe?(oe=!1,H=!0,de):(H=!1,W.v=Z)});return f&&t(Q),i||(Q.equals=yn),function(Z,de){if(Nt!==null&&(oe=H,q(),t(W)),arguments.length>0){const Pe=de?t(Q):u&&f?Qt(Z):Z;if(!Q.equals(Pe)){if(oe=!0,m(W,Pe),b&&l!==void 0&&(l=Pe),Yn(Q))return Z;Et(()=>t(Q))}return Z}return Yn(Q)?Q.v:t(Q)}}const Go="5";var Zn;typeof window<"u"&&((Zn=window.__svelte??(window.__svelte={})).v??(Zn.v=new Set)).add(Go);ja();const Ko=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,Zo=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,Qo=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,Jo=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,ei=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,ti=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    mat4 eyetranslation = mat4(
        1.0, 0.0, 0.0, 0.0,
        0.0, 1.0, 0.0, 0.0,
        0.0, 0.0, 1.0, 0.0,
        offset2d, 0.0, 1.0);
    gl_Position = projmatrix * eyetranslation * viewmatrix * vec4(xyz + offset3d, 1.0);
}
`,ri=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,ni=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,ai=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp vec2 in_offset;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    mat4 eyetranslation = mat4(
        1.0, 0.0, 0.0, 0.0,
        0.0, 1.0, 0.0, 0.0,
        0.0, 0.0, 1.0, 0.0,
        in_offset.x, in_offset.y, 0.0, 1.0);
    gl_Position = projmatrix * eyetranslation * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,lr=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],zn=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],oi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],ii=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],ui=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:2,offset:56}],si=[{count:2,offset:0}],At=(e,n,r,a)=>{const i=e.createShader(n);if(!i)throw new Error(`failed to create shader '${a}'`);if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(i);throw new Error(`compilation error in shader '${a}':
${u}`)}return i},fr=(e,n,r,a)=>{const i=e.createProgram();if(!i)throw new Error(`failed to create program '${a}'`);if(e.attachShader(i,n),e.attachShader(i,r),e.linkProgram(i),e.detachShader(i,n),e.detachShader(i,r),!e.getProgramParameter(i,e.LINK_STATUS)){const u=e.getProgramInfoLog(i);throw new Error(`link error in program '${a}':
${u}`)}return i};function*li(e,n){let r=0;for(;!(r>e.length);){const a=r+n;yield e.slice(r,a),r=a}}function*fi(e,n){let r=0;for(;;){const a=r+n;if(a>e.length)break;yield e.slice(r,a),r=a}}function ln(e,n,r,a){const i=n*2,u=e.map(r);return u.length<i?u:li(u,n).map(f=>[...f]).map(a).toArray()}function Rt(e){return Math.round(e*255)}let mt=null;const ci=(e,n,r,a)=>{mt={value:e,level:n,draggedID:r,set:a}},di=()=>{mt=null},vi=(e,n,r)=>{!mt||mt.level!==e||mt.draggedID===n||(mt.set&&(mt.set(mt.value),mt.set=null),r(mt.value))};var _i=(e,n)=>n(!1),xi=O('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),hi=(e,n)=>n(!0),pi=O('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),gi=O('<input type="checkbox">'),wi=O("<!> <!> <label> </label> <br>",1);function Ne(e,n){Xt(n,!1);let r=$e(n,"expanded",12),a=$e(n,"id",8),i=$e(n,"text",8),u=$e(n,"checked",12,null),f=$e(n,"level",8),p=$e(n,"onexpandedchange",8,null),_=$e(n,"oncheckedchange",8,null);const s=Q=>{r(Q),p()&&p()()},x=Q=>{u(Q),_()&&_()()},w=()=>ci(!u(),f(),a(),x),l=()=>vi(f(),a(),x),g=di;nr();var b=wi(),L=ae(b);{var q=Q=>{var K=xi();K.__click=[_i,s],ut(()=>sr(K,"id",u()===null?a():null)),N(Q,K)},se=Q=>{var K=pi();K.__click=[hi,s],ut(()=>sr(K,"id",u()===null?a():null)),N(Q,K)};ee(L,Q=>{r()?Q(q):Q(se,!1)})}var le=C(L,2);{var oe=Q=>{var K=gi();sr(K,"draggable",!0),K.__change=function(...Z){var de;(de=_())==null||de.apply(this,Z)},ut(()=>sr(K,"id",a())),Oe("dragstart",K,w),Oe("dragenter",K,l),Oe("dragend",K,g),Fa(K,u),N(Q,K)};ee(le,Q=>{u()!==null&&Q(oe)})}var H=C(le,2);sr(H,"draggable",!0),H.__change=function(...Q){var K;(K=_())==null||K.apply(this,Q)};var W=xe(H);ut(()=>{sr(H,"for",a()),we(W,i())}),Oe("dragstart",H,w),Oe("dragenter",H,l),Oe("dragend",H,g),N(e,b),Yt()}rr(["click","change"]);var mi=(e,n,r)=>n()(r()),bi=O('<button class="px-1 bg-gray-200 hover:bg-gray-100">view image</button> <br>',1),yi=O('<div class="ml-2 w-full"><!> <br> <br> <br> <br></div>');function jn(e,n){Xt(n,!1);let r=$e(n,"image",8),a=$e(n,"view",8,null);nr();var i=yi(),u=xe(i);{var f=w=>{var l=bi(),g=ae(l);g.__click=[mi,a,r],N(w,l)};ee(u,w=>{a()&&w(f)})}var p=C(u),_=C(p,2),s=C(_,2),x=C(s,2);ut((w,l,g,b)=>{we(p,` screen: ${r().x??""},${r().y??""}
  ${r().w??""}x${r().h??""} `),we(_,` atlas: ${r().ax??""},${r().ay??""}
  ${r().aw??""}x${r().ah??""} `),we(s,` rgb: ${w??""}, ${l??""}, ${g??""} `),we(x,` alpha: ${b??""} `)},[()=>Rt(r().r),()=>Rt(r().g),()=>Rt(r().b),()=>r().a.toPrecision(4)],X),N(e,i),Yt()}rr(["click"]);var Ei=(e,n,r)=>n()(r()),Ai=O('<button class="px-1 bg-gray-200 hover:bg-gray-100">view texture</button> <br>',1),Fi=O(" <br>",1),Si=O('<div class="ml-2 w-full"><!> <!> <br> <br> <br> <br></div>');function qn(e,n){Xt(n,!1);let r=$e(n,"vertex",8),a=$e(n,"view",8,null);nr();var i=Si(),u=xe(i);{var f=g=>{var b=Ai(),L=ae(b);L.__click=[Ei,a,r],N(g,b)};ee(u,g=>{a()&&g(f)})}var p=C(u,2);{var _=g=>{var b=Fi(),L=ae(b);ut(()=>we(L,`model: ${r().modelpoint.x??""},${r().modelpoint.y??""},${r().modelpoint.z??""} `)),N(g,b)};ee(p,g=>{r().modelpoint&&g(_)})}var s=C(p),x=C(s,2),w=C(x,2),l=C(w,2);ut((g,b,L,q,se,le)=>{we(s,` atlas: ${r().ax??""},${r().ay??""}
  ${r().aw??""}x${r().ah??""} `),we(x,` uv: ${g??""}, ${b??""} `),we(w,` rgb: ${L??""}, ${q??""}, ${se??""} `),we(l,` alpha: ${le??""} `)},[()=>r().u.toPrecision(4),()=>r().v.toPrecision(4),()=>Rt(r().r),()=>Rt(r().g),()=>Rt(r().b),()=>r().a.toPrecision(4)],X),N(e,i),Yt()}rr(["click"]);var Ti=O('<div class="ml-2 w-full"> <br> <br> <br></div>');function Gn(e,n){Xt(n,!1);let r=$e(n,"vertex",8);nr();var a=Ti(),i=xe(a),u=C(i,2),f=C(u,2);ut((p,_,s,x)=>{we(i,`model: ${r().modelpoint.x??""},${r().modelpoint.y??""},${r().modelpoint.z??""} `),we(u,` rgb: ${p??""}, ${_??""}, ${s??""} `),we(f,` alpha: ${x??""} `)},[()=>Rt(r().r),()=>Rt(r().g),()=>Rt(r().b),()=>r().a.toPrecision(4)],X),N(e,a),Yt()}var Ri=O("<div> </div>"),Bi=(e,n,r)=>{const a=n().textureId,i=r().textures[a];r(r().selectedTextureId=a.toString(),!0),r(r().selectedTexture=i,!0),r(r().textureBoundX=0,!0),r(r().textureBoundY=0,!0),r(r().textureBoundW=i.width,!0),r(r().textureBoundH=i.height,!0),r(r().textureViewX=0,!0),r(r().textureViewY=0,!0),r(r().textureViewScale=100,!0),r(r().viewIsWholeAtlas=!0,!0),r().redraw()},Ui=O('<button class="px-1 bg-gray-200 hover:bg-gray-100"> </button> <br>',1),Ii=O("<!> <!>",1),Di=O('<div class="ml-1"></div>'),Mi=O("<!> <!>",1),$i=O("<!> <!>",1),Pi=O('<div class="ml-1"><!></div>'),ki=O("<!> <!>",1),Ci=O("<!> <!>",1),Li=O('<div class="ml-1"></div>'),Vi=O("<!> <!>",1),Ni=O("<!> <!>",1),Oi=O('<div class="ml-1"><!></div>'),Hi=O("<!> <!>",1),Wi=O("<!> <!>",1),Xi=O('<div class="ml-1"></div>'),Yi=O("<!> <!>",1),zi=O("<!> <!>",1),ji=O('<div class="ml-1"><!></div>'),qi=O("<!> <!>",1),Gi=O('<div class="ml-1"><!> <!></div>'),Ki=O(" <br> <!> <!>",1),Zi=O('<div class="ml-3 text-sm"><!> <!> <!> <!> <!></div>');function Qi(e,n){Xt(n,!1);let r=$e(n,"entity",12),a=$e(n,"menuData",12),i=$e(n,"level",8);const u=6,f=100;let p=M(!1),_=M(!1),s=M(!1);function x(I){return"images"in I}function w(I){return"vertices"in I}function l(I){return"vertices"in I}const g=(I,J)=>{const Y=I[0];let pe=Y.x,Ve=Y.x,Xe=Y.y,vt=Y.y;for(const ue of I)ue.x<pe&&(pe=ue.x),ue.x>Ve&&(Ve=ue.x),ue.y<Xe&&(Xe=ue.y),ue.y>vt&&(vt=ue.y);return{x:pe,y:Xe,w:Ve-pe,h:vt-Xe,ax:Y.ax,ay:Y.ay,aw:Y.aw,ah:Y.ah,r:Y.r,g:Y.g,b:Y.b,a:Y.a,expanded:!1,index:J}},b=(I,J)=>{const Y=J*f,pe=Y*u;return{images:I,desc:`${Y}-${Y+I.length-1}`,expanded:!1,vertexRangeStart:pe,vertexRangeEnd:pe+I.length*u}},L=(I,J)=>({modelpoint:{...I},expanded:!1,index:J,...I}),q=(I,J)=>({modelpoint:null,expanded:!1,index:J,...I}),se=(I,J)=>{const Y=J*f;return{vertices:I,desc:`${Y}-${Y+I.length-1}`,expanded:!1}},le=(I,J)=>({modelpoint:{...I},expanded:!1,index:J,...I}),oe=(I,J)=>{const Y=J*f;return{vertices:I,desc:`${Y}-${Y+I.length-1}`,expanded:!1}},H=(I,J)=>({vertices:ln(I.vertices,f,le,oe),vertexCount:I.vertices.length,expanded:!1,verticesExpanded:!1,index:J});let W=M(null),Q=M(0),K=M(null),Z=M(0),de=M(null),Pe=M(0);if(r().type==="batch2d"||r().type==="minimap2d"||r().type==="billboard"){const I=[...fi(r().vertices,u)];m(Q,I.length),m(W,ln(I,f,g,b))}else if(r().vertices){const I=r().type!=="renderparticles"?L:q;m(Z,r().vertices.length),m(K,ln(r().vertices,f,I,se))}r().models&&(m(Pe,r().models.length),m(de,r().models.map(H)));const Ge=I=>{const J=r().textureId,Y=a().textures[J];a(a().selectedTextureId=r().uuid,!0),a(a().selectedTexture=Y,!0),a(a().textureBoundX=I.ax,!0),a(a().textureBoundY=I.ay,!0),a(a().textureBoundW=I.aw,!0),a(a().textureBoundH=I.ah,!0),a(a().textureViewX=0,!0),a(a().textureViewY=0,!0),a(a().textureViewScale=100,!0),a(a().viewIsWholeAtlas=!1,!0),a().redraw()};nr();var Le=Zi(),zt=xe(Le);{var jt=I=>{var J=Ri(),Y=xe(J);ut(()=>we(Y,`animated: ${r().animated??""}`)),N(I,J)};ee(zt,I=>{typeof r().animated=="boolean"&&I(jt)})}var It=C(zt,2);{var qt=I=>{var J=Ui(),Y=ae(J);Y.__click=[Bi,r,a];var pe=xe(Y);ut(()=>we(pe,`texture: #${r().textureId??""}`)),N(I,J)};ee(It,I=>{typeof r().textureId=="number"&&I(qt)})}var Dt=C(It,2);{var Mt=I=>{var J=ki(),Y=ae(J);const pe=X(()=>`${r().uuid}-images2d`),Ve=X(()=>`2D images (${t(Q)})`);Ne(Y,{get id(){return t(pe)},get text(){return t(Ve)},get level(){return i()},get expanded(){return t(p)},set expanded(ue){m(p,ue)},$$legacy:!0});var Xe=C(Y,2);{var vt=ue=>{var ke=Mr(),gt=ae(ke);St(gt,1,()=>t(W),Ft,(st,j,_e)=>{var Ke=Pi(),Ze=xe(Ke);{var Ye=me=>{var Se=Mi(),Ue=ae(Se),Je=()=>t(j).images.every(ve=>r().enabledVerticesList[ve.index*u]),Te=ve=>{for(let be=t(j).vertexRangeStart;be<t(j).vertexRangeEnd;be+=1)r(r().enabledVerticesList[be]=ve,!0)};const Ie=X(()=>`${r().uuid}-images-${t(j).desc}`),Ae=X(()=>`[Images ${t(j).desc}]`),Re=X(()=>i()+1);Ne(Ue,{get checked(){return Je()},set checked(ve){Te(ve)},get oncheckedchange(){return a().redraw},get id(){return t(Ie)},get text(){return t(Ae)},get level(){return t(Re)},get expanded(){return t(j).expanded},set expanded(ve){t(j).expanded=ve,je(()=>t(W))},$$legacy:!0});var fe=C(Ue,2);{var ge=ve=>{var be=Di();St(be,5,()=>t(j).images,Ft,(et,ye,tt)=>{var ce=Ii(),c=ae(ce),Ce=()=>r().enabledVerticesList[t(ye).index*u],Fe=De=>{for(let _t=0;_t<u;_t+=1)r(r().enabledVerticesList[t(ye).index*u+_t]=De,!0)};const Gt=X(()=>`${r().uuid}-images-${t(j).desc}-${tt}`),lt=X(()=>i()+2);Ne(c,{get checked(){return Ce()},set checked(De){Fe(De)},get oncheckedchange(){return a().redraw},get id(){return t(Gt)},text:`Image ${_e*f+tt}`,get level(){return t(lt)},get expanded(){return t(ye).expanded},set expanded(De){t(ye).expanded=De,je(()=>(t(W),t(j).images))},$$legacy:!0});var hr=C(c,2);{var rt=De=>{jn(De,{get image(){return t(ye)},view:Ge})};ee(hr,De=>{t(ye).expanded&&De(rt)})}N(et,ce)}),N(ve,be)};ee(fe,ve=>{t(j).expanded&&ve(ge)})}N(me,Se)},Qe=me=>{var Se=$i(),Ue=ae(Se),Je=()=>r().enabledVerticesList[t(j).index*u],Te=ge=>{for(let ve=0;ve<u;ve+=1)r(r().enabledVerticesList[t(j).index*u+ve]=ge,!0)};const Ie=X(()=>`${r().uuid}-images-${_e}`),Ae=X(()=>i()+1);Ne(Ue,{get checked(){return Je()},set checked(ge){Te(ge)},get oncheckedchange(){return a().redraw},get id(){return t(Ie)},text:`Image ${_e}`,get level(){return t(Ae)},get expanded(){return t(j).expanded},set expanded(ge){t(j).expanded=ge,je(()=>t(W))},$$legacy:!0});var Re=C(Ue,2);{var fe=ge=>{jn(ge,{get image(){return t(j)},view:Ge})};ee(Re,ge=>{t(j).expanded&&ge(fe)})}N(me,Se)};ee(Ze,me=>{x(t(j))?me(Ye):me(Qe,!1)})}N(st,Ke)}),N(ue,ke)};ee(Xe,ue=>{t(p)&&ue(vt)})}N(I,J)};ee(Dt,I=>{t(W)&&t(Q)&&I(Mt)})}var Br=C(Dt,2);{var Ur=I=>{var J=Hi(),Y=ae(J);const pe=X(()=>`${r().uuid}-vertices3d`),Ve=X(()=>`3D vertices (${t(Z)})`);Ne(Y,{get id(){return t(pe)},get text(){return t(Ve)},get level(){return i()},get expanded(){return t(_)},set expanded(ue){m(_,ue)},$$legacy:!0});var Xe=C(Y,2);{var vt=ue=>{var ke=Mr(),gt=ae(ke);St(gt,1,()=>t(K),Ft,(st,j,_e)=>{var Ke=Oi(),Ze=xe(Ke);{var Ye=me=>{var Se=Vi(),Ue=ae(Se);const Je=X(()=>`${r().uuid}-vertices-${t(j).desc}`),Te=X(()=>`[Vertices ${t(j).desc}]`),Ie=X(()=>i()+1);Ne(Ue,{get id(){return t(Je)},get text(){return t(Te)},get level(){return t(Ie)},get expanded(){return t(j).expanded},set expanded(fe){t(j).expanded=fe,je(()=>t(K))},$$legacy:!0});var Ae=C(Ue,2);{var Re=fe=>{var ge=Li();St(ge,5,()=>t(j).vertices,Ft,(ve,be,et)=>{var ye=Ci(),tt=ae(ye);const ce=X(()=>`${r().uuid}-vertices-${t(j).desc}-${t(be).index}`),c=X(()=>`Vertex ${t(be).index}`),Ce=X(()=>i()+2);Ne(tt,{get id(){return t(ce)},get text(){return t(c)},get level(){return t(Ce)},get expanded(){return t(be).expanded},set expanded(lt){t(be).expanded=lt,je(()=>(t(K),t(j).vertices))},$$legacy:!0});var Fe=C(tt,2);{var Gt=lt=>{qn(lt,{get vertex(){return t(be)},view:Ge})};ee(Fe,lt=>{t(be).expanded&&lt(Gt)})}N(ve,ye)}),N(fe,ge)};ee(Ae,fe=>{t(j).expanded&&fe(Re)})}N(me,Se)},Qe=me=>{var Se=Ni(),Ue=ae(Se);const Je=X(()=>`${r().uuid}-vertices-${t(j).index}`),Te=X(()=>`Vertex ${t(j).index}`),Ie=X(()=>i()+1);Ne(Ue,{get id(){return t(Je)},get text(){return t(Te)},get level(){return t(Ie)},get expanded(){return t(j).expanded},set expanded(fe){t(j).expanded=fe,je(()=>t(K))},$$legacy:!0});var Ae=C(Ue,2);{var Re=fe=>{qn(fe,{get vertex(){return t(j)},view:Ge})};ee(Ae,fe=>{t(j).expanded&&fe(Re)})}N(me,Se)};ee(Ze,me=>{w(t(j))?me(Ye):me(Qe,!1)})}N(st,Ke)}),N(ue,ke)};ee(Xe,ue=>{t(_)&&ue(vt)})}N(I,J)};ee(Br,I=>{t(K)&&t(Z)&&I(Ur)})}var Ir=C(Br,2);{var Jr=I=>{var J=Ki(),Y=ae(J),pe=C(Y,3);const Ve=X(()=>`${r().uuid}-models`),Xe=X(()=>`Models (${t(Pe)})`);Ne(pe,{get id(){return t(Ve)},get text(){return t(Xe)},get level(){return i()},get expanded(){return t(s)},set expanded(ke){m(s,ke)},$$legacy:!0});var vt=C(pe,2);{var ue=ke=>{var gt=Mr(),st=ae(gt);St(st,1,()=>t(de),Ft,(j,_e,Ke)=>{var Ze=Gi(),Ye=xe(Ze);const Qe=X(()=>`${r().uuid}-models`),me=X(()=>`Model ${t(_e).index}`),Se=X(()=>i()+1);Ne(Ye,{get id(){return t(Qe)},get text(){return t(me)},get level(){return t(Se)},get expanded(){return t(_e).expanded},set expanded(Te){t(_e).expanded=Te,je(()=>t(de))},$$legacy:!0});var Ue=C(Ye,2);{var Je=Te=>{var Ie=qi(),Ae=ae(Ie);const Re=X(()=>`${r().uuid}-vertices`),fe=X(()=>`Vertices (${t(_e).vertexCount})`),ge=X(()=>i()+2);Ne(Ae,{get id(){return t(Re)},get text(){return t(fe)},get level(){return t(ge)},get expanded(){return t(_e).verticesExpanded},set expanded(et){t(_e).verticesExpanded=et,je(()=>t(de))},$$legacy:!0});var ve=C(Ae,2);{var be=et=>{var ye=Mr(),tt=ae(ye);St(tt,1,()=>t(_e).vertices,Ft,(ce,c,Ce)=>{var Fe=ji(),Gt=xe(Fe);{var lt=rt=>{var De=Yi(),_t=ae(De);const $t=X(()=>`${r().uuid}-vertices-${t(c).desc}`),ar=X(()=>`[Vertices ${t(c).desc}]`),wt=X(()=>i()+3);Ne(_t,{get id(){return t($t)},get text(){return t(ar)},get level(){return t(wt)},get expanded(){return t(c).expanded},set expanded(nt){t(c).expanded=nt,je(()=>(t(de),t(_e).vertices))},$$legacy:!0});var or=C(_t,2);{var pr=nt=>{var gr=Xi();St(gr,5,()=>t(c).vertices,Ft,(en,Pt,Un)=>{var h=Wi(),o=ae(h);const v=X(()=>`${r().uuid}-vertices-${t(c).desc}-${t(Pt).index}`),d=X(()=>`Vertex ${t(Pt).index}`),G=X(()=>i()+4);Ne(o,{get id(){return t(v)},get text(){return t(d)},get level(){return t(G)},get expanded(){return t(Pt).expanded},set expanded(R){t(Pt).expanded=R,je(()=>(t(de),t(_e).vertices,t(c).vertices))},$$legacy:!0});var F=C(o,2);{var S=R=>{Gn(R,{get vertex(){return t(Pt)}})};ee(F,R=>{t(Pt).expanded&&R(S)})}N(en,h)}),N(nt,gr)};ee(or,nt=>{t(c).expanded&&nt(pr)})}N(rt,De)},hr=rt=>{var De=zi(),_t=ae(De);const $t=X(()=>`${r().uuid}-${t(_e).index}-vertex-${t(c).index}`),ar=X(()=>`Vertex ${t(c).index}`),wt=X(()=>i()+3);Ne(_t,{get id(){return t($t)},get text(){return t(ar)},get level(){return t(wt)},get expanded(){return t(c).expanded},set expanded(nt){t(c).expanded=nt,je(()=>(t(de),t(_e).vertices))},$$legacy:!0});var or=C(_t,2);{var pr=nt=>{Gn(nt,{get vertex(){return t(c)}})};ee(or,nt=>{t(c).expanded&&nt(pr)})}N(rt,De)};ee(Gt,rt=>{l(t(c))?rt(lt):rt(hr,!1)})}N(ce,Fe)}),N(et,ye)};ee(ve,et=>{t(_e).verticesExpanded&&et(be)})}N(Te,Ie)};ee(Ue,Te=>{t(_e).expanded&&Te(Je)})}N(j,Ze)}),N(ke,gt)};ee(vt,ke=>{t(s)&&ke(ue)})}ut(()=>we(Y,`screen: ${r().targetx??""},${r().targety??""}
    ${r().targetw??""}x${r().targeth??""} `)),N(I,J)};ee(Ir,I=>{t(de)&&t(Pe)&&I(Jr)})}N(e,Le),Yt()}rr(["click"]);var Ji=(e,n,r,a)=>n(r(),a()),eu=O('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),tu=O("<div><!> <!></div>"),ru=O('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function nu(e,n){Xt(n,!1);let r=$e(n,"data",12);const a=(_,s)=>{r().selectedTexture===s?r(r().selectedTexture=null,!0):(r(r().selectedTextureId=_,!0),r(r().selectedTexture=s,!0),r(r().textureBoundX=0,!0),r(r().textureBoundY=0,!0),r(r().textureBoundW=s.width,!0),r(r().textureBoundH=s.height,!0),r(r().textureViewX=0,!0),r(r().textureViewY=0,!0),r(r().textureViewScale=100,!0),r(r().viewIsWholeAtlas=!0,!0)),r().redraw()},i=1;nr();var u=ru(),f=C(ae(u),2);St(f,1,()=>Object.entries(r().textures),Ft,(_,s)=>{let x=()=>t(s)[0],w=()=>t(s)[1];var l=eu(),g=xe(l);g.__click=[Ji,a,x,w];var b=xe(g);ut(()=>{On(g,1,Ho(r().selectedTexture===w()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),we(b,`#${x()??""}`)}),N(_,l)});var p=C(f,6);St(p,1,()=>r().entities,Ft,(_,s,x)=>{var w=tu();On(w,1,`select-none m-0 border-none w-full ${x&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var l=xe(w);Ne(l,{id:`menu${x}`,get text(){return r().entities[x].type},get oncheckedchange(){return r().redraw},level:i,get expanded(){return r().entities[x].expanded},set expanded(L){r().entities[x].expanded=L,je(()=>r().entities)},get checked(){return r().entities[x].enabled},set checked(L){r().entities[x].enabled=L,je(()=>r().entities)},$$legacy:!0});var g=C(l,2);{var b=L=>{Qi(L,{level:i+1,get entity(){return r().entities[x]},set entity(q){r().entities[x]=q,je(()=>r().entities)},get menuData(){return r()},set menuData(q){r(q)},$$legacy:!0})};ee(g,L=>{r().entities[x].expanded&&L(b)})}N(_,w)}),N(e,u),Yt()}rr(["click"]);const Me=[];for(let e=0;e<256;++e)Me.push((e+256).toString(16).slice(1));function au(e,n=0){return(Me[e[n+0]]+Me[e[n+1]]+Me[e[n+2]]+Me[e[n+3]]+"-"+Me[e[n+4]]+Me[e[n+5]]+"-"+Me[e[n+6]]+Me[e[n+7]]+"-"+Me[e[n+8]]+Me[e[n+9]]+"-"+Me[e[n+10]]+Me[e[n+11]]+Me[e[n+12]]+Me[e[n+13]]+Me[e[n+14]]+Me[e[n+15]]).toLowerCase()}let fn;const ou=new Uint8Array(16);function iu(){if(!fn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");fn=crypto.getRandomValues.bind(crypto)}return fn(ou)}const uu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kn={randomUUID:uu};function Zt(e,n,r){var i;if(Kn.randomUUID&&!e)return Kn.randomUUID();e=e||{};const a=e.random??((i=e.rng)==null?void 0:i.call(e))??iu();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,au(a)}const su=(e,n)=>t(n).select();var lu=(e,n)=>{e.key==="Escape"&&(e.preventDefault(),n(null))},fu=(e,n)=>n(null),cu=O('<div class="absolute backdrop-blur-sm h-full w-full left-0 top-0 m-0 p-12 overflow-none focus-visible:outline-none"><div class="w-full h-full p-4 bg-slate-100 rounded-lg flex flex-col"><textarea class="w-full flex-grow border border-black resize-none rounded-md"></textarea> <button class="w-full h-fit rounded-sm p-2 mt-1 text-xl font-bold bg-blue-500 opacity-90 hover:opacity-100">Select all</button></div></div> <input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 top-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">',1);function du(e,n){let r=$e(n,"text",12),a=M();var i=cu(),u=ae(i);u.__keydown=[lu,r];var f=xe(u),p=xe(f);Sa(p,x=>m(a,x),()=>t(a));var _=C(p,2);_.__click=[su,a];var s=C(u,2);s.__click=[fu,r],Cr(p,r),N(e,i)}rr(["keydown","click"]);const vu=(e,n,r,a,i,u,f,p)=>{const _=t(n).selectedTexture;if(!_){m(r,"error: no texture selected");return}if(t(a)===null||t(a)<0||t(a)>=t(n).textureBoundH){m(r,"error: selected row is out-of-bounds");return}const s=t(i)?t(u):0,x=t(n).textureBoundX+s,w=t(a)+t(n).textureBoundY,l=t(i)?t(f)+1-t(u):t(n).textureBoundW;if(s<0||s+l>t(n).textureBoundW){m(r,"error: selection is out-of-bounds");return}const g=(w*_.width+x)*4,b=_.data.slice(g,g+l*4),L=p(b);m(r,`'${L}'`)};var _u=(e,n,r)=>m(n,r),xu=(e,n,r)=>m(n,r),hu=(e,n)=>m(n,!1),pu=O('<div class="overflow-auto absolute w-60 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),gu=(e,n)=>m(n,!0),wu=O('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),mu=(e,n,r,a,i)=>{ot(n,t(n).selectedTexture=null),r(t(a),t(i))},bu=O('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),yu=O('<input type="checkbox"> from x: <input class="w-14 border border-black" type="number"> to <input class="w-14 border border-black" type="number">',1),Eu=O('RGBA data for all rows: <input class="w-4 h-4 opacity-75 hover:opacity-100" type="image" src="plugin://app/images/clipboard-solid.svg" alt="copy">',1),Au=O('<!> <div class="absolute top-1 w-full h-fit grid place-items-center pointer-events-none"><div class="w-fit h-full rounded-lg bg-gray-100 pointer-events-auto px-2 py-1"><div class="w-16 h-full table-cell"> <br> </div> <div class="w-28 h-full table-cell px-1 mx-1"> <br> </div> <div class="w-fit h-full table-cell px-1">RGBA data for row: <input class="w-18 border border-black" type="number"> <input class="w-4 h-4 opacity-75 enabled:hover:opacity-100" type="image" src="plugin://app/images/clipboard-solid.svg" alt="copy"> <br> <!></div></div></div>',1),Fu=O('<canvas class="absolute right-0"></canvas> <!> <!> <!>',1);function Su(e,n){Xt(n,!1);const r=M();let a=M({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",textureBoundX:0,textureBoundY:0,textureBoundW:1,textureBoundH:1,textureViewX:0,textureViewY:0,textureViewScale:100,viewIsWholeAtlas:!1,redraw:()=>Fe(t(ce),t(c))});const i=h=>{const o=I.get(h);return o?parseInt(o):0},u=0;let f=M(null),p=M(null),_=M(null),s=M(null),x=M(null),w=M(null),l=M(null),g=M(null),b=M(null),L=M(null),q=M(null),se=M(null),le=M(null),oe=M(null),H=M(null),W=M(null),Q=M(null),K=M(null),Z=M(null),de=M(null),Pe=M(null),Ge=M(null),Le=M(null),zt=M(null),jt=M(null),It=M(null),qt=M(null),Dt=M(null),Mt=null;const Br=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),Ur=10,Ir=1e3,Jr=10,I=new URLSearchParams(window.location.search),J=I.get("n"),Y=J?Math.max(parseInt(J),1):1,pe=i("w"),Ve=i("h"),Xe=i("gx"),vt=i("gy"),ue=i("gw"),ke=i("gh"),gt=Ve-(vt+ke);let st=0,j=M(0),_e=M(),Ke=null,Ze=null,Ye=0,Qe=0,me,Se,Ue=M(!1),Je=M(!1),Te=M(null),Ie=M(null),Ae=M(null),Re=M(null),fe=M(!1),ge=M(!1),ve=M(!1),be=M(!1),et=M(!1),ye=M(null),tt=M(!1),ce=M(null),c=M(null);const Ce=(h,o,v,d)=>{h.bindBuffer(h.ARRAY_BUFFER,o.vbo);for(let F=0;F<t(j);F+=1){const S=o.attribs[F];if(!S){h.disableVertexAttribArray(F);continue}h.enableVertexAttribArray(F),h.vertexAttribPointer(F,S.count,h.FLOAT,!1,o.step,S.offset)}if(!d){h.drawArrays(h.TRIANGLES,0,v);return}let G=null;for(let F=0;F<v;F+=1){const S=d[F];G===null?S&&(G=F):S||(h.drawArrays(h.TRIANGLES,G,F-G),G=null)}G!==null&&h.drawArrays(h.TRIANGLES,G,v-G)},Fe=(h,o)=>{if(o.viewport(0,0,h.width,h.height),o.scissor(0,0,h.width,h.height),o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),!t(Ue)){o.viewport(0,0,h.width,h.height);const v=()=>{o.clearColor(.525,.968,.495,1),o.clear(o.COLOR_BUFFER_BIT)},d=()=>{o.clearColor(.2,.2,.2,1),o.clear(o.COLOR_BUFFER_BIT)},G=Math.min(st/Y,1),F=Math.floor(h.width*.65)&-2,S=70,R=8,B=R*2,k=F*G;if(v(),h.width<=B||h.height<=B)return;o.scissor(R,R,h.width-B,h.height-B),d(),o.scissor(h.width/2-(F/2+R),h.height/2-(S/2+R),F+B,S+B),v(),o.scissor(h.width/2-F/2+k,h.height/2-S/2,F-k,S),d();return}if(t(a).selectedTexture){t(a).textureViewScale<Ur&&ot(a,t(a).textureViewScale=Ur),t(a).textureViewScale>Ir&&ot(a,t(a).textureViewScale=Ir);const v=t(a).textureViewScale/100,d=v*2,G=t(a).textureBoundX,F=t(a).textureBoundX+t(a).textureBoundW,S=t(a).textureBoundY,R=t(a).textureBoundY+t(a).textureBoundH;let B=t(a).textureViewX+h.width/d,k=t(a).textureViewY+h.height/d,P=!1;if(B<G&&(B=G,P=!0),k<S&&(k=S,P=!0),B>F&&(B=F,P=!0),k>R&&(k=R,P=!0),t(a).textureBoundW*v<=h.width&&(B=G+t(a).textureBoundW/2,P=!0),t(a).textureBoundH*v<=h.height&&(k=S+t(a).textureBoundH/2,P=!0),P&&(ot(a,t(a).textureViewX=B-h.width/d),ot(a,t(a).textureViewY=k-h.height/d)),o.useProgram(t(Pe)),o.viewport(0,0,h.width,h.height),o.uniform2fv(t(Ge),[h.width,h.height]),!Mt){const Be=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Be),o.bufferData(o.ARRAY_BUFFER,Br,o.STATIC_DRAW),Mt={vbo:Be,step:8,attribs:si}}Ce(o,Mt,6);const z=t(a).selectedTexture,T=(t(a).textureBoundX-t(a).textureViewX)*v,D=T+t(a).textureBoundW*v,y=(t(a).textureBoundY-t(a).textureViewY)*v,U=y+t(a).textureBoundH*v,$=G/z.width,E=F/z.width,A=S/z.height,V=R/z.height;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(t(f)),o.uniform4fv(t(p),[z.width,z.height,h.width,h.height]),o.bindTexture(o.TEXTURE_2D,z.texture),o.uniform1i(t(_),u);const te=o.createBuffer();if(o.bindBuffer(o.ARRAY_BUFFER,te),o.bufferData(o.ARRAY_BUFFER,new Float32Array([T,y,$,A,t(a).textureBoundX,t(a).textureBoundY,t(a).textureBoundW,t(a).textureBoundH,1,1,1,1,0,0,0,D,y,E,A,t(a).textureBoundX,t(a).textureBoundY,t(a).textureBoundW,t(a).textureBoundH,1,1,1,1,0,0,0,T,U,$,V,t(a).textureBoundX,t(a).textureBoundY,t(a).textureBoundW,t(a).textureBoundH,1,1,1,1,0,0,0,D,y,E,A,t(a).textureBoundX,t(a).textureBoundY,t(a).textureBoundW,t(a).textureBoundH,1,1,1,1,0,0,0,D,U,E,V,t(a).textureBoundX,t(a).textureBoundY,t(a).textureBoundW,t(a).textureBoundH,1,1,1,1,0,0,0,T,U,$,V,t(a).textureBoundX,t(a).textureBoundY,t(a).textureBoundW,t(a).textureBoundH,1,1,1,1,0,0,0]),o.STATIC_DRAW),Ce(o,{vbo:te,step:60,attribs:lr},6),o.deleteBuffer(te),t(tt)){const Be=t(Ie)??0,Ee=T+(t(fe)&&t(Ae)?t(Ae)*v:0),at=t(fe)&&t(Re)?T+(t(Re)+1)*v:D,kt=y+Be*v,ir=Math.max(y+(Be+1)*v,kt+1),Kt=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Kt),o.bufferData(o.ARRAY_BUFFER,new Float32Array([Ee,kt,0,0,0,0,1,1,1,.15,.15,.4,1,0,0,at,kt,1,0,0,0,1,1,1,.15,.15,.4,1,0,0,Ee,ir,0,1,0,0,1,1,1,.15,.15,.4,1,0,0,at,kt,1,0,0,0,1,1,1,.15,.15,.4,1,0,0,at,ir,1,1,0,0,1,1,1,.15,.15,.4,1,0,0,Ee,ir,0,1,0,0,1,1,1,.15,.15,.4,1,0,0]),o.STATIC_DRAW),Ce(o,{vbo:Kt,step:60,attribs:lr},6),o.deleteBuffer(Kt)}return}Ze&&(o.bindFramebuffer(o.DRAW_FRAMEBUFFER,Ze),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)),o.disable(o.SCISSOR_TEST);for(let v of t(a).entities)if(v.enabled){if(v.type==="batch2d"){o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST);const d=t(a).textures[v.textureId];o.useProgram(t(f)),o.viewport(0,0,pe,Ve),o.uniform4fv(t(p),[d.width,d.height,v.targetWidth,v.targetHeight]),o.bindTexture(o.TEXTURE_2D,d.texture),o.uniform1i(t(_),u),Ce(o,v.buffer,v.vertexCount,v.enabledVerticesList)}if(v.type==="render3d"){o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.DEPTH_TEST);const d=t(a).textures[v.textureId];o.useProgram(v.animated?t(L):t(s)),o.viewport(Xe,gt,ue,ke),o.uniformMatrix4fv(v.animated?t(q):t(x),!1,v.modelMatrix),o.uniformMatrix4fv(v.animated?t(se):t(w),!1,me),o.uniformMatrix4fv(v.animated?t(le):t(l),!1,Se),o.uniform2fv(v.animated?t(oe):t(g),[d.width,d.height]),o.bindTexture(o.TEXTURE_2D,d.texture),o.uniform1i(v.animated?t(H):t(b),u),Ce(o,v.buffer,v.vertexCount)}if(v.type==="renderparticles"){o.blendFuncSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.DEPTH_TEST);const d=t(a).textures[v.textureId];o.useProgram(t(W)),o.viewport(Xe,gt,ue,ke),o.uniformMatrix4fv(t(Q),!1,me),o.uniformMatrix4fv(t(K),!1,Se),o.uniform2fv(t(de),[d.width,d.height]),o.bindTexture(o.TEXTURE_2D,d.texture),o.uniform1i(t(Z),u),Ce(o,v.buffer,v.vertexCount)}if(v.type==="icon"||v.type==="bigicon"){const d=v.texSize;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(t(f)),o.viewport(0,0,pe,Ve),o.bindTexture(o.TEXTURE_2D,v.texture),o.uniform1i(t(_),u),o.uniform4fv(t(p),[d,d,v.targetWidth,v.targetHeight]),Ce(o,v.buffer,6)}if(v.type==="minimap2d"){!Ke||!Ze?(Ke=o.createTexture(),o.bindTexture(o.TEXTURE_2D,Ke),o.texStorage2D(o.TEXTURE_2D,1,o.RGBA8,Ye,Qe),Ze=o.createFramebuffer(),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,Ze),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,Ke,0)):o.bindFramebuffer(o.DRAW_FRAMEBUFFER,Ze),o.viewport(0,0,Ye,Qe),o.disable(o.DEPTH_TEST);const d=t(a).textures[v.textureId];o.useProgram(t(f)),o.uniform4fv(t(p),[d.width,d.height,Ye,Qe]),o.bindTexture(o.TEXTURE_2D,d.texture),o.uniform1i(t(_),u),Ce(o,v.buffer,v.vertexCount,v.enabledVerticesList),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}if(v.type==="minimap"){if(Ke===null)continue;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(t(f)),o.viewport(0,0,pe,Ve),o.uniform4fv(t(p),[Ye,Qe,v.targetWidth,v.targetHeight]),o.bindTexture(o.TEXTURE_2D,Ke),o.uniform1i(t(_),u),Ce(o,v.buffer,6)}if(v.type=="billboard"){o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.DEPTH_TEST),o.useProgram(t(Le)),o.viewport(Xe,gt,ue,ke);const d=t(a).textures[v.textureId];o.uniformMatrix4fv(t(zt),!1,v.modelMatrix),o.uniformMatrix4fv(t(jt),!1,me),o.uniformMatrix4fv(t(It),!1,Se),o.uniform2fv(t(qt),[d.width,d.height]),o.bindTexture(o.TEXTURE_2D,d.texture),o.uniform1i(t(Dt),u),Ce(o,v.buffer,v.vertexCount,v.enabledVerticesList)}}},Gt=(h,o,v)=>{const d=new DataView(v),G=d.getUint32(0,!0);switch(G){case 0:{m(Ue,!0),Fe(h,o);break}case 1:{const F=d.getUint32(4,!0),S=d.getUint32(8,!0),R=d.getUint32(12,!0),B=o.createTexture(),k=new Uint8Array(v,16,S*R*4);o.bindTexture(o.TEXTURE_2D,B),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,S,R,0,o.RGBA,o.UNSIGNED_BYTE,k),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),ot(a,t(a).textures[F]={texture:B,width:S,height:R,data:k});break}case 2:case 3:{const F=G===3,S=F?104:40,R=F?120:56,B=d.getUint32(4,!0),k=d.getUint32(8,!0),P=new Float32Array(16);P.set(new Float32Array(v,16,16));const z=new DataView(v,80,B*S),T=new Array(B),D=new ArrayBuffer(B*R),y=new DataView(D);for(let $=0;$<B;$+=1){const E=S*$,A=R*$;let V=null;F&&(V=new Float32Array(16),V.set(new Float32Array(v,80+S*$+40,16)));const te={x:z.getInt16(E,!0),y:z.getInt16(E+2,!0),z:z.getInt16(E+4,!0),u:z.getFloat32(E+8,!0),v:z.getFloat32(E+12,!0),ax:z.getUint16(E+16,!0),ay:z.getUint16(E+18,!0),aw:z.getUint16(E+20,!0),ah:z.getUint16(E+22,!0),r:z.getFloat32(E+24,!0),g:z.getFloat32(E+28,!0),b:z.getFloat32(E+32,!0),a:z.getFloat32(E+36,!0),anim:V};if(T[$]=te,y.setFloat32(A,te.x,!0),y.setFloat32(A+4,te.y,!0),y.setFloat32(A+8,te.z,!0),y.setFloat32(A+12,0,!0),y.setFloat32(A+16,te.u,!0),y.setFloat32(A+20,te.v,!0),y.setFloat32(A+24,te.ax,!0),y.setFloat32(A+28,te.ay,!0),y.setFloat32(A+32,te.aw,!0),y.setFloat32(A+36,te.ah,!0),y.setFloat32(A+40,te.r,!0),y.setFloat32(A+44,te.g,!0),y.setFloat32(A+48,te.b,!0),y.setFloat32(A+52,te.a,!0),V)for(let ne=0;ne<16;ne+=1)y.setFloat32(A+56+ne*4,V[ne],!0)}const U=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,U),o.bufferData(o.ARRAY_BUFFER,y,o.STATIC_DRAW),t(a).entities.push({type:"render3d",animated:F,textureId:k,vertexCount:B,modelMatrix:P,vertices:T,buffer:{vbo:U,step:R,attribs:F?oi:zn},enabled:!0,expanded:!1,uuid:Zt()}),st+=B,Fe(h,o);break}case 4:{const R=d.getUint32(4,!0),B=d.getUint32(8,!0),k=d.getUint16(12,!0),P=d.getUint16(14,!0),z=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,z);const T=new DataView(v,16,R*40),D=new ArrayBuffer(R*60),y=new DataView(D),U=new Array(R);for(let $=0;$<R;$+=1){const E=40*$,A=60*$,V={x:T.getInt16(E,!0),y:T.getInt16(E+2,!0),ax:T.getInt16(E+4,!0),ay:T.getInt16(E+6,!0),aw:T.getInt16(E+8,!0),ah:T.getInt16(E+10,!0),discard:T.getUint8(E+12),wrapx:T.getUint8(E+13),wrapy:T.getUint8(E+14),u:T.getFloat32(E+16,!0),v:T.getFloat32(E+20,!0),r:T.getFloat32(E+24,!0),g:T.getFloat32(E+28,!0),b:T.getFloat32(E+32,!0),a:T.getFloat32(E+36,!0)};U[$]=V,y.setFloat32(A,V.x,!0),y.setFloat32(A+4,V.y,!0),y.setFloat32(A+8,V.u,!0),y.setFloat32(A+12,V.v,!0),y.setFloat32(A+16,V.ax,!0),y.setFloat32(A+20,V.ay,!0),y.setFloat32(A+24,V.aw,!0),y.setFloat32(A+28,V.ah,!0),y.setFloat32(A+32,V.r,!0),y.setFloat32(A+36,V.g,!0),y.setFloat32(A+40,V.b,!0),y.setFloat32(A+44,V.a,!0),y.setFloat32(A+48,V.discard,!0),y.setFloat32(A+52,V.wrapx,!0),y.setFloat32(A+56,V.wrapy,!0)}o.bufferData(o.ARRAY_BUFFER,y,o.STATIC_DRAW),t(a).entities.push({type:"batch2d",textureId:B,vertexCount:R,vertices:U,targetWidth:k,targetHeight:P,buffer:{vbo:z,step:60,attribs:lr},enabled:!0,expanded:!1,uuid:Zt(),enabledVerticesList:Array(Math.floor(R)).fill(!0)}),st+=R,Fe(h,o);break}case 5:case 8:{const S=G===5?64:512,R=d.getInt16(4,!0),B=d.getInt16(6,!0),k=d.getInt16(8,!0),P=d.getInt16(10,!0),z=d.getUint32(12,!0),T=d.getFloat32(16,!0),D=d.getFloat32(20,!0),y=d.getFloat32(24,!0),U=d.getFloat32(28,!0),$=d.getUint16(32,!0),E=d.getUint16(34,!0),A=o.createTexture(),V=o.createFramebuffer();o.bindTexture(o.TEXTURE_2D,A),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,V),o.texStorage2D(o.TEXTURE_2D,1,o.RGBA8,S,S),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,A,0),o.enable(o.CULL_FACE),o.cullFace(o.FRONT),o.viewport(0,0,S,S),o.scissor(0,0,S,S);let te=Array(z),ne=36;for(let Kt=0;Kt<z;Kt+=1){const wr=d.getUint32(ne,!0);let In=Array(wr);const Ta=new ArrayBuffer(wr*56),ft=new DataView(Ta),tn=new Float32Array(16);tn.set(new Float32Array(v,ne+4,16));const rn=new Float32Array(16);rn.set(new Float32Array(v,ne+68,16));const nn=new Float32Array(16);nn.set(new Float32Array(v,ne+132,16)),ne+=196;for(let Dr=0;Dr<wr;Dr+=1){const Ct={x:d.getInt16(ne,!0),y:d.getInt16(ne+2,!0),z:d.getInt16(ne+4,!0),r:d.getFloat32(ne+8,!0),g:d.getFloat32(ne+12,!0),b:d.getFloat32(ne+16,!0),a:d.getFloat32(ne+20,!0)},xt=Dr*56;ft.setFloat32(xt,Ct.x,!0),ft.setFloat32(xt+4,Ct.y,!0),ft.setFloat32(xt+8,Ct.z,!0),ft.setFloat32(xt+24,0,!0),ft.setFloat32(xt+28,0,!0),ft.setFloat32(xt+32,S,!0),ft.setFloat32(xt+36,S,!0),ft.setFloat32(xt+40,Ct.r,!0),ft.setFloat32(xt+44,Ct.g,!0),ft.setFloat32(xt+48,Ct.b,!0),ft.setFloat32(xt+52,Ct.a,!0),In[Dr]=Ct,ne+=24}te[Kt]={vertices:In,modelMatrix:tn,viewMatrix:rn,projMatrix:nn};const an=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,an),o.bufferData(o.ARRAY_BUFFER,ft,o.STATIC_DRAW),o.useProgram(t(s)),o.uniformMatrix4fv(t(x),!1,tn),o.uniformMatrix4fv(t(w),!1,rn),o.uniformMatrix4fv(t(l),!1,nn),o.uniform2fv(t(g),[1,1]),o.bindTexture(o.TEXTURE_2D,t(_e)),o.uniform1i(t(b),u),Ce(o,{vbo:an,attribs:zn,step:56},wr),o.deleteBuffer(an)}const Be=R,Ee=R+k,at=B,kt=B+P,ir=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,ir),o.bufferData(o.ARRAY_BUFFER,new Float32Array([Be,at,0,1,0,0,S,S,T,y,D,U,0,0,0,Ee,at,1,1,0,0,S,S,T,y,D,U,0,0,0,Be,kt,0,0,0,0,S,S,T,y,D,U,0,0,0,Ee,at,1,1,0,0,S,S,T,y,D,U,0,0,0,Ee,kt,1,0,0,0,S,S,T,y,D,U,0,0,0,Be,kt,0,0,0,0,S,S,T,y,D,U,0,0,0]),o.STATIC_DRAW),t(a).entities.push({type:G===5?"icon":"bigicon",models:te,texture:A,targetWidth:$,targetHeight:E,texSize:S,buffer:{vbo:ir,step:60,attribs:lr},targetx:R,targety:B,targetw:k,targeth:P,enabled:!0,expanded:!1,uuid:Zt()}),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null),o.deleteFramebuffer(V),o.disable(o.CULL_FACE);break}case 6:{const F=d.getUint32(4,!0),S=d.getUint32(8,!0);Ye=d.getUint16(12,!0),Qe=d.getUint16(14,!0);const R=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,R);const B=new DataView(v,16,F*40),k=new ArrayBuffer(F*60),P=new DataView(k),z=new Array(F);for(let T=0;T<F;T+=1){const D=40*T,y=60*T,U={x:B.getInt16(D,!0),y:B.getInt16(D+2,!0),ax:B.getInt16(D+4,!0),ay:B.getInt16(D+6,!0),aw:B.getInt16(D+8,!0),ah:B.getInt16(D+10,!0),discard:B.getUint8(D+12),wrapx:B.getUint8(D+13),wrapy:B.getUint8(D+14),u:B.getFloat32(D+16,!0),v:B.getFloat32(D+20,!0),r:B.getFloat32(D+24,!0),g:B.getFloat32(D+28,!0),b:B.getFloat32(D+32,!0),a:B.getFloat32(D+36,!0)};z[T]=U,P.setFloat32(y,U.x,!0),P.setFloat32(y+4,U.y,!0),P.setFloat32(y+8,U.u,!0),P.setFloat32(y+12,U.v,!0),P.setFloat32(y+16,U.ax,!0),P.setFloat32(y+20,U.ay,!0),P.setFloat32(y+24,U.aw,!0),P.setFloat32(y+28,U.ah,!0),P.setFloat32(y+32,U.r,!0),P.setFloat32(y+36,U.g,!0),P.setFloat32(y+40,U.b,!0),P.setFloat32(y+44,U.a,!0),P.setFloat32(y+48,U.discard,!0),P.setFloat32(y+52,U.wrapx,!0),P.setFloat32(y+56,U.wrapy,!0)}o.bufferData(o.ARRAY_BUFFER,P,o.STATIC_DRAW),t(a).entities.push({type:"minimap2d",textureId:S,buffer:{vbo:R,attribs:lr,step:60},vertices:z,vertexCount:F,enabled:!0,expanded:!1,enabledVerticesList:Array(Math.floor(F)).fill(!0),uuid:Zt()}),st+=F,Fe(h,o);break}case 7:{const F=d.getInt16(4,!0),S=d.getInt16(6,!0),R=d.getUint16(8,!0),B=d.getUint16(10,!0),k=d.getInt16(12,!0),P=d.getInt16(14,!0),z=d.getUint16(16,!0),T=d.getUint16(18,!0),D=d.getUint16(20,!0),y=d.getUint16(22,!0),U=k,$=k+z,E=P,A=P+T,V=F/Ye,te=(F+R)/Ye,ne=S/Qe,Be=(S+B)/Qe,Ee=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Ee),o.bufferData(o.ARRAY_BUFFER,new Float32Array([U,E,V,Be,F,S,R,B,1,1,1,1,0,0,0,$,E,te,Be,F,S,R,B,1,1,1,1,0,0,0,U,A,V,ne,F,S,R,B,1,1,1,1,0,0,0,$,E,te,Be,F,S,R,B,1,1,1,1,0,0,0,$,A,te,ne,F,S,R,B,1,1,1,1,0,0,0,U,A,V,ne,F,S,R,B,1,1,1,1,0,0,0]),o.STATIC_DRAW),t(a).entities.push({type:"minimap",sourcex:F,sourcey:S,sourcew:R,sourceh:B,targetx:k,targety:P,targetw:z,targeth:T,targetWidth:D,targetHeight:y,buffer:{vbo:Ee,step:60,attribs:lr},enabled:!0,expanded:!1,uuid:Zt()}),Fe(h,o);break}case 9:{const F=d.getUint32(4,!0),S=d.getUint32(8,!0),R=64,B=72,k=new DataView(v,16,F*R),P=new Array(F),z=new ArrayBuffer(F*B),T=new DataView(z);for(let y=0;y<F;y+=1){const U=R*y,$=B*y,E={x:k.getFloat32(U,!0),y:k.getFloat32(U+4,!0),z:k.getFloat32(U+8,!0),offsetx2d:k.getFloat32(U+12,!0),offsety2d:k.getFloat32(U+16,!0),offsetx3d:k.getFloat32(U+20,!0),offsety3d:k.getFloat32(U+24,!0),offsetz3d:k.getFloat32(U+28,!0),ax:k.getUint16(U+32,!0),ay:k.getUint16(U+34,!0),aw:k.getUint16(U+36,!0),ah:k.getUint16(U+38,!0),r:k.getFloat32(U+40,!0),g:k.getFloat32(U+44,!0),b:k.getFloat32(U+48,!0),a:k.getFloat32(U+52,!0),u:k.getFloat32(U+56,!0),v:k.getFloat32(U+60,!0)};P[y]=E,T.setFloat32($,E.x,!0),T.setFloat32($+4,E.y,!0),T.setFloat32($+8,E.z,!0),T.setFloat32($+12,E.ax,!0),T.setFloat32($+16,E.ay,!0),T.setFloat32($+20,E.aw,!0),T.setFloat32($+24,E.ah,!0),T.setFloat32($+28,E.r,!0),T.setFloat32($+32,E.g,!0),T.setFloat32($+36,E.b,!0),T.setFloat32($+40,E.a,!0),T.setFloat32($+44,E.offsetx2d,!0),T.setFloat32($+48,E.offsety2d,!0),T.setFloat32($+52,E.offsetx3d,!0),T.setFloat32($+56,E.offsety3d,!0),T.setFloat32($+60,E.offsetz3d,!0),T.setFloat32($+64,E.u,!0),T.setFloat32($+68,E.v,!0)}const D=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,D),o.bufferData(o.ARRAY_BUFFER,T,o.STATIC_DRAW),t(a).entities.push({type:"renderparticles",textureId:S,vertexCount:F,vertices:P,buffer:{vbo:D,step:B,attribs:ii},enabled:!0,expanded:!1,uuid:Zt()}),st+=F,Fe(h,o);break}case 10:{me=new Float32Array(v,4,16),Se=new Float32Array(v,68,16);break}case 11:{const R=d.getUint32(4,!0),B=d.getUint32(8,!0),k=new Float32Array(16);k.set(new Float32Array(v,16,16));const P=new DataView(v,80,R*48),z=new Array(R),T=new ArrayBuffer(R*64),D=new DataView(T);for(let U=0;U<R;U+=1){const $=48*U,E=64*U,A={x:P.getInt16($,!0),y:P.getInt16($+2,!0),z:P.getInt16($+4,!0),offsetx:P.getFloat32($+8,!0),offsety:P.getFloat32($+12,!0),u:P.getFloat32($+16,!0),v:P.getFloat32($+20,!0),ax:P.getUint16($+24,!0),ay:P.getUint16($+26,!0),aw:P.getUint16($+28,!0),ah:P.getUint16($+30,!0),r:P.getFloat32($+32,!0),g:P.getFloat32($+36,!0),b:P.getFloat32($+40,!0),a:P.getFloat32($+44,!0)};z[U]=A,D.setFloat32(E,A.x,!0),D.setFloat32(E+4,A.y,!0),D.setFloat32(E+8,A.z,!0),D.setFloat32(E+12,0,!0),D.setFloat32(E+16,A.u,!0),D.setFloat32(E+20,A.v,!0),D.setFloat32(E+24,A.ax,!0),D.setFloat32(E+28,A.ay,!0),D.setFloat32(E+32,A.aw,!0),D.setFloat32(E+36,A.ah,!0),D.setFloat32(E+40,A.r,!0),D.setFloat32(E+44,A.g,!0),D.setFloat32(E+48,A.b,!0),D.setFloat32(E+52,A.a,!0),D.setFloat32(E+56,A.offsetx,!0),D.setFloat32(E+60,A.offsety,!0)}const y=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,y),o.bufferData(o.ARRAY_BUFFER,D,o.STATIC_DRAW),t(a).entities.push({type:"billboard",textureId:B,vertexCount:R,modelMatrix:k,vertices:z,buffer:{vbo:y,step:64,attribs:ui},enabled:!0,expanded:!1,uuid:Zt(),enabledVerticesList:Array(Math.floor(R)).fill(!0)}),st+=R,Fe(h,o);break}}};window.addEventListener("message",async h=>{if(typeof h.data=="object"&&h.data.type==="pluginMessage"){if(typeof h.data.content!="object"||!t(ce)||!t(c))return;Gt(t(ce),t(c),h.data.content)}});const lt=h=>Array.from(h).map(o=>{const v=o.toString(16);return v.length===1?"\\x0".concat(v):"\\x".concat(v)}).join(""),hr=()=>{const h=t(a).selectedTexture;if(!h){m(ye,"error: no texture selected");return}const o=t(a).textureBoundW*4,v=new Array(t(a).textureBoundH);for(let d=0;d<t(a).textureBoundH;d+=1){const G=(t(a).textureBoundY+d)*h.width*4+t(a).textureBoundX*4,F=h.data.slice(G,G+o),S=lt(F);v[d]=`  [${d+1}] = '${S}',`}m(ye,`local data = {
${v.join(`
`)}
}`)},rt=h=>{const o=t(a).textureViewScale/100,v=Math.floor(t(a).textureViewX+h.offsetX/o-t(a).textureBoundX),d=Math.floor(t(a).textureViewY+h.offsetY/o-t(a).textureBoundY);if(v<0||d<0||v>=t(a).textureBoundW||d>=t(a).textureBoundH){m(Te,null);return}m(Te,{x:v,y:d})},De=h=>{if(rt(h),!(h.buttons&1)){m($t,rt);return}const o=t(a).textureViewScale/100;ot(a,t(a).textureViewX-=h.movementX/o),ot(a,t(a).textureViewY-=h.movementY/o),t(a).redraw()},_t=h=>{const o=t(ce),v=t(a).textureViewScale,d=t(a).textureViewScale-Jr*Math.sign(h.deltaY);ot(a,t(a).textureViewScale=d);const G=2*v/100,F=2*d/100,S=t(a).textureViewX+o.width/G,R=t(a).textureViewY+o.height/G;ot(a,t(a).textureViewX=S-o.width/F),ot(a,t(a).textureViewY=R-o.height/F),Fe(o,t(c))};let $t=M(rt);on(()=>(t(Ie),t(fe),t(Ae),t(Re)),()=>{m(r,t(Ie)===null||t(fe)&&(t(Ae)===null||t(Re)===null||t(Ae)>t(Re)))}),on(()=>(t(ce),t(c),t(_e),t(f),t(s),t(L),t(W),t(Pe),t(Le)),()=>{if(t(ce)&&(ot(ce,t(ce).width=pe),ot(ce,t(ce).height=Ve),m(c,t(ce).getContext("webgl2")),t(c))){m(j,t(c).getParameter(t(c).MAX_VERTEX_ATTRIBS)),m(_e,t(c).createTexture()),t(c).bindTexture(t(c).TEXTURE_2D,t(_e));const h=new Uint8Array([255,255,255,255]);t(c).texImage2D(t(c).TEXTURE_2D,0,t(c).RGBA,1,1,0,t(c).RGBA,t(c).UNSIGNED_BYTE,h);const o=At(t(c),t(c).VERTEX_SHADER,Ko,"2D vertex shader"),v=At(t(c),t(c).FRAGMENT_SHADER,Zo,"2D fragment shader"),d=At(t(c),t(c).VERTEX_SHADER,Qo,"3D vertex shader"),G=At(t(c),t(c).VERTEX_SHADER,Jo,"3D anim vertex shader"),F=At(t(c),t(c).FRAGMENT_SHADER,ei,"3D fragment shader"),S=At(t(c),t(c).VERTEX_SHADER,ti,"particle vertex shader"),R=At(t(c),t(c).VERTEX_SHADER,ri,"checkers vertex shader"),B=At(t(c),t(c).FRAGMENT_SHADER,ni,"checkers fragment shader"),k=At(t(c),t(c).VERTEX_SHADER,ai,"billboard vertex shader");m(f,fr(t(c),o,v,"2D program")),m(p,t(c).getUniformLocation(t(f),"atlas_wh_screen_wh")),m(_,t(c).getUniformLocation(t(f),"tex")),m(s,fr(t(c),d,F,"3D program")),m(x,t(c).getUniformLocation(t(s),"modelmatrix")),m(w,t(c).getUniformLocation(t(s),"viewmatrix")),m(l,t(c).getUniformLocation(t(s),"projmatrix")),m(g,t(c).getUniformLocation(t(s),"atlas_wh")),m(b,t(c).getUniformLocation(t(s),"tex")),m(L,fr(t(c),G,F,"3D animated program")),m(q,t(c).getUniformLocation(t(L),"modelmatrix")),m(se,t(c).getUniformLocation(t(L),"viewmatrix")),m(le,t(c).getUniformLocation(t(L),"projmatrix")),m(oe,t(c).getUniformLocation(t(L),"atlas_wh")),m(H,t(c).getUniformLocation(t(L),"tex")),m(W,fr(t(c),S,F,"Particles program")),m(Q,t(c).getUniformLocation(t(W),"viewmatrix")),m(K,t(c).getUniformLocation(t(W),"projmatrix")),m(Z,t(c).getUniformLocation(t(W),"tex")),m(de,t(c).getUniformLocation(t(W),"atlas_wh")),m(Pe,fr(t(c),R,B,"Checkers program")),m(Ge,t(c).getUniformLocation(t(Pe),"screen_wh")),m(Le,fr(t(c),k,F,"Billboard program")),m(zt,t(c).getUniformLocation(t(Le),"modelmatrix")),m(jt,t(c).getUniformLocation(t(Le),"viewmatrix")),m(It,t(c).getUniformLocation(t(Le),"projmatrix")),m(qt,t(c).getUniformLocation(t(Le),"atlas_wh")),m(Dt,t(c).getUniformLocation(t(Le),"tex")),t(c).deleteShader(o),t(c).deleteShader(v),t(c).deleteShader(d),t(c).deleteShader(F),t(c).deleteShader(G),t(c).deleteShader(S),t(c).deleteShader(R),t(c).deleteShader(B),t(c).deleteShader(k),t(c).activeTexture(t(c).TEXTURE0+u),t(c).enable(t(c).SCISSOR_TEST),t(c).disable(t(c).CULL_FACE),t(c).disable(t(c).DEPTH_TEST),t(c).enable(t(c).BLEND),t(c).blendEquationSeparate(t(c).FUNC_ADD,t(c).FUNC_ADD),t(c).depthFunc(t(c).LEQUAL),Fe(t(ce),t(c))}}),on(()=>(t(tt),t(ge),t(ve),t(be),t(et),t(r),t(ce),t(c)),()=>{const h=t(tt);m(tt,(t(ge)||t(ve)||t(be)||t(et))&&!t(r)),t(ce)&&t(c)&&t(tt)!==h&&Fe(t(ce),t(c))}),vo(),nr();var ar=Fu(),wt=ae(ar);wt.__mousedown=[_u,$t,De],wt.__mouseup=[xu,$t,rt],wt.__mousemove=function(...h){var o;(o=t($t))==null||o.apply(this,h)},Sa(wt,h=>m(ce,h),()=>t(ce));var or=C(wt,2);{var pr=h=>{var o=pu(),v=ae(o),d=xe(v);nu(d,{get data(){return t(a)},set data(F){m(a,F)},$$legacy:!0});var G=C(v,2);G.__click=[hu,Je],N(h,o)},nt=(h,o)=>{{var v=d=>{var G=wu();G.__click=[gu,Je],N(d,G)};ee(h,d=>{t(Ue)&&d(v)},o)}};ee(or,h=>{t(Je)?h(pr):h(nt,!1)})}var gr=C(or,2);{var en=h=>{var o=Au(),v=ae(o);{var d=A=>{var V=bu();V.__click=[mu,a,Fe,ce,c],N(A,V)};ee(v,A=>{t(ye)===null&&A(d)})}var G=C(v,2),F=xe(G),S=xe(F),R=xe(S),B=C(R,2),k=C(S,2),P=xe(k),z=C(P,2),T=C(k,2),D=C(xe(T));D.__change=function(...A){var V;(V=t(a).redraw)==null||V.apply(this,A)};var y=C(D,2);y.__click=[vu,a,ye,Ie,fe,Ae,Re,lt];var U=C(y,4);{var $=A=>{var V=yu(),te=ae(V),ne=C(te,2);ne.__change=function(...Ee){var at;(at=t(a).redraw)==null||at.apply(this,Ee)};var Be=C(ne,2);Be.__change=function(...Ee){var at;(at=t(a).redraw)==null||at.apply(this,Ee)},Fa(te,()=>t(fe),Ee=>m(fe,Ee)),Oe("focus",ne,()=>m(be,!0)),Oe("blur",ne,()=>m(be,!1)),Cr(ne,()=>t(Ae),Ee=>m(Ae,Ee)),Oe("focus",Be,()=>m(et,!0)),Oe("blur",Be,()=>m(et,!1)),Cr(Be,()=>t(Re),Ee=>m(Re,Ee)),N(A,V)},E=A=>{var V=Eu(),te=C(ae(V));te.__click=hr,N(A,V)};ee(U,A=>{t(a).viewIsWholeAtlas?A($):A(E,!1)})}ut(()=>{var A,V;we(R,`x: ${((A=t(Te))==null?void 0:A.x)??""} `),we(B,` y: ${((V=t(Te))==null?void 0:V.y)??""}`),we(P,`${t(a).textureBoundW??""}x${t(a).textureBoundH??""} `),we(z,` zoom: ${t(a).textureViewScale??""}%`),y.disabled=t(r)}),Oe("mouseenter",T,()=>m(ge,!0)),Oe("mouseleave",T,()=>m(ge,!1)),Oe("focus",D,()=>m(ve,!0)),Oe("blur",D,()=>m(ve,!1)),Cr(D,()=>t(Ie),A=>m(Ie,A)),N(h,o)};ee(gr,h=>{t(a).selectedTexture&&h(en)})}var Pt=C(gr,2);{var Un=h=>{du(h,{get text(){return t(ye)},set text(o){m(ye,o)},$$legacy:!0})};ee(Pt,h=>{t(ye)!==null&&h(Un)})}Oe("wheel",wt,_t),N(e,ar),Yt()}rr(["mousedown","mouseup","mousemove","click","change"]);$o(Su,{target:document.body});
