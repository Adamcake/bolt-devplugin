(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=r(o);fetch(o.href,u)}})();const wr=!1;var Ke=Array.isArray,pn=Array.prototype.indexOf,Ze=Array.from,wn=Object.defineProperty,Ht=Object.getOwnPropertyDescriptor,Or=Object.getOwnPropertyDescriptors,mn=Object.prototype,xn=Array.prototype,Qe=Object.getPrototypeOf,mr=Object.isExtensible;function yn(t){return t()}function Xe(t){for(var e=0;e<t.length;e++)t[e]()}const ct=2,Cr=4,ge=8,Je=16,xt=32,Vt=64,de=128,st=256,he=512,et=1024,yt=2048,Ct=4096,wt=8192,Te=16384,bn=32768,tr=65536,Nr=1<<17,En=1<<19,Br=1<<20,ze=1<<21,Mt=Symbol("$state"),An=Symbol("legacy props"),Fn=Symbol("");function kr(t){return t===this.v}function gn(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function er(t){return!gn(t,this.v)}function Tn(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Rn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Sn(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Un(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Dn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function In(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Pn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Jt=!1,Ln=!1;function Mn(){Jt=!0}const On=1,Cn=2,Nn=16,Bn=1,kn=2,Hn=4,Vn=8,Wn=16,Xn=1,zn=2,tt=Symbol(),qn="http://www.w3.org/1999/xhtml";let z=null;function xr(t){z=t}function rr(t,e=!1,r){var a=z={p:z,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Jt&&!e&&(z.l={s:null,u:null,r1:[],r2:Kt(!1)}),Gr(()=>{a.d=!0})}function nr(t){const e=z;if(e!==null){const c=e.e;if(c!==null){var r=V,a=B;e.e=null;try{for(var o=0;o<c.length;o++){var u=c[o];It(u.effect),ht(u.reaction),ar(u.fn)}}finally{It(r),ht(a)}}z=e.p,e.m=!0}return{}}function Re(){return!Jt||z!==null&&z.l===null}function Lt(t,e){if(typeof t!="object"||t===null||Mt in t)return t;const r=Qe(t);if(r!==mn&&r!==xn)return t;var a=new Map,o=Ke(t),u=Tt(0),c=B,p=_=>{var l=B;ht(c);var f;return f=_(),ht(l),f};return o&&a.set("length",Tt(t.length)),new Proxy(t,{defineProperty(_,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Dn();var d=a.get(l);return d===void 0?(d=p(()=>Tt(f.value)),a.set(l,d)):L(d,p(()=>Lt(f.value))),!0},deleteProperty(_,l){var f=a.get(l);if(f===void 0)l in _&&a.set(l,p(()=>Tt(tt)));else{if(o&&typeof l=="string"){var d=a.get("length"),s=Number(l);Number.isInteger(s)&&s<d.v&&L(d,s)}L(f,tt),yr(u)}return!0},get(_,l,f){var g;if(l===Mt)return t;var d=a.get(l),s=l in _;if(d===void 0&&(!s||(g=Ht(_,l))!=null&&g.writable)&&(d=p(()=>Tt(Lt(s?_[l]:tt))),a.set(l,d)),d!==void 0){var w=i(d);return w===tt?void 0:w}return Reflect.get(_,l,f)},getOwnPropertyDescriptor(_,l){var f=Reflect.getOwnPropertyDescriptor(_,l);if(f&&"value"in f){var d=a.get(l);d&&(f.value=i(d))}else if(f===void 0){var s=a.get(l),w=s==null?void 0:s.v;if(s!==void 0&&w!==tt)return{enumerable:!0,configurable:!0,value:w,writable:!0}}return f},has(_,l){var w;if(l===Mt)return!0;var f=a.get(l),d=f!==void 0&&f.v!==tt||Reflect.has(_,l);if(f!==void 0||V!==null&&(!d||(w=Ht(_,l))!=null&&w.writable)){f===void 0&&(f=p(()=>Tt(d?Lt(_[l]):tt)),a.set(l,f));var s=i(f);if(s===tt)return!1}return d},set(_,l,f,d){var q;var s=a.get(l),w=l in _;if(o&&l==="length")for(var g=f;g<s.v;g+=1){var H=a.get(g+"");H!==void 0?L(H,tt):g in _&&(H=p(()=>Tt(tt)),a.set(g+"",H))}s===void 0?(!w||(q=Ht(_,l))!=null&&q.writable)&&(s=p(()=>Tt(void 0)),L(s,p(()=>Lt(f))),a.set(l,s)):(w=s.v!==tt,L(s,p(()=>Lt(f))));var O=Reflect.getOwnPropertyDescriptor(_,l);if(O!=null&&O.set&&O.set.call(d,f),!w){if(o&&typeof l=="string"){var C=a.get("length"),X=Number(l);Number.isInteger(X)&&X>=C.v&&L(C,X+1)}yr(u)}return!0},ownKeys(_){i(u);var l=Reflect.ownKeys(_).filter(s=>{var w=a.get(s);return w===void 0||w.v!==tt});for(var[f,d]of a)d.v!==tt&&!(f in _)&&l.push(f);return l},setPrototypeOf(){In()}})}function yr(t,e=1){L(t,t.v+e)}const $t=new Map;function Kt(t,e){var r={f:0,v:t,reactions:null,equals:kr,rv:0,wv:0};return r}function Tt(t,e){const r=Kt(t);return ua(r),r}function k(t,e=!1){var a;const r=Kt(t);return e||(r.equals=er),Jt&&z!==null&&z.l!==null&&((a=z.l).s??(a.s=[])).push(r),r}function br(t,e){return L(t,mt(()=>i(t))),e}function L(t,e,r=!1){B!==null&&!dt&&Re()&&(B.f&(ct|Je))!==0&&!(Q!=null&&Q.includes(t))&&Pn();let a=r?Lt(e):e;return pe(t,a)}function pe(t,e){if(!t.equals(e)){var r=t.v;ee?$t.set(t,e):$t.set(t,r),t.v=e,t.wv=rn(),Hr(t,yt),Re()&&V!==null&&(V.f&et)!==0&&(V.f&(xt|Vt))===0&&(ut===null?sa([t]):ut.push(t))}return e}function Hr(t,e){var r=t.reactions;if(r!==null)for(var a=Re(),o=r.length,u=0;u<o;u++){var c=r[u],p=c.f;(p&yt)===0&&(!a&&c===V||(_t(c,e),(p&(et|st))!==0&&((p&ct)!==0?Hr(c,Ct):Ie(c))))}}let Yn=!1;var Er,Vr,Wr,Xr;function jn(){if(Er===void 0){Er=window,Vr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Wr=Ht(e,"firstChild").get,Xr=Ht(e,"nextSibling").get,mr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),mr(r)&&(r.__t=void 0)}}function Gn(t=""){return document.createTextNode(t)}function we(t){return Wr.call(t)}function Se(t){return Xr.call(t)}function qe(t,e){return we(t)}function Ye(t,e){{var r=we(t);return r instanceof Comment&&r.data===""?Se(r):r}}function me(t,e=1,r=!1){let a=t;for(;e--;)a=Se(a);return a}function $n(t){t.textContent=""}function Zt(t){var e=ct|yt,r=B!==null&&(B.f&ct)!==0?B:null;return V===null||r!==null&&(r.f&st)!==0?e|=st:V.f|=Br,{ctx:z,deps:null,effects:null,equals:kr,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??V}}function zr(t){const e=Zt(t);return e.equals=er,e}function qr(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Dt(e[r])}}function Kn(t){for(var e=t.parent;e!==null;){if((e.f&ct)===0)return e;e=e.parent}return null}function Zn(t){var e,r=V;It(Kn(t));try{qr(t),e=an(t)}finally{It(r)}return e}function Yr(t){var e=Zn(t),r=(Ut||(t.f&st)!==0)&&t.deps!==null?Ct:et;_t(t,r),t.equals(e)||(t.v=e,t.wv=rn())}function jr(t){V===null&&B===null&&Sn(),B!==null&&(B.f&st)!==0&&V===null&&Rn(),ee&&Tn()}function Qn(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Wt(t,e,r,a=!0){var o=V,u={ctx:z,deps:null,nodes_start:null,nodes_end:null,f:t|yt,first:null,fn:e,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(r)try{De(u),u.f|=bn}catch(_){throw Dt(u),_}else e!==null&&Ie(u);var c=r&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(Br|de))===0;if(!c&&a&&(o!==null&&Qn(u,o),B!==null&&(B.f&ct)!==0)){var p=B;(p.effects??(p.effects=[])).push(u)}return u}function Gr(t){const e=Wt(ge,null,!1);return _t(e,et),e.teardown=t,e}function Ar(t){jr();var e=V!==null&&(V.f&xt)!==0&&z!==null&&!z.m;if(e){var r=z;(r.e??(r.e=[])).push({fn:t,effect:V,reaction:B})}else{var a=ar(t);return a}}function Jn(t){return jr(),te(t)}function ta(t){const e=Wt(Vt,t,!0);return(r={})=>new Promise(a=>{r.outro?xe(e,()=>{Dt(e),a(void 0)}):(Dt(e),a(void 0))})}function ar(t){return Wt(Cr,t,!1)}function ea(t,e){var r=z,a={effect:null,ran:!1};r.l.r1.push(a),a.effect=te(()=>{t(),!a.ran&&(a.ran=!0,L(r.l.r2,!0),mt(e))})}function ra(){var t=z;te(()=>{if(i(t.l.r2)){for(var e of t.l.r1){var r=e.effect;(r.f&et)!==0&&_t(r,Ct),Xt(r)&&De(r),e.ran=!1}t.l.r2.v=!1}})}function te(t){return Wt(ge,t,!0)}function na(t,e=[],r=Zt){const a=e.map(r);return ir(()=>t(...a.map(i)))}function ir(t,e=0){return Wt(ge|Je|e,t,!0)}function Qt(t,e=!0){return Wt(ge|xt,t,!0,e)}function $r(t){var e=t.teardown;if(e!==null){const r=ee,a=B;Fr(!0),ht(null);try{e.call(null)}finally{Fr(r),ht(a)}}}function Kr(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var a=r.next;(r.f&Vt)!==0?r.parent=null:Dt(r,e),r=a}}function aa(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&xt)===0&&Dt(e),e=r}}function Dt(t,e=!0){var r=!1;if((e||(t.f&En)!==0)&&t.nodes_start!==null){for(var a=t.nodes_start,o=t.nodes_end;a!==null;){var u=a===o?null:Se(a);a.remove(),a=u}r=!0}Kr(t,e&&!r),Fe(t,0),_t(t,Te);var c=t.transitions;if(c!==null)for(const _ of c)_.stop();$r(t);var p=t.parent;p!==null&&p.first!==null&&Zr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Zr(t){var e=t.parent,r=t.prev,a=t.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=r))}function xe(t,e){var r=[];or(t,r,!0),Qr(r,()=>{Dt(t),e&&e()})}function Qr(t,e){var r=t.length;if(r>0){var a=()=>--r||e();for(var o of t)o.out(a)}else e()}function or(t,e,r){if((t.f&wt)===0){if(t.f^=wt,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var a=t.first;a!==null;){var o=a.next,u=(a.f&tr)!==0||(a.f&xt)!==0;or(a,e,u?r:!1),a=o}}}function ye(t){Jr(t,!0)}function Jr(t,e){if((t.f&wt)!==0){t.f^=wt,(t.f&et)===0&&(t.f^=et),Xt(t)&&(_t(t,yt),Ie(t));for(var r=t.first;r!==null;){var a=r.next,o=(r.f&tr)!==0||(r.f&xt)!==0;Jr(r,o?e:!1),r=a}if(t.transitions!==null)for(const u of t.transitions)(u.is_global||e)&&u.in()}}let be=[];function ia(){var t=be;be=[],Xe(t)}function tn(t){be.length===0&&queueMicrotask(ia),be.push(t)}let _e=!1,je=!1,Ee=null,Ot=!1,ee=!1;function Fr(t){ee=t}let ve=[];let B=null,dt=!1;function ht(t){B=t}let V=null;function It(t){V=t}let Q=null;function oa(t){Q=t}function ua(t){B!==null&&B.f&ze&&(Q===null?oa([t]):Q.push(t))}let Z=null,nt=0,ut=null;function sa(t){ut=t}let en=1,Ae=0,Ut=!1,St=null;function rn(){return++en}function Xt(t){var d;var e=t.f;if((e&yt)!==0)return!0;if((e&Ct)!==0){var r=t.deps,a=(e&st)!==0;if(r!==null){var o,u,c=(e&he)!==0,p=a&&V!==null&&!Ut,_=r.length;if(c||p){var l=t,f=l.parent;for(o=0;o<_;o++)u=r[o],(c||!((d=u==null?void 0:u.reactions)!=null&&d.includes(l)))&&(u.reactions??(u.reactions=[])).push(l);c&&(l.f^=he),p&&f!==null&&(f.f&st)===0&&(l.f^=st)}for(o=0;o<_;o++)if(u=r[o],Xt(u)&&Yr(u),u.wv>t.wv)return!0}(!a||V!==null&&!Ut)&&_t(t,et)}return!1}function fa(t,e){for(var r=e;r!==null;){if((r.f&de)!==0)try{r.fn(t);return}catch{r.f^=de}r=r.parent}throw _e=!1,t}function la(t){return(t.f&Te)===0&&(t.parent===null||(t.parent.f&de)===0)}function Ue(t,e,r,a){if(_e){if(r===null&&(_e=!1),la(e))throw t;return}r!==null&&(_e=!0);{fa(t,e);return}}function nn(t,e,r=!0){var a=t.reactions;if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Q!=null&&Q.includes(t)||((u.f&ct)!==0?nn(u,e,!1):e===u&&(r?_t(u,yt):(u.f&et)!==0&&_t(u,Ct),Ie(u)))}}function an(t){var w;var e=Z,r=nt,a=ut,o=B,u=Ut,c=Q,p=z,_=dt,l=t.f;Z=null,nt=0,ut=null,Ut=(l&st)!==0&&(dt||!Ot||B===null),B=(l&(xt|Vt))===0?t:null,Q=null,xr(t.ctx),dt=!1,Ae++,t.f|=ze;try{var f=(0,t.fn)(),d=t.deps;if(Z!==null){var s;if(Fe(t,nt),d!==null&&nt>0)for(d.length=nt+Z.length,s=0;s<Z.length;s++)d[nt+s]=Z[s];else t.deps=d=Z;if(!Ut)for(s=nt;s<d.length;s++)((w=d[s]).reactions??(w.reactions=[])).push(t)}else d!==null&&nt<d.length&&(Fe(t,nt),d.length=nt);if(Re()&&ut!==null&&!dt&&d!==null&&(t.f&(ct|Ct|yt))===0)for(s=0;s<ut.length;s++)nn(ut[s],t);return o!==null&&(Ae++,ut!==null&&(a===null?a=ut:a.push(...ut))),f}finally{Z=e,nt=r,ut=a,B=o,Ut=u,Q=c,xr(p),dt=_,t.f^=ze}}function ca(t,e){let r=e.reactions;if(r!==null){var a=pn.call(r,t);if(a!==-1){var o=r.length-1;o===0?r=e.reactions=null:(r[a]=r[o],r.pop())}}r===null&&(e.f&ct)!==0&&(Z===null||!Z.includes(e))&&(_t(e,Ct),(e.f&(st|he))===0&&(e.f^=he),qr(e),Fe(e,0))}function Fe(t,e){var r=t.deps;if(r!==null)for(var a=e;a<r.length;a++)ca(t,r[a])}function De(t){var e=t.f;if((e&Te)===0){_t(t,et);var r=V,a=z,o=Ot;V=t,Ot=!0;try{(e&Je)!==0?aa(t):Kr(t),$r(t);var u=an(t);t.teardown=typeof u=="function"?u:null,t.wv=en;var c=t.deps,p;wr&&Ln&&t.f&yt}catch(_){Ue(_,t,r,a||t.ctx)}finally{Ot=o,V=r}}}function _a(){try{Un()}catch(t){if(Ee!==null)Ue(t,Ee,null);else throw t}}function va(){var t=Ot;try{var e=0;for(Ot=!0;ve.length>0;){e++>1e3&&_a();var r=ve,a=r.length;ve=[];for(var o=0;o<a;o++){var u=ha(r[o]);da(u)}}}finally{je=!1,Ot=t,Ee=null,$t.clear()}}function da(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var a=t[r];if((a.f&(Te|wt))===0)try{Xt(a)&&(De(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?Zr(a):a.fn=null))}catch(o){Ue(o,a,null,a.ctx)}}}function Ie(t){je||(je=!0,queueMicrotask(va));for(var e=Ee=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(Vt|xt))!==0){if((r&et)===0)return;e.f^=et}}ve.push(e)}function ha(t){for(var e=[],r=t;r!==null;){var a=r.f,o=(a&(xt|Vt))!==0,u=o&&(a&et)!==0;if(!u&&(a&wt)===0){if((a&Cr)!==0)e.push(r);else if(o)r.f^=et;else{var c=B;try{B=r,Xt(r)&&De(r)}catch(l){Ue(l,r,null,r.ctx)}finally{B=c}}var p=r.first;if(p!==null){r=p;continue}}var _=r.parent;for(r=r.next;r===null&&_!==null;)r=_.next,_=_.parent}return e}function i(t){var e=t.f,r=(e&ct)!==0;if(St!==null&&St.add(t),B!==null&&!dt){if(!(Q!=null&&Q.includes(t))){var a=B.deps;t.rv<Ae&&(t.rv=Ae,Z===null&&a!==null&&a[nt]===t?nt++:Z===null?Z=[t]:(!Ut||!Z.includes(t))&&Z.push(t))}}else if(r&&t.deps===null&&t.effects===null){var o=t,u=o.parent;u!==null&&(u.f&st)===0&&(o.f^=st)}return r&&(o=t,Xt(o)&&Yr(o)),ee&&$t.has(t)?$t.get(t):t.v}function pa(t){var e=St;St=new Set;var r=St,a;try{if(mt(t),e!==null)for(a of St)e.add(a)}finally{St=e}return r}function wa(t){var e=pa(()=>mt(t));for(var r of e)if((r.f&Nr)!==0)for(const a of r.deps||[])(a.f&ct)===0&&pe(a,a.v);else pe(r,r.v)}function mt(t){var e=dt;try{return dt=!0,t()}finally{dt=e}}const ma=-7169;function _t(t,e){t.f=t.f&ma|e}function xa(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Mt in t)Ge(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&Mt in r&&Ge(r)}}}function Ge(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let a in t)try{Ge(t[a],e)}catch{}const r=Qe(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=Or(r);for(let o in a){const u=a[o].get;if(u)try{u.call(t)}catch{}}}}}const ya=["touchstart","touchmove"];function ba(t){return ya.includes(t)}let gr=!1;function Ea(){gr||(gr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function on(t){var e=B,r=V;ht(null),It(null);try{return t()}finally{ht(e),It(r)}}function Aa(t,e,r,a=r){t.addEventListener(e,()=>on(r));const o=t.__on_r;o?t.__on_r=()=>{o(),a(!0)}:t.__on_r=()=>a(!0),Ea()}const un=new Set,$e=new Set;function Fa(t,e,r,a={}){function o(u){if(a.capture||jt.call(e,u),!u.cancelBubble)return on(()=>r==null?void 0:r.call(this,u))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?tn(()=>{e.addEventListener(t,o,a)}):e.addEventListener(t,o,a),o}function Yt(t,e,r,a,o){var u={capture:a,passive:o},c=Fa(t,e,r,u);(e===document.body||e===window||e===document)&&Gr(()=>{e.removeEventListener(t,c,u)})}function sn(t){for(var e=0;e<t.length;e++)un.add(t[e]);for(var r of $e)r(t)}function jt(t){var X;var e=this,r=e.ownerDocument,a=t.type,o=((X=t.composedPath)==null?void 0:X.call(t))||[],u=o[0]||t.target,c=0,p=t.__root;if(p){var _=o.indexOf(p);if(_!==-1&&(e===document||e===window)){t.__root=e;return}var l=o.indexOf(e);if(l===-1)return;_<=l&&(c=_)}if(u=o[c]||t.target,u!==e){wn(t,"currentTarget",{configurable:!0,get(){return u||r}});var f=B,d=V;ht(null),It(null);try{for(var s,w=[];u!==null;){var g=u.assignedSlot||u.parentNode||u.host||null;try{var H=u["__"+a];if(H!=null&&(!u.disabled||t.target===u))if(Ke(H)){var[O,...C]=H;O.apply(u,[t,...C])}else H.call(u,t)}catch(q){s?w.push(q):s=q}if(t.cancelBubble||g===e||g===null)break;u=g}if(s){for(let q of w)queueMicrotask(()=>{throw q});throw s}}finally{t.__root=e,delete t.currentTarget,ht(f),It(d)}}}function ga(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Tr(t,e){var r=V;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function re(t,e){var r=(e&Xn)!==0,a=(e&zn)!==0,o,u=!t.startsWith("<!>");return()=>{o===void 0&&(o=ga(u?t:"<!>"+t),r||(o=we(o)));var c=a||Vr?document.importNode(o,!0):o.cloneNode(!0);if(r){var p=we(c),_=c.lastChild;Tr(p,_)}else Tr(c,c);return c}}function Gt(t,e){t!==null&&t.before(e)}function Ta(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Ra(t,e){return Sa(t,e)}const Bt=new Map;function Sa(t,{target:e,anchor:r,props:a={},events:o,context:u,intro:c=!0}){jn();var p=new Set,_=d=>{for(var s=0;s<d.length;s++){var w=d[s];if(!p.has(w)){p.add(w);var g=ba(w);e.addEventListener(w,jt,{passive:g});var H=Bt.get(w);H===void 0?(document.addEventListener(w,jt,{passive:g}),Bt.set(w,1)):Bt.set(w,H+1)}}};_(Ze(un)),$e.add(_);var l=void 0,f=ta(()=>{var d=r??e.appendChild(Gn());return Qt(()=>{if(u){rr({});var s=z;s.c=u}o&&(a.$$events=o),l=t(d,a)||{},u&&nr()}),()=>{var g;for(var s of p){e.removeEventListener(s,jt);var w=Bt.get(s);--w===0?(document.removeEventListener(s,jt),Bt.delete(s)):Bt.set(s,w)}$e.delete(_),d!==r&&((g=d.parentNode)==null||g.removeChild(d))}});return Ua.set(l,f),l}let Ua=new WeakMap;function Rr(t,e,[r,a]=[0,0]){var o=t,u=null,c=null,p=tt,_=r>0?tr:0,l=!1;const f=(s,w=!0)=>{l=!0,d(w,s)},d=(s,w)=>{p!==(p=s)&&(p?(u?ye(u):w&&(u=Qt(()=>w(o))),c&&xe(c,()=>{c=null})):(c?ye(c):w&&(c=Qt(()=>w(o,[r+1,a]))),u&&xe(u,()=>{u=null})))};ir(()=>{l=!1,e(f),l||d(null,null)},_)}function Da(t,e){return e}function Ia(t,e,r,a){for(var o=[],u=e.length,c=0;c<u;c++)or(e[c].e,o,!0);var p=u>0&&o.length===0&&r!==null;if(p){var _=r.parentNode;$n(_),_.append(r),a.clear(),Rt(t,e[0].prev,e[u-1].next)}Qr(o,()=>{for(var l=0;l<u;l++){var f=e[l];p||(a.delete(f.k),Rt(t,f.prev,f.next)),Dt(f.e,!p)}})}function Pa(t,e,r,a,o,u=null){var c=t,p={flags:e,items:new Map,first:null},_=null,l=!1,f=zr(()=>{var d=r();return Ke(d)?d:d==null?[]:Ze(d)});ir(()=>{var d=i(f),s=d.length;l&&s===0||(l=s===0,La(d,p,c,o,e,a,r),u!==null&&(s===0?_?ye(_):_=Qt(()=>u(c)):_!==null&&xe(_,()=>{_=null})),i(f))})}function La(t,e,r,a,o,u,c){var p=t.length,_=e.items,l=e.first,f=l,d,s=null,w=[],g=[],H,O,C,X;for(X=0;X<p;X+=1){if(H=t[X],O=u(H,X),C=_.get(O),C===void 0){var q=f?f.e.nodes_start:r;s=Oa(q,e,s,s===null?e.first:s.next,H,O,X,a,o,c),_.set(O,s),w=[],g=[],f=s.next;continue}if(Ma(C,H,X),(C.e.f&wt)!==0&&ye(C.e),C!==f){if(d!==void 0&&d.has(C)){if(w.length<g.length){var J=g[0],K;s=J.prev;var j=w[0],pt=w[w.length-1];for(K=0;K<w.length;K+=1)Sr(w[K],J,r);for(K=0;K<g.length;K+=1)d.delete(g[K]);Rt(e,j.prev,pt.next),Rt(e,s,j),Rt(e,pt,J),f=J,s=pt,X-=1,w=[],g=[]}else d.delete(C),Sr(C,f,r),Rt(e,C.prev,C.next),Rt(e,C,s===null?e.first:s.next),Rt(e,s,C),s=C;continue}for(w=[],g=[];f!==null&&f.k!==O;)(f.e.f&wt)===0&&(d??(d=new Set)).add(f),g.push(f),f=f.next;if(f===null)continue;C=f}w.push(C),s=C,f=C.next}if(f!==null||d!==void 0){for(var W=d===void 0?[]:Ze(d);f!==null;)(f.e.f&wt)===0&&W.push(f),f=f.next;var ft=W.length;if(ft>0){var bt=null;Ia(e,W,bt,_)}}V.first=e.first&&e.first.e,V.last=s&&s.e}function Ma(t,e,r,a){pe(t.v,e),t.i=r}function Oa(t,e,r,a,o,u,c,p,_,l){var f=(_&On)!==0,d=(_&Nn)===0,s=f?d?k(o):Kt(o):o,w=(_&Cn)===0?c:Kt(c),g={i:w,v:s,k:u,a:null,e:null,prev:r,next:a};try{return g.e=Qt(()=>p(t,s,w,l),Yn),g.e.prev=r&&r.e,g.e.next=a&&a.e,r===null?e.first=g:(r.next=g,r.e.next=g.e),a!==null&&(a.prev=g,a.e.prev=g.e),g}finally{}}function Sr(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,u=t.e.nodes_start;u!==a;){var c=Se(u);o.before(u),u=c}}function Rt(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}const Ca=Symbol("is custom element"),Na=Symbol("is html");function fe(t,e,r,a){var o=Ba(t);o[e]!==(o[e]=r)&&(e==="loading"&&(t[Fn]=r),r==null?t.removeAttribute(e):typeof r!="string"&&ka(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Ba(t){return t.__attributes??(t.__attributes={[Ca]:t.nodeName.includes("-"),[Na]:t.namespaceURI===qn})}var Ur=new Map;function ka(t){var e=Ur.get(t.nodeName);if(e)return e;Ur.set(t.nodeName,e=[]);for(var r,a=t,o=Element.prototype;o!==a;){r=Or(a);for(var u in r)r[u].set&&e.push(u);a=Qe(a)}return e}function Ha(t,e,r=e){Aa(t,"change",a=>{var o=a?t.defaultChecked:t.checked;r(o)}),mt(e)==null&&r(t.checked),te(()=>{var a=e();t.checked=!!a})}function Dr(t,e){return t===e||(t==null?void 0:t[Mt])===e}function Va(t={},e,r,a){return ar(()=>{var o,u;return te(()=>{o=u,u=[],mt(()=>{t!==r(...u)&&(e(t,...u),o&&Dr(r(...o),t)&&e(null,...o))})}),()=>{tn(()=>{u&&Dr(r(...u),t)&&e(null,...u)})}}),t}function fn(t=!1){const e=z,r=e.l.u;if(!r)return;let a=()=>xa(e.s);if(t){let o=0,u={};const c=Zt(()=>{let p=!1;const _=e.s;for(const l in _)_[l]!==u[l]&&(u[l]=_[l],p=!0);return p&&o++,o});a=()=>i(c)}r.b.length&&Jn(()=>{Ir(e,a),Xe(r.b)}),Ar(()=>{const o=mt(()=>r.m.map(yn));return()=>{for(const u of o)typeof u=="function"&&u()}}),r.a.length&&Ar(()=>{Ir(e,a),Xe(r.a)})}function Ir(t,e){if(t.l.s)for(const r of t.l.s)i(r);e()}let le=!1;function Wa(t){var e=le;try{return le=!1,[t(),le]}finally{le=e}}function Pr(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function Lr(t,e,r,a){var pt;var o=(r&Bn)!==0,u=!Jt||(r&kn)!==0,c=(r&Vn)!==0,p=(r&Wn)!==0,_=!1,l;c?[l,_]=Wa(()=>t[e]):l=t[e];var f=Mt in t||An in t,d=c&&(((pt=Ht(t,e))==null?void 0:pt.set)??(f&&e in t&&(W=>t[e]=W)))||void 0,s=a,w=!0,g=!1,H=()=>(g=!0,w&&(w=!1,p?s=mt(a):s=a),s),O;if(u)O=()=>{var W=t[e];return W===void 0?H():(w=!0,g=!1,W)};else{var C=(o?Zt:zr)(()=>t[e]);C.f|=Nr,O=()=>{var W=i(C);return W!==void 0&&(s=void 0),W===void 0?s:W}}if((r&Hn)===0)return O;if(d){var X=t.$$legacy;return function(W,ft){return arguments.length>0?((!u||!ft||X||_)&&d(ft?O():W),W):O()}}var q=!1,J=!1,K=k(l),j=Zt(()=>{var W=O(),ft=i(K);return q?(q=!1,J=!0,ft):(J=!1,K.v=W)});return c&&i(j),o||(j.equals=er),function(W,ft){if(St!==null&&(q=J,O(),i(K)),arguments.length>0){const bt=ft?i(j):u&&c?Lt(W):W;if(!j.equals(bt)){if(q=!0,L(K,bt),g&&s!==void 0&&(s=bt),Pr(j))return W;mt(()=>i(j))}return W}return Pr(j)?j.v:i(j)}}const Xa="5";var Mr;typeof window<"u"&&((Mr=window.__svelte??(window.__svelte={})).v??(Mr.v=new Set)).add(Xa);Mn();const za=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,qa=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,Ya=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,ja=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,Ga=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,$a=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,We=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],Ka=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],Za=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],Qa=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],kt=(t,e,r,a)=>{const o=t.createShader(e);if(!o)throw new Error(`failed to create shader '${a}'`);if(t.shaderSource(o,r),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){const u=t.getShaderInfoLog(o);throw new Error(`compilation error in shader '${a}':
${u}`)}return o},ce=(t,e,r,a)=>{const o=t.createProgram();if(!o)throw new Error(`failed to create program '${a}'`);if(t.attachShader(o,e),t.attachShader(o,r),t.linkProgram(o),t.detachShader(o,e),t.detachShader(o,r),!t.getProgramParameter(o,t.LINK_STATUS)){const u=t.getProgramInfoLog(o);throw new Error(`link error in program '${a}':
${u}`)}return o};var Ja=re('<div class="static select-none m-0 border-none w-full"><input class="ml-1" type="checkbox"> <label> </label> <br></div>'),ti=re('<div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function ei(t,e){rr(e,!1);let r=Lr(e,"entities",12),a=Lr(e,"redraw",8),o=null,u=!1,c=!1;const p=s=>{o=s,c=!s.enabled},_=()=>{u=!1,o=null},l=s=>{o&&(u||(o.enabled=c),s.enabled=c,r(r()),a()())};fn();var f=ti(),d=me(Ye(f),2);Pa(d,1,r,Da,(s,w,g)=>{var H=Ja(),O=qe(H);fe(O,"draggable",!0),fe(O,"id",`menu${g}`),O.__change=function(...q){var J;(J=a())==null||J.apply(this,q)};var C=me(O,2);fe(C,"draggable",!0),fe(C,"for",`menu${g}`);var X=qe(C);na(()=>Ta(X,i(w).type)),Yt("dragenter",H,()=>l(i(w))),Yt("dragstart",O,()=>p(i(w))),Yt("dragend",O,_),Ha(O,()=>i(w).enabled,q=>(i(w).enabled=q,wa(()=>r()))),Yt("dragstart",C,()=>p(i(w))),Yt("dragend",C,_),Gt(s,H)}),Gt(t,f),nr()}sn(["change"]);var ri=(t,e)=>L(e,!1),ni=re('<div class="overflow-auto absolute w-50 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="menu">',1),ai=(t,e)=>L(e,!0),ii=re('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="menu">'),oi=re('<canvas class="absolute right-0"></canvas> <!>',1);function ui(t,e){rr(e,!1);let r={},a=k([]);const o=b=>{const n=ur.get(b);return n?parseInt(n):0},u=(b,n,m,v,Y)=>new Float32Array([m/(b*Y),0,0,0,0,m/(n*Y),0,0,0,0,(v+m)/(v-m),1,0,0,-2*v*m/(v-m),0]),c=0;let p=k(null),_=k(null),l=k(null),f=k(null),d=k(null),s=k(null),w=k(null),g=k(null),H=k(null),O=k(null),C=k(null),X=k(null),q=k(null),J=k(null),K=k(null),j=k(null),pt=k(null),W=k(null),ft=k(null),bt=k(null);const ur=new URLSearchParams(window.location.search),sr=ur.get("n"),ln=sr?Math.max(parseInt(sr),1):1,ne=o("w"),ae=o("h"),fr=o("gx"),lr=o("gy"),Pe=o("gw"),Le=o("gh");let zt=0,ie=k(0),oe=k(),Pt=null,ue=null,Et=0,At=0,cr=u(Pe,Le,460,66560,5/16),Me=k(!1),Oe=k(!1),rt=k(null),h=k(null);const qt=(b,n,m)=>{b.bindBuffer(b.ARRAY_BUFFER,n.vbo);for(let v=0;v<i(ie);v+=1){const Y=n.attribs[v];if(!Y){b.disableVertexAttribArray(v);continue}b.enableVertexAttribArray(v),b.vertexAttribPointer(v,Y.count,b.FLOAT,!1,n.step,Y.offset)}b.drawArrays(b.TRIANGLES,0,m)},Ft=(b,n)=>{if(n.viewport(0,0,b.width,b.height),n.scissor(0,0,b.width,b.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),i(Me)){n.disable(n.SCISSOR_TEST);for(let m of i(a))if(m.enabled){if(m.type==="batch2d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST);const v=r[m.textureId];n.useProgram(i(p)),n.viewport(0,0,ne,ae),n.uniform4fv(i(_),[v.width,v.height,m.targetWidth,m.targetHeight]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(i(l),c),qt(n,m.buffer,m.vertexCount)}if(m.type==="render3d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const v=r[m.textureId];n.useProgram(m.animated?i(O):i(f)),n.viewport(fr,lr,Pe,Le),n.uniformMatrix4fv(m.animated?i(C):i(d),!1,m.modelMatrix),n.uniformMatrix4fv(m.animated?i(X):i(s),!1,m.viewMatrix),n.uniformMatrix4fv(m.animated?i(q):i(w),!1,cr),n.uniform2fv(m.animated?i(J):i(g),[v.width,v.height]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(m.animated?i(K):i(H),c),qt(n,m.buffer,m.vertexCount)}if(m.type==="renderparticles"){n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const v=r[m.textureId];n.useProgram(i(j)),n.viewport(fr,lr,Pe,Le),n.uniformMatrix4fv(i(pt),!1,m.viewMatrix),n.uniformMatrix4fv(i(W),!1,cr),n.uniform2fv(i(bt),[v.width,v.height]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(i(ft),c),qt(n,m.buffer,m.vertexCount)}if(m.type==="icon"||m.type==="bigicon"){const v=m.texSize;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(p)),n.viewport(0,0,ne,ae),n.bindTexture(n.TEXTURE_2D,m.texture),n.uniform1i(i(l),c),n.uniform4fv(i(_),[v,v,m.targetWidth,m.targetHeight]),qt(n,m.buffer,6)}if(m.type==="minimap"){if(Pt===null)continue;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(p)),n.viewport(0,0,ne,ae),n.uniform4fv(i(_),[Et,At,m.targetWidth,m.targetHeight]),n.bindTexture(n.TEXTURE_2D,Pt),n.uniform1i(i(l),c),qt(n,m.buffer,6)}}}else{n.viewport(0,0,b.width,b.height);const m=()=>{n.clearColor(.525,.968,.495,1),n.clear(n.COLOR_BUFFER_BIT)},v=()=>{n.clearColor(.2,.2,.2,1),n.clear(n.COLOR_BUFFER_BIT)},Y=Math.min(zt/ln,1),R=Math.floor(b.width*.65)&-2,E=70,M=8,A=M*2,G=R*Y;if(m(),b.width<=A||b.height<=A)return;n.scissor(M,M,b.width-A,b.height-A),v(),n.scissor(b.width/2-(R/2+M),b.height/2-(E/2+M),R+A,E+A),m(),n.scissor(b.width/2-R/2+G,b.height/2-E/2,R-G,E),v()}},cn=(b,n,m)=>{const v=new DataView(m),Y=v.getUint32(0,!0);switch(Y){case 0:{L(Me,!0),Ft(b,n);break}case 1:{const R=v.getUint32(4,!0),E=v.getUint32(8,!0),M=v.getUint32(12,!0),A=n.createTexture(),G=new Uint8Array(m,16,E*M*4);n.bindTexture(n.TEXTURE_2D,A),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,E,M,0,n.RGBA,n.UNSIGNED_BYTE,G),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),r[R]={texture:A,width:E,height:M,data:G};break}case 2:case 3:{const R=Y===3,E=R?104:40,M=R?120:56,A=v.getUint32(4,!0),G=v.getUint32(8,!0),S=new Float32Array(16);S.set(new Float32Array(m,16,16));const $=new Float32Array(16);$.set(new Float32Array(m,80,16));const D=new DataView(m,144,A*E),I=new Array(A),U=new ArrayBuffer(A*M),y=new DataView(U);for(let T=0;T<A;T+=1){const x=E*T,P=M*T;let at=null;R&&(at=new Float32Array(16),at.set(new Float32Array(m,144+E*T+40,16)));const N={x:D.getInt16(x,!0),y:D.getInt16(x+2,!0),z:D.getInt16(x+4,!0),u:D.getFloat32(x+8,!0),v:D.getFloat32(x+12,!0),ax:D.getUint16(x+16,!0),ay:D.getUint16(x+18,!0),aw:D.getUint16(x+20,!0),ah:D.getUint16(x+22,!0),r:D.getFloat32(x+24,!0),g:D.getFloat32(x+28,!0),b:D.getFloat32(x+32,!0),a:D.getFloat32(x+36,!0),anim:at};if(I[T]=N,y.setFloat32(P,N.x,!0),y.setFloat32(P+4,N.y,!0),y.setFloat32(P+8,N.z,!0),y.setFloat32(P+12,0,!0),y.setFloat32(P+16,N.u,!0),y.setFloat32(P+20,N.v,!0),y.setFloat32(P+24,N.ax,!0),y.setFloat32(P+28,N.ay,!0),y.setFloat32(P+32,N.aw,!0),y.setFloat32(P+36,N.ah,!0),y.setFloat32(P+40,N.r,!0),y.setFloat32(P+44,N.g,!0),y.setFloat32(P+48,N.b,!0),y.setFloat32(P+52,N.a,!0),at)for(let it=0;it<16;it+=1)y.setFloat32(P+56+it*4,at[it],!0)}const F=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,F),n.bufferData(n.ARRAY_BUFFER,y,n.STATIC_DRAW),i(a).push({type:"render3d",animated:R,textureId:G,vertexCount:A,modelMatrix:S,viewMatrix:$,vertices:I,buffer:{vbo:F,step:M,attribs:R?Za:Ka},enabled:!0}),zt+=A,Ft(b,n);break}case 4:{const M=v.getUint32(4,!0),A=v.getUint32(8,!0),G=v.getUint16(12,!0),S=v.getUint16(14,!0),$=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,$);const D=new DataView(m,16,M*40),I=new ArrayBuffer(M*60),U=new DataView(I),y=new Array(M);for(let F=0;F<M;F+=1){const T=40*F,x=60*F,P={x:D.getInt16(T,!0),y:D.getInt16(T+2,!0),ax:D.getInt16(T+4,!0),ay:D.getInt16(T+6,!0),aw:D.getInt16(T+8,!0),ah:D.getInt16(T+10,!0),discard:D.getUint8(T+12),wrapx:D.getUint8(T+13),wrapy:D.getUint8(T+14),u:D.getFloat32(T+16,!0),v:D.getFloat32(T+20,!0),r:D.getFloat32(T+24,!0),g:D.getFloat32(T+28,!0),b:D.getFloat32(T+32,!0),a:D.getFloat32(T+36,!0)};y[F]=P,U.setFloat32(x,P.x,!0),U.setFloat32(x+4,P.y,!0),U.setFloat32(x+8,P.u,!0),U.setFloat32(x+12,P.v,!0),U.setFloat32(x+16,P.ax,!0),U.setFloat32(x+20,P.ay,!0),U.setFloat32(x+24,P.aw,!0),U.setFloat32(x+28,P.ah,!0),U.setFloat32(x+32,P.r,!0),U.setFloat32(x+36,P.g,!0),U.setFloat32(x+40,P.b,!0),U.setFloat32(x+44,P.a,!0),U.setFloat32(x+48,P.discard,!0),U.setFloat32(x+52,P.wrapx,!0),U.setFloat32(x+56,P.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,U,n.STATIC_DRAW),i(a).push({type:"batch2d",textureId:A,vertexCount:M,vertices:y,targetWidth:G,targetHeight:S,buffer:{vbo:$,step:60,attribs:We},enabled:!0}),zt+=M,Ft(b,n);break}case 5:case 8:{const E=Y===5?64:512,M=v.getInt16(4,!0),A=v.getInt16(6,!0),G=v.getInt16(8,!0),S=v.getInt16(10,!0),$=v.getUint32(12,!0),D=v.getFloat32(16,!0),I=v.getFloat32(20,!0),U=v.getFloat32(24,!0),y=v.getFloat32(28,!0),F=v.getUint16(32,!0),T=v.getUint16(34,!0),x=n.createTexture(),P=n.createFramebuffer();n.bindTexture(n.TEXTURE_2D,x),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,P),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,E,E),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,x,0),n.disable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.FRONT),n.viewport(0,0,E,E),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT);let at=Array($),N=36;for(let Be=0;Be<$;Be+=1){const se=v.getUint32(N,!0);let hr=Array(se);const hn=new ArrayBuffer(se*56),ot=new DataView(hn),ke=new Float32Array(16);ke.set(new Float32Array(m,N+4,16));const He=new Float32Array(16);He.set(new Float32Array(m,N+68,16));const Ve=new Float32Array(16);Ve.set(new Float32Array(m,N+132,16)),N+=196;for(let vt=0;vt<se;vt+=1){const gt={x:v.getInt16(N,!0),y:v.getInt16(N+2,!0),z:v.getInt16(N+4,!0),r:v.getFloat32(N+8,!0),g:v.getFloat32(N+12,!0),b:v.getFloat32(N+16,!0),a:v.getFloat32(N+20,!0)},lt=vt*56;ot.setFloat32(lt,gt.x,!0),ot.setFloat32(lt+4,gt.y,!0),ot.setFloat32(lt+8,gt.z,!0),ot.setFloat32(lt+24,0,!0),ot.setFloat32(lt+28,0,!0),ot.setFloat32(lt+32,E,!0),ot.setFloat32(lt+36,E,!0),ot.setFloat32(lt+40,gt.r,!0),ot.setFloat32(lt+44,gt.g,!0),ot.setFloat32(lt+48,gt.b,!0),ot.setFloat32(lt+52,gt.a,!0),hr[vt]=gt,N+=24}at[Be]={vertices:hr,modelMatrix:ke,viewMatrix:He,projMatrix:Ve};const pr=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,pr),n.bufferData(n.ARRAY_BUFFER,ot,n.STATIC_DRAW),n.useProgram(i(f)),n.uniformMatrix4fv(i(d),!1,ke),n.uniformMatrix4fv(i(s),!1,He),n.uniformMatrix4fv(i(w),!1,Ve),n.uniform2fv(i(g),[1,1]),n.bindTexture(n.TEXTURE_2D,i(oe)),n.uniform1i(i(H),c);for(let vt=0;vt<i(ie);vt+=1)vt<4?n.enableVertexAttribArray(vt):n.disableVertexAttribArray(vt);n.vertexAttribPointer(0,4,n.FLOAT,!1,56,0),n.vertexAttribPointer(1,2,n.FLOAT,!1,56,16),n.vertexAttribPointer(2,4,n.FLOAT,!1,56,24),n.vertexAttribPointer(3,4,n.FLOAT,!1,56,40),n.drawArrays(n.TRIANGLES,0,se),n.deleteBuffer(pr)}const it=M,Nt=M+G,Ce=A,Ne=A+S,dr=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,dr),n.bufferData(n.ARRAY_BUFFER,new Float32Array([it,Ce,0,1,0,0,E,E,D,U,I,y,0,0,0,Nt,Ce,1,1,0,0,E,E,D,U,I,y,0,0,0,it,Ne,0,0,0,0,E,E,D,U,I,y,0,0,0,Nt,Ce,1,1,0,0,E,E,D,U,I,y,0,0,0,Nt,Ne,1,0,0,0,E,E,D,U,I,y,0,0,0,it,Ne,0,0,0,0,E,E,D,U,I,y,0,0,0]),n.STATIC_DRAW),i(a).push({type:Y===5?"icon":"bigicon",models:at,texture:x,targetWidth:F,targetHeight:T,texSize:E,buffer:{vbo:dr,step:60,attribs:We},enabled:!0}),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.deleteFramebuffer(P),n.disable(n.CULL_FACE);break}case 6:{const R=v.getUint32(4,!0),E=v.getUint32(8,!0);Et=v.getUint16(12,!0),At=v.getUint16(14,!0);const M=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,M);const A=new DataView(m,16,R*40),G=new ArrayBuffer(R*60),S=new DataView(G),$=new Array(R);for(let I=0;I<R;I+=1){const U=40*I,y=60*I,F={x:A.getInt16(U,!0),y:A.getInt16(U+2,!0),ax:A.getInt16(U+4,!0),ay:A.getInt16(U+6,!0),aw:A.getInt16(U+8,!0),ah:A.getInt16(U+10,!0),discard:A.getUint8(U+12),wrapx:A.getUint8(U+13),wrapy:A.getUint8(U+14),u:A.getFloat32(U+16,!0),v:A.getFloat32(U+20,!0),r:A.getFloat32(U+24,!0),g:A.getFloat32(U+28,!0),b:A.getFloat32(U+32,!0),a:A.getFloat32(U+36,!0)};$[I]=F,S.setFloat32(y,F.x,!0),S.setFloat32(y+4,F.y,!0),S.setFloat32(y+8,F.u,!0),S.setFloat32(y+12,F.v,!0),S.setFloat32(y+16,F.ax,!0),S.setFloat32(y+20,F.ay,!0),S.setFloat32(y+24,F.aw,!0),S.setFloat32(y+28,F.ah,!0),S.setFloat32(y+32,F.r,!0),S.setFloat32(y+36,F.g,!0),S.setFloat32(y+40,F.b,!0),S.setFloat32(y+44,F.a,!0),S.setFloat32(y+48,F.discard,!0),S.setFloat32(y+52,F.wrapx,!0),S.setFloat32(y+56,F.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,S,n.STATIC_DRAW),!Pt||!ue?(Pt=n.createTexture(),n.bindTexture(n.TEXTURE_2D,Pt),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,Et,At),ue=n.createFramebuffer(),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,ue),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Pt,0),n.bindTexture(n.TEXTURE_2D,null)):n.bindFramebuffer(n.DRAW_FRAMEBUFFER,ue),n.viewport(0,0,Et,At),n.scissor(0,0,Et,At),n.disable(n.DEPTH_TEST);const D=r[E];n.useProgram(i(p)),n.uniform4fv(i(_),[D.width,D.height,Et,At]),n.bindTexture(n.TEXTURE_2D,D.texture),n.uniform1i(i(l),c);for(let I=0;I<i(ie);I+=1)I<4?n.enableVertexAttribArray(I):n.disableVertexAttribArray(I);n.vertexAttribPointer(0,4,n.FLOAT,!1,60,0),n.vertexAttribPointer(1,4,n.FLOAT,!1,60,16),n.vertexAttribPointer(2,4,n.FLOAT,!1,60,32),n.vertexAttribPointer(3,3,n.FLOAT,!1,60,48),n.drawArrays(n.TRIANGLES,0,R),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),i(a).push({type:"minimap2d",textureId:E,vbo:M,vertices:$,enabled:!0}),zt+=R,Ft(b,n);break}case 7:{if(!Pt)break;const R=v.getInt16(4,!0),E=v.getInt16(6,!0),M=v.getUint16(8,!0),A=v.getUint16(10,!0),G=v.getInt16(12,!0),S=v.getInt16(14,!0),$=v.getUint16(16,!0),D=v.getUint16(18,!0),I=v.getUint16(20,!0),U=v.getUint16(22,!0),y=G,F=G+$,T=S,x=S+D,P=R/Et,at=(R+M)/Et,N=E/At,it=(E+A)/At,Nt=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Nt),n.bufferData(n.ARRAY_BUFFER,new Float32Array([y,T,P,it,R,E,M,A,1,1,1,1,0,0,0,F,T,at,it,R,E,M,A,1,1,1,1,0,0,0,y,x,P,N,R,E,M,A,1,1,1,1,0,0,0,F,T,at,it,R,E,M,A,1,1,1,1,0,0,0,F,x,at,N,R,E,M,A,1,1,1,1,0,0,0,y,x,P,N,R,E,M,A,1,1,1,1,0,0,0]),n.STATIC_DRAW),i(a).push({type:"minimap",sourcex:R,sourcey:E,sourcew:M,sourceh:A,targetx:G,targety:S,targetw:$,targeth:D,targetWidth:I,targetHeight:U,buffer:{vbo:Nt,step:60,attribs:We},enabled:!0}),Ft(b,n);break}case 9:{const R=v.getUint32(4,!0),E=v.getUint32(8,!0),M=64,A=72,G=new Float32Array(16);G.set(new Float32Array(m,16,16));const S=new DataView(m,80,R*M),$=new Array(R),D=new ArrayBuffer(R*A),I=new DataView(D);for(let y=0;y<R;y+=1){const F=M*y,T=A*y,x={x:S.getFloat32(F,!0),y:S.getFloat32(F+4,!0),z:S.getFloat32(F+8,!0),offsetx2d:S.getFloat32(F+12,!0),offsety2d:S.getFloat32(F+16,!0),offsetx3d:S.getFloat32(F+20,!0),offsety3d:S.getFloat32(F+24,!0),offsetz3d:S.getFloat32(F+28,!0),ax:S.getUint16(F+32,!0),ay:S.getUint16(F+34,!0),aw:S.getUint16(F+36,!0),ah:S.getUint16(F+38,!0),r:S.getFloat32(F+40,!0),g:S.getFloat32(F+44,!0),b:S.getFloat32(F+48,!0),a:S.getFloat32(F+52,!0),u:S.getFloat32(F+56,!0),v:S.getFloat32(F+60,!0)};$[y]=x,I.setFloat32(T,x.x,!0),I.setFloat32(T+4,x.y,!0),I.setFloat32(T+8,x.z,!0),I.setFloat32(T+12,x.ax,!0),I.setFloat32(T+16,x.ay,!0),I.setFloat32(T+20,x.aw,!0),I.setFloat32(T+24,x.ah,!0),I.setFloat32(T+28,x.r,!0),I.setFloat32(T+32,x.g,!0),I.setFloat32(T+36,x.b,!0),I.setFloat32(T+40,x.a,!0),I.setFloat32(T+44,x.offsetx2d,!0),I.setFloat32(T+48,x.offsety2d,!0),I.setFloat32(T+52,x.offsetx3d,!0),I.setFloat32(T+56,x.offsety3d,!0),I.setFloat32(T+60,x.offsetz3d,!0),I.setFloat32(T+64,x.u,!0),I.setFloat32(T+68,x.v,!0)}const U=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,U),n.bufferData(n.ARRAY_BUFFER,I,n.STATIC_DRAW),i(a).push({type:"renderparticles",textureId:E,vertexCount:R,vertices:$,viewMatrix:G,buffer:{vbo:U,step:A,attribs:Qa},enabled:!0}),zt+=R,Ft(b,n);break}}};window.addEventListener("message",async b=>{if(typeof b.data=="object"&&b.data.type==="pluginMessage"){if(typeof b.data.content!="object"||!i(rt)||!i(h))return;cn(i(rt),i(h),b.data.content)}}),ea(()=>(i(rt),i(h),i(oe),i(p),i(f),i(O),i(j)),()=>{if(i(rt)&&(br(rt,i(rt).width=ne),br(rt,i(rt).height=ae),L(h,i(rt).getContext("webgl2")),i(h))){L(ie,i(h).getParameter(i(h).MAX_VERTEX_ATTRIBS)),L(oe,i(h).createTexture()),i(h).bindTexture(i(h).TEXTURE_2D,i(oe));const b=new Uint8Array([255,255,255,255]);i(h).texImage2D(i(h).TEXTURE_2D,0,i(h).RGBA,1,1,0,i(h).RGBA,i(h).UNSIGNED_BYTE,b);const n=kt(i(h),i(h).VERTEX_SHADER,za,"2D vertex shader"),m=kt(i(h),i(h).FRAGMENT_SHADER,qa,"2D fragment shader"),v=kt(i(h),i(h).VERTEX_SHADER,Ya,"3D vertex shader"),Y=kt(i(h),i(h).VERTEX_SHADER,ja,"3D anim vertex shader"),R=kt(i(h),i(h).FRAGMENT_SHADER,Ga,"3D fragment shader"),E=kt(i(h),i(h).VERTEX_SHADER,$a,"particle vertex shader");L(p,ce(i(h),n,m,"2D program")),L(_,i(h).getUniformLocation(i(p),"atlas_wh_screen_wh")),L(l,i(h).getUniformLocation(i(p),"tex")),L(f,ce(i(h),v,R,"3D program")),L(d,i(h).getUniformLocation(i(f),"modelmatrix")),L(s,i(h).getUniformLocation(i(f),"viewmatrix")),L(w,i(h).getUniformLocation(i(f),"projmatrix")),L(g,i(h).getUniformLocation(i(f),"atlas_wh")),L(H,i(h).getUniformLocation(i(f),"tex")),L(O,ce(i(h),Y,R,"3D animated program")),L(C,i(h).getUniformLocation(i(O),"modelmatrix")),L(X,i(h).getUniformLocation(i(O),"viewmatrix")),L(q,i(h).getUniformLocation(i(O),"projmatrix")),L(J,i(h).getUniformLocation(i(O),"atlas_wh")),L(K,i(h).getUniformLocation(i(O),"tex")),L(j,ce(i(h),E,R,"Particles program")),L(pt,i(h).getUniformLocation(i(j),"viewmatrix")),L(W,i(h).getUniformLocation(i(j),"projmatrix")),L(ft,i(h).getUniformLocation(i(j),"tex")),L(bt,i(h).getUniformLocation(i(j),"atlas_wh")),i(h).deleteShader(n),i(h).deleteShader(m),i(h).deleteShader(v),i(h).deleteShader(R),i(h).deleteShader(Y),i(h).deleteShader(E),i(h).activeTexture(i(h).TEXTURE0+c),i(h).enable(i(h).SCISSOR_TEST),i(h).disable(i(h).CULL_FACE),i(h).disable(i(h).DEPTH_TEST),i(h).enable(i(h).BLEND),i(h).blendEquationSeparate(i(h).FUNC_ADD,i(h).FUNC_ADD),i(h).depthFunc(i(h).LEQUAL),Ft(i(rt),i(h))}}),ra(),fn();var _r=oi(),vr=Ye(_r);Va(vr,b=>L(rt,b),()=>i(rt));var _n=me(vr,2);{var vn=b=>{var n=ni(),m=Ye(n),v=qe(m);ei(v,{redraw:()=>{Ft(i(rt),i(h))},get entities(){return i(a)},set entities(R){L(a,R)},$$legacy:!0});var Y=me(m,2);Y.__click=[ri,Oe],Gt(b,n)},dn=(b,n)=>{{var m=v=>{var Y=ii();Y.__click=[ai,Oe],Gt(v,Y)};Rr(b,v=>{i(Me)&&v(m)},n)}};Rr(_n,b=>{i(Oe)?b(vn):b(dn,!1)})}Gt(t,_r),nr()}sn(["click"]);Ra(ui,{target:document.body});
