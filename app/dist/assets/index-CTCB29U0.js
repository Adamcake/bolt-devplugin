(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();const Vr=!1;var Tr=Array.isArray,Mn=Array.prototype.indexOf,Rr=Array.from,On=Object.defineProperty,xt=Object.getOwnPropertyDescriptor,on=Object.getOwnPropertyDescriptors,Nn=Object.prototype,Bn=Array.prototype,Sr=Object.getPrototypeOf,$r=Object.isExtensible;function kn(e){return e()}function br(e){for(var r=0;r<e.length;r++)e[r]()}const Ue=2,un=4,ar=8,Ur=16,ze=32,wt=64,jt=128,Fe=256,qt=512,xe=1024,je=2048,ct=4096,We=8192,ir=16384,Hn=32768,Dr=65536,sn=1<<17,Vn=1<<19,fn=1<<20,gr=1<<21,ft=Symbol("$state"),$n=Symbol("legacy props"),Wn=Symbol("");function ln(e){return e===this.v}function Xn(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Ir(e){return!Xn(e,this.v)}function Yn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function zn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function jn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function qn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Gn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Kn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Zn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Lt=!1,Jn=!1;function ea(){Lt=!0}const Pr=1,Lr=2,cn=4,ta=8,ra=16,na=1,aa=2,ia=4,oa=8,ua=16,sa=1,fa=2,he=Symbol(),la="http://www.w3.org/1999/xhtml";let ee=null;function Wr(e){ee=e}function bt(e,r=!1,t){var a=ee={p:ee,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Lt&&!r&&(ee.l={s:null,u:null,r1:[],r2:Ut(!1)}),xa(()=>{a.d=!0})}function gt(e){const r=ee;if(r!==null){const d=r.e;if(d!==null){var t=q,a=z;r.e=null;try{for(var o=0;o<d.length;o++){var u=d[o];ot(u.effect),Oe(u.reaction),Mr(u.fn)}}finally{ot(t),Oe(a)}}ee=r.p,r.m=!0}return{}}function or(){return!Lt||ee!==null&&ee.l===null}function st(e,r){if(typeof e!="object"||e===null||ft in e)return e;const t=Sr(e);if(t!==Nn&&t!==Bn)return e;var a=new Map,o=Tr(e),u=Qe(0),d=z,h=l=>{var s=z;Oe(d);var _;return _=l(),Oe(s),_};return o&&a.set("length",Qe(e.length)),new Proxy(e,{defineProperty(l,s,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Kn();var x=a.get(s);return x===void 0?(x=h(()=>Qe(_.value)),a.set(s,x)):C(x,h(()=>st(_.value))),!0},deleteProperty(l,s){var _=a.get(s);if(_===void 0)s in l&&a.set(s,h(()=>Qe(he)));else{if(o&&typeof s=="string"){var x=a.get("length"),f=Number(s);Number.isInteger(f)&&f<x.v&&C(x,f)}C(_,he),Xr(u)}return!0},get(l,s,_){var b;if(s===ft)return e;var x=a.get(s),f=s in l;if(x===void 0&&(!f||(b=xt(l,s))!=null&&b.writable)&&(x=h(()=>Qe(st(f?l[s]:he))),a.set(s,x)),x!==void 0){var m=i(x);return m===he?void 0:m}return Reflect.get(l,s,_)},getOwnPropertyDescriptor(l,s){var _=Reflect.getOwnPropertyDescriptor(l,s);if(_&&"value"in _){var x=a.get(s);x&&(_.value=i(x))}else if(_===void 0){var f=a.get(s),m=f==null?void 0:f.v;if(f!==void 0&&m!==he)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return _},has(l,s){var m;if(s===ft)return!0;var _=a.get(s),x=_!==void 0&&_.v!==he||Reflect.has(l,s);if(_!==void 0||q!==null&&(!x||(m=xt(l,s))!=null&&m.writable)){_===void 0&&(_=h(()=>Qe(x?st(l[s]):he)),a.set(s,_));var f=i(_);if(f===he)return!1}return x},set(l,s,_,x){var H;var f=a.get(s),m=s in l;if(o&&s==="length")for(var b=_;b<f.v;b+=1){var k=a.get(b+"");k!==void 0?C(k,he):b in l&&(k=h(()=>Qe(he)),a.set(b+"",k))}f===void 0?(!m||(H=xt(l,s))!=null&&H.writable)&&(f=h(()=>Qe(void 0)),C(f,h(()=>st(_))),a.set(s,f)):(m=f.v!==he,C(f,h(()=>st(_))));var X=Reflect.getOwnPropertyDescriptor(l,s);if(X!=null&&X.set&&X.set.call(x,_),!m){if(o&&typeof s=="string"){var T=a.get("length"),M=Number(s);Number.isInteger(M)&&M>=T.v&&C(T,M+1)}Xr(u)}return!0},ownKeys(l){i(u);var s=Reflect.ownKeys(l).filter(f=>{var m=a.get(f);return m===void 0||m.v!==he});for(var[_,x]of a)x.v!==he&&!(_ in l)&&s.push(_);return s},setPrototypeOf(){Zn()}})}function Xr(e,r=1){C(e,e.v+r)}const St=new Map;function Ut(e,r){var t={f:0,v:e,reactions:null,equals:ln,rv:0,wv:0};return t}function Qe(e,r){const t=Ut(e);return Fa(t),t}function $(e,r=!1){var a;const t=Ut(e);return r||(t.equals=Ir),Lt&&ee!==null&&ee.l!==null&&((a=ee.l).s??(a.s=[])).push(t),t}function Xt(e,r){return C(e,Ye(()=>i(e))),r}function C(e,r,t=!1){z!==null&&!Me&&or()&&(z.f&(Ue|Ur))!==0&&!(ce!=null&&ce.includes(e))&&Qn();let a=t?st(r):r;return Dt(e,a)}function Dt(e,r){if(!e.equals(r)){var t=e.v;Mt?St.set(e,r):St.set(e,t),e.v=r,e.wv=Tn(),dn(e,je),or()&&q!==null&&(q.f&xe)!==0&&(q.f&(ze|wt))===0&&(Ee===null?Ta([e]):Ee.push(e))}return r}function dn(e,r){var t=e.reactions;if(t!==null)for(var a=or(),o=t.length,u=0;u<o;u++){var d=t[u],h=d.f;(h&je)===0&&(!a&&d===q||(De(d,r),(h&(xe|Fe))!==0&&((h&Ue)!==0?dn(d,ct):lr(d))))}}let ca=!1;var Yr,_n,vn,hn;function da(){if(Yr===void 0){Yr=window,_n=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,t=Text.prototype;vn=xt(r,"firstChild").get,hn=xt(r,"nextSibling").get,$r(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),$r(t)&&(t.__t=void 0)}}function Cr(e=""){return document.createTextNode(e)}function Gt(e){return vn.call(e)}function ur(e){return hn.call(e)}function Xe(e,r){return Gt(e)}function Se(e,r){{var t=Gt(e);return t instanceof Comment&&t.data===""?ur(t):t}}function fe(e,r=1,t=!1){let a=e;for(;r--;)a=ur(a);return a}function _a(e){e.textContent=""}function It(e){var r=Ue|je,t=z!==null&&(z.f&Ue)!==0?z:null;return q===null||t!==null&&(t.f&Fe)!==0?r|=Fe:q.f|=fn,{ctx:ee,deps:null,effects:null,equals:ln,f:r,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??q}}function $e(e){const r=It(e);return r.equals=Ir,r}function pn(e){var r=e.effects;if(r!==null){e.effects=null;for(var t=0;t<r.length;t+=1)it(r[t])}}function va(e){for(var r=e.parent;r!==null;){if((r.f&Ue)===0)return r;r=r.parent}return null}function ha(e){var r,t=q;ot(va(e));try{pn(e),r=Sn(e)}finally{ot(t)}return r}function xn(e){var r=ha(e),t=(nt||(e.f&Fe)!==0)&&e.deps!==null?ct:xe;De(e,t),e.equals(r)||(e.v=r,e.wv=Tn())}function mn(e){q===null&&z===null&&jn(),z!==null&&(z.f&Fe)!==0&&q===null&&zn(),Mt&&Yn()}function pa(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function yt(e,r,t,a=!0){var o=q,u={ctx:ee,deps:null,nodes_start:null,nodes_end:null,f:e|je,first:null,fn:r,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(t)try{fr(u),u.f|=Hn}catch(l){throw it(u),l}else r!==null&&lr(u);var d=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(fn|jt))===0;if(!d&&a&&(o!==null&&pa(u,o),z!==null&&(z.f&Ue)!==0)){var h=z;(h.effects??(h.effects=[])).push(u)}return u}function xa(e){const r=yt(ar,null,!1);return De(r,xe),r.teardown=e,r}function zr(e){mn();var r=q!==null&&(q.f&ze)!==0&&ee!==null&&!ee.m;if(r){var t=ee;(t.e??(t.e=[])).push({fn:e,effect:q,reaction:z})}else{var a=Mr(e);return a}}function ma(e){return mn(),Ct(e)}function wa(e){const r=yt(wt,e,!0);return(t={})=>new Promise(a=>{t.outro?Kt(r,()=>{it(r),a(void 0)}):(it(r),a(void 0))})}function Mr(e){return yt(un,e,!1)}function ba(e,r){var t=ee,a={effect:null,ran:!1};t.l.r1.push(a),a.effect=Ct(()=>{e(),!a.ran&&(a.ran=!0,C(t.l.r2,!0),Ye(r))})}function ga(){var e=ee;Ct(()=>{if(i(e.l.r2)){for(var r of e.l.r1){var t=r.effect;(t.f&xe)!==0&&De(t,ct),At(t)&&fr(t),r.ran=!1}e.l.r2.v=!1}})}function Ct(e){return yt(ar,e,!0)}function rt(e,r=[],t=It){const a=r.map(t);return Or(()=>e(...a.map(i)))}function Or(e,r=0){return yt(ar|Ur|r,e,!0)}function Pt(e,r=!0){return yt(ar|ze,e,!0,r)}function wn(e){var r=e.teardown;if(r!==null){const t=Mt,a=z;jr(!0),Oe(null);try{r.call(null)}finally{jr(t),Oe(a)}}}function bn(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var a=t.next;(t.f&wt)!==0?t.parent=null:it(t,r),t=a}}function ya(e){for(var r=e.first;r!==null;){var t=r.next;(r.f&ze)===0&&it(r),r=t}}function it(e,r=!0){var t=!1;if((r||(e.f&Vn)!==0)&&e.nodes_start!==null){for(var a=e.nodes_start,o=e.nodes_end;a!==null;){var u=a===o?null:ur(a);a.remove(),a=u}t=!0}bn(e,r&&!t),tr(e,0),De(e,ir);var d=e.transitions;if(d!==null)for(const l of d)l.stop();wn(e);var h=e.parent;h!==null&&h.first!==null&&gn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function gn(e){var r=e.parent,t=e.prev,a=e.next;t!==null&&(t.next=a),a!==null&&(a.prev=t),r!==null&&(r.first===e&&(r.first=a),r.last===e&&(r.last=t))}function Kt(e,r){var t=[];Nr(e,t,!0),yn(t,()=>{it(e),r&&r()})}function yn(e,r){var t=e.length;if(t>0){var a=()=>--t||r();for(var o of e)o.out(a)}else r()}function Nr(e,r,t){if((e.f&We)===0){if(e.f^=We,e.transitions!==null)for(const d of e.transitions)(d.is_global||t)&&r.push(d);for(var a=e.first;a!==null;){var o=a.next,u=(a.f&Dr)!==0||(a.f&ze)!==0;Nr(a,r,u?t:!1),a=o}}}function Zt(e){An(e,!0)}function An(e,r){if((e.f&We)!==0){e.f^=We,(e.f&xe)===0&&(e.f^=xe),At(e)&&(De(e,je),lr(e));for(var t=e.first;t!==null;){var a=t.next,o=(t.f&Dr)!==0||(t.f&ze)!==0;An(t,o?r:!1),t=a}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||r)&&u.in()}}let Qt=[];function Aa(){var e=Qt;Qt=[],br(e)}function En(e){Qt.length===0&&queueMicrotask(Aa),Qt.push(e)}let Yt=!1,yr=!1,Jt=null,lt=!1,Mt=!1;function jr(e){Mt=e}let zt=[];let z=null,Me=!1;function Oe(e){z=e}let q=null;function ot(e){q=e}let ce=null;function Ea(e){ce=e}function Fa(e){z!==null&&z.f&gr&&(ce===null?Ea([e]):ce.push(e))}let le=null,me=0,Ee=null;function Ta(e){Ee=e}let Fn=1,er=0,nt=!1,tt=null;function Tn(){return++Fn}function At(e){var x;var r=e.f;if((r&je)!==0)return!0;if((r&ct)!==0){var t=e.deps,a=(r&Fe)!==0;if(t!==null){var o,u,d=(r&qt)!==0,h=a&&q!==null&&!nt,l=t.length;if(d||h){var s=e,_=s.parent;for(o=0;o<l;o++)u=t[o],(d||!((x=u==null?void 0:u.reactions)!=null&&x.includes(s)))&&(u.reactions??(u.reactions=[])).push(s);d&&(s.f^=qt),h&&_!==null&&(_.f&Fe)===0&&(s.f^=Fe)}for(o=0;o<l;o++)if(u=t[o],At(u)&&xn(u),u.wv>e.wv)return!0}(!a||q!==null&&!nt)&&De(e,xe)}return!1}function Ra(e,r){for(var t=r;t!==null;){if((t.f&jt)!==0)try{t.fn(e);return}catch{t.f^=jt}t=t.parent}throw Yt=!1,e}function Sa(e){return(e.f&ir)===0&&(e.parent===null||(e.parent.f&jt)===0)}function sr(e,r,t,a){if(Yt){if(t===null&&(Yt=!1),Sa(r))throw e;return}t!==null&&(Yt=!0);{Ra(e,r);return}}function Rn(e,r,t=!0){var a=e.reactions;if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];ce!=null&&ce.includes(e)||((u.f&Ue)!==0?Rn(u,r,!1):r===u&&(t?De(u,je):(u.f&xe)!==0&&De(u,ct),lr(u)))}}function Sn(e){var m;var r=le,t=me,a=Ee,o=z,u=nt,d=ce,h=ee,l=Me,s=e.f;le=null,me=0,Ee=null,nt=(s&Fe)!==0&&(Me||!lt||z===null),z=(s&(ze|wt))===0?e:null,ce=null,Wr(e.ctx),Me=!1,er++,e.f|=gr;try{var _=(0,e.fn)(),x=e.deps;if(le!==null){var f;if(tr(e,me),x!==null&&me>0)for(x.length=me+le.length,f=0;f<le.length;f++)x[me+f]=le[f];else e.deps=x=le;if(!nt)for(f=me;f<x.length;f++)((m=x[f]).reactions??(m.reactions=[])).push(e)}else x!==null&&me<x.length&&(tr(e,me),x.length=me);if(or()&&Ee!==null&&!Me&&x!==null&&(e.f&(Ue|ct|je))===0)for(f=0;f<Ee.length;f++)Rn(Ee[f],e);return o!==null&&(er++,Ee!==null&&(a===null?a=Ee:a.push(...Ee))),_}finally{le=r,me=t,Ee=a,z=o,nt=u,ce=d,Wr(h),Me=l,e.f^=gr}}function Ua(e,r){let t=r.reactions;if(t!==null){var a=Mn.call(t,e);if(a!==-1){var o=t.length-1;o===0?t=r.reactions=null:(t[a]=t[o],t.pop())}}t===null&&(r.f&Ue)!==0&&(le===null||!le.includes(r))&&(De(r,ct),(r.f&(Fe|qt))===0&&(r.f^=qt),pn(r),tr(r,0))}function tr(e,r){var t=e.deps;if(t!==null)for(var a=r;a<t.length;a++)Ua(e,t[a])}function fr(e){var r=e.f;if((r&ir)===0){De(e,xe);var t=q,a=ee,o=lt;q=e,lt=!0;try{(r&Ur)!==0?ya(e):bn(e),wn(e);var u=Sn(e);e.teardown=typeof u=="function"?u:null,e.wv=Fn;var d=e.deps,h;Vr&&Jn&&e.f&je}catch(l){sr(l,e,t,a||e.ctx)}finally{lt=o,q=t}}}function Da(){try{qn()}catch(e){if(Jt!==null)sr(e,Jt,null);else throw e}}function Ia(){var e=lt;try{var r=0;for(lt=!0;zt.length>0;){r++>1e3&&Da();var t=zt,a=t.length;zt=[];for(var o=0;o<a;o++){var u=La(t[o]);Pa(u)}}}finally{yr=!1,lt=e,Jt=null,St.clear()}}function Pa(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var a=e[t];if((a.f&(ir|We))===0)try{At(a)&&(fr(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?gn(a):a.fn=null))}catch(o){sr(o,a,null,a.ctx)}}}function lr(e){yr||(yr=!0,queueMicrotask(Ia));for(var r=Jt=e;r.parent!==null;){r=r.parent;var t=r.f;if((t&(wt|ze))!==0){if((t&xe)===0)return;r.f^=xe}}zt.push(r)}function La(e){for(var r=[],t=e;t!==null;){var a=t.f,o=(a&(ze|wt))!==0,u=o&&(a&xe)!==0;if(!u&&(a&We)===0){if((a&un)!==0)r.push(t);else if(o)t.f^=xe;else{var d=z;try{z=t,At(t)&&fr(t)}catch(s){sr(s,t,null,t.ctx)}finally{z=d}}var h=t.first;if(h!==null){t=h;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}return r}function i(e){var r=e.f,t=(r&Ue)!==0;if(tt!==null&&tt.add(e),z!==null&&!Me){if(!(ce!=null&&ce.includes(e))){var a=z.deps;e.rv<er&&(e.rv=er,le===null&&a!==null&&a[me]===e?me++:le===null?le=[e]:(!nt||!le.includes(e))&&le.push(e))}}else if(t&&e.deps===null&&e.effects===null){var o=e,u=o.parent;u!==null&&(u.f&Fe)===0&&(o.f^=Fe)}return t&&(o=e,At(o)&&xn(o)),Mt&&St.has(e)?St.get(e):e.v}function Ca(e){var r=tt;tt=new Set;var t=tt,a;try{if(Ye(e),r!==null)for(a of tt)r.add(a)}finally{tt=r}return t}function mt(e){var r=Ca(()=>Ye(e));for(var t of r)if((t.f&sn)!==0)for(const a of t.deps||[])(a.f&Ue)===0&&Dt(a,a.v);else Dt(t,t.v)}function Ye(e){var r=Me;try{return Me=!0,e()}finally{Me=r}}const Ma=-7169;function De(e,r){e.f=e.f&Ma|r}function Oa(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ft in e)Ar(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&ft in t&&Ar(t)}}}function Ar(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Ar(e[a],r)}catch{}const t=Sr(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const a=on(t);for(let o in a){const u=a[o].get;if(u)try{u.call(e)}catch{}}}}}const Na=["touchstart","touchmove"];function Ba(e){return Na.includes(e)}let qr=!1;function ka(){qr||(qr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function Ha(e){var r=z,t=q;Oe(null),ot(null);try{return e()}finally{Oe(r),ot(t)}}function Va(e,r,t,a=t){e.addEventListener(r,()=>Ha(t));const o=e.__on_r;o?e.__on_r=()=>{o(),a(!0)}:e.__on_r=()=>a(!0),ka()}const Un=new Set,Er=new Set;function cr(e){for(var r=0;r<e.length;r++)Un.add(e[r]);for(var t of Er)t(e)}function Vt(e){var M;var r=this,t=r.ownerDocument,a=e.type,o=((M=e.composedPath)==null?void 0:M.call(e))||[],u=o[0]||e.target,d=0,h=e.__root;if(h){var l=o.indexOf(h);if(l!==-1&&(r===document||r===window)){e.__root=r;return}var s=o.indexOf(r);if(s===-1)return;l<=s&&(d=l)}if(u=o[d]||e.target,u!==r){On(e,"currentTarget",{configurable:!0,get(){return u||t}});var _=z,x=q;Oe(null),ot(null);try{for(var f,m=[];u!==null;){var b=u.assignedSlot||u.parentNode||u.host||null;try{var k=u["__"+a];if(k!=null&&(!u.disabled||e.target===u))if(Tr(k)){var[X,...T]=k;X.apply(u,[e,...T])}else k.call(u,e)}catch(H){f?m.push(H):f=H}if(e.cancelBubble||b===r||b===null)break;u=b}if(f){for(let H of m)queueMicrotask(()=>{throw H});throw f}}finally{e.__root=r,delete e.currentTarget,Oe(_),ot(x)}}}function $a(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Fr(e,r){var t=q;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function ne(e,r){var t=(r&sa)!==0,a=(r&fa)!==0,o,u=!e.startsWith("<!>");return()=>{o===void 0&&(o=$a(u?e:"<!>"+e),t||(o=Gt(o)));var d=a||_n?document.importNode(o,!0):o.cloneNode(!0);if(t){var h=Gt(d),l=d.lastChild;Fr(h,l)}else Fr(d,d);return d}}function Gr(){var e=document.createDocumentFragment(),r=document.createComment(""),t=Cr();return e.append(r,t),Fr(r,t),e}function J(e,r){e!==null&&e.before(r)}function at(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function Wa(e,r){return Xa(e,r)}const ht=new Map;function Xa(e,{target:r,anchor:t,props:a={},events:o,context:u,intro:d=!0}){da();var h=new Set,l=x=>{for(var f=0;f<x.length;f++){var m=x[f];if(!h.has(m)){h.add(m);var b=Ba(m);r.addEventListener(m,Vt,{passive:b});var k=ht.get(m);k===void 0?(document.addEventListener(m,Vt,{passive:b}),ht.set(m,1)):ht.set(m,k+1)}}};l(Rr(Un)),Er.add(l);var s=void 0,_=wa(()=>{var x=t??r.appendChild(Cr());return Pt(()=>{if(u){bt({});var f=ee;f.c=u}o&&(a.$$events=o),s=e(x,a)||{},u&&gt()}),()=>{var b;for(var f of h){r.removeEventListener(f,Vt);var m=ht.get(f);--m===0?(document.removeEventListener(f,Vt),ht.delete(f)):ht.set(f,m)}Er.delete(l),x!==t&&((b=x.parentNode)==null||b.removeChild(x))}});return Ya.set(s,_),s}let Ya=new WeakMap;function pe(e,r,[t,a]=[0,0]){var o=e,u=null,d=null,h=he,l=t>0?Dr:0,s=!1;const _=(f,m=!0)=>{s=!0,x(m,f)},x=(f,m)=>{h!==(h=f)&&(h?(u?Zt(u):m&&(u=Pt(()=>m(o))),d&&Kt(d,()=>{d=null})):(d?Zt(d):m&&(d=Pt(()=>m(o,[t+1,a]))),u&&Kt(u,()=>{u=null})))};Or(()=>{s=!1,r(_),s||x(null,null)},l)}function rr(e,r){return r}function za(e,r,t,a){for(var o=[],u=r.length,d=0;d<u;d++)Nr(r[d].e,o,!0);var h=u>0&&o.length===0&&t!==null;if(h){var l=t.parentNode;_a(l),l.append(t),a.clear(),et(e,r[0].prev,r[u-1].next)}yn(o,()=>{for(var s=0;s<u;s++){var _=r[s];h||(a.delete(_.k),et(e,_.prev,_.next)),it(_.e,!h)}})}function nr(e,r,t,a,o,u=null){var d=e,h={flags:r,items:new Map,first:null},l=(r&cn)!==0;if(l){var s=e;d=s.appendChild(Cr())}var _=null,x=!1,f=$e(()=>{var m=t();return Tr(m)?m:m==null?[]:Rr(m)});Or(()=>{var m=i(f),b=m.length;x&&b===0||(x=b===0,ja(m,h,d,o,r,a,t),u!==null&&(b===0?_?Zt(_):_=Pt(()=>u(d)):_!==null&&Kt(_,()=>{_=null})),i(f))})}function ja(e,r,t,a,o,u,d){var re,dt,Ne,Be;var h=(o&ta)!==0,l=(o&(Pr|Lr))!==0,s=e.length,_=r.items,x=r.first,f=x,m,b=null,k,X=[],T=[],M,H,D,N;if(h)for(N=0;N<s;N+=1)M=e[N],H=u(M,N),D=_.get(H),D!==void 0&&((re=D.a)==null||re.measure(),(k??(k=new Set)).add(D));for(N=0;N<s;N+=1){if(M=e[N],H=u(M,N),D=_.get(H),D===void 0){var K=f?f.e.nodes_start:t;b=Ga(K,r,b,b===null?r.first:b.next,M,H,N,a,o,d),_.set(H,b),X=[],T=[],f=b.next;continue}if(l&&qa(D,M,N,o),(D.e.f&We)!==0&&(Zt(D.e),h&&((dt=D.a)==null||dt.unfix(),(k??(k=new Set)).delete(D))),D!==f){if(m!==void 0&&m.has(D)){if(X.length<T.length){var G=T[0],O;b=G.prev;var ae=X[0],ie=X[X.length-1];for(O=0;O<X.length;O+=1)Kr(X[O],G,t);for(O=0;O<T.length;O+=1)m.delete(T[O]);et(r,ae.prev,ie.next),et(r,b,ae),et(r,ie,G),f=G,b=ie,N-=1,X=[],T=[]}else m.delete(D),Kr(D,f,t),et(r,D.prev,D.next),et(r,D,b===null?r.first:b.next),et(r,b,D),b=D;continue}for(X=[],T=[];f!==null&&f.k!==H;)(f.e.f&We)===0&&(m??(m=new Set)).add(f),T.push(f),f=f.next;if(f===null)continue;D=f}X.push(D),b=D,f=D.next}if(f!==null||m!==void 0){for(var de=m===void 0?[]:Rr(m);f!==null;)(f.e.f&We)===0&&de.push(f),f=f.next;var j=de.length;if(j>0){var _e=(o&cn)!==0&&s===0?t:null;if(h){for(N=0;N<j;N+=1)(Ne=de[N].a)==null||Ne.measure();for(N=0;N<j;N+=1)(Be=de[N].a)==null||Be.fix()}za(r,de,_e,_)}}h&&En(()=>{var we;if(k!==void 0)for(D of k)(we=D.a)==null||we.apply()}),q.first=r.first&&r.first.e,q.last=b&&b.e}function qa(e,r,t,a){(a&Pr)!==0&&Dt(e.v,r),(a&Lr)!==0?Dt(e.i,t):e.i=t}function Ga(e,r,t,a,o,u,d,h,l,s){var _=(l&Pr)!==0,x=(l&ra)===0,f=_?x?$(o):Ut(o):o,m=(l&Lr)===0?d:Ut(d),b={i:m,v:f,k:u,a:null,e:null,prev:t,next:a};try{return b.e=Pt(()=>h(e,f,m,s),ca),b.e.prev=t&&t.e,b.e.next=a&&a.e,t===null?r.first=b:(t.next=b,t.e.next=b.e),a!==null&&(a.prev=b,a.e.prev=b.e),b}finally{}}function Kr(e,r,t){for(var a=e.next?e.next.e.nodes_start:t,o=r?r.e.nodes_start:t,u=e.e.nodes_start;u!==a;){var d=ur(u);o.before(u),u=d}}function et(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Dn(e){var r,t,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(t=Dn(e[r]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function Ka(){for(var e,r,t=0,a="",o=arguments.length;t<o;t++)(e=arguments[t])&&(r=Dn(e))&&(a&&(a+=" "),a+=r);return a}function Za(e){return typeof e=="object"?Ka(e):e??""}function Qa(e,r,t){var a=e==null?"":""+e;return a===""?null:a}function Zr(e,r,t,a,o,u){var d=e.__className;if(d!==t){var h=Qa(t);h==null?e.removeAttribute("class"):e.className=h,e.__className=t}return u}const Ja=Symbol("is custom element"),ei=Symbol("is html");function Ft(e,r,t,a){var o=ti(e);o[r]!==(o[r]=t)&&(r==="loading"&&(e[Wn]=t),t==null?e.removeAttribute(r):typeof t!="string"&&ri(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function ti(e){return e.__attributes??(e.__attributes={[Ja]:e.nodeName.includes("-"),[ei]:e.namespaceURI===la})}var Qr=new Map;function ri(e){var r=Qr.get(e.nodeName);if(r)return r;Qr.set(e.nodeName,r=[]);for(var t,a=e,o=Element.prototype;o!==a;){t=on(a);for(var u in t)t[u].set&&r.push(u);a=Sr(a)}return r}function ni(e,r,t=r){Va(e,"change",a=>{var o=a?e.defaultChecked:e.checked;t(o)}),Ye(r)==null&&t(e.checked),Ct(()=>{var a=r();e.checked=!!a})}function Jr(e,r){return e===r||(e==null?void 0:e[ft])===r}function ai(e={},r,t,a){return Mr(()=>{var o,u;return Ct(()=>{o=u,u=[],Ye(()=>{e!==t(...u)&&(r(e,...u),o&&Jr(t(...o),e)&&r(null,...o))})}),()=>{En(()=>{u&&Jr(t(...u),e)&&r(null,...u)})}}),e}function Ot(e=!1){const r=ee,t=r.l.u;if(!t)return;let a=()=>Oa(r.s);if(e){let o=0,u={};const d=It(()=>{let h=!1;const l=r.s;for(const s in l)l[s]!==u[s]&&(u[s]=l[s],h=!0);return h&&o++,o});a=()=>i(d)}t.b.length&&ma(()=>{en(r,a),br(t.b)}),zr(()=>{const o=Ye(()=>t.m.map(kn));return()=>{for(const u of o)typeof u=="function"&&u()}}),t.a.length&&zr(()=>{en(r,a),br(t.a)})}function en(e,r){if(e.l.s)for(const t of e.l.s)i(t);r()}let $t=!1;function ii(e){var r=$t;try{return $t=!1,[e(),$t]}finally{$t=r}}function tn(e){var r;return((r=e.ctx)==null?void 0:r.d)??!1}function Ce(e,r,t,a){var G;var o=(t&na)!==0,u=!Lt||(t&aa)!==0,d=(t&oa)!==0,h=(t&ua)!==0,l=!1,s;d?[s,l]=ii(()=>e[r]):s=e[r];var _=ft in e||$n in e,x=d&&(((G=xt(e,r))==null?void 0:G.set)??(_&&r in e&&(O=>e[r]=O)))||void 0,f=a,m=!0,b=!1,k=()=>(b=!0,m&&(m=!1,h?f=Ye(a):f=a),f);s===void 0&&a!==void 0&&(x&&u&&Gn(),s=k(),x&&x(s));var X;if(u)X=()=>{var O=e[r];return O===void 0?k():(m=!0,b=!1,O)};else{var T=(o?It:$e)(()=>e[r]);T.f|=sn,X=()=>{var O=i(T);return O!==void 0&&(f=void 0),O===void 0?f:O}}if((t&ia)===0)return X;if(x){var M=e.$$legacy;return function(O,ae){return arguments.length>0?((!u||!ae||M||l)&&x(ae?X():O),O):X()}}var H=!1,D=!1,N=$(s),K=It(()=>{var O=X(),ae=i(N);return H?(H=!1,D=!0,ae):(D=!1,N.v=O)});return d&&i(K),o||(K.equals=Ir),function(O,ae){if(tt!==null&&(H=D,X(),i(N)),arguments.length>0){const ie=ae?i(K):u&&d?st(O):O;if(!K.equals(ie)){if(H=!0,C(N,ie),b&&f!==void 0&&(f=ie),tn(K))return O;Ye(()=>i(K))}return O}return tn(K)?K.v:i(K)}}const oi="5";var an;typeof window<"u"&&((an=window.__svelte??(window.__svelte={})).v??(an.v=new Set)).add(oi);ea();const ui=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,si=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,fi=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,li=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,ci=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,di=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,_i=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,vi=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,Wt=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],hi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],pi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],xi=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],mi=[{count:2,offset:0}],Je=(e,r,t,a)=>{const o=e.createShader(r);if(!o)throw new Error(`failed to create shader '${a}'`);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(o);throw new Error(`compilation error in shader '${a}':
${u}`)}return o},Tt=(e,r,t,a)=>{const o=e.createProgram();if(!o)throw new Error(`failed to create program '${a}'`);if(e.attachShader(o,r),e.attachShader(o,t),e.linkProgram(o),e.detachShader(o,r),e.detachShader(o,t),!e.getProgramParameter(o,e.LINK_STATUS)){const u=e.getProgramInfoLog(o);throw new Error(`link error in program '${a}':
${u}`)}return o};var wi=(e,r)=>r(!1),bi=ne('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),gi=(e,r)=>r(!0),yi=ne('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),Ai=ne('<input type="checkbox">'),Ei=ne("<!> <!> <label> </label> <br>",1);function Rt(e,r){bt(r,!1);let t=Ce(r,"expanded",12),a=Ce(r,"id",8),o=Ce(r,"text",8),u=Ce(r,"checked",12,null),d=Ce(r,"onexpandedchange",8,null),h=Ce(r,"oncheckedchange",8,null);const l=T=>{t(T),d()&&d()()};Ot();var s=Ei(),_=Se(s);{var x=T=>{var M=bi();M.__click=[wi,l],rt(()=>Ft(M,"id",u()===null?a():null)),J(T,M)},f=T=>{var M=yi();M.__click=[gi,l],rt(()=>Ft(M,"id",u()===null?a():null)),J(T,M)};pe(_,T=>{t()?T(x):T(f,!1)})}var m=fe(_,2);{var b=T=>{var M=Ai();Ft(M,"draggable",!0),M.__change=function(...H){var D;(D=h())==null||D.apply(this,H)},rt(()=>Ft(M,"id",a())),ni(M,u),J(T,M)};pe(m,T=>{u()!==null&&T(b)})}var k=fe(m,2),X=Xe(k);rt(()=>{Ft(k,"for",a()),at(X,o())}),J(e,s),gt()}cr(["click","change"]);var Fi=ne('<div class="ml-4 w-full"> <br> <br> <br> <br></div>');function rn(e,r){bt(r,!1);let t=Ce(r,"image",8);Ot();var a=Fi(),o=Xe(a),u=fe(o,2),d=fe(u,2),h=fe(d,2);rt((l,s,_,x)=>{at(o,`screen: ${t().x??""},${t().y??""}
  ${t().w??""}x${t().h??""} `),at(u,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),at(d,` rgb: ${l??""}, ${s??""}, ${_??""} `),at(h,` alpha: ${x??""} `)},[()=>t().r.toPrecision(4),()=>t().g.toPrecision(4),()=>t().b.toPrecision(4),()=>t().a.toPrecision(4)],$e),J(e,a),gt()}var Ti=ne("<div> </div>"),Ri=(e,r,t)=>{const a=r().textureId;t(t().selectedTextureId=a.toString(),!0),t(t().selectedTexture=t().textures[a],!0),t().redraw()},Si=ne('<button class="hover:bg-gray-200"> </button> <br>',1),Ui=ne("<!> <!>",1),Di=ne('<div class="ml-2"></div>'),Ii=ne("<!> <!>",1),Pi=ne("<!> <!>",1),Li=ne("<!> <!>",1),Ci=ne('<div class="ml-3 text-sm"><!> <!> <!></div>');function Mi(e,r){bt(r,!1);let t=Ce(r,"entity",12),a=Ce(r,"menuData",12);const o=6,u=100;let d=$(!1);function h(T){return"images"in T}let l=$(null),s=$(0);if(t().type==="batch2d"){const T=t().vertices,M=u*2,H=T.length>=M*o;C(l,[]);let D=[],N=0;for(let K=0;K<T.length-(o-1);K+=o){const G=T[K];let O=G.x,ae=G.x,ie=G.y,de=G.y;for(let _e=1;_e<o;_e+=1){const re=T[K+_e];re.x<O&&(O=re.x),re.x>ae&&(ae=re.x),re.y<ie&&(ie=re.y),re.y>de&&(de=re.y)}const j={x:O,y:ie,w:ae-O,h:de-ie,ax:G.ax,ay:G.ay,aw:G.aw,ah:G.ah,r:G.r,g:G.g,b:G.b,a:G.a,expanded:!1,index:i(s)};if(H){if(D.push(j),D.length>=u){const _e=`${i(l).length*u}-${i(l).length*u+D.length-1}`,re=K+o;i(l).push({images:D,desc:_e,expanded:!1,vertexRangeStart:N,vertexRangeEnd:re}),D=[],N=re}}else i(l).push(j);C(s,i(s)+1)}if(D.length>0){const K=`${i(l).length*u}-${i(l).length*u+D.length-1}`;i(l).push({images:D,desc:K,expanded:!1,vertexRangeStart:N,vertexRangeEnd:T.length})}}Ot();var _=Ci(),x=Xe(_);{var f=T=>{var M=Ti(),H=Xe(M);rt(()=>at(H,`animated: ${t().animated??""}`)),J(T,M)};pe(x,T=>{typeof t().animated=="boolean"&&T(f)})}var m=fe(x,2);{var b=T=>{var M=Si(),H=Se(M);H.__click=[Ri,t,a];var D=Xe(H);rt(()=>at(D,`texture: #${t().textureId??""}`)),J(T,M)};pe(m,T=>{typeof t().textureId=="number"&&T(b)})}var k=fe(m,2);{var X=T=>{var M=Li(),H=Se(M);const D=$e(()=>`${t().uuid}-images2d`),N=$e(()=>`2D images (${i(s)})`);Rt(H,{get id(){return i(D)},get text(){return i(N)},get expanded(){return i(d)},set expanded(O){C(d,O)},$$legacy:!0});var K=fe(H,2);{var G=O=>{var ae=Gr(),ie=Se(ae);nr(ie,1,()=>i(l),rr,(de,j,_e)=>{var re=Gr(),dt=Se(re);{var Ne=we=>{var qe=Ii(),ke=Se(qe),ut=()=>i(j).images.every(Q=>t().enabledVerticesList[Q.index*o]),He=Q=>{for(let ve=i(j).vertexRangeStart;ve<i(j).vertexRangeEnd;ve+=1)t(t().enabledVerticesList[ve]=Q,!0)};const Ge=$e(()=>`${t().uuid}-images-${i(j).desc}`),Ke=$e(()=>`[Images ${i(j).desc}]`);Rt(ke,{get checked(){return ut()},set checked(Q){He(Q)},get oncheckedchange(){return a().redraw},get id(){return i(Ge)},get text(){return i(Ke)},get expanded(){return i(j).expanded},set expanded(Q){i(j).expanded=Q,mt(()=>i(l))},$$legacy:!0});var Ie=fe(ke,2);{var oe=Q=>{var ve=Di();nr(ve,5,()=>i(j).images,rr,(Nt,Pe,_t)=>{var ue=Ui(),p=Se(ue),Ve=()=>t().enabledVerticesList[i(Pe).index*o],Te=be=>{for(let Et=0;Et<o;Et+=1)t(t().enabledVerticesList[i(Pe).index*o+Et]=be,!0)};const dr=$e(()=>`${t().uuid}-images-${i(j).desc}-${_t}`);Rt(p,{get checked(){return Ve()},set checked(be){Te(be)},get oncheckedchange(){return a().redraw},get id(){return i(dr)},text:`Image ${_e*u+_t}`,get expanded(){return i(Pe).expanded},set expanded(be){i(Pe).expanded=be,mt(()=>(i(l),i(j).images))},$$legacy:!0});var Bt=fe(p,2);{var kt=be=>{rn(be,{get image(){return i(Pe)}})};pe(Bt,be=>{i(Pe).expanded&&be(kt)})}J(Nt,ue)}),J(Q,ve)};pe(Ie,Q=>{i(j).expanded&&Q(oe)})}J(we,qe)},Be=we=>{var qe=Pi(),ke=Se(qe),ut=()=>t().enabledVerticesList[i(j).index*o],He=oe=>{for(let Q=0;Q<o;Q+=1)t(t().enabledVerticesList[i(j).index*o+Q]=oe,!0)};const Ge=$e(()=>`${t().uuid}-images-${_e}`);Rt(ke,{get checked(){return ut()},set checked(oe){He(oe)},get oncheckedchange(){return a().redraw},get id(){return i(Ge)},text:`Image ${_e}`,get expanded(){return i(j).expanded},set expanded(oe){i(j).expanded=oe,mt(()=>i(l))},$$legacy:!0});var Ke=fe(ke,2);{var Ie=oe=>{rn(oe,{get image(){return i(j)}})};pe(Ke,oe=>{i(j).expanded&&oe(Ie)})}J(we,qe)};pe(dt,we=>{h(i(j))?we(Ne):we(Be,!1)})}J(de,re)}),J(O,ae)};pe(K,O=>{i(d)&&O(G)})}J(T,M)};pe(k,T=>{i(l)&&i(s)&&T(X)})}J(e,_),gt()}cr(["click"]);var Oi=(e,r,t,a)=>r(t(),a()),Ni=ne('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),Bi=ne("<div><!> <!></div>"),ki=ne('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function Hi(e,r){bt(r,!1);let t=Ce(r,"data",12);const a=(h,l)=>{t().selectedTexture===l?t(t().selectedTexture=null,!0):(t(t().selectedTextureId=h,!0),t(t().selectedTexture=l,!0)),t().redraw()};Ot();var o=ki(),u=fe(Se(o),2);nr(u,1,()=>Object.entries(t().textures),rr,(h,l)=>{let s=()=>i(l)[0],_=()=>i(l)[1];var x=Ni(),f=Xe(x);f.__click=[Oi,a,s,_];var m=Xe(f);rt(()=>{Zr(f,1,Za(t().selectedTexture===_()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),at(m,`#${s()??""}`)}),J(h,x)});var d=fe(u,6);nr(d,1,()=>t().entities,rr,(h,l,s)=>{var _=Bi();Zr(_,1,`select-none m-0 border-none w-full ${s&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var x=Xe(_);Rt(x,{id:`menu${s}`,get text(){return t().entities[s].type},get oncheckedchange(){return t().redraw},get expanded(){return t().entities[s].expanded},set expanded(b){t().entities[s].expanded=b,mt(()=>t().entities)},get checked(){return t().entities[s].enabled},set checked(b){t().entities[s].enabled=b,mt(()=>t().entities)},$$legacy:!0});var f=fe(x,2);{var m=b=>{Mi(b,{get entity(){return t().entities[s]},set entity(k){t().entities[s]=k,mt(()=>t().entities)},get menuData(){return t()},set menuData(k){t(k)},$$legacy:!0})};pe(f,b=>{t().entities[s].expanded&&b(m)})}J(h,_)}),J(e,o),gt()}cr(["click"]);const se=[];for(let e=0;e<256;++e)se.push((e+256).toString(16).slice(1));function Vi(e,r=0){return(se[e[r+0]]+se[e[r+1]]+se[e[r+2]]+se[e[r+3]]+"-"+se[e[r+4]]+se[e[r+5]]+"-"+se[e[r+6]]+se[e[r+7]]+"-"+se[e[r+8]]+se[e[r+9]]+"-"+se[e[r+10]]+se[e[r+11]]+se[e[r+12]]+se[e[r+13]]+se[e[r+14]]+se[e[r+15]]).toLowerCase()}let wr;const $i=new Uint8Array(16);function Wi(){if(!wr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");wr=crypto.getRandomValues.bind(crypto)}return wr($i)}const Xi=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nn={randomUUID:Xi};function pt(e,r,t){var o;if(nn.randomUUID&&!e)return nn.randomUUID();e=e||{};const a=e.random??((o=e.rng)==null?void 0:o.call(e))??Wi();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Vi(a)}var Yi=(e,r)=>C(r,!1),zi=ne('<div class="overflow-auto absolute w-56 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),ji=(e,r)=>C(r,!0),qi=ne('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),Gi=(e,r,t,a,o)=>{Xt(r,i(r).selectedTexture=null),t(i(a),i(o))},Ki=ne('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),Zi=ne('<canvas class="absolute right-0"></canvas> <!> <!>',1);function Qi(e,r){bt(r,!1);let t=$({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",redraw:()=>Te(i(ue),i(p))});const a=w=>{const n=_e.get(w);return n?parseInt(n):0},o=(w,n,c,v,V)=>new Float32Array([c/(w*V),0,0,0,0,c/(n*V),0,0,0,0,(v+c)/(v-c),1,0,0,-2*v*c/(v-c),0]),u=0;let d=$(null),h=$(null),l=$(null),s=$(null),_=$(null),x=$(null),f=$(null),m=$(null),b=$(null),k=$(null),X=$(null),T=$(null),M=$(null),H=$(null),D=$(null),N=$(null),K=$(null),G=$(null),O=$(null),ae=$(null),ie=$(null),de=$(null),j=null;const _e=new URLSearchParams(window.location.search),re=_e.get("n"),dt=re?Math.max(parseInt(re),1):1,Ne=a("w"),Be=a("h"),we=a("gx"),qe=a("gy"),ke=a("gw"),ut=a("gh");let He=0,Ge=$(0),Ke=$(),Ie=null,oe=null,Q=0,ve=0,Nt=o(ke,ut,460,66560,5/16),Pe=$(!1),_t=$(!1),ue=$(null),p=$(null);const Ve=(w,n,c,v)=>{w.bindBuffer(w.ARRAY_BUFFER,n.vbo);for(let g=0;g<i(Ge);g+=1){const y=n.attribs[g];if(!y){w.disableVertexAttribArray(g);continue}w.enableVertexAttribArray(g),w.vertexAttribPointer(g,y.count,w.FLOAT,!1,n.step,y.offset)}if(!v){w.drawArrays(w.TRIANGLES,0,c);return}let V=null;for(let g=0;g<c;g+=1){const y=v[g];V===null?y&&(V=g):y||(w.drawArrays(w.TRIANGLES,V,g-V),V=null)}V!==null&&w.drawArrays(w.TRIANGLES,V,c-V)},Te=(w,n)=>{if(n.viewport(0,0,w.width,w.height),n.scissor(0,0,w.width,w.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),!i(Pe)){n.viewport(0,0,w.width,w.height);const c=()=>{n.clearColor(.525,.968,.495,1),n.clear(n.COLOR_BUFFER_BIT)},v=()=>{n.clearColor(.2,.2,.2,1),n.clear(n.COLOR_BUFFER_BIT)},V=Math.min(He/dt,1),g=Math.floor(w.width*.65)&-2,y=70,L=8,A=L*2,Z=g*V;if(c(),w.width<=A||w.height<=A)return;n.scissor(L,L,w.width-A,w.height-A),v(),n.scissor(w.width/2-(g/2+L),w.height/2-(y/2+L),g+A,y+A),c(),n.scissor(w.width/2-g/2+Z,w.height/2-y/2,g-Z,y),v();return}if(i(t).selectedTexture){if(n.useProgram(i(ie)),n.viewport(0,0,w.width,w.height),n.uniform2fv(i(de),[w.width,w.height]),!j){const I=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,I),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),n.STATIC_DRAW),j={vbo:I,step:8,attribs:mi}}Ve(n,j,6);const c=i(t).selectedTexture,v=w.width/w.height,V=c.width/c.height,g=v>=V,y=g?c.width*w.height/c.height:w.width,L=g?w.height:c.height*w.width/c.width,A=g?(w.width-w.height)/2:0,Z=y+A,R=g?0:(w.height-w.width)/2,te=L+R;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(d)),n.uniform4fv(i(h),[c.width,c.height,w.width,w.height]),n.bindTexture(n.TEXTURE_2D,c.texture),n.uniform1i(i(l),u);const S=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,S),n.bufferData(n.ARRAY_BUFFER,new Float32Array([A,R,0,0,0,0,c.width,c.height,1,1,1,1,0,0,0,Z,R,1,0,0,0,c.width,c.height,1,1,1,1,0,0,0,A,te,0,1,0,0,c.width,c.height,1,1,1,1,0,0,0,Z,R,1,0,0,0,c.width,c.height,1,1,1,1,0,0,0,Z,te,1,1,0,0,c.width,c.height,1,1,1,1,0,0,0,A,te,0,1,0,0,c.width,c.height,1,1,1,1,0,0,0]),n.STATIC_DRAW),Ve(n,{vbo:S,step:60,attribs:Wt},6),n.deleteBuffer(S);return}oe&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,oe),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)),n.disable(n.SCISSOR_TEST);for(let c of i(t).entities)if(c.enabled){if(c.type==="batch2d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST);const v=i(t).textures[c.textureId];n.useProgram(i(d)),n.viewport(0,0,Ne,Be),n.uniform4fv(i(h),[v.width,v.height,c.targetWidth,c.targetHeight]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(i(l),u),Ve(n,c.buffer,c.vertexCount,c.enabledVerticesList)}if(c.type==="render3d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const v=i(t).textures[c.textureId];n.useProgram(c.animated?i(k):i(s)),n.viewport(we,qe,ke,ut),n.uniformMatrix4fv(c.animated?i(X):i(_),!1,c.modelMatrix),n.uniformMatrix4fv(c.animated?i(T):i(x),!1,c.viewMatrix),n.uniformMatrix4fv(c.animated?i(M):i(f),!1,Nt),n.uniform2fv(c.animated?i(H):i(m),[v.width,v.height]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(c.animated?i(D):i(b),u),Ve(n,c.buffer,c.vertexCount)}if(c.type==="renderparticles"){n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const v=i(t).textures[c.textureId];n.useProgram(i(N)),n.viewport(we,qe,ke,ut),n.uniformMatrix4fv(i(K),!1,c.viewMatrix),n.uniformMatrix4fv(i(G),!1,Nt),n.uniform2fv(i(ae),[v.width,v.height]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(i(O),u),Ve(n,c.buffer,c.vertexCount)}if(c.type==="icon"||c.type==="bigicon"){const v=c.texSize;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(d)),n.viewport(0,0,Ne,Be),n.bindTexture(n.TEXTURE_2D,c.texture),n.uniform1i(i(l),u),n.uniform4fv(i(h),[v,v,c.targetWidth,c.targetHeight]),Ve(n,c.buffer,6)}if(c.type==="minimap2d"){!Ie||!oe?(Ie=n.createTexture(),n.bindTexture(n.TEXTURE_2D,Ie),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,Q,ve),oe=n.createFramebuffer(),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,oe),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ie,0)):n.bindFramebuffer(n.DRAW_FRAMEBUFFER,oe),n.viewport(0,0,Q,ve),n.disable(n.DEPTH_TEST);const v=i(t).textures[c.textureId];n.useProgram(i(d)),n.uniform4fv(i(h),[v.width,v.height,Q,ve]),n.bindTexture(n.TEXTURE_2D,v.texture),n.bindBuffer(n.ARRAY_BUFFER,c.vbo),n.uniform1i(i(l),u);for(let V=0;V<i(Ge);V+=1)V<4?n.enableVertexAttribArray(V):n.disableVertexAttribArray(V);n.vertexAttribPointer(0,4,n.FLOAT,!1,60,0),n.vertexAttribPointer(1,4,n.FLOAT,!1,60,16),n.vertexAttribPointer(2,4,n.FLOAT,!1,60,32),n.vertexAttribPointer(3,3,n.FLOAT,!1,60,48),n.drawArrays(n.TRIANGLES,0,c.vertices.length),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)}if(c.type==="minimap"){if(Ie===null)continue;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(d)),n.viewport(0,0,Ne,Be),n.uniform4fv(i(h),[Q,ve,c.targetWidth,c.targetHeight]),n.bindTexture(n.TEXTURE_2D,Ie),n.uniform1i(i(l),u),Ve(n,c.buffer,6)}}},dr=(w,n,c)=>{const v=new DataView(c),V=v.getUint32(0,!0);switch(V){case 0:{C(Pe,!0),Te(w,n);break}case 1:{const g=v.getUint32(4,!0),y=v.getUint32(8,!0),L=v.getUint32(12,!0),A=n.createTexture(),Z=new Uint8Array(c,16,y*L*4);n.bindTexture(n.TEXTURE_2D,A),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,y,L,0,n.RGBA,n.UNSIGNED_BYTE,Z),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),Xt(t,i(t).textures[g]={texture:A,width:y,height:L,data:Z});break}case 2:case 3:{const g=V===3,y=g?104:40,L=g?120:56,A=v.getUint32(4,!0),Z=v.getUint32(8,!0),R=new Float32Array(16);R.set(new Float32Array(c,16,16));const te=new Float32Array(16);te.set(new Float32Array(c,80,16));const S=new DataView(c,144,A*y),U=new Array(A),I=new ArrayBuffer(A*L),F=new DataView(I);for(let P=0;P<A;P+=1){const E=y*P,B=L*P;let ge=null;g&&(ge=new Float32Array(16),ge.set(new Float32Array(c,144+y*P+40,16)));const Y={x:S.getInt16(E,!0),y:S.getInt16(E+2,!0),z:S.getInt16(E+4,!0),u:S.getFloat32(E+8,!0),v:S.getFloat32(E+12,!0),ax:S.getUint16(E+16,!0),ay:S.getUint16(E+18,!0),aw:S.getUint16(E+20,!0),ah:S.getUint16(E+22,!0),r:S.getFloat32(E+24,!0),g:S.getFloat32(E+28,!0),b:S.getFloat32(E+32,!0),a:S.getFloat32(E+36,!0),anim:ge};if(U[P]=Y,F.setFloat32(B,Y.x,!0),F.setFloat32(B+4,Y.y,!0),F.setFloat32(B+8,Y.z,!0),F.setFloat32(B+12,0,!0),F.setFloat32(B+16,Y.u,!0),F.setFloat32(B+20,Y.v,!0),F.setFloat32(B+24,Y.ax,!0),F.setFloat32(B+28,Y.ay,!0),F.setFloat32(B+32,Y.aw,!0),F.setFloat32(B+36,Y.ah,!0),F.setFloat32(B+40,Y.r,!0),F.setFloat32(B+44,Y.g,!0),F.setFloat32(B+48,Y.b,!0),F.setFloat32(B+52,Y.a,!0),ge)for(let ye=0;ye<16;ye+=1)F.setFloat32(B+56+ye*4,ge[ye],!0)}const W=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,W),n.bufferData(n.ARRAY_BUFFER,F,n.STATIC_DRAW),i(t).entities.push({type:"render3d",animated:g,textureId:Z,vertexCount:A,modelMatrix:R,viewMatrix:te,vertices:U,buffer:{vbo:W,step:L,attribs:g?pi:hi},enabled:!0,expanded:!1,uuid:pt()}),He+=A,Te(w,n);break}case 4:{const L=v.getUint32(4,!0),A=v.getUint32(8,!0),Z=v.getUint16(12,!0),R=v.getUint16(14,!0),te=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,te);const S=new DataView(c,16,L*40),U=new ArrayBuffer(L*60),I=new DataView(U),F=new Array(L);for(let W=0;W<L;W+=1){const P=40*W,E=60*W,B={x:S.getInt16(P,!0),y:S.getInt16(P+2,!0),ax:S.getInt16(P+4,!0),ay:S.getInt16(P+6,!0),aw:S.getInt16(P+8,!0),ah:S.getInt16(P+10,!0),discard:S.getUint8(P+12),wrapx:S.getUint8(P+13),wrapy:S.getUint8(P+14),u:S.getFloat32(P+16,!0),v:S.getFloat32(P+20,!0),r:S.getFloat32(P+24,!0),g:S.getFloat32(P+28,!0),b:S.getFloat32(P+32,!0),a:S.getFloat32(P+36,!0)};F[W]=B,I.setFloat32(E,B.x,!0),I.setFloat32(E+4,B.y,!0),I.setFloat32(E+8,B.u,!0),I.setFloat32(E+12,B.v,!0),I.setFloat32(E+16,B.ax,!0),I.setFloat32(E+20,B.ay,!0),I.setFloat32(E+24,B.aw,!0),I.setFloat32(E+28,B.ah,!0),I.setFloat32(E+32,B.r,!0),I.setFloat32(E+36,B.g,!0),I.setFloat32(E+40,B.b,!0),I.setFloat32(E+44,B.a,!0),I.setFloat32(E+48,B.discard,!0),I.setFloat32(E+52,B.wrapx,!0),I.setFloat32(E+56,B.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,I,n.STATIC_DRAW),i(t).entities.push({type:"batch2d",textureId:A,vertexCount:L,vertices:F,targetWidth:Z,targetHeight:R,buffer:{vbo:te,step:60,attribs:Wt},enabled:!0,expanded:!1,uuid:pt(),enabledVerticesList:Array(Math.floor(L)).fill(!0)}),He+=L,Te(w,n);break}case 5:case 8:{const y=V===5?64:512,L=v.getInt16(4,!0),A=v.getInt16(6,!0),Z=v.getInt16(8,!0),R=v.getInt16(10,!0),te=v.getUint32(12,!0),S=v.getFloat32(16,!0),U=v.getFloat32(20,!0),I=v.getFloat32(24,!0),F=v.getFloat32(28,!0),W=v.getUint16(32,!0),P=v.getUint16(34,!0),E=n.createTexture(),B=n.createFramebuffer();n.bindTexture(n.TEXTURE_2D,E),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,B),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,y,y),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,E,0),n.enable(n.CULL_FACE),n.cullFace(n.FRONT),n.viewport(0,0,y,y),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT);let ge=Array(te),Y=36;for(let hr=0;hr<te;hr+=1){const Ht=v.getUint32(Y,!0);let kr=Array(Ht);const Cn=new ArrayBuffer(Ht*56),Ae=new DataView(Cn),pr=new Float32Array(16);pr.set(new Float32Array(c,Y+4,16));const xr=new Float32Array(16);xr.set(new Float32Array(c,Y+68,16));const mr=new Float32Array(16);mr.set(new Float32Array(c,Y+132,16)),Y+=196;for(let Le=0;Le<Ht;Le+=1){const Ze={x:v.getInt16(Y,!0),y:v.getInt16(Y+2,!0),z:v.getInt16(Y+4,!0),r:v.getFloat32(Y+8,!0),g:v.getFloat32(Y+12,!0),b:v.getFloat32(Y+16,!0),a:v.getFloat32(Y+20,!0)},Re=Le*56;Ae.setFloat32(Re,Ze.x,!0),Ae.setFloat32(Re+4,Ze.y,!0),Ae.setFloat32(Re+8,Ze.z,!0),Ae.setFloat32(Re+24,0,!0),Ae.setFloat32(Re+28,0,!0),Ae.setFloat32(Re+32,y,!0),Ae.setFloat32(Re+36,y,!0),Ae.setFloat32(Re+40,Ze.r,!0),Ae.setFloat32(Re+44,Ze.g,!0),Ae.setFloat32(Re+48,Ze.b,!0),Ae.setFloat32(Re+52,Ze.a,!0),kr[Le]=Ze,Y+=24}ge[hr]={vertices:kr,modelMatrix:pr,viewMatrix:xr,projMatrix:mr};const Hr=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Hr),n.bufferData(n.ARRAY_BUFFER,Ae,n.STATIC_DRAW),n.useProgram(i(s)),n.uniformMatrix4fv(i(_),!1,pr),n.uniformMatrix4fv(i(x),!1,xr),n.uniformMatrix4fv(i(f),!1,mr),n.uniform2fv(i(m),[1,1]),n.bindTexture(n.TEXTURE_2D,i(Ke)),n.uniform1i(i(b),u);for(let Le=0;Le<i(Ge);Le+=1)Le<4?n.enableVertexAttribArray(Le):n.disableVertexAttribArray(Le);n.vertexAttribPointer(0,4,n.FLOAT,!1,56,0),n.vertexAttribPointer(1,2,n.FLOAT,!1,56,16),n.vertexAttribPointer(2,4,n.FLOAT,!1,56,24),n.vertexAttribPointer(3,4,n.FLOAT,!1,56,40),n.drawArrays(n.TRIANGLES,0,Ht),n.deleteBuffer(Hr)}const ye=L,vt=L+Z,_r=A,vr=A+R,Br=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Br),n.bufferData(n.ARRAY_BUFFER,new Float32Array([ye,_r,0,1,0,0,y,y,S,I,U,F,0,0,0,vt,_r,1,1,0,0,y,y,S,I,U,F,0,0,0,ye,vr,0,0,0,0,y,y,S,I,U,F,0,0,0,vt,_r,1,1,0,0,y,y,S,I,U,F,0,0,0,vt,vr,1,0,0,0,y,y,S,I,U,F,0,0,0,ye,vr,0,0,0,0,y,y,S,I,U,F,0,0,0]),n.STATIC_DRAW),i(t).entities.push({type:V===5?"icon":"bigicon",models:ge,texture:E,targetWidth:W,targetHeight:P,texSize:y,buffer:{vbo:Br,step:60,attribs:Wt},enabled:!0,expanded:!1,uuid:pt()}),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.deleteFramebuffer(B),n.disable(n.CULL_FACE);break}case 6:{const g=v.getUint32(4,!0),y=v.getUint32(8,!0);Q=v.getUint16(12,!0),ve=v.getUint16(14,!0);const L=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,L);const A=new DataView(c,16,g*40),Z=new ArrayBuffer(g*60),R=new DataView(Z),te=new Array(g);for(let S=0;S<g;S+=1){const U=40*S,I=60*S,F={x:A.getInt16(U,!0),y:A.getInt16(U+2,!0),ax:A.getInt16(U+4,!0),ay:A.getInt16(U+6,!0),aw:A.getInt16(U+8,!0),ah:A.getInt16(U+10,!0),discard:A.getUint8(U+12),wrapx:A.getUint8(U+13),wrapy:A.getUint8(U+14),u:A.getFloat32(U+16,!0),v:A.getFloat32(U+20,!0),r:A.getFloat32(U+24,!0),g:A.getFloat32(U+28,!0),b:A.getFloat32(U+32,!0),a:A.getFloat32(U+36,!0)};te[S]=F,R.setFloat32(I,F.x,!0),R.setFloat32(I+4,F.y,!0),R.setFloat32(I+8,F.u,!0),R.setFloat32(I+12,F.v,!0),R.setFloat32(I+16,F.ax,!0),R.setFloat32(I+20,F.ay,!0),R.setFloat32(I+24,F.aw,!0),R.setFloat32(I+28,F.ah,!0),R.setFloat32(I+32,F.r,!0),R.setFloat32(I+36,F.g,!0),R.setFloat32(I+40,F.b,!0),R.setFloat32(I+44,F.a,!0),R.setFloat32(I+48,F.discard,!0),R.setFloat32(I+52,F.wrapx,!0),R.setFloat32(I+56,F.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,R,n.STATIC_DRAW),i(t).entities.push({type:"minimap2d",textureId:y,vbo:L,vertices:te,enabled:!0,expanded:!1,uuid:pt()}),He+=g,Te(w,n);break}case 7:{const g=v.getInt16(4,!0),y=v.getInt16(6,!0),L=v.getUint16(8,!0),A=v.getUint16(10,!0),Z=v.getInt16(12,!0),R=v.getInt16(14,!0),te=v.getUint16(16,!0),S=v.getUint16(18,!0),U=v.getUint16(20,!0),I=v.getUint16(22,!0),F=Z,W=Z+te,P=R,E=R+S,B=g/Q,ge=(g+L)/Q,Y=y/ve,ye=(y+A)/ve,vt=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,vt),n.bufferData(n.ARRAY_BUFFER,new Float32Array([F,P,B,ye,g,y,L,A,1,1,1,1,0,0,0,W,P,ge,ye,g,y,L,A,1,1,1,1,0,0,0,F,E,B,Y,g,y,L,A,1,1,1,1,0,0,0,W,P,ge,ye,g,y,L,A,1,1,1,1,0,0,0,W,E,ge,Y,g,y,L,A,1,1,1,1,0,0,0,F,E,B,Y,g,y,L,A,1,1,1,1,0,0,0]),n.STATIC_DRAW),i(t).entities.push({type:"minimap",sourcex:g,sourcey:y,sourcew:L,sourceh:A,targetx:Z,targety:R,targetw:te,targeth:S,targetWidth:U,targetHeight:I,buffer:{vbo:vt,step:60,attribs:Wt},enabled:!0,expanded:!1,uuid:pt()}),Te(w,n);break}case 9:{const g=v.getUint32(4,!0),y=v.getUint32(8,!0),L=64,A=72,Z=new Float32Array(16);Z.set(new Float32Array(c,16,16));const R=new DataView(c,80,g*L),te=new Array(g),S=new ArrayBuffer(g*A),U=new DataView(S);for(let F=0;F<g;F+=1){const W=L*F,P=A*F,E={x:R.getFloat32(W,!0),y:R.getFloat32(W+4,!0),z:R.getFloat32(W+8,!0),offsetx2d:R.getFloat32(W+12,!0),offsety2d:R.getFloat32(W+16,!0),offsetx3d:R.getFloat32(W+20,!0),offsety3d:R.getFloat32(W+24,!0),offsetz3d:R.getFloat32(W+28,!0),ax:R.getUint16(W+32,!0),ay:R.getUint16(W+34,!0),aw:R.getUint16(W+36,!0),ah:R.getUint16(W+38,!0),r:R.getFloat32(W+40,!0),g:R.getFloat32(W+44,!0),b:R.getFloat32(W+48,!0),a:R.getFloat32(W+52,!0),u:R.getFloat32(W+56,!0),v:R.getFloat32(W+60,!0)};te[F]=E,U.setFloat32(P,E.x,!0),U.setFloat32(P+4,E.y,!0),U.setFloat32(P+8,E.z,!0),U.setFloat32(P+12,E.ax,!0),U.setFloat32(P+16,E.ay,!0),U.setFloat32(P+20,E.aw,!0),U.setFloat32(P+24,E.ah,!0),U.setFloat32(P+28,E.r,!0),U.setFloat32(P+32,E.g,!0),U.setFloat32(P+36,E.b,!0),U.setFloat32(P+40,E.a,!0),U.setFloat32(P+44,E.offsetx2d,!0),U.setFloat32(P+48,E.offsety2d,!0),U.setFloat32(P+52,E.offsetx3d,!0),U.setFloat32(P+56,E.offsety3d,!0),U.setFloat32(P+60,E.offsetz3d,!0),U.setFloat32(P+64,E.u,!0),U.setFloat32(P+68,E.v,!0)}const I=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,I),n.bufferData(n.ARRAY_BUFFER,U,n.STATIC_DRAW),i(t).entities.push({type:"renderparticles",textureId:y,vertexCount:g,vertices:te,viewMatrix:Z,buffer:{vbo:I,step:A,attribs:xi},enabled:!0,expanded:!1,uuid:pt()}),He+=g,Te(w,n);break}}};window.addEventListener("message",async w=>{if(typeof w.data=="object"&&w.data.type==="pluginMessage"){if(typeof w.data.content!="object"||!i(ue)||!i(p))return;dr(i(ue),i(p),w.data.content)}}),ba(()=>(i(ue),i(p),i(Ke),i(d),i(s),i(k),i(N),i(ie)),()=>{if(i(ue)&&(Xt(ue,i(ue).width=Ne),Xt(ue,i(ue).height=Be),C(p,i(ue).getContext("webgl2")),i(p))){C(Ge,i(p).getParameter(i(p).MAX_VERTEX_ATTRIBS)),C(Ke,i(p).createTexture()),i(p).bindTexture(i(p).TEXTURE_2D,i(Ke));const w=new Uint8Array([255,255,255,255]);i(p).texImage2D(i(p).TEXTURE_2D,0,i(p).RGBA,1,1,0,i(p).RGBA,i(p).UNSIGNED_BYTE,w);const n=Je(i(p),i(p).VERTEX_SHADER,ui,"2D vertex shader"),c=Je(i(p),i(p).FRAGMENT_SHADER,si,"2D fragment shader"),v=Je(i(p),i(p).VERTEX_SHADER,fi,"3D vertex shader"),V=Je(i(p),i(p).VERTEX_SHADER,li,"3D anim vertex shader"),g=Je(i(p),i(p).FRAGMENT_SHADER,ci,"3D fragment shader"),y=Je(i(p),i(p).VERTEX_SHADER,di,"particle vertex shader"),L=Je(i(p),i(p).VERTEX_SHADER,_i,"checkers vertex shader"),A=Je(i(p),i(p).FRAGMENT_SHADER,vi,"checkers fragment shader");C(d,Tt(i(p),n,c,"2D program")),C(h,i(p).getUniformLocation(i(d),"atlas_wh_screen_wh")),C(l,i(p).getUniformLocation(i(d),"tex")),C(s,Tt(i(p),v,g,"3D program")),C(_,i(p).getUniformLocation(i(s),"modelmatrix")),C(x,i(p).getUniformLocation(i(s),"viewmatrix")),C(f,i(p).getUniformLocation(i(s),"projmatrix")),C(m,i(p).getUniformLocation(i(s),"atlas_wh")),C(b,i(p).getUniformLocation(i(s),"tex")),C(k,Tt(i(p),V,g,"3D animated program")),C(X,i(p).getUniformLocation(i(k),"modelmatrix")),C(T,i(p).getUniformLocation(i(k),"viewmatrix")),C(M,i(p).getUniformLocation(i(k),"projmatrix")),C(H,i(p).getUniformLocation(i(k),"atlas_wh")),C(D,i(p).getUniformLocation(i(k),"tex")),C(N,Tt(i(p),y,g,"Particles program")),C(K,i(p).getUniformLocation(i(N),"viewmatrix")),C(G,i(p).getUniformLocation(i(N),"projmatrix")),C(O,i(p).getUniformLocation(i(N),"tex")),C(ae,i(p).getUniformLocation(i(N),"atlas_wh")),C(ie,Tt(i(p),L,A,"Checkers program")),C(de,i(p).getUniformLocation(i(ie),"screen_wh")),i(p).deleteShader(n),i(p).deleteShader(c),i(p).deleteShader(v),i(p).deleteShader(g),i(p).deleteShader(V),i(p).deleteShader(y),i(p).deleteShader(L),i(p).deleteShader(A),i(p).activeTexture(i(p).TEXTURE0+u),i(p).enable(i(p).SCISSOR_TEST),i(p).disable(i(p).CULL_FACE),i(p).disable(i(p).DEPTH_TEST),i(p).enable(i(p).BLEND),i(p).blendEquationSeparate(i(p).FUNC_ADD,i(p).FUNC_ADD),i(p).depthFunc(i(p).LEQUAL),Te(i(ue),i(p))}}),ga(),Ot();var Bt=Zi(),kt=Se(Bt);ai(kt,w=>C(ue,w),()=>i(ue));var be=fe(kt,2);{var Et=w=>{var n=zi(),c=Se(n),v=Xe(c);Hi(v,{get data(){return i(t)},set data(g){C(t,g)},$$legacy:!0});var V=fe(c,2);V.__click=[Yi,_t],J(w,n)},In=(w,n)=>{{var c=v=>{var V=qi();V.__click=[ji,_t],J(v,V)};pe(w,v=>{i(Pe)&&v(c)},n)}};pe(be,w=>{i(_t)?w(Et):w(In,!1)})}var Pn=fe(be,2);{var Ln=w=>{var n=Ki();n.__click=[Gi,t,Te,ue,p],J(w,n)};pe(Pn,w=>{i(t).selectedTexture&&w(Ln)})}J(e,Bt),gt()}cr(["click"]);Wa(Qi,{target:document.body});
