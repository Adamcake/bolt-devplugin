(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();const Vr=!1;var Tr=Array.isArray,Mn=Array.prototype.indexOf,Rr=Array.from,Nn=Object.defineProperty,xt=Object.getOwnPropertyDescriptor,on=Object.getOwnPropertyDescriptors,On=Object.prototype,kn=Array.prototype,Sr=Object.getPrototypeOf,$r=Object.isExtensible;function Bn(e){return e()}function gr(e){for(var r=0;r<e.length;r++)e[r]()}const De=2,un=4,ar=8,Ur=16,Ye=32,wt=64,jt=128,Fe=256,qt=512,xe=1024,je=2048,ct=4096,We=8192,ir=16384,Hn=32768,Dr=65536,sn=1<<17,Vn=1<<19,fn=1<<20,br=1<<21,ft=Symbol("$state"),$n=Symbol("legacy props"),Wn=Symbol("");function ln(e){return e===this.v}function Xn(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Ir(e){return!Xn(e,this.v)}function zn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Yn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function jn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function qn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Gn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Kn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Zn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Lt=!1,Jn=!1;function ea(){Lt=!0}const Pr=1,Lr=2,cn=4,ta=8,ra=16,na=1,aa=2,ia=4,oa=8,ua=16,sa=1,fa=2,he=Symbol(),la="http://www.w3.org/1999/xhtml";let ee=null;function Wr(e){ee=e}function gt(e,r=!1,t){var a=ee={p:ee,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Lt&&!r&&(ee.l={s:null,u:null,r1:[],r2:Ut(!1)}),xa(()=>{a.d=!0})}function bt(e){const r=ee;if(r!==null){const c=r.e;if(c!==null){var t=q,a=z;r.e=null;try{for(var o=0;o<c.length;o++){var u=c[o];ot(u.effect),Ne(u.reaction),Mr(u.fn)}}finally{ot(t),Ne(a)}}ee=r.p,r.m=!0}return{}}function or(){return!Lt||ee!==null&&ee.l===null}function st(e,r){if(typeof e!="object"||e===null||ft in e)return e;const t=Sr(e);if(t!==On&&t!==kn)return e;var a=new Map,o=Tr(e),u=Qe(0),c=z,v=l=>{var s=z;Ne(c);var _;return _=l(),Ne(s),_};return o&&a.set("length",Qe(e.length)),new Proxy(e,{defineProperty(l,s,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Kn();var x=a.get(s);return x===void 0?(x=v(()=>Qe(_.value)),a.set(s,x)):M(x,v(()=>st(_.value))),!0},deleteProperty(l,s){var _=a.get(s);if(_===void 0)s in l&&a.set(s,v(()=>Qe(he)));else{if(o&&typeof s=="string"){var x=a.get("length"),f=Number(s);Number.isInteger(f)&&f<x.v&&M(x,f)}M(_,he),Xr(u)}return!0},get(l,s,_){var g;if(s===ft)return e;var x=a.get(s),f=s in l;if(x===void 0&&(!f||(g=xt(l,s))!=null&&g.writable)&&(x=v(()=>Qe(st(f?l[s]:he))),a.set(s,x)),x!==void 0){var m=i(x);return m===he?void 0:m}return Reflect.get(l,s,_)},getOwnPropertyDescriptor(l,s){var _=Reflect.getOwnPropertyDescriptor(l,s);if(_&&"value"in _){var x=a.get(s);x&&(_.value=i(x))}else if(_===void 0){var f=a.get(s),m=f==null?void 0:f.v;if(f!==void 0&&m!==he)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return _},has(l,s){var m;if(s===ft)return!0;var _=a.get(s),x=_!==void 0&&_.v!==he||Reflect.has(l,s);if(_!==void 0||q!==null&&(!x||(m=xt(l,s))!=null&&m.writable)){_===void 0&&(_=v(()=>Qe(x?st(l[s]):he)),a.set(s,_));var f=i(_);if(f===he)return!1}return x},set(l,s,_,x){var V;var f=a.get(s),m=s in l;if(o&&s==="length")for(var g=_;g<f.v;g+=1){var H=a.get(g+"");H!==void 0?M(H,he):g in l&&(H=v(()=>Qe(he)),a.set(g+"",H))}f===void 0?(!m||(V=xt(l,s))!=null&&V.writable)&&(f=v(()=>Qe(void 0)),M(f,v(()=>st(_))),a.set(s,f)):(m=f.v!==he,M(f,v(()=>st(_))));var W=Reflect.getOwnPropertyDescriptor(l,s);if(W!=null&&W.set&&W.set.call(x,_),!m){if(o&&typeof s=="string"){var F=a.get("length"),N=Number(s);Number.isInteger(N)&&N>=F.v&&M(F,N+1)}Xr(u)}return!0},ownKeys(l){i(u);var s=Reflect.ownKeys(l).filter(f=>{var m=a.get(f);return m===void 0||m.v!==he});for(var[_,x]of a)x.v!==he&&!(_ in l)&&s.push(_);return s},setPrototypeOf(){Zn()}})}function Xr(e,r=1){M(e,e.v+r)}const St=new Map;function Ut(e,r){var t={f:0,v:e,reactions:null,equals:ln,rv:0,wv:0};return t}function Qe(e,r){const t=Ut(e);return Fa(t),t}function $(e,r=!1){var a;const t=Ut(e);return r||(t.equals=Ir),Lt&&ee!==null&&ee.l!==null&&((a=ee.l).s??(a.s=[])).push(t),t}function Xt(e,r){return M(e,ze(()=>i(e))),r}function M(e,r,t=!1){z!==null&&!Me&&or()&&(z.f&(De|Ur))!==0&&!(de!=null&&de.includes(e))&&Qn();let a=t?st(r):r;return Dt(e,a)}function Dt(e,r){if(!e.equals(r)){var t=e.v;Mt?St.set(e,r):St.set(e,t),e.v=r,e.wv=Tn(),dn(e,je),or()&&q!==null&&(q.f&xe)!==0&&(q.f&(Ye|wt))===0&&(Ee===null?Ta([e]):Ee.push(e))}return r}function dn(e,r){var t=e.reactions;if(t!==null)for(var a=or(),o=t.length,u=0;u<o;u++){var c=t[u],v=c.f;(v&je)===0&&(!a&&c===q||(Ie(c,r),(v&(xe|Fe))!==0&&((v&De)!==0?dn(c,ct):lr(c))))}}let ca=!1;var zr,_n,vn,hn;function da(){if(zr===void 0){zr=window,_n=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,t=Text.prototype;vn=xt(r,"firstChild").get,hn=xt(r,"nextSibling").get,$r(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),$r(t)&&(t.__t=void 0)}}function Cr(e=""){return document.createTextNode(e)}function Gt(e){return vn.call(e)}function ur(e){return hn.call(e)}function Xe(e,r){return Gt(e)}function Ue(e,r){{var t=Gt(e);return t instanceof Comment&&t.data===""?ur(t):t}}function se(e,r=1,t=!1){let a=e;for(;r--;)a=ur(a);return a}function _a(e){e.textContent=""}function It(e){var r=De|je,t=z!==null&&(z.f&De)!==0?z:null;return q===null||t!==null&&(t.f&Fe)!==0?r|=Fe:q.f|=fn,{ctx:ee,deps:null,effects:null,equals:ln,f:r,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??q}}function $e(e){const r=It(e);return r.equals=Ir,r}function pn(e){var r=e.effects;if(r!==null){e.effects=null;for(var t=0;t<r.length;t+=1)it(r[t])}}function va(e){for(var r=e.parent;r!==null;){if((r.f&De)===0)return r;r=r.parent}return null}function ha(e){var r,t=q;ot(va(e));try{pn(e),r=Sn(e)}finally{ot(t)}return r}function xn(e){var r=ha(e),t=(nt||(e.f&Fe)!==0)&&e.deps!==null?ct:xe;Ie(e,t),e.equals(r)||(e.v=r,e.wv=Tn())}function mn(e){q===null&&z===null&&jn(),z!==null&&(z.f&Fe)!==0&&q===null&&Yn(),Mt&&zn()}function pa(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function yt(e,r,t,a=!0){var o=q,u={ctx:ee,deps:null,nodes_start:null,nodes_end:null,f:e|je,first:null,fn:r,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(t)try{fr(u),u.f|=Hn}catch(l){throw it(u),l}else r!==null&&lr(u);var c=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(fn|jt))===0;if(!c&&a&&(o!==null&&pa(u,o),z!==null&&(z.f&De)!==0)){var v=z;(v.effects??(v.effects=[])).push(u)}return u}function xa(e){const r=yt(ar,null,!1);return Ie(r,xe),r.teardown=e,r}function Yr(e){mn();var r=q!==null&&(q.f&Ye)!==0&&ee!==null&&!ee.m;if(r){var t=ee;(t.e??(t.e=[])).push({fn:e,effect:q,reaction:z})}else{var a=Mr(e);return a}}function ma(e){return mn(),Ct(e)}function wa(e){const r=yt(wt,e,!0);return(t={})=>new Promise(a=>{t.outro?Kt(r,()=>{it(r),a(void 0)}):(it(r),a(void 0))})}function Mr(e){return yt(un,e,!1)}function ga(e,r){var t=ee,a={effect:null,ran:!1};t.l.r1.push(a),a.effect=Ct(()=>{e(),!a.ran&&(a.ran=!0,M(t.l.r2,!0),ze(r))})}function ba(){var e=ee;Ct(()=>{if(i(e.l.r2)){for(var r of e.l.r1){var t=r.effect;(t.f&xe)!==0&&Ie(t,ct),At(t)&&fr(t),r.ran=!1}e.l.r2.v=!1}})}function Ct(e){return yt(ar,e,!0)}function rt(e,r=[],t=It){const a=r.map(t);return Nr(()=>e(...a.map(i)))}function Nr(e,r=0){return yt(ar|Ur|r,e,!0)}function Pt(e,r=!0){return yt(ar|Ye,e,!0,r)}function wn(e){var r=e.teardown;if(r!==null){const t=Mt,a=z;jr(!0),Ne(null);try{r.call(null)}finally{jr(t),Ne(a)}}}function gn(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var a=t.next;(t.f&wt)!==0?t.parent=null:it(t,r),t=a}}function ya(e){for(var r=e.first;r!==null;){var t=r.next;(r.f&Ye)===0&&it(r),r=t}}function it(e,r=!0){var t=!1;if((r||(e.f&Vn)!==0)&&e.nodes_start!==null){for(var a=e.nodes_start,o=e.nodes_end;a!==null;){var u=a===o?null:ur(a);a.remove(),a=u}t=!0}gn(e,r&&!t),tr(e,0),Ie(e,ir);var c=e.transitions;if(c!==null)for(const l of c)l.stop();wn(e);var v=e.parent;v!==null&&v.first!==null&&bn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function bn(e){var r=e.parent,t=e.prev,a=e.next;t!==null&&(t.next=a),a!==null&&(a.prev=t),r!==null&&(r.first===e&&(r.first=a),r.last===e&&(r.last=t))}function Kt(e,r){var t=[];Or(e,t,!0),yn(t,()=>{it(e),r&&r()})}function yn(e,r){var t=e.length;if(t>0){var a=()=>--t||r();for(var o of e)o.out(a)}else r()}function Or(e,r,t){if((e.f&We)===0){if(e.f^=We,e.transitions!==null)for(const c of e.transitions)(c.is_global||t)&&r.push(c);for(var a=e.first;a!==null;){var o=a.next,u=(a.f&Dr)!==0||(a.f&Ye)!==0;Or(a,r,u?t:!1),a=o}}}function Zt(e){An(e,!0)}function An(e,r){if((e.f&We)!==0){e.f^=We,(e.f&xe)===0&&(e.f^=xe),At(e)&&(Ie(e,je),lr(e));for(var t=e.first;t!==null;){var a=t.next,o=(t.f&Dr)!==0||(t.f&Ye)!==0;An(t,o?r:!1),t=a}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||r)&&u.in()}}let Qt=[];function Aa(){var e=Qt;Qt=[],gr(e)}function En(e){Qt.length===0&&queueMicrotask(Aa),Qt.push(e)}let zt=!1,yr=!1,Jt=null,lt=!1,Mt=!1;function jr(e){Mt=e}let Yt=[];let z=null,Me=!1;function Ne(e){z=e}let q=null;function ot(e){q=e}let de=null;function Ea(e){de=e}function Fa(e){z!==null&&z.f&br&&(de===null?Ea([e]):de.push(e))}let ce=null,me=0,Ee=null;function Ta(e){Ee=e}let Fn=1,er=0,nt=!1,tt=null;function Tn(){return++Fn}function At(e){var x;var r=e.f;if((r&je)!==0)return!0;if((r&ct)!==0){var t=e.deps,a=(r&Fe)!==0;if(t!==null){var o,u,c=(r&qt)!==0,v=a&&q!==null&&!nt,l=t.length;if(c||v){var s=e,_=s.parent;for(o=0;o<l;o++)u=t[o],(c||!((x=u==null?void 0:u.reactions)!=null&&x.includes(s)))&&(u.reactions??(u.reactions=[])).push(s);c&&(s.f^=qt),v&&_!==null&&(_.f&Fe)===0&&(s.f^=Fe)}for(o=0;o<l;o++)if(u=t[o],At(u)&&xn(u),u.wv>e.wv)return!0}(!a||q!==null&&!nt)&&Ie(e,xe)}return!1}function Ra(e,r){for(var t=r;t!==null;){if((t.f&jt)!==0)try{t.fn(e);return}catch{t.f^=jt}t=t.parent}throw zt=!1,e}function Sa(e){return(e.f&ir)===0&&(e.parent===null||(e.parent.f&jt)===0)}function sr(e,r,t,a){if(zt){if(t===null&&(zt=!1),Sa(r))throw e;return}t!==null&&(zt=!0);{Ra(e,r);return}}function Rn(e,r,t=!0){var a=e.reactions;if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];de!=null&&de.includes(e)||((u.f&De)!==0?Rn(u,r,!1):r===u&&(t?Ie(u,je):(u.f&xe)!==0&&Ie(u,ct),lr(u)))}}function Sn(e){var m;var r=ce,t=me,a=Ee,o=z,u=nt,c=de,v=ee,l=Me,s=e.f;ce=null,me=0,Ee=null,nt=(s&Fe)!==0&&(Me||!lt||z===null),z=(s&(Ye|wt))===0?e:null,de=null,Wr(e.ctx),Me=!1,er++,e.f|=br;try{var _=(0,e.fn)(),x=e.deps;if(ce!==null){var f;if(tr(e,me),x!==null&&me>0)for(x.length=me+ce.length,f=0;f<ce.length;f++)x[me+f]=ce[f];else e.deps=x=ce;if(!nt)for(f=me;f<x.length;f++)((m=x[f]).reactions??(m.reactions=[])).push(e)}else x!==null&&me<x.length&&(tr(e,me),x.length=me);if(or()&&Ee!==null&&!Me&&x!==null&&(e.f&(De|ct|je))===0)for(f=0;f<Ee.length;f++)Rn(Ee[f],e);return o!==null&&(er++,Ee!==null&&(a===null?a=Ee:a.push(...Ee))),_}finally{ce=r,me=t,Ee=a,z=o,nt=u,de=c,Wr(v),Me=l,e.f^=br}}function Ua(e,r){let t=r.reactions;if(t!==null){var a=Mn.call(t,e);if(a!==-1){var o=t.length-1;o===0?t=r.reactions=null:(t[a]=t[o],t.pop())}}t===null&&(r.f&De)!==0&&(ce===null||!ce.includes(r))&&(Ie(r,ct),(r.f&(Fe|qt))===0&&(r.f^=qt),pn(r),tr(r,0))}function tr(e,r){var t=e.deps;if(t!==null)for(var a=r;a<t.length;a++)Ua(e,t[a])}function fr(e){var r=e.f;if((r&ir)===0){Ie(e,xe);var t=q,a=ee,o=lt;q=e,lt=!0;try{(r&Ur)!==0?ya(e):gn(e),wn(e);var u=Sn(e);e.teardown=typeof u=="function"?u:null,e.wv=Fn;var c=e.deps,v;Vr&&Jn&&e.f&je}catch(l){sr(l,e,t,a||e.ctx)}finally{lt=o,q=t}}}function Da(){try{qn()}catch(e){if(Jt!==null)sr(e,Jt,null);else throw e}}function Ia(){var e=lt;try{var r=0;for(lt=!0;Yt.length>0;){r++>1e3&&Da();var t=Yt,a=t.length;Yt=[];for(var o=0;o<a;o++){var u=La(t[o]);Pa(u)}}}finally{yr=!1,lt=e,Jt=null,St.clear()}}function Pa(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var a=e[t];if((a.f&(ir|We))===0)try{At(a)&&(fr(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?bn(a):a.fn=null))}catch(o){sr(o,a,null,a.ctx)}}}function lr(e){yr||(yr=!0,queueMicrotask(Ia));for(var r=Jt=e;r.parent!==null;){r=r.parent;var t=r.f;if((t&(wt|Ye))!==0){if((t&xe)===0)return;r.f^=xe}}Yt.push(r)}function La(e){for(var r=[],t=e;t!==null;){var a=t.f,o=(a&(Ye|wt))!==0,u=o&&(a&xe)!==0;if(!u&&(a&We)===0){if((a&un)!==0)r.push(t);else if(o)t.f^=xe;else{var c=z;try{z=t,At(t)&&fr(t)}catch(s){sr(s,t,null,t.ctx)}finally{z=c}}var v=t.first;if(v!==null){t=v;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}return r}function i(e){var r=e.f,t=(r&De)!==0;if(tt!==null&&tt.add(e),z!==null&&!Me){if(!(de!=null&&de.includes(e))){var a=z.deps;e.rv<er&&(e.rv=er,ce===null&&a!==null&&a[me]===e?me++:ce===null?ce=[e]:(!nt||!ce.includes(e))&&ce.push(e))}}else if(t&&e.deps===null&&e.effects===null){var o=e,u=o.parent;u!==null&&(u.f&Fe)===0&&(o.f^=Fe)}return t&&(o=e,At(o)&&xn(o)),Mt&&St.has(e)?St.get(e):e.v}function Ca(e){var r=tt;tt=new Set;var t=tt,a;try{if(ze(e),r!==null)for(a of tt)r.add(a)}finally{tt=r}return t}function mt(e){var r=Ca(()=>ze(e));for(var t of r)if((t.f&sn)!==0)for(const a of t.deps||[])(a.f&De)===0&&Dt(a,a.v);else Dt(t,t.v)}function ze(e){var r=Me;try{return Me=!0,e()}finally{Me=r}}const Ma=-7169;function Ie(e,r){e.f=e.f&Ma|r}function Na(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ft in e)Ar(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&ft in t&&Ar(t)}}}function Ar(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Ar(e[a],r)}catch{}const t=Sr(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const a=on(t);for(let o in a){const u=a[o].get;if(u)try{u.call(e)}catch{}}}}}const Oa=["touchstart","touchmove"];function ka(e){return Oa.includes(e)}let qr=!1;function Ba(){qr||(qr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function Ha(e){var r=z,t=q;Ne(null),ot(null);try{return e()}finally{Ne(r),ot(t)}}function Va(e,r,t,a=t){e.addEventListener(r,()=>Ha(t));const o=e.__on_r;o?e.__on_r=()=>{o(),a(!0)}:e.__on_r=()=>a(!0),Ba()}const Un=new Set,Er=new Set;function cr(e){for(var r=0;r<e.length;r++)Un.add(e[r]);for(var t of Er)t(e)}function Vt(e){var N;var r=this,t=r.ownerDocument,a=e.type,o=((N=e.composedPath)==null?void 0:N.call(e))||[],u=o[0]||e.target,c=0,v=e.__root;if(v){var l=o.indexOf(v);if(l!==-1&&(r===document||r===window)){e.__root=r;return}var s=o.indexOf(r);if(s===-1)return;l<=s&&(c=l)}if(u=o[c]||e.target,u!==r){Nn(e,"currentTarget",{configurable:!0,get(){return u||t}});var _=z,x=q;Ne(null),ot(null);try{for(var f,m=[];u!==null;){var g=u.assignedSlot||u.parentNode||u.host||null;try{var H=u["__"+a];if(H!=null&&(!u.disabled||e.target===u))if(Tr(H)){var[W,...F]=H;W.apply(u,[e,...F])}else H.call(u,e)}catch(V){f?m.push(V):f=V}if(e.cancelBubble||g===r||g===null)break;u=g}if(f){for(let V of m)queueMicrotask(()=>{throw V});throw f}}finally{e.__root=r,delete e.currentTarget,Ne(_),ot(x)}}}function $a(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Fr(e,r){var t=q;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function ne(e,r){var t=(r&sa)!==0,a=(r&fa)!==0,o,u=!e.startsWith("<!>");return()=>{o===void 0&&(o=$a(u?e:"<!>"+e),t||(o=Gt(o)));var c=a||_n?document.importNode(o,!0):o.cloneNode(!0);if(t){var v=Gt(c),l=c.lastChild;Fr(v,l)}else Fr(c,c);return c}}function Gr(){var e=document.createDocumentFragment(),r=document.createComment(""),t=Cr();return e.append(r,t),Fr(r,t),e}function J(e,r){e!==null&&e.before(r)}function at(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function Wa(e,r){return Xa(e,r)}const ht=new Map;function Xa(e,{target:r,anchor:t,props:a={},events:o,context:u,intro:c=!0}){da();var v=new Set,l=x=>{for(var f=0;f<x.length;f++){var m=x[f];if(!v.has(m)){v.add(m);var g=ka(m);r.addEventListener(m,Vt,{passive:g});var H=ht.get(m);H===void 0?(document.addEventListener(m,Vt,{passive:g}),ht.set(m,1)):ht.set(m,H+1)}}};l(Rr(Un)),Er.add(l);var s=void 0,_=wa(()=>{var x=t??r.appendChild(Cr());return Pt(()=>{if(u){gt({});var f=ee;f.c=u}o&&(a.$$events=o),s=e(x,a)||{},u&&bt()}),()=>{var g;for(var f of v){r.removeEventListener(f,Vt);var m=ht.get(f);--m===0?(document.removeEventListener(f,Vt),ht.delete(f)):ht.set(f,m)}Er.delete(l),x!==t&&((g=x.parentNode)==null||g.removeChild(x))}});return za.set(s,_),s}let za=new WeakMap;function pe(e,r,[t,a]=[0,0]){var o=e,u=null,c=null,v=he,l=t>0?Dr:0,s=!1;const _=(f,m=!0)=>{s=!0,x(m,f)},x=(f,m)=>{v!==(v=f)&&(v?(u?Zt(u):m&&(u=Pt(()=>m(o))),c&&Kt(c,()=>{c=null})):(c?Zt(c):m&&(c=Pt(()=>m(o,[t+1,a]))),u&&Kt(u,()=>{u=null})))};Nr(()=>{s=!1,r(_),s||x(null,null)},l)}function rr(e,r){return r}function Ya(e,r,t,a){for(var o=[],u=r.length,c=0;c<u;c++)Or(r[c].e,o,!0);var v=u>0&&o.length===0&&t!==null;if(v){var l=t.parentNode;_a(l),l.append(t),a.clear(),et(e,r[0].prev,r[u-1].next)}yn(o,()=>{for(var s=0;s<u;s++){var _=r[s];v||(a.delete(_.k),et(e,_.prev,_.next)),it(_.e,!v)}})}function nr(e,r,t,a,o,u=null){var c=e,v={flags:r,items:new Map,first:null},l=(r&cn)!==0;if(l){var s=e;c=s.appendChild(Cr())}var _=null,x=!1,f=$e(()=>{var m=t();return Tr(m)?m:m==null?[]:Rr(m)});Nr(()=>{var m=i(f),g=m.length;x&&g===0||(x=g===0,ja(m,v,c,o,r,a,t),u!==null&&(g===0?_?Zt(_):_=Pt(()=>u(c)):_!==null&&Kt(_,()=>{_=null})),i(f))})}function ja(e,r,t,a,o,u,c){var re,dt,Oe,ke;var v=(o&ta)!==0,l=(o&(Pr|Lr))!==0,s=e.length,_=r.items,x=r.first,f=x,m,g=null,H,W=[],F=[],N,V,U,k;if(v)for(k=0;k<s;k+=1)N=e[k],V=u(N,k),U=_.get(V),U!==void 0&&((re=U.a)==null||re.measure(),(H??(H=new Set)).add(U));for(k=0;k<s;k+=1){if(N=e[k],V=u(N,k),U=_.get(V),U===void 0){var K=f?f.e.nodes_start:t;g=Ga(K,r,g,g===null?r.first:g.next,N,V,k,a,o,c),_.set(V,g),W=[],F=[],f=g.next;continue}if(l&&qa(U,N,k,o),(U.e.f&We)!==0&&(Zt(U.e),v&&((dt=U.a)==null||dt.unfix(),(H??(H=new Set)).delete(U))),U!==f){if(m!==void 0&&m.has(U)){if(W.length<F.length){var G=F[0],O;g=G.prev;var ae=W[0],ie=W[W.length-1];for(O=0;O<W.length;O+=1)Kr(W[O],G,t);for(O=0;O<F.length;O+=1)m.delete(F[O]);et(r,ae.prev,ie.next),et(r,g,ae),et(r,ie,G),f=G,g=ie,k-=1,W=[],F=[]}else m.delete(U),Kr(U,f,t),et(r,U.prev,U.next),et(r,U,g===null?r.first:g.next),et(r,g,U),g=U;continue}for(W=[],F=[];f!==null&&f.k!==V;)(f.e.f&We)===0&&(m??(m=new Set)).add(f),F.push(f),f=f.next;if(f===null)continue;U=f}W.push(U),g=U,f=U.next}if(f!==null||m!==void 0){for(var _e=m===void 0?[]:Rr(m);f!==null;)(f.e.f&We)===0&&_e.push(f),f=f.next;var Y=_e.length;if(Y>0){var ve=(o&cn)!==0&&s===0?t:null;if(v){for(k=0;k<Y;k+=1)(Oe=_e[k].a)==null||Oe.measure();for(k=0;k<Y;k+=1)(ke=_e[k].a)==null||ke.fix()}Ya(r,_e,ve,_)}}v&&En(()=>{var we;if(H!==void 0)for(U of H)(we=U.a)==null||we.apply()}),q.first=r.first&&r.first.e,q.last=g&&g.e}function qa(e,r,t,a){(a&Pr)!==0&&Dt(e.v,r),(a&Lr)!==0?Dt(e.i,t):e.i=t}function Ga(e,r,t,a,o,u,c,v,l,s){var _=(l&Pr)!==0,x=(l&ra)===0,f=_?x?$(o):Ut(o):o,m=(l&Lr)===0?c:Ut(c),g={i:m,v:f,k:u,a:null,e:null,prev:t,next:a};try{return g.e=Pt(()=>v(e,f,m,s),ca),g.e.prev=t&&t.e,g.e.next=a&&a.e,t===null?r.first=g:(t.next=g,t.e.next=g.e),a!==null&&(a.prev=g,a.e.prev=g.e),g}finally{}}function Kr(e,r,t){for(var a=e.next?e.next.e.nodes_start:t,o=r?r.e.nodes_start:t,u=e.e.nodes_start;u!==a;){var c=ur(u);o.before(u),u=c}}function et(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Dn(e){var r,t,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(t=Dn(e[r]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function Ka(){for(var e,r,t=0,a="",o=arguments.length;t<o;t++)(e=arguments[t])&&(r=Dn(e))&&(a&&(a+=" "),a+=r);return a}function Za(e){return typeof e=="object"?Ka(e):e??""}function Qa(e,r,t){var a=e==null?"":""+e;return a===""?null:a}function Zr(e,r,t,a,o,u){var c=e.__className;if(c!==t){var v=Qa(t);v==null?e.removeAttribute("class"):e.className=v,e.__className=t}return u}const Ja=Symbol("is custom element"),ei=Symbol("is html");function Ft(e,r,t,a){var o=ti(e);o[r]!==(o[r]=t)&&(r==="loading"&&(e[Wn]=t),t==null?e.removeAttribute(r):typeof t!="string"&&ri(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function ti(e){return e.__attributes??(e.__attributes={[Ja]:e.nodeName.includes("-"),[ei]:e.namespaceURI===la})}var Qr=new Map;function ri(e){var r=Qr.get(e.nodeName);if(r)return r;Qr.set(e.nodeName,r=[]);for(var t,a=e,o=Element.prototype;o!==a;){t=on(a);for(var u in t)t[u].set&&r.push(u);a=Sr(a)}return r}function ni(e,r,t=r){Va(e,"change",a=>{var o=a?e.defaultChecked:e.checked;t(o)}),ze(r)==null&&t(e.checked),Ct(()=>{var a=r();e.checked=!!a})}function Jr(e,r){return e===r||(e==null?void 0:e[ft])===r}function ai(e={},r,t,a){return Mr(()=>{var o,u;return Ct(()=>{o=u,u=[],ze(()=>{e!==t(...u)&&(r(e,...u),o&&Jr(t(...o),e)&&r(null,...o))})}),()=>{En(()=>{u&&Jr(t(...u),e)&&r(null,...u)})}}),e}function Nt(e=!1){const r=ee,t=r.l.u;if(!t)return;let a=()=>Na(r.s);if(e){let o=0,u={};const c=It(()=>{let v=!1;const l=r.s;for(const s in l)l[s]!==u[s]&&(u[s]=l[s],v=!0);return v&&o++,o});a=()=>i(c)}t.b.length&&ma(()=>{en(r,a),gr(t.b)}),Yr(()=>{const o=ze(()=>t.m.map(Bn));return()=>{for(const u of o)typeof u=="function"&&u()}}),t.a.length&&Yr(()=>{en(r,a),gr(t.a)})}function en(e,r){if(e.l.s)for(const t of e.l.s)i(t);r()}let $t=!1;function ii(e){var r=$t;try{return $t=!1,[e(),$t]}finally{$t=r}}function tn(e){var r;return((r=e.ctx)==null?void 0:r.d)??!1}function Ce(e,r,t,a){var G;var o=(t&na)!==0,u=!Lt||(t&aa)!==0,c=(t&oa)!==0,v=(t&ua)!==0,l=!1,s;c?[s,l]=ii(()=>e[r]):s=e[r];var _=ft in e||$n in e,x=c&&(((G=xt(e,r))==null?void 0:G.set)??(_&&r in e&&(O=>e[r]=O)))||void 0,f=a,m=!0,g=!1,H=()=>(g=!0,m&&(m=!1,v?f=ze(a):f=a),f);s===void 0&&a!==void 0&&(x&&u&&Gn(),s=H(),x&&x(s));var W;if(u)W=()=>{var O=e[r];return O===void 0?H():(m=!0,g=!1,O)};else{var F=(o?It:$e)(()=>e[r]);F.f|=sn,W=()=>{var O=i(F);return O!==void 0&&(f=void 0),O===void 0?f:O}}if((t&ia)===0)return W;if(x){var N=e.$$legacy;return function(O,ae){return arguments.length>0?((!u||!ae||N||l)&&x(ae?W():O),O):W()}}var V=!1,U=!1,k=$(s),K=It(()=>{var O=W(),ae=i(k);return V?(V=!1,U=!0,ae):(U=!1,k.v=O)});return c&&i(K),o||(K.equals=Ir),function(O,ae){if(tt!==null&&(V=U,W(),i(k)),arguments.length>0){const ie=ae?i(K):u&&c?st(O):O;if(!K.equals(ie)){if(V=!0,M(k,ie),g&&f!==void 0&&(f=ie),tn(K))return O;ze(()=>i(K))}return O}return tn(K)?K.v:i(K)}}const oi="5";var an;typeof window<"u"&&((an=window.__svelte??(window.__svelte={})).v??(an.v=new Set)).add(oi);ea();const ui=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,si=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,fi=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,li=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,ci=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,di=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,_i=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,vi=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,Wt=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],hi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],pi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],xi=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],mi=[{count:2,offset:0}],Je=(e,r,t,a)=>{const o=e.createShader(r);if(!o)throw new Error(`failed to create shader '${a}'`);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(o);throw new Error(`compilation error in shader '${a}':
${u}`)}return o},Tt=(e,r,t,a)=>{const o=e.createProgram();if(!o)throw new Error(`failed to create program '${a}'`);if(e.attachShader(o,r),e.attachShader(o,t),e.linkProgram(o),e.detachShader(o,r),e.detachShader(o,t),!e.getProgramParameter(o,e.LINK_STATUS)){const u=e.getProgramInfoLog(o);throw new Error(`link error in program '${a}':
${u}`)}return o};var wi=(e,r)=>r(!1),gi=ne('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),bi=(e,r)=>r(!0),yi=ne('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),Ai=ne('<input type="checkbox">'),Ei=ne("<!> <!> <label> </label> <br>",1);function Rt(e,r){gt(r,!1);let t=Ce(r,"expanded",12),a=Ce(r,"id",8),o=Ce(r,"text",8),u=Ce(r,"checked",12,null),c=Ce(r,"onexpandedchange",8,null),v=Ce(r,"oncheckedchange",8,null);const l=F=>{t(F),c()&&c()()};Nt();var s=Ei(),_=Ue(s);{var x=F=>{var N=gi();N.__click=[wi,l],rt(()=>Ft(N,"id",u()===null?a():null)),J(F,N)},f=F=>{var N=yi();N.__click=[bi,l],rt(()=>Ft(N,"id",u()===null?a():null)),J(F,N)};pe(_,F=>{t()?F(x):F(f,!1)})}var m=se(_,2);{var g=F=>{var N=Ai();Ft(N,"draggable",!0),N.__change=function(...V){var U;(U=v())==null||U.apply(this,V)},rt(()=>Ft(N,"id",a())),ni(N,u),J(F,N)};pe(m,F=>{u()!==null&&F(g)})}var H=se(m,2),W=Xe(H);rt(()=>{Ft(H,"for",a()),at(W,o())}),J(e,s),bt()}cr(["click","change"]);var Fi=ne('<div class="ml-4 w-full"> <br> <br> <br> <br></div>');function rn(e,r){gt(r,!1);let t=Ce(r,"image",8);Nt();var a=Fi(),o=Xe(a),u=se(o,2),c=se(u,2),v=se(c,2);rt((l,s,_,x)=>{at(o,`screen: ${t().x??""},${t().y??""}
  ${t().w??""}x${t().h??""} `),at(u,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),at(c,` rgb: ${l??""}, ${s??""}, ${_??""} `),at(v,` alpha: ${x??""} `)},[()=>t().r.toPrecision(4),()=>t().g.toPrecision(4),()=>t().b.toPrecision(4),()=>t().a.toPrecision(4)],$e),J(e,a),bt()}var Ti=ne("<div> </div>"),Ri=(e,r,t)=>{const a=r().textureId;t(t().selectedTextureId=a.toString(),!0),t(t().selectedTexture=t().textures[a],!0),t().redraw()},Si=ne('<button class="hover:bg-gray-200"> </button> <br>',1),Ui=ne("<!> <!>",1),Di=ne('<div class="ml-2"></div>'),Ii=ne("<!> <!>",1),Pi=ne("<!> <!>",1),Li=ne("<!> <!>",1),Ci=ne('<div class="ml-3 text-sm"><!> <!> <!></div>');function Mi(e,r){gt(r,!1);let t=Ce(r,"entity",12),a=Ce(r,"menuData",12);const o=6,u=100;let c=$(!1);function v(F){return"images"in F}let l=$(null),s=$(0);if(t().type==="batch2d"){const F=t().vertices,N=u*2,V=F.length>=N*o;M(l,[]);let U=[],k=0;for(let K=0;K<F.length-(o-1);K+=o){const G=F[K];let O=G.x,ae=G.x,ie=G.y,_e=G.y;for(let ve=1;ve<o;ve+=1){const re=F[K+ve];re.x<O&&(O=re.x),re.x>ae&&(ae=re.x),re.y<ie&&(ie=re.y),re.y>_e&&(_e=re.y)}const Y={x:O,y:ie,w:ae-O,h:_e-ie,ax:G.ax,ay:G.ay,aw:G.aw,ah:G.ah,r:G.r,g:G.g,b:G.b,a:G.a,expanded:!1,index:i(s)};if(V){if(U.push(Y),U.length>=u){const ve=`${i(l).length*u}-${i(l).length*u+U.length-1}`,re=K+o;i(l).push({images:U,desc:ve,expanded:!1,vertexRangeStart:k,vertexRangeEnd:re}),U=[],k=re}}else i(l).push(Y);M(s,i(s)+1)}if(U.length>0){const K=`${i(l).length*u}-${i(l).length*u+U.length-1}`;i(l).push({images:U,desc:K,expanded:!1,vertexRangeStart:k,vertexRangeEnd:F.length})}}Nt();var _=Ci(),x=Xe(_);{var f=F=>{var N=Ti(),V=Xe(N);rt(()=>at(V,`animated: ${t().animated??""}`)),J(F,N)};pe(x,F=>{typeof t().animated=="boolean"&&F(f)})}var m=se(x,2);{var g=F=>{var N=Si(),V=Ue(N);V.__click=[Ri,t,a];var U=Xe(V);rt(()=>at(U,`texture: #${t().textureId??""}`)),J(F,N)};pe(m,F=>{typeof t().textureId=="number"&&F(g)})}var H=se(m,2);{var W=F=>{var N=Li(),V=Ue(N);const U=$e(()=>`${t().uuid}-images2d`),k=$e(()=>`2D images (${i(s)})`);Rt(V,{get id(){return i(U)},get text(){return i(k)},get expanded(){return i(c)},set expanded(O){M(c,O)},$$legacy:!0});var K=se(V,2);{var G=O=>{var ae=Gr(),ie=Ue(ae);nr(ie,1,()=>i(l),rr,(_e,Y,ve)=>{var re=Gr(),dt=Ue(re);{var Oe=we=>{var qe=Ii(),Be=Ue(qe),ut=()=>i(Y).images.every(Z=>t().enabledVerticesList[Z.index*o]),He=Z=>{for(let le=i(Y).vertexRangeStart;le<i(Y).vertexRangeEnd;le+=1)t(t().enabledVerticesList[le]=Z,!0)};const Ge=$e(()=>`${t().uuid}-images-${i(Y).desc}`),Ke=$e(()=>`[Images ${i(Y).desc}]`);Rt(Be,{get checked(){return ut()},set checked(Z){He(Z)},get oncheckedchange(){return a().redraw},get id(){return i(Ge)},get text(){return i(Ke)},get expanded(){return i(Y).expanded},set expanded(Z){i(Y).expanded=Z,mt(()=>i(l))},$$legacy:!0});var Te=se(Be,2);{var fe=Z=>{var le=Di();nr(le,5,()=>i(Y).images,rr,(Ot,Pe,_t)=>{var oe=Ui(),h=Ue(oe),Ve=()=>t().enabledVerticesList[i(Pe).index*o],Re=ge=>{for(let Et=0;Et<o;Et+=1)t(t().enabledVerticesList[i(Pe).index*o+Et]=ge,!0)};const dr=$e(()=>`${t().uuid}-images-${i(Y).desc}-${_t}`);Rt(h,{get checked(){return Ve()},set checked(ge){Re(ge)},get oncheckedchange(){return a().redraw},get id(){return i(dr)},text:`Image ${ve*u+_t}`,get expanded(){return i(Pe).expanded},set expanded(ge){i(Pe).expanded=ge,mt(()=>(i(l),i(Y).images))},$$legacy:!0});var kt=se(h,2);{var Bt=ge=>{rn(ge,{get image(){return i(Pe)}})};pe(kt,ge=>{i(Pe).expanded&&ge(Bt)})}J(Ot,oe)}),J(Z,le)};pe(Te,Z=>{i(Y).expanded&&Z(fe)})}J(we,qe)},ke=we=>{var qe=Pi(),Be=Ue(qe),ut=()=>t().enabledVerticesList[i(Y).index*o],He=fe=>{for(let Z=0;Z<o;Z+=1)t(t().enabledVerticesList[i(Y).index*o+Z]=fe,!0)};const Ge=$e(()=>`${t().uuid}-images-${ve}`);Rt(Be,{get checked(){return ut()},set checked(fe){He(fe)},get oncheckedchange(){return a().redraw},get id(){return i(Ge)},text:`Image ${ve}`,get expanded(){return i(Y).expanded},set expanded(fe){i(Y).expanded=fe,mt(()=>i(l))},$$legacy:!0});var Ke=se(Be,2);{var Te=fe=>{rn(fe,{get image(){return i(Y)}})};pe(Ke,fe=>{i(Y).expanded&&fe(Te)})}J(we,qe)};pe(dt,we=>{v(i(Y))?we(Oe):we(ke,!1)})}J(_e,re)}),J(O,ae)};pe(K,O=>{i(c)&&O(G)})}J(F,N)};pe(H,F=>{i(l)&&i(s)&&F(W)})}J(e,_),bt()}cr(["click"]);var Ni=(e,r,t,a)=>r(t(),a()),Oi=ne('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),ki=ne("<div><!> <!></div>"),Bi=ne('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function Hi(e,r){gt(r,!1);let t=Ce(r,"data",12);const a=(v,l)=>{t().selectedTexture===l?t(t().selectedTexture=null,!0):(t(t().selectedTextureId=v,!0),t(t().selectedTexture=l,!0)),t().redraw()};Nt();var o=Bi(),u=se(Ue(o),2);nr(u,1,()=>Object.entries(t().textures),rr,(v,l)=>{let s=()=>i(l)[0],_=()=>i(l)[1];var x=Oi(),f=Xe(x);f.__click=[Ni,a,s,_];var m=Xe(f);rt(()=>{Zr(f,1,Za(t().selectedTexture===_()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),at(m,`#${s()??""}`)}),J(v,x)});var c=se(u,6);nr(c,1,()=>t().entities,rr,(v,l,s)=>{var _=ki();Zr(_,1,`select-none m-0 border-none w-full ${s&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var x=Xe(_);Rt(x,{id:`menu${s}`,get text(){return t().entities[s].type},get oncheckedchange(){return t().redraw},get expanded(){return t().entities[s].expanded},set expanded(g){t().entities[s].expanded=g,mt(()=>t().entities)},get checked(){return t().entities[s].enabled},set checked(g){t().entities[s].enabled=g,mt(()=>t().entities)},$$legacy:!0});var f=se(x,2);{var m=g=>{Mi(g,{get entity(){return t().entities[s]},set entity(H){t().entities[s]=H,mt(()=>t().entities)},get menuData(){return t()},set menuData(H){t(H)},$$legacy:!0})};pe(f,g=>{t().entities[s].expanded&&g(m)})}J(v,_)}),J(e,o),bt()}cr(["click"]);const ue=[];for(let e=0;e<256;++e)ue.push((e+256).toString(16).slice(1));function Vi(e,r=0){return(ue[e[r+0]]+ue[e[r+1]]+ue[e[r+2]]+ue[e[r+3]]+"-"+ue[e[r+4]]+ue[e[r+5]]+"-"+ue[e[r+6]]+ue[e[r+7]]+"-"+ue[e[r+8]]+ue[e[r+9]]+"-"+ue[e[r+10]]+ue[e[r+11]]+ue[e[r+12]]+ue[e[r+13]]+ue[e[r+14]]+ue[e[r+15]]).toLowerCase()}let wr;const $i=new Uint8Array(16);function Wi(){if(!wr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");wr=crypto.getRandomValues.bind(crypto)}return wr($i)}const Xi=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nn={randomUUID:Xi};function pt(e,r,t){var o;if(nn.randomUUID&&!e)return nn.randomUUID();e=e||{};const a=e.random??((o=e.rng)==null?void 0:o.call(e))??Wi();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Vi(a)}var zi=(e,r)=>M(r,!1),Yi=ne('<div class="overflow-auto absolute w-56 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),ji=(e,r)=>M(r,!0),qi=ne('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),Gi=(e,r,t,a,o)=>{Xt(r,i(r).selectedTexture=null),t(i(a),i(o))},Ki=ne('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),Zi=ne('<canvas class="absolute right-0"></canvas> <!> <!>',1);function Qi(e,r){gt(r,!1);let t=$({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",redraw:()=>Re(i(oe),i(h))});const a=w=>{const n=ve.get(w);return n?parseInt(n):0},o=(w,n,d,p,j)=>new Float32Array([d/(w*j),0,0,0,0,d/(n*j),0,0,0,0,(p+d)/(p-d),1,0,0,-2*p*d/(p-d),0]),u=0;let c=$(null),v=$(null),l=$(null),s=$(null),_=$(null),x=$(null),f=$(null),m=$(null),g=$(null),H=$(null),W=$(null),F=$(null),N=$(null),V=$(null),U=$(null),k=$(null),K=$(null),G=$(null),O=$(null),ae=$(null),ie=$(null),_e=$(null),Y=null;const ve=new URLSearchParams(window.location.search),re=ve.get("n"),dt=re?Math.max(parseInt(re),1):1,Oe=a("w"),ke=a("h"),we=a("gx"),qe=a("gy"),Be=a("gw"),ut=a("gh");let He=0,Ge=$(0),Ke=$(),Te=null,fe=null,Z=0,le=0,Ot=o(Be,ut,460,66560,5/16),Pe=$(!1),_t=$(!1),oe=$(null),h=$(null);const Ve=(w,n,d,p)=>{w.bindBuffer(w.ARRAY_BUFFER,n.vbo);for(let b=0;b<i(Ge);b+=1){const y=n.attribs[b];if(!y){w.disableVertexAttribArray(b);continue}w.enableVertexAttribArray(b),w.vertexAttribPointer(b,y.count,w.FLOAT,!1,n.step,y.offset)}if(!p){w.drawArrays(w.TRIANGLES,0,d);return}let j=null;for(let b=0;b<d;b+=1){const y=p[b];j===null?y&&(j=b):y||(w.drawArrays(w.TRIANGLES,j,b-j),j=null)}j!==null&&w.drawArrays(w.TRIANGLES,j,d-j)},Re=(w,n)=>{if(n.viewport(0,0,w.width,w.height),n.scissor(0,0,w.width,w.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),!i(Pe)){n.viewport(0,0,w.width,w.height);const d=()=>{n.clearColor(.525,.968,.495,1),n.clear(n.COLOR_BUFFER_BIT)},p=()=>{n.clearColor(.2,.2,.2,1),n.clear(n.COLOR_BUFFER_BIT)},j=Math.min(He/dt,1),b=Math.floor(w.width*.65)&-2,y=70,C=8,A=C*2,Q=b*j;if(d(),w.width<=A||w.height<=A)return;n.scissor(C,C,w.width-A,w.height-A),p(),n.scissor(w.width/2-(b/2+C),w.height/2-(y/2+C),b+A,y+A),d(),n.scissor(w.width/2-b/2+Q,w.height/2-y/2,b-Q,y),p();return}if(i(t).selectedTexture){if(n.useProgram(i(ie)),n.viewport(0,0,w.width,w.height),n.uniform2fv(i(_e),[w.width,w.height]),!Y){const I=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,I),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),n.STATIC_DRAW),Y={vbo:I,step:8,attribs:mi}}Ve(n,Y,6);const d=i(t).selectedTexture,p=w.width/w.height,j=d.width/d.height,b=p>=j,y=b?d.width*w.height/d.height:w.width,C=b?w.height:d.height*w.width/d.width,A=b?(w.width-w.height)/2:0,Q=y+A,R=b?0:(w.height-w.width)/2,te=C+R;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(c)),n.uniform4fv(i(v),[d.width,d.height,w.width,w.height]),n.bindTexture(n.TEXTURE_2D,d.texture),n.uniform1i(i(l),u);const D=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,D),n.bufferData(n.ARRAY_BUFFER,new Float32Array([A,R,0,0,0,0,d.width,d.height,1,1,1,1,0,0,0,Q,R,1,0,0,0,d.width,d.height,1,1,1,1,0,0,0,A,te,0,1,0,0,d.width,d.height,1,1,1,1,0,0,0,Q,R,1,0,0,0,d.width,d.height,1,1,1,1,0,0,0,Q,te,1,1,0,0,d.width,d.height,1,1,1,1,0,0,0,A,te,0,1,0,0,d.width,d.height,1,1,1,1,0,0,0]),n.STATIC_DRAW),Ve(n,{vbo:D,step:60,attribs:Wt},6),n.deleteBuffer(D);return}n.disable(n.SCISSOR_TEST);for(let d of i(t).entities)if(d.enabled){if(d.type==="batch2d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST);const p=i(t).textures[d.textureId];n.useProgram(i(c)),n.viewport(0,0,Oe,ke),n.uniform4fv(i(v),[p.width,p.height,d.targetWidth,d.targetHeight]),n.bindTexture(n.TEXTURE_2D,p.texture),n.uniform1i(i(l),u),Ve(n,d.buffer,d.vertexCount,d.enabledVerticesList)}if(d.type==="render3d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const p=i(t).textures[d.textureId];n.useProgram(d.animated?i(H):i(s)),n.viewport(we,qe,Be,ut),n.uniformMatrix4fv(d.animated?i(W):i(_),!1,d.modelMatrix),n.uniformMatrix4fv(d.animated?i(F):i(x),!1,d.viewMatrix),n.uniformMatrix4fv(d.animated?i(N):i(f),!1,Ot),n.uniform2fv(d.animated?i(V):i(m),[p.width,p.height]),n.bindTexture(n.TEXTURE_2D,p.texture),n.uniform1i(d.animated?i(U):i(g),u),Ve(n,d.buffer,d.vertexCount)}if(d.type==="renderparticles"){n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const p=i(t).textures[d.textureId];n.useProgram(i(k)),n.viewport(we,qe,Be,ut),n.uniformMatrix4fv(i(K),!1,d.viewMatrix),n.uniformMatrix4fv(i(G),!1,Ot),n.uniform2fv(i(ae),[p.width,p.height]),n.bindTexture(n.TEXTURE_2D,p.texture),n.uniform1i(i(O),u),Ve(n,d.buffer,d.vertexCount)}if(d.type==="icon"||d.type==="bigicon"){const p=d.texSize;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(c)),n.viewport(0,0,Oe,ke),n.bindTexture(n.TEXTURE_2D,d.texture),n.uniform1i(i(l),u),n.uniform4fv(i(v),[p,p,d.targetWidth,d.targetHeight]),Ve(n,d.buffer,6)}if(d.type==="minimap"){if(Te===null)continue;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(c)),n.viewport(0,0,Oe,ke),n.uniform4fv(i(v),[Z,le,d.targetWidth,d.targetHeight]),n.bindTexture(n.TEXTURE_2D,Te),n.uniform1i(i(l),u),Ve(n,d.buffer,6)}}},dr=(w,n,d)=>{const p=new DataView(d),j=p.getUint32(0,!0);switch(j){case 0:{M(Pe,!0),Re(w,n);break}case 1:{const b=p.getUint32(4,!0),y=p.getUint32(8,!0),C=p.getUint32(12,!0),A=n.createTexture(),Q=new Uint8Array(d,16,y*C*4);n.bindTexture(n.TEXTURE_2D,A),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,y,C,0,n.RGBA,n.UNSIGNED_BYTE,Q),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),Xt(t,i(t).textures[b]={texture:A,width:y,height:C,data:Q});break}case 2:case 3:{const b=j===3,y=b?104:40,C=b?120:56,A=p.getUint32(4,!0),Q=p.getUint32(8,!0),R=new Float32Array(16);R.set(new Float32Array(d,16,16));const te=new Float32Array(16);te.set(new Float32Array(d,80,16));const D=new DataView(d,144,A*y),L=new Array(A),I=new ArrayBuffer(A*C),T=new DataView(I);for(let P=0;P<A;P+=1){const E=y*P,B=C*P;let be=null;b&&(be=new Float32Array(16),be.set(new Float32Array(d,144+y*P+40,16)));const X={x:D.getInt16(E,!0),y:D.getInt16(E+2,!0),z:D.getInt16(E+4,!0),u:D.getFloat32(E+8,!0),v:D.getFloat32(E+12,!0),ax:D.getUint16(E+16,!0),ay:D.getUint16(E+18,!0),aw:D.getUint16(E+20,!0),ah:D.getUint16(E+22,!0),r:D.getFloat32(E+24,!0),g:D.getFloat32(E+28,!0),b:D.getFloat32(E+32,!0),a:D.getFloat32(E+36,!0),anim:be};if(L[P]=X,T.setFloat32(B,X.x,!0),T.setFloat32(B+4,X.y,!0),T.setFloat32(B+8,X.z,!0),T.setFloat32(B+12,0,!0),T.setFloat32(B+16,X.u,!0),T.setFloat32(B+20,X.v,!0),T.setFloat32(B+24,X.ax,!0),T.setFloat32(B+28,X.ay,!0),T.setFloat32(B+32,X.aw,!0),T.setFloat32(B+36,X.ah,!0),T.setFloat32(B+40,X.r,!0),T.setFloat32(B+44,X.g,!0),T.setFloat32(B+48,X.b,!0),T.setFloat32(B+52,X.a,!0),be)for(let ye=0;ye<16;ye+=1)T.setFloat32(B+56+ye*4,be[ye],!0)}const S=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,S),n.bufferData(n.ARRAY_BUFFER,T,n.STATIC_DRAW),i(t).entities.push({type:"render3d",animated:b,textureId:Q,vertexCount:A,modelMatrix:R,viewMatrix:te,vertices:L,buffer:{vbo:S,step:C,attribs:b?pi:hi},enabled:!0,expanded:!1,uuid:pt()}),He+=A,Re(w,n);break}case 4:{const C=p.getUint32(4,!0),A=p.getUint32(8,!0),Q=p.getUint16(12,!0),R=p.getUint16(14,!0),te=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,te);const D=new DataView(d,16,C*40),L=new ArrayBuffer(C*60),I=new DataView(L),T=new Array(C);for(let S=0;S<C;S+=1){const P=40*S,E=60*S,B={x:D.getInt16(P,!0),y:D.getInt16(P+2,!0),ax:D.getInt16(P+4,!0),ay:D.getInt16(P+6,!0),aw:D.getInt16(P+8,!0),ah:D.getInt16(P+10,!0),discard:D.getUint8(P+12),wrapx:D.getUint8(P+13),wrapy:D.getUint8(P+14),u:D.getFloat32(P+16,!0),v:D.getFloat32(P+20,!0),r:D.getFloat32(P+24,!0),g:D.getFloat32(P+28,!0),b:D.getFloat32(P+32,!0),a:D.getFloat32(P+36,!0)};T[S]=B,I.setFloat32(E,B.x,!0),I.setFloat32(E+4,B.y,!0),I.setFloat32(E+8,B.u,!0),I.setFloat32(E+12,B.v,!0),I.setFloat32(E+16,B.ax,!0),I.setFloat32(E+20,B.ay,!0),I.setFloat32(E+24,B.aw,!0),I.setFloat32(E+28,B.ah,!0),I.setFloat32(E+32,B.r,!0),I.setFloat32(E+36,B.g,!0),I.setFloat32(E+40,B.b,!0),I.setFloat32(E+44,B.a,!0),I.setFloat32(E+48,B.discard,!0),I.setFloat32(E+52,B.wrapx,!0),I.setFloat32(E+56,B.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,I,n.STATIC_DRAW),i(t).entities.push({type:"batch2d",textureId:A,vertexCount:C,vertices:T,targetWidth:Q,targetHeight:R,buffer:{vbo:te,step:60,attribs:Wt},enabled:!0,expanded:!1,uuid:pt(),enabledVerticesList:Array(Math.floor(C)).fill(!0)}),He+=C,Re(w,n);break}case 5:case 8:{const y=j===5?64:512,C=p.getInt16(4,!0),A=p.getInt16(6,!0),Q=p.getInt16(8,!0),R=p.getInt16(10,!0),te=p.getUint32(12,!0),D=p.getFloat32(16,!0),L=p.getFloat32(20,!0),I=p.getFloat32(24,!0),T=p.getFloat32(28,!0),S=p.getUint16(32,!0),P=p.getUint16(34,!0),E=n.createTexture(),B=n.createFramebuffer();n.bindTexture(n.TEXTURE_2D,E),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,B),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,y,y),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,E,0),n.disable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.FRONT),n.viewport(0,0,y,y),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT);let be=Array(te),X=36;for(let hr=0;hr<te;hr+=1){const Ht=p.getUint32(X,!0);let Br=Array(Ht);const Cn=new ArrayBuffer(Ht*56),Ae=new DataView(Cn),pr=new Float32Array(16);pr.set(new Float32Array(d,X+4,16));const xr=new Float32Array(16);xr.set(new Float32Array(d,X+68,16));const mr=new Float32Array(16);mr.set(new Float32Array(d,X+132,16)),X+=196;for(let Le=0;Le<Ht;Le+=1){const Ze={x:p.getInt16(X,!0),y:p.getInt16(X+2,!0),z:p.getInt16(X+4,!0),r:p.getFloat32(X+8,!0),g:p.getFloat32(X+12,!0),b:p.getFloat32(X+16,!0),a:p.getFloat32(X+20,!0)},Se=Le*56;Ae.setFloat32(Se,Ze.x,!0),Ae.setFloat32(Se+4,Ze.y,!0),Ae.setFloat32(Se+8,Ze.z,!0),Ae.setFloat32(Se+24,0,!0),Ae.setFloat32(Se+28,0,!0),Ae.setFloat32(Se+32,y,!0),Ae.setFloat32(Se+36,y,!0),Ae.setFloat32(Se+40,Ze.r,!0),Ae.setFloat32(Se+44,Ze.g,!0),Ae.setFloat32(Se+48,Ze.b,!0),Ae.setFloat32(Se+52,Ze.a,!0),Br[Le]=Ze,X+=24}be[hr]={vertices:Br,modelMatrix:pr,viewMatrix:xr,projMatrix:mr};const Hr=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Hr),n.bufferData(n.ARRAY_BUFFER,Ae,n.STATIC_DRAW),n.useProgram(i(s)),n.uniformMatrix4fv(i(_),!1,pr),n.uniformMatrix4fv(i(x),!1,xr),n.uniformMatrix4fv(i(f),!1,mr),n.uniform2fv(i(m),[1,1]),n.bindTexture(n.TEXTURE_2D,i(Ke)),n.uniform1i(i(g),u);for(let Le=0;Le<i(Ge);Le+=1)Le<4?n.enableVertexAttribArray(Le):n.disableVertexAttribArray(Le);n.vertexAttribPointer(0,4,n.FLOAT,!1,56,0),n.vertexAttribPointer(1,2,n.FLOAT,!1,56,16),n.vertexAttribPointer(2,4,n.FLOAT,!1,56,24),n.vertexAttribPointer(3,4,n.FLOAT,!1,56,40),n.drawArrays(n.TRIANGLES,0,Ht),n.deleteBuffer(Hr)}const ye=C,vt=C+Q,_r=A,vr=A+R,kr=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,kr),n.bufferData(n.ARRAY_BUFFER,new Float32Array([ye,_r,0,1,0,0,y,y,D,I,L,T,0,0,0,vt,_r,1,1,0,0,y,y,D,I,L,T,0,0,0,ye,vr,0,0,0,0,y,y,D,I,L,T,0,0,0,vt,_r,1,1,0,0,y,y,D,I,L,T,0,0,0,vt,vr,1,0,0,0,y,y,D,I,L,T,0,0,0,ye,vr,0,0,0,0,y,y,D,I,L,T,0,0,0]),n.STATIC_DRAW),i(t).entities.push({type:j===5?"icon":"bigicon",models:be,texture:E,targetWidth:S,targetHeight:P,texSize:y,buffer:{vbo:kr,step:60,attribs:Wt},enabled:!0,expanded:!1,uuid:pt()}),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.deleteFramebuffer(B),n.disable(n.CULL_FACE);break}case 6:{const b=p.getUint32(4,!0),y=p.getUint32(8,!0);Z=p.getUint16(12,!0),le=p.getUint16(14,!0);const C=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,C);const A=new DataView(d,16,b*40),Q=new ArrayBuffer(b*60),R=new DataView(Q),te=new Array(b);for(let L=0;L<b;L+=1){const I=40*L,T=60*L,S={x:A.getInt16(I,!0),y:A.getInt16(I+2,!0),ax:A.getInt16(I+4,!0),ay:A.getInt16(I+6,!0),aw:A.getInt16(I+8,!0),ah:A.getInt16(I+10,!0),discard:A.getUint8(I+12),wrapx:A.getUint8(I+13),wrapy:A.getUint8(I+14),u:A.getFloat32(I+16,!0),v:A.getFloat32(I+20,!0),r:A.getFloat32(I+24,!0),g:A.getFloat32(I+28,!0),b:A.getFloat32(I+32,!0),a:A.getFloat32(I+36,!0)};te[L]=S,R.setFloat32(T,S.x,!0),R.setFloat32(T+4,S.y,!0),R.setFloat32(T+8,S.u,!0),R.setFloat32(T+12,S.v,!0),R.setFloat32(T+16,S.ax,!0),R.setFloat32(T+20,S.ay,!0),R.setFloat32(T+24,S.aw,!0),R.setFloat32(T+28,S.ah,!0),R.setFloat32(T+32,S.r,!0),R.setFloat32(T+36,S.g,!0),R.setFloat32(T+40,S.b,!0),R.setFloat32(T+44,S.a,!0),R.setFloat32(T+48,S.discard,!0),R.setFloat32(T+52,S.wrapx,!0),R.setFloat32(T+56,S.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,R,n.STATIC_DRAW),!Te||!fe?(Te=n.createTexture(),n.bindTexture(n.TEXTURE_2D,Te),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,Z,le),fe=n.createFramebuffer(),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,fe),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Te,0),n.bindTexture(n.TEXTURE_2D,null)):n.bindFramebuffer(n.DRAW_FRAMEBUFFER,fe),n.viewport(0,0,Z,le),n.scissor(0,0,Z,le),n.disable(n.DEPTH_TEST);const D=i(t).textures[y];n.useProgram(i(c)),n.uniform4fv(i(v),[D.width,D.height,Z,le]),n.bindTexture(n.TEXTURE_2D,D.texture),n.uniform1i(i(l),u);for(let L=0;L<i(Ge);L+=1)L<4?n.enableVertexAttribArray(L):n.disableVertexAttribArray(L);n.vertexAttribPointer(0,4,n.FLOAT,!1,60,0),n.vertexAttribPointer(1,4,n.FLOAT,!1,60,16),n.vertexAttribPointer(2,4,n.FLOAT,!1,60,32),n.vertexAttribPointer(3,3,n.FLOAT,!1,60,48),n.drawArrays(n.TRIANGLES,0,b),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),i(t).entities.push({type:"minimap2d",textureId:y,vbo:C,vertices:te,enabled:!0,expanded:!1,uuid:pt()}),He+=b,Re(w,n);break}case 7:{if(!Te)break;const b=p.getInt16(4,!0),y=p.getInt16(6,!0),C=p.getUint16(8,!0),A=p.getUint16(10,!0),Q=p.getInt16(12,!0),R=p.getInt16(14,!0),te=p.getUint16(16,!0),D=p.getUint16(18,!0),L=p.getUint16(20,!0),I=p.getUint16(22,!0),T=Q,S=Q+te,P=R,E=R+D,B=b/Z,be=(b+C)/Z,X=y/le,ye=(y+A)/le,vt=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,vt),n.bufferData(n.ARRAY_BUFFER,new Float32Array([T,P,B,ye,b,y,C,A,1,1,1,1,0,0,0,S,P,be,ye,b,y,C,A,1,1,1,1,0,0,0,T,E,B,X,b,y,C,A,1,1,1,1,0,0,0,S,P,be,ye,b,y,C,A,1,1,1,1,0,0,0,S,E,be,X,b,y,C,A,1,1,1,1,0,0,0,T,E,B,X,b,y,C,A,1,1,1,1,0,0,0]),n.STATIC_DRAW),i(t).entities.push({type:"minimap",sourcex:b,sourcey:y,sourcew:C,sourceh:A,targetx:Q,targety:R,targetw:te,targeth:D,targetWidth:L,targetHeight:I,buffer:{vbo:vt,step:60,attribs:Wt},enabled:!0,expanded:!1,uuid:pt()}),Re(w,n);break}case 9:{const b=p.getUint32(4,!0),y=p.getUint32(8,!0),C=64,A=72,Q=new Float32Array(16);Q.set(new Float32Array(d,16,16));const R=new DataView(d,80,b*C),te=new Array(b),D=new ArrayBuffer(b*A),L=new DataView(D);for(let T=0;T<b;T+=1){const S=C*T,P=A*T,E={x:R.getFloat32(S,!0),y:R.getFloat32(S+4,!0),z:R.getFloat32(S+8,!0),offsetx2d:R.getFloat32(S+12,!0),offsety2d:R.getFloat32(S+16,!0),offsetx3d:R.getFloat32(S+20,!0),offsety3d:R.getFloat32(S+24,!0),offsetz3d:R.getFloat32(S+28,!0),ax:R.getUint16(S+32,!0),ay:R.getUint16(S+34,!0),aw:R.getUint16(S+36,!0),ah:R.getUint16(S+38,!0),r:R.getFloat32(S+40,!0),g:R.getFloat32(S+44,!0),b:R.getFloat32(S+48,!0),a:R.getFloat32(S+52,!0),u:R.getFloat32(S+56,!0),v:R.getFloat32(S+60,!0)};te[T]=E,L.setFloat32(P,E.x,!0),L.setFloat32(P+4,E.y,!0),L.setFloat32(P+8,E.z,!0),L.setFloat32(P+12,E.ax,!0),L.setFloat32(P+16,E.ay,!0),L.setFloat32(P+20,E.aw,!0),L.setFloat32(P+24,E.ah,!0),L.setFloat32(P+28,E.r,!0),L.setFloat32(P+32,E.g,!0),L.setFloat32(P+36,E.b,!0),L.setFloat32(P+40,E.a,!0),L.setFloat32(P+44,E.offsetx2d,!0),L.setFloat32(P+48,E.offsety2d,!0),L.setFloat32(P+52,E.offsetx3d,!0),L.setFloat32(P+56,E.offsety3d,!0),L.setFloat32(P+60,E.offsetz3d,!0),L.setFloat32(P+64,E.u,!0),L.setFloat32(P+68,E.v,!0)}const I=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,I),n.bufferData(n.ARRAY_BUFFER,L,n.STATIC_DRAW),i(t).entities.push({type:"renderparticles",textureId:y,vertexCount:b,vertices:te,viewMatrix:Q,buffer:{vbo:I,step:A,attribs:xi},enabled:!0,expanded:!1,uuid:pt()}),He+=b,Re(w,n);break}}};window.addEventListener("message",async w=>{if(typeof w.data=="object"&&w.data.type==="pluginMessage"){if(typeof w.data.content!="object"||!i(oe)||!i(h))return;dr(i(oe),i(h),w.data.content)}}),ga(()=>(i(oe),i(h),i(Ke),i(c),i(s),i(H),i(k),i(ie)),()=>{if(i(oe)&&(Xt(oe,i(oe).width=Oe),Xt(oe,i(oe).height=ke),M(h,i(oe).getContext("webgl2")),i(h))){M(Ge,i(h).getParameter(i(h).MAX_VERTEX_ATTRIBS)),M(Ke,i(h).createTexture()),i(h).bindTexture(i(h).TEXTURE_2D,i(Ke));const w=new Uint8Array([255,255,255,255]);i(h).texImage2D(i(h).TEXTURE_2D,0,i(h).RGBA,1,1,0,i(h).RGBA,i(h).UNSIGNED_BYTE,w);const n=Je(i(h),i(h).VERTEX_SHADER,ui,"2D vertex shader"),d=Je(i(h),i(h).FRAGMENT_SHADER,si,"2D fragment shader"),p=Je(i(h),i(h).VERTEX_SHADER,fi,"3D vertex shader"),j=Je(i(h),i(h).VERTEX_SHADER,li,"3D anim vertex shader"),b=Je(i(h),i(h).FRAGMENT_SHADER,ci,"3D fragment shader"),y=Je(i(h),i(h).VERTEX_SHADER,di,"particle vertex shader"),C=Je(i(h),i(h).VERTEX_SHADER,_i,"checkers vertex shader"),A=Je(i(h),i(h).FRAGMENT_SHADER,vi,"checkers fragment shader");M(c,Tt(i(h),n,d,"2D program")),M(v,i(h).getUniformLocation(i(c),"atlas_wh_screen_wh")),M(l,i(h).getUniformLocation(i(c),"tex")),M(s,Tt(i(h),p,b,"3D program")),M(_,i(h).getUniformLocation(i(s),"modelmatrix")),M(x,i(h).getUniformLocation(i(s),"viewmatrix")),M(f,i(h).getUniformLocation(i(s),"projmatrix")),M(m,i(h).getUniformLocation(i(s),"atlas_wh")),M(g,i(h).getUniformLocation(i(s),"tex")),M(H,Tt(i(h),j,b,"3D animated program")),M(W,i(h).getUniformLocation(i(H),"modelmatrix")),M(F,i(h).getUniformLocation(i(H),"viewmatrix")),M(N,i(h).getUniformLocation(i(H),"projmatrix")),M(V,i(h).getUniformLocation(i(H),"atlas_wh")),M(U,i(h).getUniformLocation(i(H),"tex")),M(k,Tt(i(h),y,b,"Particles program")),M(K,i(h).getUniformLocation(i(k),"viewmatrix")),M(G,i(h).getUniformLocation(i(k),"projmatrix")),M(O,i(h).getUniformLocation(i(k),"tex")),M(ae,i(h).getUniformLocation(i(k),"atlas_wh")),M(ie,Tt(i(h),C,A,"Checkers program")),M(_e,i(h).getUniformLocation(i(ie),"screen_wh")),i(h).deleteShader(n),i(h).deleteShader(d),i(h).deleteShader(p),i(h).deleteShader(b),i(h).deleteShader(j),i(h).deleteShader(y),i(h).deleteShader(C),i(h).deleteShader(A),i(h).activeTexture(i(h).TEXTURE0+u),i(h).enable(i(h).SCISSOR_TEST),i(h).disable(i(h).CULL_FACE),i(h).disable(i(h).DEPTH_TEST),i(h).enable(i(h).BLEND),i(h).blendEquationSeparate(i(h).FUNC_ADD,i(h).FUNC_ADD),i(h).depthFunc(i(h).LEQUAL),Re(i(oe),i(h))}}),ba(),Nt();var kt=Zi(),Bt=Ue(kt);ai(Bt,w=>M(oe,w),()=>i(oe));var ge=se(Bt,2);{var Et=w=>{var n=Yi(),d=Ue(n),p=Xe(d);Hi(p,{get data(){return i(t)},set data(b){M(t,b)},$$legacy:!0});var j=se(d,2);j.__click=[zi,_t],J(w,n)},In=(w,n)=>{{var d=p=>{var j=qi();j.__click=[ji,_t],J(p,j)};pe(w,p=>{i(Pe)&&p(d)},n)}};pe(ge,w=>{i(_t)?w(Et):w(In,!1)})}var Pn=se(ge,2);{var Ln=w=>{var n=Ki();n.__click=[Gi,t,Re,oe,h],J(w,n)};pe(Pn,w=>{i(t).selectedTexture&&w(Ln)})}J(e,kt),bt()}cr(["click"]);Wa(Qi,{target:document.body});
