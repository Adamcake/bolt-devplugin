(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(i){if(i.ep)return;i.ep=!0;const u=t(i);fetch(i.href,u)}})();const Fn=!1;var fn=Array.isArray,ma=Array.prototype.indexOf,dn=Array.from,ya=Object.defineProperty,ur=Object.getOwnPropertyDescriptor,Yn=Object.getOwnPropertyDescriptors,Ea=Object.prototype,Aa=Array.prototype,vn=Object.getPrototypeOf,Tn=Object.isExtensible;function Fa(e){return e()}function an(e){for(var n=0;n<e.length;n++)e[n]()}const lt=2,zn=4,Wr=8,_n=16,Ft=32,sr=64,Mr=128,at=256,Pr=512,je=1024,Tt=2048,jt=4096,Et=8192,Xr=16384,Ta=32768,xn=65536,jn=1<<17,Ra=1<<19,qn=1<<20,on=1<<21,Yt=Symbol("$state"),Sa=Symbol("legacy props"),Ba=Symbol("");function Gn(e){return e===this.v}function Ua(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function hn(e){return!Ua(e,this.v)}function Ia(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Da(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $a(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ma(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pa(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ka(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ca(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function La(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Er=!1,Va=!1;function Na(){Er=!0}const pn=1,gn=2,Kn=4,Oa=8,Ha=16,Wa=1,Xa=2,Ya=4,za=8,ja=16,qa=1,Ga=2,Ye=Symbol(),Ka="http://www.w3.org/1999/xhtml";let we=null;function Rn(e){we=e}function Vt(e,n=!1,t){var a=we={p:we,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Er&&!n&&(we.l={s:null,u:null,r1:[],r2:wr(!1)}),aa(()=>{a.d=!0})}function Nt(e){const n=we;if(n!==null){const c=n.e;if(c!==null){var t=ce,a=ae;n.e=null;try{for(var i=0;i<c.length;i++){var u=c[i];Lt(u.effect),pt(u.reaction),bn(u.fn)}}finally{Lt(t),pt(a)}}we=n.p,n.m=!0}return{}}function Ar(){return!Er||we!==null&&we.l===null}function Xt(e,n){if(typeof e!="object"||e===null||Yt in e)return e;const t=vn(e);if(t!==Ea&&t!==Aa)return e;var a=new Map,i=fn(e),u=Dt(0),c=ae,p=d=>{var s=ae;pt(c);var v;return v=d(),pt(s),v};return i&&a.set("length",Dt(e.length)),new Proxy(e,{defineProperty(d,s,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&ka();var w=a.get(s);return w===void 0?(w=p(()=>Dt(v.value)),a.set(s,w)):E(w,p(()=>Xt(v.value))),!0},deleteProperty(d,s){var v=a.get(s);if(v===void 0)s in d&&a.set(s,p(()=>Dt(Ye)));else{if(i&&typeof s=="string"){var w=a.get("length"),l=Number(s);Number.isInteger(l)&&l<w.v&&E(w,l)}E(v,Ye),Sn(u)}return!0},get(d,s,v){var m;if(s===Yt)return e;var w=a.get(s),l=s in d;if(w===void 0&&(!l||(m=ur(d,s))!=null&&m.writable)&&(w=p(()=>Dt(Xt(l?d[s]:Ye))),a.set(s,w)),w!==void 0){var g=r(w);return g===Ye?void 0:g}return Reflect.get(d,s,v)},getOwnPropertyDescriptor(d,s){var v=Reflect.getOwnPropertyDescriptor(d,s);if(v&&"value"in v){var w=a.get(s);w&&(v.value=r(w))}else if(v===void 0){var l=a.get(s),g=l==null?void 0:l.v;if(l!==void 0&&g!==Ye)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return v},has(d,s){var g;if(s===Yt)return!0;var v=a.get(s),w=v!==void 0&&v.v!==Ye||Reflect.has(d,s);if(v!==void 0||ce!==null&&(!w||(g=ur(d,s))!=null&&g.writable)){v===void 0&&(v=p(()=>Dt(w?Xt(d[s]):Ye)),a.set(s,v));var l=r(v);if(l===Ye)return!1}return w},set(d,s,v,w){var se;var l=a.get(s),g=s in d;if(i&&s==="length")for(var m=v;m<l.v;m+=1){var M=a.get(m+"");M!==void 0?E(M,Ye):m in d&&(M=p(()=>Dt(Ye)),a.set(m+"",M))}l===void 0?(!g||(se=ur(d,s))!=null&&se.writable)&&(l=p(()=>Dt(void 0)),E(l,p(()=>Xt(v))),a.set(s,l)):(g=l.v!==Ye,E(l,p(()=>Xt(v))));var q=Reflect.getOwnPropertyDescriptor(d,s);if(q!=null&&q.set&&q.set.call(w,v),!g){if(i&&typeof s=="string"){var fe=a.get("length"),de=Number(s);Number.isInteger(de)&&de>=fe.v&&E(fe,de+1)}Sn(u)}return!0},ownKeys(d){r(u);var s=Reflect.ownKeys(d).filter(l=>{var g=a.get(l);return g===void 0||g.v!==Ye});for(var[v,w]of a)w.v!==Ye&&!(v in d)&&s.push(v);return s},setPrototypeOf(){Ca()}})}function Sn(e,n=1){E(e,e.v+n)}const gr=new Map;function wr(e,n){var t={f:0,v:e,reactions:null,equals:Gn,rv:0,wv:0};return t}function Dt(e,n){const t=wr(e);return lo(t),t}function D(e,n=!1){var a;const t=wr(e);return n||(t.equals=hn),Er&&we!==null&&we.l!==null&&((a=we.l).s??(a.s=[])).push(t),t}function Ze(e,n){return E(e,gt(()=>r(e))),n}function E(e,n,t=!1){ae!==null&&!ht&&Ar()&&(ae.f&(lt|_n))!==0&&!(Oe!=null&&Oe.includes(e))&&La();let a=t?Xt(n):n;return br(e,a)}function br(e,n){if(!e.equals(n)){var t=e.v;Fr?gr.set(e,n):gr.set(e,t),e.v=n,e.wv=fa(),Zn(e,Tt),Ar()&&ce!==null&&(ce.f&je)!==0&&(ce.f&(Ft|sr))===0&&(nt===null?co([e]):nt.push(e))}return n}function Zn(e,n){var t=e.reactions;if(t!==null)for(var a=Ar(),i=t.length,u=0;u<i;u++){var c=t[u],p=c.f;(p&Tt)===0&&(!a&&c===ce||(ct(c,n),(p&(je|at))!==0&&((p&lt)!==0?Zn(c,jt):qr(c))))}}let Za=!1;var Bn,Qn,Jn,ea;function Qa(){if(Bn===void 0){Bn=window,Qn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,n=Node.prototype,t=Text.prototype;Jn=ur(n,"firstChild").get,ea=ur(n,"nextSibling").get,Tn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Tn(t)&&(t.__t=void 0)}}function wn(e=""){return document.createTextNode(e)}function kr(e){return Jn.call(e)}function Yr(e){return ea.call(e)}function ge(e,n){return kr(e)}function ue(e,n){{var t=kr(e);return t instanceof Comment&&t.data===""?Yr(t):t}}function $(e,n=1,t=!1){let a=e;for(;n--;)a=Yr(a);return a}function Ja(e){e.textContent=""}function mr(e){var n=lt|Tt,t=ae!==null&&(ae.f&lt)!==0?ae:null;return ce===null||t!==null&&(t.f&at)!==0?n|=at:ce.f|=qn,{ctx:we,deps:null,effects:null,equals:Gn,f:n,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??ce}}function Y(e){const n=mr(e);return n.equals=hn,n}function ta(e){var n=e.effects;if(n!==null){e.effects=null;for(var t=0;t<n.length;t+=1)Ct(n[t])}}function eo(e){for(var n=e.parent;n!==null;){if((n.f&lt)===0)return n;n=n.parent}return null}function to(e){var n,t=ce;Lt(eo(e));try{ta(e),n=va(e)}finally{Lt(t)}return n}function ra(e){var n=to(e),t=(kt||(e.f&at)!==0)&&e.deps!==null?jt:je;ct(e,t),e.equals(n)||(e.v=n,e.wv=fa())}function na(e){ce===null&&ae===null&&$a(),ae!==null&&(ae.f&at)!==0&&ce===null&&Da(),Fr&&Ia()}function ro(e,n){var t=n.last;t===null?n.last=n.first=e:(t.next=e,e.prev=t,n.last=e)}function lr(e,n,t,a=!0){var i=ce,u={ctx:we,deps:null,nodes_start:null,nodes_end:null,f:e|Tt,first:null,fn:n,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(t)try{jr(u),u.f|=Ta}catch(d){throw Ct(u),d}else n!==null&&qr(u);var c=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(qn|Mr))===0;if(!c&&a&&(i!==null&&ro(u,i),ae!==null&&(ae.f&lt)!==0)){var p=ae;(p.effects??(p.effects=[])).push(u)}return u}function aa(e){const n=lr(Wr,null,!1);return ct(n,je),n.teardown=e,n}function Un(e){na();var n=ce!==null&&(ce.f&Ft)!==0&&we!==null&&!we.m;if(n){var t=we;(t.e??(t.e=[])).push({fn:e,effect:ce,reaction:ae})}else{var a=bn(e);return a}}function no(e){return na(),cr(e)}function ao(e){const n=lr(sr,e,!0);return(t={})=>new Promise(a=>{t.outro?Cr(n,()=>{Ct(n),a(void 0)}):(Ct(n),a(void 0))})}function bn(e){return lr(zn,e,!1)}function Jr(e,n){var t=we,a={effect:null,ran:!1};t.l.r1.push(a),a.effect=cr(()=>{e(),!a.ran&&(a.ran=!0,E(t.l.r2,!0),gt(n))})}function oo(){var e=we;cr(()=>{if(r(e.l.r2)){for(var n of e.l.r1){var t=n.effect;(t.f&je)!==0&&ct(t,jt),fr(t)&&jr(t),n.ran=!1}e.l.r2.v=!1}})}function cr(e){return lr(Wr,e,!0)}function Je(e,n=[],t=mr){const a=n.map(t);return mn(()=>e(...a.map(r)))}function mn(e,n=0){return lr(Wr|_n|n,e,!0)}function yr(e,n=!0){return lr(Wr|Ft,e,!0,n)}function oa(e){var n=e.teardown;if(n!==null){const t=Fr,a=ae;In(!0),pt(null);try{n.call(null)}finally{In(t),pt(a)}}}function ia(e,n=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var a=t.next;(t.f&sr)!==0?t.parent=null:Ct(t,n),t=a}}function io(e){for(var n=e.first;n!==null;){var t=n.next;(n.f&Ft)===0&&Ct(n),n=t}}function Ct(e,n=!0){var t=!1;if((n||(e.f&Ra)!==0)&&e.nodes_start!==null){for(var a=e.nodes_start,i=e.nodes_end;a!==null;){var u=a===i?null:Yr(a);a.remove(),a=u}t=!0}ia(e,n&&!t),Hr(e,0),ct(e,Xr);var c=e.transitions;if(c!==null)for(const d of c)d.stop();oa(e);var p=e.parent;p!==null&&p.first!==null&&ua(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function ua(e){var n=e.parent,t=e.prev,a=e.next;t!==null&&(t.next=a),a!==null&&(a.prev=t),n!==null&&(n.first===e&&(n.first=a),n.last===e&&(n.last=t))}function Cr(e,n){var t=[];yn(e,t,!0),sa(t,()=>{Ct(e),n&&n()})}function sa(e,n){var t=e.length;if(t>0){var a=()=>--t||n();for(var i of e)i.out(a)}else n()}function yn(e,n,t){if((e.f&Et)===0){if(e.f^=Et,e.transitions!==null)for(const c of e.transitions)(c.is_global||t)&&n.push(c);for(var a=e.first;a!==null;){var i=a.next,u=(a.f&xn)!==0||(a.f&Ft)!==0;yn(a,n,u?t:!1),a=i}}}function Lr(e){la(e,!0)}function la(e,n){if((e.f&Et)!==0){e.f^=Et,(e.f&je)===0&&(e.f^=je),fr(e)&&(ct(e,Tt),qr(e));for(var t=e.first;t!==null;){var a=t.next,i=(t.f&xn)!==0||(t.f&Ft)!==0;la(t,i?n:!1),t=a}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||n)&&u.in()}}let Vr=[];function uo(){var e=Vr;Vr=[],an(e)}function En(e){Vr.length===0&&queueMicrotask(uo),Vr.push(e)}let Ir=!1,un=!1,Nr=null,zt=!1,Fr=!1;function In(e){Fr=e}let Dr=[];let ae=null,ht=!1;function pt(e){ae=e}let ce=null;function Lt(e){ce=e}let Oe=null;function so(e){Oe=e}function lo(e){ae!==null&&ae.f&on&&(Oe===null?so([e]):Oe.push(e))}let Ne=null,Qe=0,nt=null;function co(e){nt=e}let ca=1,Or=0,kt=!1,Pt=null;function fa(){return++ca}function fr(e){var w;var n=e.f;if((n&Tt)!==0)return!0;if((n&jt)!==0){var t=e.deps,a=(n&at)!==0;if(t!==null){var i,u,c=(n&Pr)!==0,p=a&&ce!==null&&!kt,d=t.length;if(c||p){var s=e,v=s.parent;for(i=0;i<d;i++)u=t[i],(c||!((w=u==null?void 0:u.reactions)!=null&&w.includes(s)))&&(u.reactions??(u.reactions=[])).push(s);c&&(s.f^=Pr),p&&v!==null&&(v.f&at)===0&&(s.f^=at)}for(i=0;i<d;i++)if(u=t[i],fr(u)&&ra(u),u.wv>e.wv)return!0}(!a||ce!==null&&!kt)&&ct(e,je)}return!1}function fo(e,n){for(var t=n;t!==null;){if((t.f&Mr)!==0)try{t.fn(e);return}catch{t.f^=Mr}t=t.parent}throw Ir=!1,e}function vo(e){return(e.f&Xr)===0&&(e.parent===null||(e.parent.f&Mr)===0)}function zr(e,n,t,a){if(Ir){if(t===null&&(Ir=!1),vo(n))throw e;return}t!==null&&(Ir=!0);{fo(e,n);return}}function da(e,n,t=!0){var a=e.reactions;if(a!==null)for(var i=0;i<a.length;i++){var u=a[i];Oe!=null&&Oe.includes(e)||((u.f&lt)!==0?da(u,n,!1):n===u&&(t?ct(u,Tt):(u.f&je)!==0&&ct(u,jt),qr(u)))}}function va(e){var g;var n=Ne,t=Qe,a=nt,i=ae,u=kt,c=Oe,p=we,d=ht,s=e.f;Ne=null,Qe=0,nt=null,kt=(s&at)!==0&&(ht||!zt||ae===null),ae=(s&(Ft|sr))===0?e:null,Oe=null,Rn(e.ctx),ht=!1,Or++,e.f|=on;try{var v=(0,e.fn)(),w=e.deps;if(Ne!==null){var l;if(Hr(e,Qe),w!==null&&Qe>0)for(w.length=Qe+Ne.length,l=0;l<Ne.length;l++)w[Qe+l]=Ne[l];else e.deps=w=Ne;if(!kt)for(l=Qe;l<w.length;l++)((g=w[l]).reactions??(g.reactions=[])).push(e)}else w!==null&&Qe<w.length&&(Hr(e,Qe),w.length=Qe);if(Ar()&&nt!==null&&!ht&&w!==null&&(e.f&(lt|jt|Tt))===0)for(l=0;l<nt.length;l++)da(nt[l],e);return i!==null&&(Or++,nt!==null&&(a===null?a=nt:a.push(...nt))),v}finally{Ne=n,Qe=t,nt=a,ae=i,kt=u,Oe=c,Rn(p),ht=d,e.f^=on}}function _o(e,n){let t=n.reactions;if(t!==null){var a=ma.call(t,e);if(a!==-1){var i=t.length-1;i===0?t=n.reactions=null:(t[a]=t[i],t.pop())}}t===null&&(n.f&lt)!==0&&(Ne===null||!Ne.includes(n))&&(ct(n,jt),(n.f&(at|Pr))===0&&(n.f^=Pr),ta(n),Hr(n,0))}function Hr(e,n){var t=e.deps;if(t!==null)for(var a=n;a<t.length;a++)_o(e,t[a])}function jr(e){var n=e.f;if((n&Xr)===0){ct(e,je);var t=ce,a=we,i=zt;ce=e,zt=!0;try{(n&_n)!==0?io(e):ia(e),oa(e);var u=va(e);e.teardown=typeof u=="function"?u:null,e.wv=ca;var c=e.deps,p;Fn&&Va&&e.f&Tt}catch(d){zr(d,e,t,a||e.ctx)}finally{zt=i,ce=t}}}function xo(){try{Ma()}catch(e){if(Nr!==null)zr(e,Nr,null);else throw e}}function ho(){var e=zt;try{var n=0;for(zt=!0;Dr.length>0;){n++>1e3&&xo();var t=Dr,a=t.length;Dr=[];for(var i=0;i<a;i++){var u=go(t[i]);po(u)}}}finally{un=!1,zt=e,Nr=null,gr.clear()}}function po(e){var n=e.length;if(n!==0)for(var t=0;t<n;t++){var a=e[t];if((a.f&(Xr|Et))===0)try{fr(a)&&(jr(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?ua(a):a.fn=null))}catch(i){zr(i,a,null,a.ctx)}}}function qr(e){un||(un=!0,queueMicrotask(ho));for(var n=Nr=e;n.parent!==null;){n=n.parent;var t=n.f;if((t&(sr|Ft))!==0){if((t&je)===0)return;n.f^=je}}Dr.push(n)}function go(e){for(var n=[],t=e;t!==null;){var a=t.f,i=(a&(Ft|sr))!==0,u=i&&(a&je)!==0;if(!u&&(a&Et)===0){if((a&zn)!==0)n.push(t);else if(i)t.f^=je;else{var c=ae;try{ae=t,fr(t)&&jr(t)}catch(s){zr(s,t,null,t.ctx)}finally{ae=c}}var p=t.first;if(p!==null){t=p;continue}}var d=t.parent;for(t=t.next;t===null&&d!==null;)t=d.next,d=d.parent}return n}function r(e){var n=e.f,t=(n&lt)!==0;if(Pt!==null&&Pt.add(e),ae!==null&&!ht){if(!(Oe!=null&&Oe.includes(e))){var a=ae.deps;e.rv<Or&&(e.rv=Or,Ne===null&&a!==null&&a[Qe]===e?Qe++:Ne===null?Ne=[e]:(!kt||!Ne.includes(e))&&Ne.push(e))}}else if(t&&e.deps===null&&e.effects===null){var i=e,u=i.parent;u!==null&&(u.f&at)===0&&(i.f^=at)}return t&&(i=e,fr(i)&&ra(i)),Fr&&gr.has(e)?gr.get(e):e.v}function wo(e){var n=Pt;Pt=new Set;var t=Pt,a;try{if(gt(e),n!==null)for(a of Pt)n.add(a)}finally{Pt=n}return t}function ze(e){var n=wo(()=>gt(e));for(var t of n)if((t.f&jn)!==0)for(const a of t.deps||[])(a.f&lt)===0&&br(a,a.v);else br(t,t.v)}function gt(e){var n=ht;try{return ht=!0,e()}finally{ht=n}}const bo=-7169;function ct(e,n){e.f=e.f&bo|n}function mo(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Yt in e)sn(e);else if(!Array.isArray(e))for(let n in e){const t=e[n];typeof t=="object"&&t&&Yt in t&&sn(t)}}}function sn(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let a in e)try{sn(e[a],n)}catch{}const t=vn(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const a=Yn(t);for(let i in a){const u=a[i].get;if(u)try{u.call(e)}catch{}}}}}const yo=["touchstart","touchmove"];function Eo(e){return yo.includes(e)}let Dn=!1;function Ao(){Dn||(Dn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var n;if(!e.defaultPrevented)for(const t of e.target.elements)(n=t.__on_r)==null||n.call(t)})},{capture:!0}))}function _a(e){var n=ae,t=ce;pt(null),Lt(null);try{return e()}finally{pt(n),Lt(t)}}function xa(e,n,t,a=t){e.addEventListener(n,()=>_a(t));const i=e.__on_r;i?e.__on_r=()=>{i(),a(!0)}:e.__on_r=()=>a(!0),Ao()}const ha=new Set,ln=new Set;function Fo(e,n,t,a={}){function i(u){if(a.capture||pr.call(n,u),!u.cancelBubble)return _a(()=>t==null?void 0:t.call(this,u))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?En(()=>{n.addEventListener(e,i,a)}):n.addEventListener(e,i,a),i}function Ve(e,n,t,a,i){var u={capture:a,passive:i},c=Fo(e,n,t,u);(n===document.body||n===window||n===document)&&aa(()=>{n.removeEventListener(e,c,u)})}function qt(e){for(var n=0;n<e.length;n++)ha.add(e[n]);for(var t of ln)t(e)}function pr(e){var de;var n=this,t=n.ownerDocument,a=e.type,i=((de=e.composedPath)==null?void 0:de.call(e))||[],u=i[0]||e.target,c=0,p=e.__root;if(p){var d=i.indexOf(p);if(d!==-1&&(n===document||n===window)){e.__root=n;return}var s=i.indexOf(n);if(s===-1)return;d<=s&&(c=d)}if(u=i[c]||e.target,u!==n){ya(e,"currentTarget",{configurable:!0,get(){return u||t}});var v=ae,w=ce;pt(null),Lt(null);try{for(var l,g=[];u!==null;){var m=u.assignedSlot||u.parentNode||u.host||null;try{var M=u["__"+a];if(M!=null&&(!u.disabled||e.target===u))if(fn(M)){var[q,...fe]=M;q.apply(u,[e,...fe])}else M.call(u,e)}catch(se){l?g.push(se):l=se}if(e.cancelBubble||m===n||m===null)break;u=m}if(l){for(let se of g)queueMicrotask(()=>{throw se});throw l}}finally{e.__root=n,delete e.currentTarget,pt(v),Lt(w)}}}function To(e){var n=document.createElement("template");return n.innerHTML=e,n.content}function cn(e,n){var t=ce;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=n)}function N(e,n){var t=(n&qa)!==0,a=(n&Ga)!==0,i,u=!e.startsWith("<!>");return()=>{i===void 0&&(i=To(u?e:"<!>"+e),t||(i=kr(i)));var c=a||Qn?document.importNode(i,!0):i.cloneNode(!0);if(t){var p=kr(c),d=c.lastChild;cn(p,d)}else cn(c,c);return c}}function Br(){var e=document.createDocumentFragment(),n=document.createComment(""),t=wn();return e.append(n,t),cn(n,t),e}function C(e,n){e!==null&&e.before(n)}function me(e,n){var t=n==null?"":typeof n=="object"?n+"":n;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function Ro(e,n){return So(e,n)}const nr=new Map;function So(e,{target:n,anchor:t,props:a={},events:i,context:u,intro:c=!0}){Qa();var p=new Set,d=w=>{for(var l=0;l<w.length;l++){var g=w[l];if(!p.has(g)){p.add(g);var m=Eo(g);n.addEventListener(g,pr,{passive:m});var M=nr.get(g);M===void 0?(document.addEventListener(g,pr,{passive:m}),nr.set(g,1)):nr.set(g,M+1)}}};d(dn(ha)),ln.add(d);var s=void 0,v=ao(()=>{var w=t??n.appendChild(wn());return yr(()=>{if(u){Vt({});var l=we;l.c=u}i&&(a.$$events=i),s=e(w,a)||{},u&&Nt()}),()=>{var m;for(var l of p){n.removeEventListener(l,pr);var g=nr.get(l);--g===0?(document.removeEventListener(l,pr),nr.delete(l)):nr.set(l,g)}ln.delete(d),w!==t&&((m=w.parentNode)==null||m.removeChild(w))}});return Bo.set(s,v),s}let Bo=new WeakMap;function te(e,n,[t,a]=[0,0]){var i=e,u=null,c=null,p=Ye,d=t>0?xn:0,s=!1;const v=(l,g=!0)=>{s=!0,w(g,l)},w=(l,g)=>{p!==(p=l)&&(p?(u?Lr(u):g&&(u=yr(()=>g(i))),c&&Cr(c,()=>{c=null})):(c?Lr(c):g&&(c=yr(()=>g(i,[t+1,a]))),u&&Cr(u,()=>{u=null})))};mn(()=>{s=!1,n(v),s||w(null,null)},d)}function mt(e,n){return n}function Uo(e,n,t,a){for(var i=[],u=n.length,c=0;c<u;c++)yn(n[c].e,i,!0);var p=u>0&&i.length===0&&t!==null;if(p){var d=t.parentNode;Ja(d),d.append(t),a.clear(),Mt(e,n[0].prev,n[u-1].next)}sa(i,()=>{for(var s=0;s<u;s++){var v=n[s];p||(a.delete(v.k),Mt(e,v.prev,v.next)),Ct(v.e,!p)}})}function yt(e,n,t,a,i,u=null){var c=e,p={flags:n,items:new Map,first:null},d=(n&Kn)!==0;if(d){var s=e;c=s.appendChild(wn())}var v=null,w=!1,l=Y(()=>{var g=t();return fn(g)?g:g==null?[]:dn(g)});mn(()=>{var g=r(l),m=g.length;w&&m===0||(w=m===0,Io(g,p,c,i,n,a,t),u!==null&&(m===0?v?Lr(v):v=yr(()=>u(c)):v!==null&&Cr(v,()=>{v=null})),r(l))})}function Io(e,n,t,a,i,u,c){var Ot,Rt,Zt,St;var p=(i&Oa)!==0,d=(i&(pn|gn))!==0,s=e.length,v=n.items,w=n.first,l=w,g,m=null,M,q=[],fe=[],de,se,O,H;if(p)for(H=0;H<s;H+=1)de=e[H],se=u(de,H),O=v.get(se),O!==void 0&&((Ot=O.a)==null||Ot.measure(),(M??(M=new Set)).add(O));for(H=0;H<s;H+=1){if(de=e[H],se=u(de,H),O=v.get(se),O===void 0){var J=l?l.e.nodes_start:t;m=$o(J,n,m,m===null?n.first:m.next,de,se,H,a,i,c),v.set(se,m),q=[],fe=[],l=m.next;continue}if(d&&Do(O,de,H,i),(O.e.f&Et)!==0&&(Lr(O.e),p&&((Rt=O.a)==null||Rt.unfix(),(M??(M=new Set)).delete(O))),O!==l){if(g!==void 0&&g.has(O)){if(q.length<fe.length){var K=fe[0],Z;m=K.prev;var ve=q[0],Ie=q[q.length-1];for(Z=0;Z<q.length;Z+=1)$n(q[Z],K,t);for(Z=0;Z<fe.length;Z+=1)g.delete(fe[Z]);Mt(n,ve.prev,Ie.next),Mt(n,m,ve),Mt(n,Ie,K),l=K,m=Ie,H-=1,q=[],fe=[]}else g.delete(O),$n(O,l,t),Mt(n,O.prev,O.next),Mt(n,O,m===null?n.first:m.next),Mt(n,m,O),m=O;continue}for(q=[],fe=[];l!==null&&l.k!==se;)(l.e.f&Et)===0&&(g??(g=new Set)).add(l),fe.push(l),l=l.next;if(l===null)continue;O=l}q.push(O),m=O,l=O.next}if(l!==null||g!==void 0){for(var qe=g===void 0?[]:dn(g);l!==null;)(l.e.f&Et)===0&&qe.push(l),l=l.next;var ft=qe.length;if(ft>0){var Kt=(i&Kn)!==0&&s===0?t:null;if(p){for(H=0;H<ft;H+=1)(Zt=qe[H].a)==null||Zt.measure();for(H=0;H<ft;H+=1)(St=qe[H].a)==null||St.fix()}Uo(n,qe,Kt,v)}}p&&En(()=>{var Ht;if(M!==void 0)for(O of M)(Ht=O.a)==null||Ht.apply()}),ce.first=n.first&&n.first.e,ce.last=m&&m.e}function Do(e,n,t,a){(a&pn)!==0&&br(e.v,n),(a&gn)!==0?br(e.i,t):e.i=t}function $o(e,n,t,a,i,u,c,p,d,s){var v=(d&pn)!==0,w=(d&Ha)===0,l=v?w?D(i):wr(i):i,g=(d&gn)===0?c:wr(c),m={i:g,v:l,k:u,a:null,e:null,prev:t,next:a};try{return m.e=yr(()=>p(e,l,g,s),Za),m.e.prev=t&&t.e,m.e.next=a&&a.e,t===null?n.first=m:(t.next=m,t.e.next=m.e),a!==null&&(a.prev=m,a.e.prev=m.e),m}finally{}}function $n(e,n,t){for(var a=e.next?e.next.e.nodes_start:t,i=n?n.e.nodes_start:t,u=e.e.nodes_start;u!==a;){var c=Yr(u);i.before(u),u=c}}function Mt(e,n,t){n===null?e.first=t:(n.next=t,n.e.next=t&&t.e),t!==null&&(t.prev=n,t.e.prev=n&&n.e)}function pa(e){var n,t,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(t=pa(e[n]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function Mo(){for(var e,n,t=0,a="",i=arguments.length;t<i;t++)(e=arguments[t])&&(n=pa(e))&&(a&&(a+=" "),a+=n);return a}function Po(e){return typeof e=="object"?Mo(e):e??""}function ko(e,n,t){var a=e==null?"":""+e;return a===""?null:a}function Mn(e,n,t,a,i,u){var c=e.__className;if(c!==t){var p=ko(t);p==null?e.removeAttribute("class"):e.className=p,e.__className=t}return u}const Co=Symbol("is custom element"),Lo=Symbol("is html");function ar(e,n,t,a){var i=Vo(e);i[n]!==(i[n]=t)&&(n==="loading"&&(e[Ba]=t),t==null?e.removeAttribute(n):typeof t!="string"&&No(e).includes(n)?e[n]=t:e.setAttribute(n,t))}function Vo(e){return e.__attributes??(e.__attributes={[Co]:e.nodeName.includes("-"),[Lo]:e.namespaceURI===Ka})}var Pn=new Map;function No(e){var n=Pn.get(e.nodeName);if(n)return n;Pn.set(e.nodeName,n=[]);for(var t,a=e,i=Element.prototype;i!==a;){t=Yn(a);for(var u in t)t[u].set&&n.push(u);a=vn(a)}return n}function $r(e,n,t=n){var a=Ar();xa(e,"input",i=>{var u=i?e.defaultValue:e.value;if(u=en(e)?tn(u):u,t(u),a&&u!==(u=n())){var c=e.selectionStart,p=e.selectionEnd;e.value=u??"",p!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(p,e.value.length))}}),gt(n)==null&&e.value&&t(en(e)?tn(e.value):e.value),cr(()=>{var i=n();en(e)&&i===tn(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ga(e,n,t=n){xa(e,"change",a=>{var i=a?e.defaultChecked:e.checked;t(i)}),gt(n)==null&&t(e.checked),cr(()=>{var a=n();e.checked=!!a})}function en(e){var n=e.type;return n==="number"||n==="range"}function tn(e){return e===""?null:+e}function kn(e,n){return e===n||(e==null?void 0:e[Yt])===n}function wa(e={},n,t,a){return bn(()=>{var i,u;return cr(()=>{i=u,u=[],gt(()=>{e!==t(...u)&&(n(e,...u),i&&kn(t(...i),e)&&n(null,...i))})}),()=>{En(()=>{u&&kn(t(...u),e)&&n(null,...u)})}}),e}function Gt(e=!1){const n=we,t=n.l.u;if(!t)return;let a=()=>mo(n.s);if(e){let i=0,u={};const c=mr(()=>{let p=!1;const d=n.s;for(const s in d)d[s]!==u[s]&&(u[s]=d[s],p=!0);return p&&i++,i});a=()=>r(c)}t.b.length&&no(()=>{Cn(n,a),an(t.b)}),Un(()=>{const i=gt(()=>t.m.map(Fa));return()=>{for(const u of i)typeof u=="function"&&u()}}),t.a.length&&Un(()=>{Cn(n,a),an(t.a)})}function Cn(e,n){if(e.l.s)for(const t of e.l.s)r(t);n()}let Ur=!1;function Oo(e){var n=Ur;try{return Ur=!1,[e(),Ur]}finally{Ur=n}}function Ln(e){var n;return((n=e.ctx)==null?void 0:n.d)??!1}function Ue(e,n,t,a){var K;var i=(t&Wa)!==0,u=!Er||(t&Xa)!==0,c=(t&za)!==0,p=(t&ja)!==0,d=!1,s;c?[s,d]=Oo(()=>e[n]):s=e[n];var v=Yt in e||Sa in e,w=c&&(((K=ur(e,n))==null?void 0:K.set)??(v&&n in e&&(Z=>e[n]=Z)))||void 0,l=a,g=!0,m=!1,M=()=>(m=!0,g&&(g=!1,p?l=gt(a):l=a),l);s===void 0&&a!==void 0&&(w&&u&&Pa(),s=M(),w&&w(s));var q;if(u)q=()=>{var Z=e[n];return Z===void 0?M():(g=!0,m=!1,Z)};else{var fe=(i?mr:Y)(()=>e[n]);fe.f|=jn,q=()=>{var Z=r(fe);return Z!==void 0&&(l=void 0),Z===void 0?l:Z}}if((t&Ya)===0)return q;if(w){var de=e.$$legacy;return function(Z,ve){return arguments.length>0?((!u||!ve||de||d)&&w(ve?q():Z),Z):q()}}var se=!1,O=!1,H=D(s),J=mr(()=>{var Z=q(),ve=r(H);return se?(se=!1,O=!0,ve):(O=!1,H.v=Z)});return c&&r(J),i||(J.equals=hn),function(Z,ve){if(Pt!==null&&(se=O,q(),r(H)),arguments.length>0){const Ie=ve?r(J):u&&c?Xt(Z):Z;if(!J.equals(Ie)){if(se=!0,E(H,Ie),m&&l!==void 0&&(l=Ie),Ln(J))return Z;gt(()=>r(J))}return Z}return Ln(J)?J.v:r(J)}}const Ho="5";var Xn;typeof window<"u"&&((Xn=window.__svelte??(window.__svelte={})).v??(Xn.v=new Set)).add(Ho);Na();const Wo=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,Xo=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,Yo=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,zo=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,jo=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,qo=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,Go=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,Ko=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,or=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],Vn=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],Zo=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],Qo=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],Jo=[{count:2,offset:0}],$t=(e,n,t,a)=>{const i=e.createShader(n);if(!i)throw new Error(`failed to create shader '${a}'`);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(i);throw new Error(`compilation error in shader '${a}':
${u}`)}return i},hr=(e,n,t,a)=>{const i=e.createProgram();if(!i)throw new Error(`failed to create program '${a}'`);if(e.attachShader(i,n),e.attachShader(i,t),e.linkProgram(i),e.detachShader(i,n),e.detachShader(i,t),!e.getProgramParameter(i,e.LINK_STATUS)){const u=e.getProgramInfoLog(i);throw new Error(`link error in program '${a}':
${u}`)}return i};function*ei(e,n){let t=0;for(;!(t>e.length);){const a=t+n;yield e.slice(t,a),t=a}}function*ti(e,n){let t=0;for(;;){const a=t+n;if(a>e.length)break;yield e.slice(t,a),t=a}}function rn(e,n,t,a){const i=n*2,u=e.map(t);return u.length<i?u:ei(u,n).map(c=>[...c]).map(a).toArray()}function At(e){return Math.round(e*255)}let xt=null;const ri=(e,n,t,a)=>{xt={value:e,level:n,draggedID:t,set:a}},ni=()=>{xt=null},ai=(e,n,t)=>{!xt||xt.level!==e||xt.draggedID===n||(xt.set&&(xt.set(xt.value),xt.set=null),t(xt.value))};var oi=(e,n)=>n(!1),ii=N('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),ui=(e,n)=>n(!0),si=N('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),li=N('<input type="checkbox">'),ci=N("<!> <!> <label> </label> <br>",1);function Le(e,n){Vt(n,!1);let t=Ue(n,"expanded",12),a=Ue(n,"id",8),i=Ue(n,"text",8),u=Ue(n,"checked",12,null),c=Ue(n,"level",8),p=Ue(n,"onexpandedchange",8,null),d=Ue(n,"oncheckedchange",8,null);const s=J=>{t(J),p()&&p()()},v=J=>{u(J),d()&&d()()},w=()=>ri(!u(),c(),a(),v),l=()=>ai(c(),a(),v),g=ni;Gt();var m=ci(),M=ue(m);{var q=J=>{var K=ii();K.__click=[oi,s],Je(()=>ar(K,"id",u()===null?a():null)),C(J,K)},fe=J=>{var K=si();K.__click=[ui,s],Je(()=>ar(K,"id",u()===null?a():null)),C(J,K)};te(M,J=>{t()?J(q):J(fe,!1)})}var de=$(M,2);{var se=J=>{var K=li();ar(K,"draggable",!0),K.__change=function(...Z){var ve;(ve=d())==null||ve.apply(this,Z)},Je(()=>ar(K,"id",a())),Ve("dragstart",K,w),Ve("dragenter",K,l),Ve("dragend",K,g),ga(K,u),C(J,K)};te(de,J=>{u()!==null&&J(se)})}var O=$(de,2);ar(O,"draggable",!0),O.__change=function(...J){var K;(K=d())==null||K.apply(this,J)};var H=ge(O);Je(()=>{ar(O,"for",a()),me(H,i())}),Ve("dragstart",O,w),Ve("dragenter",O,l),Ve("dragend",O,g),C(e,m),Nt()}qt(["click","change"]);var fi=(e,n,t)=>n()(t()),di=N('<button class="px-1 bg-gray-200 hover:bg-gray-100">view image</button> <br>',1),vi=N('<div class="ml-2 w-full"><!> <br> <br> <br> <br></div>');function Nn(e,n){Vt(n,!1);let t=Ue(n,"image",8),a=Ue(n,"view",8,null);Gt();var i=vi(),u=ge(i);{var c=w=>{var l=di(),g=ue(l);g.__click=[fi,a,t],C(w,l)};te(u,w=>{a()&&w(c)})}var p=$(u),d=$(p,2),s=$(d,2),v=$(s,2);Je((w,l,g,m)=>{me(p,` screen: ${t().x??""},${t().y??""}
  ${t().w??""}x${t().h??""} `),me(d,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),me(s,` rgb: ${w??""}, ${l??""}, ${g??""} `),me(v,` alpha: ${m??""} `)},[()=>At(t().r),()=>At(t().g),()=>At(t().b),()=>t().a.toPrecision(4)],Y),C(e,i),Nt()}qt(["click"]);var _i=(e,n,t)=>n()(t()),xi=N('<button class="px-1 bg-gray-200 hover:bg-gray-100">view texture</button> <br>',1),hi=N(" <br>",1),pi=N('<div class="ml-2 w-full"><!> <!> <br> <br> <br> <br></div>');function On(e,n){Vt(n,!1);let t=Ue(n,"vertex",8),a=Ue(n,"view",8,null);Gt();var i=pi(),u=ge(i);{var c=g=>{var m=xi(),M=ue(m);M.__click=[_i,a,t],C(g,m)};te(u,g=>{a()&&g(c)})}var p=$(u,2);{var d=g=>{var m=hi(),M=ue(m);Je(()=>me(M,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `)),C(g,m)};te(p,g=>{t().modelpoint&&g(d)})}var s=$(p),v=$(s,2),w=$(v,2),l=$(w,2);Je((g,m,M,q,fe,de)=>{me(s,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),me(v,` uv: ${g??""}, ${m??""} `),me(w,` rgb: ${M??""}, ${q??""}, ${fe??""} `),me(l,` alpha: ${de??""} `)},[()=>t().u.toPrecision(4),()=>t().v.toPrecision(4),()=>At(t().r),()=>At(t().g),()=>At(t().b),()=>t().a.toPrecision(4)],Y),C(e,i),Nt()}qt(["click"]);var gi=N('<div class="ml-2 w-full"> <br> <br> <br></div>');function Hn(e,n){Vt(n,!1);let t=Ue(n,"vertex",8);Gt();var a=gi(),i=ge(a),u=$(i,2),c=$(u,2);Je((p,d,s,v)=>{me(i,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `),me(u,` rgb: ${p??""}, ${d??""}, ${s??""} `),me(c,` alpha: ${v??""} `)},[()=>At(t().r),()=>At(t().g),()=>At(t().b),()=>t().a.toPrecision(4)],Y),C(e,a),Nt()}var wi=N("<div> </div>"),bi=(e,n,t)=>{const a=n().textureId,i=t().textures[a];t(t().selectedTextureId=a.toString(),!0),t(t().selectedTexture=i,!0),t(t().textureBoundX=0,!0),t(t().textureBoundY=0,!0),t(t().textureBoundW=i.width,!0),t(t().textureBoundH=i.height,!0),t(t().textureViewX=0,!0),t(t().textureViewY=0,!0),t(t().textureViewScale=100,!0),t().redraw()},mi=N('<button class="px-1 bg-gray-200 hover:bg-gray-100"> </button> <br>',1),yi=N("<!> <!>",1),Ei=N('<div class="ml-1"></div>'),Ai=N("<!> <!>",1),Fi=N("<!> <!>",1),Ti=N('<div class="ml-1"><!></div>'),Ri=N("<!> <!>",1),Si=N("<!> <!>",1),Bi=N('<div class="ml-1"></div>'),Ui=N("<!> <!>",1),Ii=N("<!> <!>",1),Di=N('<div class="ml-1"><!></div>'),$i=N("<!> <!>",1),Mi=N("<!> <!>",1),Pi=N('<div class="ml-1"></div>'),ki=N("<!> <!>",1),Ci=N("<!> <!>",1),Li=N('<div class="ml-1"><!></div>'),Vi=N("<!> <!>",1),Ni=N('<div class="ml-1"><!> <!></div>'),Oi=N(" <br> <!> <!>",1),Hi=N('<div class="ml-3 text-sm"><!> <!> <!> <!> <!></div>');function Wi(e,n){Vt(n,!1);let t=Ue(n,"entity",12),a=Ue(n,"menuData",12),i=Ue(n,"level",8);const u=6,c=100;let p=D(!1),d=D(!1),s=D(!1);function v(R){return"images"in R}function w(R){return"vertices"in R}function l(R){return"vertices"in R}const g=(R,ee)=>{const X=R[0];let xe=X.x,et=X.x,Me=X.y,De=X.y;for(const oe of R)oe.x<xe&&(xe=oe.x),oe.x>et&&(et=oe.x),oe.y<Me&&(Me=oe.y),oe.y>De&&(De=oe.y);return{x:xe,y:Me,w:et-xe,h:De-Me,ax:X.ax,ay:X.ay,aw:X.aw,ah:X.ah,r:X.r,g:X.g,b:X.b,a:X.a,expanded:!1,index:ee}},m=(R,ee)=>{const X=ee*c,xe=X*u;return{images:R,desc:`${X}-${X+R.length-1}`,expanded:!1,vertexRangeStart:xe,vertexRangeEnd:xe+R.length*u}},M=(R,ee)=>({modelpoint:{...R},expanded:!1,index:ee,...R}),q=(R,ee)=>({modelpoint:null,expanded:!1,index:ee,...R}),fe=(R,ee)=>{const X=ee*c;return{vertices:R,desc:`${X}-${X+R.length-1}`,expanded:!1}},de=(R,ee)=>({modelpoint:{...R},expanded:!1,index:ee,...R}),se=(R,ee)=>{const X=ee*c;return{vertices:R,desc:`${X}-${X+R.length-1}`,expanded:!1}},O=(R,ee)=>({vertices:rn(R.vertices,c,de,se),vertexCount:R.vertices.length,expanded:!1,verticesExpanded:!1,index:ee});let H=D(null),J=D(0),K=D(null),Z=D(0),ve=D(null),Ie=D(0);if(t().type==="batch2d"||t().type==="minimap2d"){const R=[...ti(t().vertices,u)];E(J,R.length),E(H,rn(R,c,g,m))}else if(t().vertices){const R=t().type!=="renderparticles"?M:q;E(Z,t().vertices.length),E(K,rn(t().vertices,c,R,fe))}t().models&&(E(Ie,t().models.length),E(ve,t().models.map(O)));const qe=R=>{const ee=t().textureId,X=a().textures[ee];a(a().selectedTextureId=t().uuid,!0),a(a().selectedTexture=X,!0),a(a().textureBoundX=R.ax,!0),a(a().textureBoundY=R.ay,!0),a(a().textureBoundW=R.aw,!0),a(a().textureBoundH=R.ah,!0),a(a().textureViewX=0,!0),a(a().textureViewY=0,!0),a(a().textureViewScale=100,!0),a(a().viewIsWholeAtlas=!1,!0),a().redraw()};Gt();var ft=Hi(),Kt=ge(ft);{var Ot=R=>{var ee=wi(),X=ge(ee);Je(()=>me(X,`animated: ${t().animated??""}`)),C(R,ee)};te(Kt,R=>{typeof t().animated=="boolean"&&R(Ot)})}var Rt=$(Kt,2);{var Zt=R=>{var ee=mi(),X=ue(ee);X.__click=[bi,t,a];var xe=ge(X);Je(()=>me(xe,`texture: #${t().textureId??""}`)),C(R,ee)};te(Rt,R=>{typeof t().textureId=="number"&&R(Zt)})}var St=$(Rt,2);{var Ht=R=>{var ee=Ri(),X=ue(ee);const xe=Y(()=>`${t().uuid}-images2d`),et=Y(()=>`2D images (${r(J)})`);Le(X,{get id(){return r(xe)},get text(){return r(et)},get level(){return i()},get expanded(){return r(p)},set expanded(oe){E(p,oe)},$$legacy:!0});var Me=$(X,2);{var De=oe=>{var Ee=Br(),He=ue(Ee);yt(He,1,()=>r(H),mt,(wt,z,he)=>{var dt=Ti(),ot=ge(dt);{var Ge=_e=>{var be=Ai(),Ae=ue(be),Xe=()=>r(z).images.every(re=>t().enabledVerticesList[re.index*u]),Fe=re=>{for(let le=r(z).vertexRangeStart;le<r(z).vertexRangeEnd;le+=1)t(t().enabledVerticesList[le]=re,!0)};const Pe=Y(()=>`${t().uuid}-images-${r(z).desc}`),Te=Y(()=>`[Images ${r(z).desc}]`),ke=Y(()=>i()+1);Le(Ae,{get checked(){return Xe()},set checked(re){Fe(re)},get oncheckedchange(){return a().redraw},get id(){return r(Pe)},get text(){return r(Te)},get level(){return r(ke)},get expanded(){return r(z).expanded},set expanded(re){r(z).expanded=re,ze(()=>r(H))},$$legacy:!0});var Q=$(Ae,2);{var x=re=>{var le=Ei();yt(le,5,()=>r(z).images,mt,(vt,Ce,bt)=>{var it=yi(),pe=ue(it),er=()=>t().enabledVerticesList[r(Ce).index*u],ut=Se=>{for(let tt=0;tt<u;tt+=1)t(t().enabledVerticesList[r(Ce).index*u+tt]=Se,!0)};const Bt=Y(()=>`${t().uuid}-images-${r(z).desc}-${bt}`),$e=Y(()=>i()+2);Le(pe,{get checked(){return er()},set checked(Se){ut(Se)},get oncheckedchange(){return a().redraw},get id(){return r(Bt)},text:`Image ${he*c+bt}`,get level(){return r($e)},get expanded(){return r(Ce).expanded},set expanded(Se){r(Ce).expanded=Se,ze(()=>(r(H),r(z).images))},$$legacy:!0});var tr=$(pe,2);{var _t=Se=>{Nn(Se,{get image(){return r(Ce)},view:qe})};te(tr,Se=>{r(Ce).expanded&&Se(_t)})}C(vt,it)}),C(re,le)};te(Q,re=>{r(z).expanded&&re(x)})}C(_e,be)},We=_e=>{var be=Fi(),Ae=ue(be),Xe=()=>t().enabledVerticesList[r(z).index*u],Fe=x=>{for(let re=0;re<u;re+=1)t(t().enabledVerticesList[r(z).index*u+re]=x,!0)};const Pe=Y(()=>`${t().uuid}-images-${he}`),Te=Y(()=>i()+1);Le(Ae,{get checked(){return Xe()},set checked(x){Fe(x)},get oncheckedchange(){return a().redraw},get id(){return r(Pe)},text:`Image ${he}`,get level(){return r(Te)},get expanded(){return r(z).expanded},set expanded(x){r(z).expanded=x,ze(()=>r(H))},$$legacy:!0});var ke=$(Ae,2);{var Q=x=>{Nn(x,{get image(){return r(z)},view:qe})};te(ke,x=>{r(z).expanded&&x(Q)})}C(_e,be)};te(ot,_e=>{v(r(z))?_e(Ge):_e(We,!1)})}C(wt,dt)}),C(oe,Ee)};te(Me,oe=>{r(p)&&oe(De)})}C(R,ee)};te(St,R=>{r(H)&&r(J)&&R(Ht)})}var Tr=$(St,2);{var Qt=R=>{var ee=$i(),X=ue(ee);const xe=Y(()=>`${t().uuid}-vertices3d`),et=Y(()=>`3D vertices (${r(Z)})`);Le(X,{get id(){return r(xe)},get text(){return r(et)},get level(){return i()},get expanded(){return r(d)},set expanded(oe){E(d,oe)},$$legacy:!0});var Me=$(X,2);{var De=oe=>{var Ee=Br(),He=ue(Ee);yt(He,1,()=>r(K),mt,(wt,z,he)=>{var dt=Di(),ot=ge(dt);{var Ge=_e=>{var be=Ui(),Ae=ue(be);const Xe=Y(()=>`${t().uuid}-vertices-${r(z).desc}`),Fe=Y(()=>`[Vertices ${r(z).desc}]`),Pe=Y(()=>i()+1);Le(Ae,{get id(){return r(Xe)},get text(){return r(Fe)},get level(){return r(Pe)},get expanded(){return r(z).expanded},set expanded(Q){r(z).expanded=Q,ze(()=>r(K))},$$legacy:!0});var Te=$(Ae,2);{var ke=Q=>{var x=Bi();yt(x,5,()=>r(z).vertices,mt,(re,le,vt)=>{var Ce=Si(),bt=ue(Ce);const it=Y(()=>`${t().uuid}-vertices-${r(z).desc}-${r(le).index}`),pe=Y(()=>`Vertex ${r(le).index}`),er=Y(()=>i()+2);Le(bt,{get id(){return r(it)},get text(){return r(pe)},get level(){return r(er)},get expanded(){return r(le).expanded},set expanded($e){r(le).expanded=$e,ze(()=>(r(K),r(z).vertices))},$$legacy:!0});var ut=$(bt,2);{var Bt=$e=>{On($e,{get vertex(){return r(le)},view:qe})};te(ut,$e=>{r(le).expanded&&$e(Bt)})}C(re,Ce)}),C(Q,x)};te(Te,Q=>{r(z).expanded&&Q(ke)})}C(_e,be)},We=_e=>{var be=Ii(),Ae=ue(be);const Xe=Y(()=>`${t().uuid}-vertices-${r(z).index}`),Fe=Y(()=>`Vertex ${r(z).index}`),Pe=Y(()=>i()+1);Le(Ae,{get id(){return r(Xe)},get text(){return r(Fe)},get level(){return r(Pe)},get expanded(){return r(z).expanded},set expanded(Q){r(z).expanded=Q,ze(()=>r(K))},$$legacy:!0});var Te=$(Ae,2);{var ke=Q=>{On(Q,{get vertex(){return r(z)},view:qe})};te(Te,Q=>{r(z).expanded&&Q(ke)})}C(_e,be)};te(ot,_e=>{w(r(z))?_e(Ge):_e(We,!1)})}C(wt,dt)}),C(oe,Ee)};te(Me,oe=>{r(d)&&oe(De)})}C(R,ee)};te(Tr,R=>{r(K)&&r(Z)&&R(Qt)})}var Jt=$(Tr,2);{var Rr=R=>{var ee=Oi(),X=ue(ee),xe=$(X,3);const et=Y(()=>`${t().uuid}-models`),Me=Y(()=>`Models (${r(Ie)})`);Le(xe,{get id(){return r(et)},get text(){return r(Me)},get level(){return i()},get expanded(){return r(s)},set expanded(Ee){E(s,Ee)},$$legacy:!0});var De=$(xe,2);{var oe=Ee=>{var He=Br(),wt=ue(He);yt(wt,1,()=>r(ve),mt,(z,he,dt)=>{var ot=Ni(),Ge=ge(ot);const We=Y(()=>`${t().uuid}-models`),_e=Y(()=>`Model ${r(he).index}`),be=Y(()=>i()+1);Le(Ge,{get id(){return r(We)},get text(){return r(_e)},get level(){return r(be)},get expanded(){return r(he).expanded},set expanded(Fe){r(he).expanded=Fe,ze(()=>r(ve))},$$legacy:!0});var Ae=$(Ge,2);{var Xe=Fe=>{var Pe=Vi(),Te=ue(Pe);const ke=Y(()=>`${t().uuid}-vertices`),Q=Y(()=>`Vertices (${r(he).vertexCount})`),x=Y(()=>i()+2);Le(Te,{get id(){return r(ke)},get text(){return r(Q)},get level(){return r(x)},get expanded(){return r(he).verticesExpanded},set expanded(vt){r(he).verticesExpanded=vt,ze(()=>r(ve))},$$legacy:!0});var re=$(Te,2);{var le=vt=>{var Ce=Br(),bt=ue(Ce);yt(bt,1,()=>r(he).vertices,mt,(it,pe,er)=>{var ut=Li(),Bt=ge(ut);{var $e=_t=>{var Se=ki(),tt=ue(Se);const dr=Y(()=>`${t().uuid}-vertices-${r(pe).desc}`),vr=Y(()=>`[Vertices ${r(pe).desc}]`),_r=Y(()=>i()+3);Le(tt,{get id(){return r(dr)},get text(){return r(vr)},get level(){return r(_r)},get expanded(){return r(pe).expanded},set expanded(f){r(pe).expanded=f,ze(()=>(r(ve),r(he).vertices))},$$legacy:!0});var h=$(tt,2);{var o=f=>{var _=Pi();yt(_,5,()=>r(pe).vertices,mt,(G,y,A)=>{var I=Mi(),T=ue(I);const P=Y(()=>`${t().uuid}-vertices-${r(pe).desc}-${r(y).index}`),L=Y(()=>`Vertex ${r(y).index}`),j=Y(()=>i()+4);Le(T,{get id(){return r(P)},get text(){return r(L)},get level(){return r(j)},get expanded(){return r(y).expanded},set expanded(b){r(y).expanded=b,ze(()=>(r(ve),r(he).vertices,r(pe).vertices))},$$legacy:!0});var F=$(T,2);{var V=b=>{Hn(b,{get vertex(){return r(y)}})};te(F,b=>{r(y).expanded&&b(V)})}C(G,I)}),C(f,_)};te(h,f=>{r(pe).expanded&&f(o)})}C(_t,Se)},tr=_t=>{var Se=Ci(),tt=ue(Se);const dr=Y(()=>`${t().uuid}-${r(he).index}-vertex-${r(pe).index}`),vr=Y(()=>`Vertex ${r(pe).index}`),_r=Y(()=>i()+3);Le(tt,{get id(){return r(dr)},get text(){return r(vr)},get level(){return r(_r)},get expanded(){return r(pe).expanded},set expanded(f){r(pe).expanded=f,ze(()=>(r(ve),r(he).vertices))},$$legacy:!0});var h=$(tt,2);{var o=f=>{Hn(f,{get vertex(){return r(pe)}})};te(h,f=>{r(pe).expanded&&f(o)})}C(_t,Se)};te(Bt,_t=>{l(r(pe))?_t($e):_t(tr,!1)})}C(it,ut)}),C(vt,Ce)};te(re,vt=>{r(he).verticesExpanded&&vt(le)})}C(Fe,Pe)};te(Ae,Fe=>{r(he).expanded&&Fe(Xe)})}C(z,ot)}),C(Ee,He)};te(De,Ee=>{r(s)&&Ee(oe)})}Je(()=>me(X,`screen: ${t().targetx??""},${t().targety??""}
    ${t().targetw??""}x${t().targeth??""} `)),C(R,ee)};te(Jt,R=>{r(ve)&&r(Ie)&&R(Rr)})}C(e,ft),Nt()}qt(["click"]);var Xi=(e,n,t,a)=>n(t(),a()),Yi=N('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),zi=N("<div><!> <!></div>"),ji=N('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function qi(e,n){Vt(n,!1);let t=Ue(n,"data",12);const a=(d,s)=>{t().selectedTexture===s?t(t().selectedTexture=null,!0):(t(t().selectedTextureId=d,!0),t(t().selectedTexture=s,!0),t(t().textureBoundX=0,!0),t(t().textureBoundY=0,!0),t(t().textureBoundW=s.width,!0),t(t().textureBoundH=s.height,!0),t(t().textureViewX=0,!0),t(t().textureViewY=0,!0),t(t().textureViewScale=100,!0),t(t().viewIsWholeAtlas=!0,!0)),t().redraw()},i=1;Gt();var u=ji(),c=$(ue(u),2);yt(c,1,()=>Object.entries(t().textures),mt,(d,s)=>{let v=()=>r(s)[0],w=()=>r(s)[1];var l=Yi(),g=ge(l);g.__click=[Xi,a,v,w];var m=ge(g);Je(()=>{Mn(g,1,Po(t().selectedTexture===w()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),me(m,`#${v()??""}`)}),C(d,l)});var p=$(c,6);yt(p,1,()=>t().entities,mt,(d,s,v)=>{var w=zi();Mn(w,1,`select-none m-0 border-none w-full ${v&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var l=ge(w);Le(l,{id:`menu${v}`,get text(){return t().entities[v].type},get oncheckedchange(){return t().redraw},level:i,get expanded(){return t().entities[v].expanded},set expanded(M){t().entities[v].expanded=M,ze(()=>t().entities)},get checked(){return t().entities[v].enabled},set checked(M){t().entities[v].enabled=M,ze(()=>t().entities)},$$legacy:!0});var g=$(l,2);{var m=M=>{Wi(M,{level:i+1,get entity(){return t().entities[v]},set entity(q){t().entities[v]=q,ze(()=>t().entities)},get menuData(){return t()},set menuData(q){t(q)},$$legacy:!0})};te(g,M=>{t().entities[v].expanded&&M(m)})}C(d,w)}),C(e,u),Nt()}qt(["click"]);const Be=[];for(let e=0;e<256;++e)Be.push((e+256).toString(16).slice(1));function Gi(e,n=0){return(Be[e[n+0]]+Be[e[n+1]]+Be[e[n+2]]+Be[e[n+3]]+"-"+Be[e[n+4]]+Be[e[n+5]]+"-"+Be[e[n+6]]+Be[e[n+7]]+"-"+Be[e[n+8]]+Be[e[n+9]]+"-"+Be[e[n+10]]+Be[e[n+11]]+Be[e[n+12]]+Be[e[n+13]]+Be[e[n+14]]+Be[e[n+15]]).toLowerCase()}let nn;const Ki=new Uint8Array(16);function Zi(){if(!nn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");nn=crypto.getRandomValues.bind(crypto)}return nn(Ki)}const Qi=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wn={randomUUID:Qi};function ir(e,n,t){var i;if(Wn.randomUUID&&!e)return Wn.randomUUID();e=e||{};const a=e.random??((i=e.rng)==null?void 0:i.call(e))??Zi();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Gi(a)}const Ji=(e,n)=>r(n).select();var eu=(e,n)=>{e.key==="Escape"&&(e.preventDefault(),n(null))},tu=(e,n)=>n(null),ru=N('<div class="absolute backdrop-blur-sm h-full w-full left-0 top-0 m-0 p-12 overflow-none focus-visible:outline-none"><div class="w-full h-full p-4 bg-slate-100 rounded-lg flex flex-col"><textarea class="w-full flex-grow border border-black resize-none rounded-md"></textarea> <button class="w-full h-fit rounded-sm p-2 mt-1 text-xl font-bold bg-blue-500 opacity-90 hover:opacity-100">Select all</button></div></div> <input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 top-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">',1);function nu(e,n){let t=Ue(n,"text",12),a=D();var i=ru(),u=ue(i);u.__keydown=[eu,t];var c=ge(u),p=ge(c);wa(p,v=>E(a,v),()=>r(a));var d=$(p,2);d.__click=[Ji,a];var s=$(u,2);s.__click=[tu,t],$r(p,t),C(e,i)}qt(["keydown","click"]);const au=(e,n,t,a,i,u,c,p)=>{const d=r(n).selectedTexture;if(!d){E(t,"error: no texture selected");return}if(r(a)===null||r(a)<0||r(a)>=r(n).textureBoundH){E(t,"error: selected row is out-of-bounds");return}const s=r(i)?r(u):0,v=r(n).textureBoundX+s,w=r(a)+r(n).textureBoundY,l=r(i)?r(c)+1-r(u):r(n).textureBoundW;if(s<0||s+l>r(n).textureBoundW){E(t,"error: selection is out-of-bounds");return}const g=(w*d.width+v)*4,m=d.data.slice(g,g+l*4),M=p(m);E(t,`'${M}'`)};var ou=(e,n,t)=>E(n,t),iu=(e,n,t)=>E(n,t),uu=(e,n)=>E(n,!1),su=N('<div class="overflow-auto absolute w-60 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),lu=(e,n)=>E(n,!0),cu=N('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),fu=(e,n,t,a,i)=>{Ze(n,r(n).selectedTexture=null),t(r(a),r(i))},du=N('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),vu=N('<input type="checkbox"> from x: <input class="w-14 border border-black" type="number"> to <input class="w-14 border border-black" type="number">',1),_u=N('RGBA data for all rows: <input class="w-4 h-4 opacity-75 hover:opacity-100" type="image" src="plugin://app/images/clipboard-solid.svg" alt="copy">',1),xu=N('<!> <div class="absolute top-1 w-full h-fit grid place-items-center pointer-events-none"><div class="w-fit h-full rounded-lg bg-gray-100 pointer-events-auto px-2 py-1"><div class="w-16 h-full table-cell"> <br> </div> <div class="w-28 h-full table-cell px-1 mx-1"> <br> </div> <div class="w-fit h-full table-cell px-1">RGBA data for row: <input class="w-18 border border-black" type="number"> <input class="w-4 h-4 opacity-75 enabled:hover:opacity-100" type="image" src="plugin://app/images/clipboard-solid.svg" alt="copy"> <br> <!></div></div></div>',1),hu=N('<canvas class="absolute right-0"></canvas> <!> <!> <!>',1);function pu(e,n){Vt(n,!1);const t=D();let a=D({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",textureBoundX:0,textureBoundY:0,textureBoundW:1,textureBoundH:1,textureViewX:0,textureViewY:0,textureViewScale:100,viewIsWholeAtlas:!1,redraw:()=>le(r(Q),r(x))});const i=h=>{const o=St.get(h);return o?parseInt(o):0},u=0;let c=D(null),p=D(null),d=D(null),s=D(null),v=D(null),w=D(null),l=D(null),g=D(null),m=D(null),M=D(null),q=D(null),fe=D(null),de=D(null),se=D(null),O=D(null),H=D(null),J=D(null),K=D(null),Z=D(null),ve=D(null),Ie=D(null),qe=D(null),ft=null;const Kt=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),Ot=10,Rt=1e3,Zt=10,St=new URLSearchParams(window.location.search),Ht=St.get("n"),Tr=Ht?Math.max(parseInt(Ht),1):1,Qt=i("w"),Jt=i("h"),Rr=i("gx"),R=i("gy"),ee=i("gw"),X=i("gh");let xe=0,et=D(0),Me=D(),De=null,oe=null,Ee=0,He=0,wt,z,he=D(!1),dt=D(!1),ot=D(null),Ge=D(null),We=D(null),_e=D(null),be=D(!1),Ae=D(!1),Xe=D(!1),Fe=D(!1),Pe=D(!1),Te=D(null),ke=D(!1),Q=D(null),x=D(null);const re=(h,o,f,_)=>{h.bindBuffer(h.ARRAY_BUFFER,o.vbo);for(let y=0;y<r(et);y+=1){const A=o.attribs[y];if(!A){h.disableVertexAttribArray(y);continue}h.enableVertexAttribArray(y),h.vertexAttribPointer(y,A.count,h.FLOAT,!1,o.step,A.offset)}if(!_){h.drawArrays(h.TRIANGLES,0,f);return}let G=null;for(let y=0;y<f;y+=1){const A=_[y];G===null?A&&(G=y):A||(h.drawArrays(h.TRIANGLES,G,y-G),G=null)}G!==null&&h.drawArrays(h.TRIANGLES,G,f-G)},le=(h,o)=>{if(o.viewport(0,0,h.width,h.height),o.scissor(0,0,h.width,h.height),o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),!r(he)){o.viewport(0,0,h.width,h.height);const f=()=>{o.clearColor(.525,.968,.495,1),o.clear(o.COLOR_BUFFER_BIT)},_=()=>{o.clearColor(.2,.2,.2,1),o.clear(o.COLOR_BUFFER_BIT)},G=Math.min(xe/Tr,1),y=Math.floor(h.width*.65)&-2,A=70,I=8,T=I*2,P=y*G;if(f(),h.width<=T||h.height<=T)return;o.scissor(I,I,h.width-T,h.height-T),_(),o.scissor(h.width/2-(y/2+I),h.height/2-(A/2+I),y+T,A+T),f(),o.scissor(h.width/2-y/2+P,h.height/2-A/2,y-P,A),_();return}if(r(a).selectedTexture){r(a).textureViewScale<Ot&&Ze(a,r(a).textureViewScale=Ot),r(a).textureViewScale>Rt&&Ze(a,r(a).textureViewScale=Rt);const f=r(a).textureViewScale/100,_=f*2,G=r(a).textureBoundX,y=r(a).textureBoundX+r(a).textureBoundW,A=r(a).textureBoundY,I=r(a).textureBoundY+r(a).textureBoundH;let T=r(a).textureViewX+h.width/_,P=r(a).textureViewY+h.height/_,L=!1;if(T<G&&(T=G,L=!0),P<A&&(P=A,L=!0),T>y&&(T=y,L=!0),P>I&&(P=I,L=!0),r(a).textureBoundW*f<=h.width&&(T=G+r(a).textureBoundW/2,L=!0),r(a).textureBoundH*f<=h.height&&(P=A+r(a).textureBoundH/2,L=!0),L&&(Ze(a,r(a).textureViewX=T-h.width/_),Ze(a,r(a).textureViewY=P-h.height/_)),o.useProgram(r(Ie)),o.viewport(0,0,h.width,h.height),o.uniform2fv(r(qe),[h.width,h.height]),!ft){const Re=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Re),o.bufferData(o.ARRAY_BUFFER,Kt,o.STATIC_DRAW),ft={vbo:Re,step:8,attribs:Jo}}re(o,ft,6);const j=r(a).selectedTexture,F=(r(a).textureBoundX-r(a).textureViewX)*f,V=F+r(a).textureBoundW*f,b=(r(a).textureBoundY-r(a).textureViewY)*f,U=b+r(a).textureBoundH*f,W=G/j.width,S=y/j.width,B=A/j.height,k=I/j.height;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(r(c)),o.uniform4fv(r(p),[j.width,j.height,h.width,h.height]),o.bindTexture(o.TEXTURE_2D,j.texture),o.uniform1i(r(d),u);const ne=o.createBuffer();if(o.bindBuffer(o.ARRAY_BUFFER,ne),o.bufferData(o.ARRAY_BUFFER,new Float32Array([F,b,W,B,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,V,b,S,B,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,F,U,W,k,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,V,b,S,B,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,V,U,S,k,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0,F,U,W,k,r(a).textureBoundX,r(a).textureBoundY,r(a).textureBoundW,r(a).textureBoundH,1,1,1,1,0,0,0]),o.STATIC_DRAW),re(o,{vbo:ne,step:60,attribs:or},6),o.deleteBuffer(ne),r(ke)){const Re=r(Ge)??0,ye=F+(r(be)&&r(We)?r(We)*f:0),Ke=r(be)&&r(_e)?F+(r(_e)+1)*f:V,Ut=b+Re*f,rr=Math.max(b+(Re+1)*f,Ut+1),Wt=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Wt),o.bufferData(o.ARRAY_BUFFER,new Float32Array([ye,Ut,0,0,0,0,1,1,1,.15,.15,.4,1,0,0,Ke,Ut,1,0,0,0,1,1,1,.15,.15,.4,1,0,0,ye,rr,0,1,0,0,1,1,1,.15,.15,.4,1,0,0,Ke,Ut,1,0,0,0,1,1,1,.15,.15,.4,1,0,0,Ke,rr,1,1,0,0,1,1,1,.15,.15,.4,1,0,0,ye,rr,0,1,0,0,1,1,1,.15,.15,.4,1,0,0]),o.STATIC_DRAW),re(o,{vbo:Wt,step:60,attribs:or},6),o.deleteBuffer(Wt)}return}oe&&(o.bindFramebuffer(o.DRAW_FRAMEBUFFER,oe),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)),o.disable(o.SCISSOR_TEST);for(let f of r(a).entities)if(f.enabled){if(f.type==="batch2d"){o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST);const _=r(a).textures[f.textureId];o.useProgram(r(c)),o.viewport(0,0,Qt,Jt),o.uniform4fv(r(p),[_.width,_.height,f.targetWidth,f.targetHeight]),o.bindTexture(o.TEXTURE_2D,_.texture),o.uniform1i(r(d),u),re(o,f.buffer,f.vertexCount,f.enabledVerticesList)}if(f.type==="render3d"){o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.DEPTH_TEST);const _=r(a).textures[f.textureId];o.useProgram(f.animated?r(M):r(s)),o.viewport(Rr,R,ee,X),o.uniformMatrix4fv(f.animated?r(q):r(v),!1,f.modelMatrix),o.uniformMatrix4fv(f.animated?r(fe):r(w),!1,wt),o.uniformMatrix4fv(f.animated?r(de):r(l),!1,z),o.uniform2fv(f.animated?r(se):r(g),[_.width,_.height]),o.bindTexture(o.TEXTURE_2D,_.texture),o.uniform1i(f.animated?r(O):r(m),u),re(o,f.buffer,f.vertexCount)}if(f.type==="renderparticles"){o.blendFuncSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.DEPTH_TEST);const _=r(a).textures[f.textureId];o.useProgram(r(H)),o.viewport(Rr,R,ee,X),o.uniformMatrix4fv(r(J),!1,wt),o.uniformMatrix4fv(r(K),!1,z),o.uniform2fv(r(ve),[_.width,_.height]),o.bindTexture(o.TEXTURE_2D,_.texture),o.uniform1i(r(Z),u),re(o,f.buffer,f.vertexCount)}if(f.type==="icon"||f.type==="bigicon"){const _=f.texSize;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(r(c)),o.viewport(0,0,Qt,Jt),o.bindTexture(o.TEXTURE_2D,f.texture),o.uniform1i(r(d),u),o.uniform4fv(r(p),[_,_,f.targetWidth,f.targetHeight]),re(o,f.buffer,6)}if(f.type==="minimap2d"){!De||!oe?(De=o.createTexture(),o.bindTexture(o.TEXTURE_2D,De),o.texStorage2D(o.TEXTURE_2D,1,o.RGBA8,Ee,He),oe=o.createFramebuffer(),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,oe),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,De,0)):o.bindFramebuffer(o.DRAW_FRAMEBUFFER,oe),o.viewport(0,0,Ee,He),o.disable(o.DEPTH_TEST);const _=r(a).textures[f.textureId];o.useProgram(r(c)),o.uniform4fv(r(p),[_.width,_.height,Ee,He]),o.bindTexture(o.TEXTURE_2D,_.texture),o.uniform1i(r(d),u),re(o,f.buffer,f.vertexCount,f.enabledVerticesList),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}if(f.type==="minimap"){if(De===null)continue;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.useProgram(r(c)),o.viewport(0,0,Qt,Jt),o.uniform4fv(r(p),[Ee,He,f.targetWidth,f.targetHeight]),o.bindTexture(o.TEXTURE_2D,De),o.uniform1i(r(d),u),re(o,f.buffer,6)}}},vt=(h,o,f)=>{const _=new DataView(f),G=_.getUint32(0,!0);switch(G){case 0:{E(he,!0),le(h,o);break}case 1:{const y=_.getUint32(4,!0),A=_.getUint32(8,!0),I=_.getUint32(12,!0),T=o.createTexture(),P=new Uint8Array(f,16,A*I*4);o.bindTexture(o.TEXTURE_2D,T),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,A,I,0,o.RGBA,o.UNSIGNED_BYTE,P),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),Ze(a,r(a).textures[y]={texture:T,width:A,height:I,data:P});break}case 2:case 3:{const y=G===3,A=y?104:40,I=y?120:56,T=_.getUint32(4,!0),P=_.getUint32(8,!0),L=new Float32Array(16);L.set(new Float32Array(f,16,16));const j=new DataView(f,80,T*A),F=new Array(T),V=new ArrayBuffer(T*I),b=new DataView(V);for(let W=0;W<T;W+=1){const S=A*W,B=I*W;let k=null;y&&(k=new Float32Array(16),k.set(new Float32Array(f,80+A*W+40,16)));const ne={x:j.getInt16(S,!0),y:j.getInt16(S+2,!0),z:j.getInt16(S+4,!0),u:j.getFloat32(S+8,!0),v:j.getFloat32(S+12,!0),ax:j.getUint16(S+16,!0),ay:j.getUint16(S+18,!0),aw:j.getUint16(S+20,!0),ah:j.getUint16(S+22,!0),r:j.getFloat32(S+24,!0),g:j.getFloat32(S+28,!0),b:j.getFloat32(S+32,!0),a:j.getFloat32(S+36,!0),anim:k};if(F[W]=ne,b.setFloat32(B,ne.x,!0),b.setFloat32(B+4,ne.y,!0),b.setFloat32(B+8,ne.z,!0),b.setFloat32(B+12,0,!0),b.setFloat32(B+16,ne.u,!0),b.setFloat32(B+20,ne.v,!0),b.setFloat32(B+24,ne.ax,!0),b.setFloat32(B+28,ne.ay,!0),b.setFloat32(B+32,ne.aw,!0),b.setFloat32(B+36,ne.ah,!0),b.setFloat32(B+40,ne.r,!0),b.setFloat32(B+44,ne.g,!0),b.setFloat32(B+48,ne.b,!0),b.setFloat32(B+52,ne.a,!0),k)for(let ie=0;ie<16;ie+=1)b.setFloat32(B+56+ie*4,k[ie],!0)}const U=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,U),o.bufferData(o.ARRAY_BUFFER,b,o.STATIC_DRAW),r(a).entities.push({type:"render3d",animated:y,textureId:P,vertexCount:T,modelMatrix:L,vertices:F,buffer:{vbo:U,step:I,attribs:y?Zo:Vn},enabled:!0,expanded:!1,uuid:ir()}),xe+=T,le(h,o);break}case 4:{const I=_.getUint32(4,!0),T=_.getUint32(8,!0),P=_.getUint16(12,!0),L=_.getUint16(14,!0),j=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,j);const F=new DataView(f,16,I*40),V=new ArrayBuffer(I*60),b=new DataView(V),U=new Array(I);for(let W=0;W<I;W+=1){const S=40*W,B=60*W,k={x:F.getInt16(S,!0),y:F.getInt16(S+2,!0),ax:F.getInt16(S+4,!0),ay:F.getInt16(S+6,!0),aw:F.getInt16(S+8,!0),ah:F.getInt16(S+10,!0),discard:F.getUint8(S+12),wrapx:F.getUint8(S+13),wrapy:F.getUint8(S+14),u:F.getFloat32(S+16,!0),v:F.getFloat32(S+20,!0),r:F.getFloat32(S+24,!0),g:F.getFloat32(S+28,!0),b:F.getFloat32(S+32,!0),a:F.getFloat32(S+36,!0)};U[W]=k,b.setFloat32(B,k.x,!0),b.setFloat32(B+4,k.y,!0),b.setFloat32(B+8,k.u,!0),b.setFloat32(B+12,k.v,!0),b.setFloat32(B+16,k.ax,!0),b.setFloat32(B+20,k.ay,!0),b.setFloat32(B+24,k.aw,!0),b.setFloat32(B+28,k.ah,!0),b.setFloat32(B+32,k.r,!0),b.setFloat32(B+36,k.g,!0),b.setFloat32(B+40,k.b,!0),b.setFloat32(B+44,k.a,!0),b.setFloat32(B+48,k.discard,!0),b.setFloat32(B+52,k.wrapx,!0),b.setFloat32(B+56,k.wrapy,!0)}o.bufferData(o.ARRAY_BUFFER,b,o.STATIC_DRAW),r(a).entities.push({type:"batch2d",textureId:T,vertexCount:I,vertices:U,targetWidth:P,targetHeight:L,buffer:{vbo:j,step:60,attribs:or},enabled:!0,expanded:!1,uuid:ir(),enabledVerticesList:Array(Math.floor(I)).fill(!0)}),xe+=I,le(h,o);break}case 5:case 8:{const A=G===5?64:512,I=_.getInt16(4,!0),T=_.getInt16(6,!0),P=_.getInt16(8,!0),L=_.getInt16(10,!0),j=_.getUint32(12,!0),F=_.getFloat32(16,!0),V=_.getFloat32(20,!0),b=_.getFloat32(24,!0),U=_.getFloat32(28,!0),W=_.getUint16(32,!0),S=_.getUint16(34,!0),B=o.createTexture(),k=o.createFramebuffer();o.bindTexture(o.TEXTURE_2D,B),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,k),o.texStorage2D(o.TEXTURE_2D,1,o.RGBA8,A,A),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,B,0),o.enable(o.CULL_FACE),o.cullFace(o.FRONT),o.viewport(0,0,A,A),o.scissor(0,0,A,A);let ne=Array(j),ie=36;for(let Wt=0;Wt<j;Wt+=1){const xr=_.getUint32(ie,!0);let An=Array(xr);const ba=new ArrayBuffer(xr*56),rt=new DataView(ba),Gr=new Float32Array(16);Gr.set(new Float32Array(f,ie+4,16));const Kr=new Float32Array(16);Kr.set(new Float32Array(f,ie+68,16));const Zr=new Float32Array(16);Zr.set(new Float32Array(f,ie+132,16)),ie+=196;for(let Sr=0;Sr<xr;Sr+=1){const It={x:_.getInt16(ie,!0),y:_.getInt16(ie+2,!0),z:_.getInt16(ie+4,!0),r:_.getFloat32(ie+8,!0),g:_.getFloat32(ie+12,!0),b:_.getFloat32(ie+16,!0),a:_.getFloat32(ie+20,!0)},st=Sr*56;rt.setFloat32(st,It.x,!0),rt.setFloat32(st+4,It.y,!0),rt.setFloat32(st+8,It.z,!0),rt.setFloat32(st+24,0,!0),rt.setFloat32(st+28,0,!0),rt.setFloat32(st+32,A,!0),rt.setFloat32(st+36,A,!0),rt.setFloat32(st+40,It.r,!0),rt.setFloat32(st+44,It.g,!0),rt.setFloat32(st+48,It.b,!0),rt.setFloat32(st+52,It.a,!0),An[Sr]=It,ie+=24}ne[Wt]={vertices:An,modelMatrix:Gr,viewMatrix:Kr,projMatrix:Zr};const Qr=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,Qr),o.bufferData(o.ARRAY_BUFFER,rt,o.STATIC_DRAW),o.useProgram(r(s)),o.uniformMatrix4fv(r(v),!1,Gr),o.uniformMatrix4fv(r(w),!1,Kr),o.uniformMatrix4fv(r(l),!1,Zr),o.uniform2fv(r(g),[1,1]),o.bindTexture(o.TEXTURE_2D,r(Me)),o.uniform1i(r(m),u),re(o,{vbo:Qr,attribs:Vn,step:56},xr),o.deleteBuffer(Qr)}const Re=I,ye=I+P,Ke=T,Ut=T+L,rr=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,rr),o.bufferData(o.ARRAY_BUFFER,new Float32Array([Re,Ke,0,1,0,0,A,A,F,b,V,U,0,0,0,ye,Ke,1,1,0,0,A,A,F,b,V,U,0,0,0,Re,Ut,0,0,0,0,A,A,F,b,V,U,0,0,0,ye,Ke,1,1,0,0,A,A,F,b,V,U,0,0,0,ye,Ut,1,0,0,0,A,A,F,b,V,U,0,0,0,Re,Ut,0,0,0,0,A,A,F,b,V,U,0,0,0]),o.STATIC_DRAW),r(a).entities.push({type:G===5?"icon":"bigicon",models:ne,texture:B,targetWidth:W,targetHeight:S,texSize:A,buffer:{vbo:rr,step:60,attribs:or},targetx:I,targety:T,targetw:P,targeth:L,enabled:!0,expanded:!1,uuid:ir()}),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null),o.deleteFramebuffer(k),o.disable(o.CULL_FACE);break}case 6:{const y=_.getUint32(4,!0),A=_.getUint32(8,!0);Ee=_.getUint16(12,!0),He=_.getUint16(14,!0);const I=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,I);const T=new DataView(f,16,y*40),P=new ArrayBuffer(y*60),L=new DataView(P),j=new Array(y);for(let F=0;F<y;F+=1){const V=40*F,b=60*F,U={x:T.getInt16(V,!0),y:T.getInt16(V+2,!0),ax:T.getInt16(V+4,!0),ay:T.getInt16(V+6,!0),aw:T.getInt16(V+8,!0),ah:T.getInt16(V+10,!0),discard:T.getUint8(V+12),wrapx:T.getUint8(V+13),wrapy:T.getUint8(V+14),u:T.getFloat32(V+16,!0),v:T.getFloat32(V+20,!0),r:T.getFloat32(V+24,!0),g:T.getFloat32(V+28,!0),b:T.getFloat32(V+32,!0),a:T.getFloat32(V+36,!0)};j[F]=U,L.setFloat32(b,U.x,!0),L.setFloat32(b+4,U.y,!0),L.setFloat32(b+8,U.u,!0),L.setFloat32(b+12,U.v,!0),L.setFloat32(b+16,U.ax,!0),L.setFloat32(b+20,U.ay,!0),L.setFloat32(b+24,U.aw,!0),L.setFloat32(b+28,U.ah,!0),L.setFloat32(b+32,U.r,!0),L.setFloat32(b+36,U.g,!0),L.setFloat32(b+40,U.b,!0),L.setFloat32(b+44,U.a,!0),L.setFloat32(b+48,U.discard,!0),L.setFloat32(b+52,U.wrapx,!0),L.setFloat32(b+56,U.wrapy,!0)}o.bufferData(o.ARRAY_BUFFER,L,o.STATIC_DRAW),r(a).entities.push({type:"minimap2d",textureId:A,buffer:{vbo:I,attribs:or,step:60},vertices:j,vertexCount:y,enabled:!0,expanded:!1,enabledVerticesList:Array(Math.floor(y)).fill(!0),uuid:ir()}),xe+=y,le(h,o);break}case 7:{const y=_.getInt16(4,!0),A=_.getInt16(6,!0),I=_.getUint16(8,!0),T=_.getUint16(10,!0),P=_.getInt16(12,!0),L=_.getInt16(14,!0),j=_.getUint16(16,!0),F=_.getUint16(18,!0),V=_.getUint16(20,!0),b=_.getUint16(22,!0),U=P,W=P+j,S=L,B=L+F,k=y/Ee,ne=(y+I)/Ee,ie=A/He,Re=(A+T)/He,ye=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,ye),o.bufferData(o.ARRAY_BUFFER,new Float32Array([U,S,k,Re,y,A,I,T,1,1,1,1,0,0,0,W,S,ne,Re,y,A,I,T,1,1,1,1,0,0,0,U,B,k,ie,y,A,I,T,1,1,1,1,0,0,0,W,S,ne,Re,y,A,I,T,1,1,1,1,0,0,0,W,B,ne,ie,y,A,I,T,1,1,1,1,0,0,0,U,B,k,ie,y,A,I,T,1,1,1,1,0,0,0]),o.STATIC_DRAW),r(a).entities.push({type:"minimap",sourcex:y,sourcey:A,sourcew:I,sourceh:T,targetx:P,targety:L,targetw:j,targeth:F,targetWidth:V,targetHeight:b,buffer:{vbo:ye,step:60,attribs:or},enabled:!0,expanded:!1,uuid:ir()}),le(h,o);break}case 9:{const y=_.getUint32(4,!0),A=_.getUint32(8,!0),I=64,T=72,P=new DataView(f,16,y*I),L=new Array(y),j=new ArrayBuffer(y*T),F=new DataView(j);for(let b=0;b<y;b+=1){const U=I*b,W=T*b,S={x:P.getFloat32(U,!0),y:P.getFloat32(U+4,!0),z:P.getFloat32(U+8,!0),offsetx2d:P.getFloat32(U+12,!0),offsety2d:P.getFloat32(U+16,!0),offsetx3d:P.getFloat32(U+20,!0),offsety3d:P.getFloat32(U+24,!0),offsetz3d:P.getFloat32(U+28,!0),ax:P.getUint16(U+32,!0),ay:P.getUint16(U+34,!0),aw:P.getUint16(U+36,!0),ah:P.getUint16(U+38,!0),r:P.getFloat32(U+40,!0),g:P.getFloat32(U+44,!0),b:P.getFloat32(U+48,!0),a:P.getFloat32(U+52,!0),u:P.getFloat32(U+56,!0),v:P.getFloat32(U+60,!0)};L[b]=S,F.setFloat32(W,S.x,!0),F.setFloat32(W+4,S.y,!0),F.setFloat32(W+8,S.z,!0),F.setFloat32(W+12,S.ax,!0),F.setFloat32(W+16,S.ay,!0),F.setFloat32(W+20,S.aw,!0),F.setFloat32(W+24,S.ah,!0),F.setFloat32(W+28,S.r,!0),F.setFloat32(W+32,S.g,!0),F.setFloat32(W+36,S.b,!0),F.setFloat32(W+40,S.a,!0),F.setFloat32(W+44,S.offsetx2d,!0),F.setFloat32(W+48,S.offsety2d,!0),F.setFloat32(W+52,S.offsetx3d,!0),F.setFloat32(W+56,S.offsety3d,!0),F.setFloat32(W+60,S.offsetz3d,!0),F.setFloat32(W+64,S.u,!0),F.setFloat32(W+68,S.v,!0)}const V=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,V),o.bufferData(o.ARRAY_BUFFER,F,o.STATIC_DRAW),r(a).entities.push({type:"renderparticles",textureId:A,vertexCount:y,vertices:L,buffer:{vbo:V,step:T,attribs:Qo},enabled:!0,expanded:!1,uuid:ir()}),xe+=y,le(h,o);break}case 10:{wt=new Float32Array(f,4,16),z=new Float32Array(f,68,16);break}}};window.addEventListener("message",async h=>{if(typeof h.data=="object"&&h.data.type==="pluginMessage"){if(typeof h.data.content!="object"||!r(Q)||!r(x))return;vt(r(Q),r(x),h.data.content)}});const Ce=h=>Array.from(h).map(o=>{const f=o.toString(16);return f.length===1?"\\x0".concat(f):"\\x".concat(f)}).join(""),bt=()=>{const h=r(a).selectedTexture;if(!h){E(Te,"error: no texture selected");return}const o=r(a).textureBoundW*4,f=new Array(r(a).textureBoundH);for(let _=0;_<r(a).textureBoundH;_+=1){const G=(r(a).textureBoundY+_)*h.width*4+r(a).textureBoundX*4,y=h.data.slice(G,G+o),A=Ce(y);f[_]=`  [${_+1}] = '${A}',`}E(Te,`local data = {
${f.join(`
`)}
}`)},it=h=>{const o=r(a).textureViewScale/100,f=Math.floor(r(a).textureViewX+h.offsetX/o-r(a).textureBoundX),_=Math.floor(r(a).textureViewY+h.offsetY/o-r(a).textureBoundY);if(f<0||_<0||f>=r(a).textureBoundW||_>=r(a).textureBoundH){E(ot,null);return}E(ot,{x:f,y:_})},pe=h=>{if(it(h),!(h.buttons&1)){E(ut,it);return}const o=r(a).textureViewScale/100;Ze(a,r(a).textureViewX-=h.movementX/o),Ze(a,r(a).textureViewY-=h.movementY/o),r(a).redraw()},er=h=>{const o=r(Q),f=r(a).textureViewScale,_=r(a).textureViewScale-Zt*Math.sign(h.deltaY);Ze(a,r(a).textureViewScale=_);const G=2*f/100,y=2*_/100,A=r(a).textureViewX+o.width/G,I=r(a).textureViewY+o.height/G;Ze(a,r(a).textureViewX=A-o.width/y),Ze(a,r(a).textureViewY=I-o.height/y),le(o,r(x))};let ut=D(it);Jr(()=>(r(Ge),r(be),r(We),r(_e)),()=>{E(t,r(Ge)===null||r(be)&&(r(We)===null||r(_e)===null||r(We)>r(_e)))}),Jr(()=>(r(Q),r(x),r(Me),r(c),r(s),r(M),r(H),r(Ie)),()=>{if(r(Q)&&(Ze(Q,r(Q).width=Qt),Ze(Q,r(Q).height=Jt),E(x,r(Q).getContext("webgl2")),r(x))){E(et,r(x).getParameter(r(x).MAX_VERTEX_ATTRIBS)),E(Me,r(x).createTexture()),r(x).bindTexture(r(x).TEXTURE_2D,r(Me));const h=new Uint8Array([255,255,255,255]);r(x).texImage2D(r(x).TEXTURE_2D,0,r(x).RGBA,1,1,0,r(x).RGBA,r(x).UNSIGNED_BYTE,h);const o=$t(r(x),r(x).VERTEX_SHADER,Wo,"2D vertex shader"),f=$t(r(x),r(x).FRAGMENT_SHADER,Xo,"2D fragment shader"),_=$t(r(x),r(x).VERTEX_SHADER,Yo,"3D vertex shader"),G=$t(r(x),r(x).VERTEX_SHADER,zo,"3D anim vertex shader"),y=$t(r(x),r(x).FRAGMENT_SHADER,jo,"3D fragment shader"),A=$t(r(x),r(x).VERTEX_SHADER,qo,"particle vertex shader"),I=$t(r(x),r(x).VERTEX_SHADER,Go,"checkers vertex shader"),T=$t(r(x),r(x).FRAGMENT_SHADER,Ko,"checkers fragment shader");E(c,hr(r(x),o,f,"2D program")),E(p,r(x).getUniformLocation(r(c),"atlas_wh_screen_wh")),E(d,r(x).getUniformLocation(r(c),"tex")),E(s,hr(r(x),_,y,"3D program")),E(v,r(x).getUniformLocation(r(s),"modelmatrix")),E(w,r(x).getUniformLocation(r(s),"viewmatrix")),E(l,r(x).getUniformLocation(r(s),"projmatrix")),E(g,r(x).getUniformLocation(r(s),"atlas_wh")),E(m,r(x).getUniformLocation(r(s),"tex")),E(M,hr(r(x),G,y,"3D animated program")),E(q,r(x).getUniformLocation(r(M),"modelmatrix")),E(fe,r(x).getUniformLocation(r(M),"viewmatrix")),E(de,r(x).getUniformLocation(r(M),"projmatrix")),E(se,r(x).getUniformLocation(r(M),"atlas_wh")),E(O,r(x).getUniformLocation(r(M),"tex")),E(H,hr(r(x),A,y,"Particles program")),E(J,r(x).getUniformLocation(r(H),"viewmatrix")),E(K,r(x).getUniformLocation(r(H),"projmatrix")),E(Z,r(x).getUniformLocation(r(H),"tex")),E(ve,r(x).getUniformLocation(r(H),"atlas_wh")),E(Ie,hr(r(x),I,T,"Checkers program")),E(qe,r(x).getUniformLocation(r(Ie),"screen_wh")),r(x).deleteShader(o),r(x).deleteShader(f),r(x).deleteShader(_),r(x).deleteShader(y),r(x).deleteShader(G),r(x).deleteShader(A),r(x).deleteShader(I),r(x).deleteShader(T),r(x).activeTexture(r(x).TEXTURE0+u),r(x).enable(r(x).SCISSOR_TEST),r(x).disable(r(x).CULL_FACE),r(x).disable(r(x).DEPTH_TEST),r(x).enable(r(x).BLEND),r(x).blendEquationSeparate(r(x).FUNC_ADD,r(x).FUNC_ADD),r(x).depthFunc(r(x).LEQUAL),le(r(Q),r(x))}}),Jr(()=>(r(ke),r(Ae),r(Xe),r(Fe),r(Pe),r(t),r(Q),r(x)),()=>{const h=r(ke);E(ke,(r(Ae)||r(Xe)||r(Fe)||r(Pe))&&!r(t)),r(Q)&&r(x)&&r(ke)!==h&&le(r(Q),r(x))}),oo(),Gt();var Bt=hu(),$e=ue(Bt);$e.__mousedown=[ou,ut,pe],$e.__mouseup=[iu,ut,it],$e.__mousemove=function(...h){var o;(o=r(ut))==null||o.apply(this,h)},wa($e,h=>E(Q,h),()=>r(Q));var tr=$($e,2);{var _t=h=>{var o=su(),f=ue(o),_=ge(f);qi(_,{get data(){return r(a)},set data(y){E(a,y)},$$legacy:!0});var G=$(f,2);G.__click=[uu,dt],C(h,o)},Se=(h,o)=>{{var f=_=>{var G=cu();G.__click=[lu,dt],C(_,G)};te(h,_=>{r(he)&&_(f)},o)}};te(tr,h=>{r(dt)?h(_t):h(Se,!1)})}var tt=$(tr,2);{var dr=h=>{var o=xu(),f=ue(o);{var _=B=>{var k=du();k.__click=[fu,a,le,Q,x],C(B,k)};te(f,B=>{r(Te)===null&&B(_)})}var G=$(f,2),y=ge(G),A=ge(y),I=ge(A),T=$(I,2),P=$(A,2),L=ge(P),j=$(L,2),F=$(P,2),V=$(ge(F));V.__change=function(...B){var k;(k=r(a).redraw)==null||k.apply(this,B)};var b=$(V,2);b.__click=[au,a,Te,Ge,be,We,_e,Ce];var U=$(b,4);{var W=B=>{var k=vu(),ne=ue(k),ie=$(ne,2);ie.__change=function(...ye){var Ke;(Ke=r(a).redraw)==null||Ke.apply(this,ye)};var Re=$(ie,2);Re.__change=function(...ye){var Ke;(Ke=r(a).redraw)==null||Ke.apply(this,ye)},ga(ne,()=>r(be),ye=>E(be,ye)),Ve("focus",ie,()=>E(Fe,!0)),Ve("blur",ie,()=>E(Fe,!1)),$r(ie,()=>r(We),ye=>E(We,ye)),Ve("focus",Re,()=>E(Pe,!0)),Ve("blur",Re,()=>E(Pe,!1)),$r(Re,()=>r(_e),ye=>E(_e,ye)),C(B,k)},S=B=>{var k=_u(),ne=$(ue(k));ne.__click=bt,C(B,k)};te(U,B=>{r(a).viewIsWholeAtlas?B(W):B(S,!1)})}Je(()=>{var B,k;me(I,`x: ${((B=r(ot))==null?void 0:B.x)??""} `),me(T,` y: ${((k=r(ot))==null?void 0:k.y)??""}`),me(L,`${r(a).textureBoundW??""}x${r(a).textureBoundH??""} `),me(j,` zoom: ${r(a).textureViewScale??""}%`),b.disabled=r(t)}),Ve("mouseenter",F,()=>E(Ae,!0)),Ve("mouseleave",F,()=>E(Ae,!1)),Ve("focus",V,()=>E(Xe,!0)),Ve("blur",V,()=>E(Xe,!1)),$r(V,()=>r(Ge),B=>E(Ge,B)),C(h,o)};te(tt,h=>{r(a).selectedTexture&&h(dr)})}var vr=$(tt,2);{var _r=h=>{nu(h,{get text(){return r(Te)},set text(o){E(Te,o)},$$legacy:!0})};te(vr,h=>{r(Te)!==null&&h(_r)})}Ve("wheel",$e,er),C(e,Bt),Nt()}qt(["mousedown","mouseup","mousemove","click","change"]);Ro(pu,{target:document.body});
