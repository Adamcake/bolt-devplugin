(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();const on=!1;var zr=Array.isArray,Qn=Array.prototype.indexOf,qr=Array.from,Jn=Object.defineProperty,Wt=Object.getOwnPropertyDescriptor,Tn=Object.getOwnPropertyDescriptors,ea=Object.prototype,ta=Array.prototype,jr=Object.getPrototypeOf,un=Object.isExtensible;function ra(t){return t()}function Nr(t){for(var r=0;r<t.length;r++)t[r]()}const Je=2,Sn=4,Sr=8,Gr=16,dt=32,zt=64,gr=128,Ge=256,wr=512,Oe=1024,_t=2048,Ct=4096,lt=8192,Rr=16384,na=32768,Kr=65536,Rn=1<<17,aa=1<<19,Un=1<<20,Or=1<<21,Pt=Symbol("$state"),ia=Symbol("legacy props"),oa=Symbol("");function Bn(t){return t===this.v}function ua(t,r){return t!=t?r==r:t!==r||t!==null&&typeof t=="object"||typeof t=="function"}function Zr(t){return!ua(t,this.v)}function sa(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function la(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function fa(t){throw new Error("https://svelte.dev/e/effect_orphan")}function ca(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function da(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function _a(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function va(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function xa(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let or=!1,ha=!1;function pa(){or=!0}const Qr=1,Jr=2,In=4,ga=8,wa=16,ma=1,ba=2,ya=4,Ea=8,Aa=16,Fa=1,Ta=2,Ve=Symbol(),Sa="http://www.w3.org/1999/xhtml";let _e=null;function sn(t){_e=t}function At(t,r=!1,e){var i=_e={p:_e,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};or&&!r&&(_e.l={s:null,u:null,r1:[],r2:rr(!1)}),Vn(()=>{i.d=!0})}function Ft(t){const r=_e;if(r!==null){const f=r.e;if(f!==null){var e=oe,i=ne;r.e=null;try{for(var o=0;o<f.length;o++){var u=f[o];Et(u.effect),at(u.reaction),tn(u.fn)}}finally{Et(e),at(i)}}_e=r.p,r.m=!0}return{}}function Ur(){return!or||_e!==null&&_e.l===null}function Mt(t,r){if(typeof t!="object"||t===null||Pt in t)return t;const e=jr(t);if(e!==ea&&e!==ta)return t;var i=new Map,o=zr(t),u=pt(0),f=ne,g=c=>{var l=ne;at(f);var d;return d=c(),at(l),d};return o&&i.set("length",pt(t.length)),new Proxy(t,{defineProperty(c,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&_a();var h=i.get(l);return h===void 0?(h=g(()=>pt(d.value)),i.set(l,h)):I(h,g(()=>Mt(d.value))),!0},deleteProperty(c,l){var d=i.get(l);if(d===void 0)l in c&&i.set(l,g(()=>pt(Ve)));else{if(o&&typeof l=="string"){var h=i.get("length"),s=Number(l);Number.isInteger(s)&&s<h.v&&I(h,s)}I(d,Ve),ln(u)}return!0},get(c,l,d){var m;if(l===Pt)return t;var h=i.get(l),s=l in c;if(h===void 0&&(!s||(m=Wt(c,l))!=null&&m.writable)&&(h=g(()=>pt(Mt(s?c[l]:Ve))),i.set(l,h)),h!==void 0){var v=n(h);return v===Ve?void 0:v}return Reflect.get(c,l,d)},getOwnPropertyDescriptor(c,l){var d=Reflect.getOwnPropertyDescriptor(c,l);if(d&&"value"in d){var h=i.get(l);h&&(d.value=n(h))}else if(d===void 0){var s=i.get(l),v=s==null?void 0:s.v;if(s!==void 0&&v!==Ve)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return d},has(c,l){var v;if(l===Pt)return!0;var d=i.get(l),h=d!==void 0&&d.v!==Ve||Reflect.has(c,l);if(d!==void 0||oe!==null&&(!h||(v=Wt(c,l))!=null&&v.writable)){d===void 0&&(d=g(()=>pt(h?Mt(c[l]):Ve)),i.set(l,d));var s=n(d);if(s===Ve)return!1}return h},set(c,l,d,h){var ae;var s=i.get(l),v=l in c;if(o&&l==="length")for(var m=d;m<s.v;m+=1){var N=i.get(m+"");N!==void 0?I(N,Ve):m in c&&(N=g(()=>pt(Ve)),i.set(m+"",N))}s===void 0?(!v||(ae=Wt(c,l))!=null&&ae.writable)&&(s=g(()=>pt(void 0)),I(s,g(()=>Mt(d))),i.set(l,s)):(v=s.v!==Ve,I(s,g(()=>Mt(d))));var z=Reflect.getOwnPropertyDescriptor(c,l);if(z!=null&&z.set&&z.set.call(h,d),!v){if(o&&typeof l=="string"){var se=i.get("length"),le=Number(l);Number.isInteger(le)&&le>=se.v&&I(se,le+1)}ln(u)}return!0},ownKeys(c){n(u);var l=Reflect.ownKeys(c).filter(s=>{var v=i.get(s);return v===void 0||v.v!==Ve});for(var[d,h]of i)h.v!==Ve&&!(d in c)&&l.push(d);return l},setPrototypeOf(){va()}})}function ln(t,r=1){I(t,t.v+r)}const tr=new Map;function rr(t,r){var e={f:0,v:t,reactions:null,equals:Bn,rv:0,wv:0};return e}function pt(t,r){const e=rr(t);return Oa(e),e}function H(t,r=!1){var i;const e=rr(t);return r||(e.equals=Zr),or&&_e!==null&&_e.l!==null&&((i=_e.l).s??(i.s=[])).push(e),e}function Xe(t,r){return I(t,ct(()=>n(t))),r}function I(t,r,e=!1){ne!==null&&!nt&&Ur()&&(ne.f&(Je|Gr))!==0&&!($e!=null&&$e.includes(t))&&xa();let i=e?Mt(r):r;return nr(t,i)}function nr(t,r){if(!t.equals(r)){var e=t.v;sr?tr.set(t,r):tr.set(t,e),t.v=r,t.wv=zn(),Dn(t,_t),Ur()&&oe!==null&&(oe.f&Oe)!==0&&(oe.f&(dt|zt))===0&&(qe===null?Ha([t]):qe.push(t))}return r}function Dn(t,r){var e=t.reactions;if(e!==null)for(var i=Ur(),o=e.length,u=0;u<o;u++){var f=e[u],g=f.f;(g&_t)===0&&(!i&&f===oe||(et(f,r),(g&(Oe|Ge))!==0&&((g&Je)!==0?Dn(f,Ct):Mr(f))))}}let Ra=!1;var fn,Mn,Pn,$n;function Ua(){if(fn===void 0){fn=window,Mn=/Firefox/.test(navigator.userAgent);var t=Element.prototype,r=Node.prototype,e=Text.prototype;Pn=Wt(r,"firstChild").get,$n=Wt(r,"nextSibling").get,un(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),un(e)&&(e.__t=void 0)}}function en(t=""){return document.createTextNode(t)}function mr(t){return Pn.call(t)}function Br(t){return $n.call(t)}function Pe(t,r){return mr(t)}function fe(t,r){{var e=mr(t);return e instanceof Comment&&e.data===""?Br(e):e}}function j(t,r=1,e=!1){let i=t;for(;r--;)i=Br(i);return i}function Ba(t){t.textContent=""}function ar(t){var r=Je|_t,e=ne!==null&&(ne.f&Je)!==0?ne:null;return oe===null||e!==null&&(e.f&Ge)!==0?r|=Ge:oe.f|=Un,{ctx:_e,deps:null,effects:null,equals:Bn,f:r,fn:t,reactions:null,rv:0,v:null,wv:0,parent:e??oe}}function O(t){const r=ar(t);return r.equals=Zr,r}function Cn(t){var r=t.effects;if(r!==null){t.effects=null;for(var e=0;e<r.length;e+=1)yt(r[e])}}function Ia(t){for(var r=t.parent;r!==null;){if((r.f&Je)===0)return r;r=r.parent}return null}function Da(t){var r,e=oe;Et(Ia(t));try{Cn(t),r=jn(t)}finally{Et(e)}return r}function Ln(t){var r=Da(t),e=(bt||(t.f&Ge)!==0)&&t.deps!==null?Ct:Oe;et(t,e),t.equals(r)||(t.v=r,t.wv=zn())}function kn(t){oe===null&&ne===null&&fa(),ne!==null&&(ne.f&Ge)!==0&&oe===null&&la(),sr&&sa()}function Ma(t,r){var e=r.last;e===null?r.last=r.first=t:(e.next=t,t.prev=e,r.last=t)}function qt(t,r,e,i=!0){var o=oe,u={ctx:_e,deps:null,nodes_start:null,nodes_end:null,f:t|_t,first:null,fn:r,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(e)try{Dr(u),u.f|=na}catch(c){throw yt(u),c}else r!==null&&Mr(u);var f=e&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(Un|gr))===0;if(!f&&i&&(o!==null&&Ma(u,o),ne!==null&&(ne.f&Je)!==0)){var g=ne;(g.effects??(g.effects=[])).push(u)}return u}function Vn(t){const r=qt(Sr,null,!1);return et(r,Oe),r.teardown=t,r}function cn(t){kn();var r=oe!==null&&(oe.f&dt)!==0&&_e!==null&&!_e.m;if(r){var e=_e;(e.e??(e.e=[])).push({fn:t,effect:oe,reaction:ne})}else{var i=tn(t);return i}}function Pa(t){return kn(),ur(t)}function $a(t){const r=qt(zt,t,!0);return(e={})=>new Promise(i=>{e.outro?br(r,()=>{yt(r),i(void 0)}):(yt(r),i(void 0))})}function tn(t){return qt(Sn,t,!1)}function Ca(t,r){var e=_e,i={effect:null,ran:!1};e.l.r1.push(i),i.effect=ur(()=>{t(),!i.ran&&(i.ran=!0,I(e.l.r2,!0),ct(r))})}function La(){var t=_e;ur(()=>{if(n(t.l.r2)){for(var r of t.l.r1){var e=r.effect;(e.f&Oe)!==0&&et(e,Ct),jt(e)&&Dr(e),r.ran=!1}t.l.r2.v=!1}})}function ur(t){return qt(Sr,t,!0)}function je(t,r=[],e=ar){const i=r.map(e);return rn(()=>t(...i.map(n)))}function rn(t,r=0){return qt(Sr|Gr|r,t,!0)}function ir(t,r=!0){return qt(Sr|dt,t,!0,r)}function Nn(t){var r=t.teardown;if(r!==null){const e=sr,i=ne;dn(!0),at(null);try{r.call(null)}finally{dn(e),at(i)}}}function On(t,r=!1){var e=t.first;for(t.first=t.last=null;e!==null;){var i=e.next;(e.f&zt)!==0?e.parent=null:yt(e,r),e=i}}function ka(t){for(var r=t.first;r!==null;){var e=r.next;(r.f&dt)===0&&yt(r),r=e}}function yt(t,r=!0){var e=!1;if((r||(t.f&aa)!==0)&&t.nodes_start!==null){for(var i=t.nodes_start,o=t.nodes_end;i!==null;){var u=i===o?null:Br(i);i.remove(),i=u}e=!0}On(t,r&&!e),Tr(t,0),et(t,Rr);var f=t.transitions;if(f!==null)for(const c of f)c.stop();Nn(t);var g=t.parent;g!==null&&g.first!==null&&Hn(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Hn(t){var r=t.parent,e=t.prev,i=t.next;e!==null&&(e.next=i),i!==null&&(i.prev=e),r!==null&&(r.first===t&&(r.first=i),r.last===t&&(r.last=e))}function br(t,r){var e=[];nn(t,e,!0),Xn(e,()=>{yt(t),r&&r()})}function Xn(t,r){var e=t.length;if(e>0){var i=()=>--e||r();for(var o of t)o.out(i)}else r()}function nn(t,r,e){if((t.f&lt)===0){if(t.f^=lt,t.transitions!==null)for(const f of t.transitions)(f.is_global||e)&&r.push(f);for(var i=t.first;i!==null;){var o=i.next,u=(i.f&Kr)!==0||(i.f&dt)!==0;nn(i,r,u?e:!1),i=o}}}function yr(t){Yn(t,!0)}function Yn(t,r){if((t.f&lt)!==0){t.f^=lt,(t.f&Oe)===0&&(t.f^=Oe),jt(t)&&(et(t,_t),Mr(t));for(var e=t.first;e!==null;){var i=e.next,o=(e.f&Kr)!==0||(e.f&dt)!==0;Yn(e,o?r:!1),e=i}if(t.transitions!==null)for(const u of t.transitions)(u.is_global||r)&&u.in()}}let Er=[];function Va(){var t=Er;Er=[],Nr(t)}function an(t){Er.length===0&&queueMicrotask(Va),Er.push(t)}let hr=!1,Hr=!1,Ar=null,$t=!1,sr=!1;function dn(t){sr=t}let pr=[];let ne=null,nt=!1;function at(t){ne=t}let oe=null;function Et(t){oe=t}let $e=null;function Na(t){$e=t}function Oa(t){ne!==null&&ne.f&Or&&($e===null?Na([t]):$e.push(t))}let Me=null,Ye=0,qe=null;function Ha(t){qe=t}let Wn=1,Fr=0,bt=!1,mt=null;function zn(){return++Wn}function jt(t){var h;var r=t.f;if((r&_t)!==0)return!0;if((r&Ct)!==0){var e=t.deps,i=(r&Ge)!==0;if(e!==null){var o,u,f=(r&wr)!==0,g=i&&oe!==null&&!bt,c=e.length;if(f||g){var l=t,d=l.parent;for(o=0;o<c;o++)u=e[o],(f||!((h=u==null?void 0:u.reactions)!=null&&h.includes(l)))&&(u.reactions??(u.reactions=[])).push(l);f&&(l.f^=wr),g&&d!==null&&(d.f&Ge)===0&&(l.f^=Ge)}for(o=0;o<c;o++)if(u=e[o],jt(u)&&Ln(u),u.wv>t.wv)return!0}(!i||oe!==null&&!bt)&&et(t,Oe)}return!1}function Xa(t,r){for(var e=r;e!==null;){if((e.f&gr)!==0)try{e.fn(t);return}catch{e.f^=gr}e=e.parent}throw hr=!1,t}function Ya(t){return(t.f&Rr)===0&&(t.parent===null||(t.parent.f&gr)===0)}function Ir(t,r,e,i){if(hr){if(e===null&&(hr=!1),Ya(r))throw t;return}e!==null&&(hr=!0);{Xa(t,r);return}}function qn(t,r,e=!0){var i=t.reactions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];$e!=null&&$e.includes(t)||((u.f&Je)!==0?qn(u,r,!1):r===u&&(e?et(u,_t):(u.f&Oe)!==0&&et(u,Ct),Mr(u)))}}function jn(t){var v;var r=Me,e=Ye,i=qe,o=ne,u=bt,f=$e,g=_e,c=nt,l=t.f;Me=null,Ye=0,qe=null,bt=(l&Ge)!==0&&(nt||!$t||ne===null),ne=(l&(dt|zt))===0?t:null,$e=null,sn(t.ctx),nt=!1,Fr++,t.f|=Or;try{var d=(0,t.fn)(),h=t.deps;if(Me!==null){var s;if(Tr(t,Ye),h!==null&&Ye>0)for(h.length=Ye+Me.length,s=0;s<Me.length;s++)h[Ye+s]=Me[s];else t.deps=h=Me;if(!bt)for(s=Ye;s<h.length;s++)((v=h[s]).reactions??(v.reactions=[])).push(t)}else h!==null&&Ye<h.length&&(Tr(t,Ye),h.length=Ye);if(Ur()&&qe!==null&&!nt&&h!==null&&(t.f&(Je|Ct|_t))===0)for(s=0;s<qe.length;s++)qn(qe[s],t);return o!==null&&(Fr++,qe!==null&&(i===null?i=qe:i.push(...qe))),d}finally{Me=r,Ye=e,qe=i,ne=o,bt=u,$e=f,sn(g),nt=c,t.f^=Or}}function Wa(t,r){let e=r.reactions;if(e!==null){var i=Qn.call(e,t);if(i!==-1){var o=e.length-1;o===0?e=r.reactions=null:(e[i]=e[o],e.pop())}}e===null&&(r.f&Je)!==0&&(Me===null||!Me.includes(r))&&(et(r,Ct),(r.f&(Ge|wr))===0&&(r.f^=wr),Cn(r),Tr(r,0))}function Tr(t,r){var e=t.deps;if(e!==null)for(var i=r;i<e.length;i++)Wa(t,e[i])}function Dr(t){var r=t.f;if((r&Rr)===0){et(t,Oe);var e=oe,i=_e,o=$t;oe=t,$t=!0;try{(r&Gr)!==0?ka(t):On(t),Nn(t);var u=jn(t);t.teardown=typeof u=="function"?u:null,t.wv=Wn;var f=t.deps,g;on&&ha&&t.f&_t}catch(c){Ir(c,t,e,i||t.ctx)}finally{$t=o,oe=e}}}function za(){try{ca()}catch(t){if(Ar!==null)Ir(t,Ar,null);else throw t}}function qa(){var t=$t;try{var r=0;for($t=!0;pr.length>0;){r++>1e3&&za();var e=pr,i=e.length;pr=[];for(var o=0;o<i;o++){var u=Ga(e[o]);ja(u)}}}finally{Hr=!1,$t=t,Ar=null,tr.clear()}}function ja(t){var r=t.length;if(r!==0)for(var e=0;e<r;e++){var i=t[e];if((i.f&(Rr|lt))===0)try{jt(i)&&(Dr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Hn(i):i.fn=null))}catch(o){Ir(o,i,null,i.ctx)}}}function Mr(t){Hr||(Hr=!0,queueMicrotask(qa));for(var r=Ar=t;r.parent!==null;){r=r.parent;var e=r.f;if((e&(zt|dt))!==0){if((e&Oe)===0)return;r.f^=Oe}}pr.push(r)}function Ga(t){for(var r=[],e=t;e!==null;){var i=e.f,o=(i&(dt|zt))!==0,u=o&&(i&Oe)!==0;if(!u&&(i&lt)===0){if((i&Sn)!==0)r.push(e);else if(o)e.f^=Oe;else{var f=ne;try{ne=e,jt(e)&&Dr(e)}catch(l){Ir(l,e,null,e.ctx)}finally{ne=f}}var g=e.first;if(g!==null){e=g;continue}}var c=e.parent;for(e=e.next;e===null&&c!==null;)e=c.next,c=c.parent}return r}function n(t){var r=t.f,e=(r&Je)!==0;if(mt!==null&&mt.add(t),ne!==null&&!nt){if(!($e!=null&&$e.includes(t))){var i=ne.deps;t.rv<Fr&&(t.rv=Fr,Me===null&&i!==null&&i[Ye]===t?Ye++:Me===null?Me=[t]:(!bt||!Me.includes(t))&&Me.push(t))}}else if(e&&t.deps===null&&t.effects===null){var o=t,u=o.parent;u!==null&&(u.f&Ge)===0&&(o.f^=Ge)}return e&&(o=t,jt(o)&&Ln(o)),sr&&tr.has(t)?tr.get(t):t.v}function Ka(t){var r=mt;mt=new Set;var e=mt,i;try{if(ct(t),r!==null)for(i of mt)r.add(i)}finally{mt=r}return e}function Ne(t){var r=Ka(()=>ct(t));for(var e of r)if((e.f&Rn)!==0)for(const i of e.deps||[])(i.f&Je)===0&&nr(i,i.v);else nr(e,e.v)}function ct(t){var r=nt;try{return nt=!0,t()}finally{nt=r}}const Za=-7169;function et(t,r){t.f=t.f&Za|r}function Qa(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Pt in t)Xr(t);else if(!Array.isArray(t))for(let r in t){const e=t[r];typeof e=="object"&&e&&Pt in e&&Xr(e)}}}function Xr(t,r=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!r.has(t)){r.add(t),t instanceof Date&&t.getTime();for(let i in t)try{Xr(t[i],r)}catch{}const e=jr(t);if(e!==Object.prototype&&e!==Array.prototype&&e!==Map.prototype&&e!==Set.prototype&&e!==Date.prototype){const i=Tn(e);for(let o in i){const u=i[o].get;if(u)try{u.call(t)}catch{}}}}}const Ja=["touchstart","touchmove"];function ei(t){return Ja.includes(t)}let _n=!1;function ti(){_n||(_n=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var r;if(!t.defaultPrevented)for(const e of t.target.elements)(r=e.__on_r)==null||r.call(e)})},{capture:!0}))}function Gn(t){var r=ne,e=oe;at(null),Et(null);try{return t()}finally{at(r),Et(e)}}function ri(t,r,e,i=e){t.addEventListener(r,()=>Gn(e));const o=t.__on_r;o?t.__on_r=()=>{o(),i(!0)}:t.__on_r=()=>i(!0),ti()}const Kn=new Set,Yr=new Set;function ni(t,r,e,i={}){function o(u){if(i.capture||er.call(r,u),!u.cancelBubble)return Gn(()=>e==null?void 0:e.call(this,u))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?an(()=>{r.addEventListener(t,o,i)}):r.addEventListener(t,o,i),o}function Dt(t,r,e,i,o){var u={capture:i,passive:o},f=ni(t,r,e,u);(r===document.body||r===window||r===document)&&Vn(()=>{r.removeEventListener(t,f,u)})}function Gt(t){for(var r=0;r<t.length;r++)Kn.add(t[r]);for(var e of Yr)e(t)}function er(t){var le;var r=this,e=r.ownerDocument,i=t.type,o=((le=t.composedPath)==null?void 0:le.call(t))||[],u=o[0]||t.target,f=0,g=t.__root;if(g){var c=o.indexOf(g);if(c!==-1&&(r===document||r===window)){t.__root=r;return}var l=o.indexOf(r);if(l===-1)return;c<=l&&(f=c)}if(u=o[f]||t.target,u!==r){Jn(t,"currentTarget",{configurable:!0,get(){return u||e}});var d=ne,h=oe;at(null),Et(null);try{for(var s,v=[];u!==null;){var m=u.assignedSlot||u.parentNode||u.host||null;try{var N=u["__"+i];if(N!=null&&(!u.disabled||t.target===u))if(zr(N)){var[z,...se]=N;z.apply(u,[t,...se])}else N.call(u,t)}catch(ae){s?v.push(ae):s=ae}if(t.cancelBubble||m===r||m===null)break;u=m}if(s){for(let ae of v)queueMicrotask(()=>{throw ae});throw s}}finally{t.__root=r,delete t.currentTarget,at(d),Et(h)}}}function ai(t){var r=document.createElement("template");return r.innerHTML=t,r.content}function Wr(t,r){var e=oe;e.nodes_start===null&&(e.nodes_start=t,e.nodes_end=r)}function Y(t,r){var e=(r&Fa)!==0,i=(r&Ta)!==0,o,u=!t.startsWith("<!>");return()=>{o===void 0&&(o=ai(u?t:"<!>"+t),e||(o=mr(o)));var f=i||Mn?document.importNode(o,!0):o.cloneNode(!0);if(e){var g=mr(f),c=f.lastChild;Wr(g,c)}else Wr(f,f);return f}}function vr(){var t=document.createDocumentFragment(),r=document.createComment(""),e=en();return t.append(r,e),Wr(r,e),t}function V(t,r){t!==null&&t.before(r)}function Te(t,r){var e=r==null?"":typeof r=="object"?r+"":r;e!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=e,t.nodeValue=e+"")}function ii(t,r){return oi(t,r)}const Ht=new Map;function oi(t,{target:r,anchor:e,props:i={},events:o,context:u,intro:f=!0}){Ua();var g=new Set,c=h=>{for(var s=0;s<h.length;s++){var v=h[s];if(!g.has(v)){g.add(v);var m=ei(v);r.addEventListener(v,er,{passive:m});var N=Ht.get(v);N===void 0?(document.addEventListener(v,er,{passive:m}),Ht.set(v,1)):Ht.set(v,N+1)}}};c(qr(Kn)),Yr.add(c);var l=void 0,d=$a(()=>{var h=e??r.appendChild(en());return ir(()=>{if(u){At({});var s=_e;s.c=u}o&&(i.$$events=o),l=t(h,i)||{},u&&Ft()}),()=>{var m;for(var s of g){r.removeEventListener(s,er);var v=Ht.get(s);--v===0?(document.removeEventListener(s,er),Ht.delete(s)):Ht.set(s,v)}Yr.delete(c),h!==e&&((m=h.parentNode)==null||m.removeChild(h))}});return ui.set(l,d),l}let ui=new WeakMap;function ee(t,r,[e,i]=[0,0]){var o=t,u=null,f=null,g=Ve,c=e>0?Kr:0,l=!1;const d=(s,v=!0)=>{l=!0,h(v,s)},h=(s,v)=>{g!==(g=s)&&(g?(u?yr(u):v&&(u=ir(()=>v(o))),f&&br(f,()=>{f=null})):(f?yr(f):v&&(f=ir(()=>v(o,[e+1,i]))),u&&br(u,()=>{u=null})))};rn(()=>{l=!1,r(d),l||h(null,null)},c)}function ut(t,r){return r}function si(t,r,e,i){for(var o=[],u=r.length,f=0;f<u;f++)nn(r[f].e,o,!0);var g=u>0&&o.length===0&&e!==null;if(g){var c=e.parentNode;Ba(c),c.append(e),i.clear(),wt(t,r[0].prev,r[u-1].next)}Xn(o,()=>{for(var l=0;l<u;l++){var d=r[l];g||(i.delete(d.k),wt(t,d.prev,d.next)),yt(d.e,!g)}})}function st(t,r,e,i,o,u=null){var f=t,g={flags:r,items:new Map,first:null},c=(r&In)!==0;if(c){var l=t;f=l.appendChild(en())}var d=null,h=!1,s=O(()=>{var v=e();return zr(v)?v:v==null?[]:qr(v)});rn(()=>{var v=n(s),m=v.length;h&&m===0||(h=m===0,li(v,g,f,o,r,i,e),u!==null&&(m===0?d?yr(d):d=ir(()=>u(f)):d!==null&&br(d,()=>{d=null})),n(s))})}function li(t,r,e,i,o,u,f){var St,Rt,Ut,xt;var g=(o&ga)!==0,c=(o&(Qr|Jr))!==0,l=t.length,d=r.items,h=r.first,s=h,v,m=null,N,z=[],se=[],le,ae,P,q;if(g)for(q=0;q<l;q+=1)le=t[q],ae=u(le,q),P=d.get(ae),P!==void 0&&((St=P.a)==null||St.measure(),(N??(N=new Set)).add(P));for(q=0;q<l;q+=1){if(le=t[q],ae=u(le,q),P=d.get(ae),P===void 0){var Q=s?s.e.nodes_start:e;m=ci(Q,r,m,m===null?r.first:m.next,le,ae,q,i,o,f),d.set(ae,m),z=[],se=[],s=m.next;continue}if(c&&fi(P,le,q,o),(P.e.f&lt)!==0&&(yr(P.e),g&&((Rt=P.a)==null||Rt.unfix(),(N??(N=new Set)).delete(P))),P!==s){if(v!==void 0&&v.has(P)){if(z.length<se.length){var G=se[0],K;m=G.prev;var ue=z[0],Ce=z[z.length-1];for(K=0;K<z.length;K+=1)vn(z[K],G,e);for(K=0;K<se.length;K+=1)v.delete(se[K]);wt(r,ue.prev,Ce.next),wt(r,m,ue),wt(r,Ce,G),s=G,m=Ce,q-=1,z=[],se=[]}else v.delete(P),vn(P,s,e),wt(r,P.prev,P.next),wt(r,P,m===null?r.first:m.next),wt(r,m,P),m=P;continue}for(z=[],se=[];s!==null&&s.k!==ae;)(s.e.f&lt)===0&&(v??(v=new Set)).add(s),se.push(s),s=s.next;if(s===null)continue;P=s}z.push(P),m=P,s=P.next}if(s!==null||v!==void 0){for(var Le=v===void 0?[]:qr(v);s!==null;)(s.e.f&lt)===0&&Le.push(s),s=s.next;var vt=Le.length;if(vt>0){var Tt=(o&In)!==0&&l===0?e:null;if(g){for(q=0;q<vt;q+=1)(Ut=Le[q].a)==null||Ut.measure();for(q=0;q<vt;q+=1)(xt=Le[q].a)==null||xt.fix()}si(r,Le,Tt,d)}}g&&an(()=>{var kt;if(N!==void 0)for(P of N)(kt=P.a)==null||kt.apply()}),oe.first=r.first&&r.first.e,oe.last=m&&m.e}function fi(t,r,e,i){(i&Qr)!==0&&nr(t.v,r),(i&Jr)!==0?nr(t.i,e):t.i=e}function ci(t,r,e,i,o,u,f,g,c,l){var d=(c&Qr)!==0,h=(c&wa)===0,s=d?h?H(o):rr(o):o,v=(c&Jr)===0?f:rr(f),m={i:v,v:s,k:u,a:null,e:null,prev:e,next:i};try{return m.e=ir(()=>g(t,s,v,l),Ra),m.e.prev=e&&e.e,m.e.next=i&&i.e,e===null?r.first=m:(e.next=m,e.e.next=m.e),i!==null&&(i.prev=m,i.e.prev=m.e),m}finally{}}function vn(t,r,e){for(var i=t.next?t.next.e.nodes_start:e,o=r?r.e.nodes_start:e,u=t.e.nodes_start;u!==i;){var f=Br(u);o.before(u),u=f}}function wt(t,r,e){r===null?t.first=e:(r.next=e,r.e.next=e&&e.e),e!==null&&(e.prev=r,e.e.prev=r&&r.e)}function Zn(t){var r,e,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(e=Zn(t[r]))&&(i&&(i+=" "),i+=e)}else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function di(){for(var t,r,e=0,i="",o=arguments.length;e<o;e++)(t=arguments[e])&&(r=Zn(t))&&(i&&(i+=" "),i+=r);return i}function _i(t){return typeof t=="object"?di(t):t??""}function vi(t,r,e){var i=t==null?"":""+t;return i===""?null:i}function xn(t,r,e,i,o,u){var f=t.__className;if(f!==e){var g=vi(e);g==null?t.removeAttribute("class"):t.className=g,t.__className=e}return u}const xi=Symbol("is custom element"),hi=Symbol("is html");function Xt(t,r,e,i){var o=pi(t);o[r]!==(o[r]=e)&&(r==="loading"&&(t[oa]=e),e==null?t.removeAttribute(r):typeof e!="string"&&gi(t).includes(r)?t[r]=e:t.setAttribute(r,e))}function pi(t){return t.__attributes??(t.__attributes={[xi]:t.nodeName.includes("-"),[hi]:t.namespaceURI===Sa})}var hn=new Map;function gi(t){var r=hn.get(t.nodeName);if(r)return r;hn.set(t.nodeName,r=[]);for(var e,i=t,o=Element.prototype;o!==i;){e=Tn(i);for(var u in e)e[u].set&&r.push(u);i=jr(i)}return r}function wi(t,r,e=r){ri(t,"change",i=>{var o=i?t.defaultChecked:t.checked;e(o)}),ct(r)==null&&e(t.checked),ur(()=>{var i=r();t.checked=!!i})}function pn(t,r){return t===r||(t==null?void 0:t[Pt])===r}function mi(t={},r,e,i){return tn(()=>{var o,u;return ur(()=>{o=u,u=[],ct(()=>{t!==e(...u)&&(r(t,...u),o&&pn(e(...o),t)&&r(null,...o))})}),()=>{an(()=>{u&&pn(e(...u),t)&&r(null,...u)})}}),t}function Lt(t=!1){const r=_e,e=r.l.u;if(!e)return;let i=()=>Qa(r.s);if(t){let o=0,u={};const f=ar(()=>{let g=!1;const c=r.s;for(const l in c)c[l]!==u[l]&&(u[l]=c[l],g=!0);return g&&o++,o});i=()=>n(f)}e.b.length&&Pa(()=>{gn(r,i),Nr(e.b)}),cn(()=>{const o=ct(()=>e.m.map(ra));return()=>{for(const u of o)typeof u=="function"&&u()}}),e.a.length&&cn(()=>{gn(r,i),Nr(e.a)})}function gn(t,r){if(t.l.s)for(const e of t.l.s)n(e);r()}let xr=!1;function bi(t){var r=xr;try{return xr=!1,[t(),xr]}finally{xr=r}}function wn(t){var r;return((r=t.ctx)==null?void 0:r.d)??!1}function Be(t,r,e,i){var G;var o=(e&ma)!==0,u=!or||(e&ba)!==0,f=(e&Ea)!==0,g=(e&Aa)!==0,c=!1,l;f?[l,c]=bi(()=>t[r]):l=t[r];var d=Pt in t||ia in t,h=f&&(((G=Wt(t,r))==null?void 0:G.set)??(d&&r in t&&(K=>t[r]=K)))||void 0,s=i,v=!0,m=!1,N=()=>(m=!0,v&&(v=!1,g?s=ct(i):s=i),s);l===void 0&&i!==void 0&&(h&&u&&da(),l=N(),h&&h(l));var z;if(u)z=()=>{var K=t[r];return K===void 0?N():(v=!0,m=!1,K)};else{var se=(o?ar:O)(()=>t[r]);se.f|=Rn,z=()=>{var K=n(se);return K!==void 0&&(s=void 0),K===void 0?s:K}}if((e&ya)===0)return z;if(h){var le=t.$$legacy;return function(K,ue){return arguments.length>0?((!u||!ue||le||c)&&h(ue?z():K),K):z()}}var ae=!1,P=!1,q=H(l),Q=ar(()=>{var K=z(),ue=n(q);return ae?(ae=!1,P=!0,ue):(P=!1,q.v=K)});return f&&n(Q),o||(Q.equals=Zr),function(K,ue){if(mt!==null&&(ae=P,z(),n(q)),arguments.length>0){const Ce=ue?n(Q):u&&f?Mt(K):K;if(!Q.equals(Ce)){if(ae=!0,I(q,Ce),m&&s!==void 0&&(s=Ce),wn(Q))return K;ct(()=>n(Q))}return K}return wn(Q)?Q.v:n(Q)}}const yi="5";var Fn;typeof window<"u"&&((Fn=window.__svelte??(window.__svelte={})).v??(Fn.v=new Set)).add(yi);pa();const Ei=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,Ai=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,Fi=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,Ti=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,Si=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,Ri=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,Ui=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,Bi=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,Qt=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],mn=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],Ii=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],Di=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],Mi=[{count:2,offset:0}],gt=(t,r,e,i)=>{const o=t.createShader(r);if(!o)throw new Error(`failed to create shader '${i}'`);if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){const u=t.getShaderInfoLog(o);throw new Error(`compilation error in shader '${i}':
${u}`)}return o},Jt=(t,r,e,i)=>{const o=t.createProgram();if(!o)throw new Error(`failed to create program '${i}'`);if(t.attachShader(o,r),t.attachShader(o,e),t.linkProgram(o),t.detachShader(o,r),t.detachShader(o,e),!t.getProgramParameter(o,t.LINK_STATUS)){const u=t.getProgramInfoLog(o);throw new Error(`link error in program '${i}':
${u}`)}return o};function*Pi(t,r){let e=0;for(;!(e>t.length);){const i=e+r;yield t.slice(e,i),e=i}}function*$i(t,r){let e=0;for(;;){const i=e+r;if(i>t.length)break;yield t.slice(e,i),e=i}}function kr(t,r,e,i){const o=r*2,u=t.map(e);return u.length<o?u:Pi(u,r).map(f=>[...f]).map(i).toArray()}function ft(t){return Math.round(t*255)}let rt=null;const Ci=(t,r,e,i)=>{rt={value:t,level:r,draggedID:e,set:i}},Li=()=>{rt=null},ki=(t,r,e)=>{!rt||rt.level!==t||rt.draggedID===r||(rt.set&&(rt.set(rt.value),rt.set=null),e(rt.value))};var Vi=(t,r)=>r(!1),Ni=Y('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),Oi=(t,r)=>r(!0),Hi=Y('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),Xi=Y('<input type="checkbox">'),Yi=Y("<!> <!> <label> </label> <br>",1);function De(t,r){At(r,!1);let e=Be(r,"expanded",12),i=Be(r,"id",8),o=Be(r,"text",8),u=Be(r,"checked",12,null),f=Be(r,"level",8),g=Be(r,"onexpandedchange",8,null),c=Be(r,"oncheckedchange",8,null);const l=Q=>{e(Q),g()&&g()()},d=Q=>{u(Q),c()&&c()()},h=()=>Ci(!u(),f(),i(),d),s=()=>ki(f(),i(),d),v=Li;Lt();var m=Yi(),N=fe(m);{var z=Q=>{var G=Ni();G.__click=[Vi,l],je(()=>Xt(G,"id",u()===null?i():null)),V(Q,G)},se=Q=>{var G=Hi();G.__click=[Oi,l],je(()=>Xt(G,"id",u()===null?i():null)),V(Q,G)};ee(N,Q=>{e()?Q(z):Q(se,!1)})}var le=j(N,2);{var ae=Q=>{var G=Xi();Xt(G,"draggable",!0),G.__change=function(...K){var ue;(ue=c())==null||ue.apply(this,K)},je(()=>Xt(G,"id",i())),Dt("dragstart",G,h),Dt("dragenter",G,s),Dt("dragend",G,v),wi(G,u),V(Q,G)};ee(le,Q=>{u()!==null&&Q(ae)})}var P=j(le,2);Xt(P,"draggable",!0),P.__change=function(...Q){var G;(G=c())==null||G.apply(this,Q)};var q=Pe(P);je(()=>{Xt(P,"for",i()),Te(q,o())}),Dt("dragstart",P,h),Dt("dragenter",P,s),Dt("dragend",P,v),V(t,m),Ft()}Gt(["click","change"]);var Wi=(t,r,e)=>r()(e()),zi=Y('<button class="px-1 bg-gray-200 hover:bg-gray-100">view image</button> <br>',1),qi=Y('<div class="ml-2 w-full"><!> <br> <br> <br> <br></div>');function bn(t,r){At(r,!1);let e=Be(r,"image",8),i=Be(r,"view",8,null);Lt();var o=qi(),u=Pe(o);{var f=h=>{var s=zi(),v=fe(s);v.__click=[Wi,i,e],V(h,s)};ee(u,h=>{i()&&h(f)})}var g=j(u),c=j(g,2),l=j(c,2),d=j(l,2);je((h,s,v,m)=>{Te(g,` screen: ${e().x??""},${e().y??""}
  ${e().w??""}x${e().h??""} `),Te(c,` atlas: ${e().ax??""},${e().ay??""}
  ${e().aw??""}x${e().ah??""} `),Te(l,` rgb: ${h??""}, ${s??""}, ${v??""} `),Te(d,` alpha: ${m??""} `)},[()=>ft(e().r),()=>ft(e().g),()=>ft(e().b),()=>e().a.toPrecision(4)],O),V(t,o),Ft()}Gt(["click"]);var ji=(t,r,e)=>r()(e()),Gi=Y('<button class="px-1 bg-gray-200 hover:bg-gray-100">view texture</button> <br>',1),Ki=Y(" <br>",1),Zi=Y('<div class="ml-2 w-full"><!> <!> <br> <br> <br> <br></div>');function yn(t,r){At(r,!1);let e=Be(r,"vertex",8),i=Be(r,"view",8,null);Lt();var o=Zi(),u=Pe(o);{var f=v=>{var m=Gi(),N=fe(m);N.__click=[ji,i,e],V(v,m)};ee(u,v=>{i()&&v(f)})}var g=j(u,2);{var c=v=>{var m=Ki(),N=fe(m);je(()=>Te(N,`model: ${e().modelpoint.x??""},${e().modelpoint.y??""},${e().modelpoint.z??""} `)),V(v,m)};ee(g,v=>{e().modelpoint&&v(c)})}var l=j(g),d=j(l,2),h=j(d,2),s=j(h,2);je((v,m,N,z,se,le)=>{Te(l,` atlas: ${e().ax??""},${e().ay??""}
  ${e().aw??""}x${e().ah??""} `),Te(d,` uv: ${v??""}, ${m??""} `),Te(h,` rgb: ${N??""}, ${z??""}, ${se??""} `),Te(s,` alpha: ${le??""} `)},[()=>e().u.toPrecision(4),()=>e().v.toPrecision(4),()=>ft(e().r),()=>ft(e().g),()=>ft(e().b),()=>e().a.toPrecision(4)],O),V(t,o),Ft()}Gt(["click"]);var Qi=Y('<div class="ml-2 w-full"> <br> <br> <br></div>');function En(t,r){At(r,!1);let e=Be(r,"vertex",8);Lt();var i=Qi(),o=Pe(i),u=j(o,2),f=j(u,2);je((g,c,l,d)=>{Te(o,`model: ${e().modelpoint.x??""},${e().modelpoint.y??""},${e().modelpoint.z??""} `),Te(u,` rgb: ${g??""}, ${c??""}, ${l??""} `),Te(f,` alpha: ${d??""} `)},[()=>ft(e().r),()=>ft(e().g),()=>ft(e().b),()=>e().a.toPrecision(4)],O),V(t,i),Ft()}var Ji=Y("<div> </div>"),eo=(t,r,e)=>{const i=r().textureId,o=e().textures[i];e(e().selectedTextureId=i.toString(),!0),e(e().selectedTexture=o,!0),e(e().textureBoundX=0,!0),e(e().textureBoundY=0,!0),e(e().textureBoundW=o.width,!0),e(e().textureBoundH=o.height,!0),e(e().textureViewX=0,!0),e(e().textureViewY=0,!0),e(e().textureViewScale=100,!0),e().redraw()},to=Y('<button class="px-1 bg-gray-200 hover:bg-gray-100"> </button> <br>',1),ro=Y("<!> <!>",1),no=Y('<div class="ml-1"></div>'),ao=Y("<!> <!>",1),io=Y("<!> <!>",1),oo=Y('<div class="ml-1"><!></div>'),uo=Y("<!> <!>",1),so=Y("<!> <!>",1),lo=Y('<div class="ml-1"></div>'),fo=Y("<!> <!>",1),co=Y("<!> <!>",1),_o=Y('<div class="ml-1"><!></div>'),vo=Y("<!> <!>",1),xo=Y("<!> <!>",1),ho=Y('<div class="ml-1"></div>'),po=Y("<!> <!>",1),go=Y("<!> <!>",1),wo=Y('<div class="ml-1"><!></div>'),mo=Y("<!> <!>",1),bo=Y('<div class="ml-1"><!> <!></div>'),yo=Y(" <br> <!> <!>",1),Eo=Y('<div class="ml-3 text-sm"><!> <!> <!> <!> <!></div>');function Ao(t,r){At(r,!1);let e=Be(r,"entity",12),i=Be(r,"menuData",12),o=Be(r,"level",8);const u=6,f=100;let g=H(!1),c=H(!1),l=H(!1);function d(S){return"images"in S}function h(S){return"vertices"in S}function s(S){return"vertices"in S}const v=(S,J)=>{const L=S[0];let xe=L.x,ke=L.x,be=L.y,Se=L.y;for(const te of S)te.x<xe&&(xe=te.x),te.x>ke&&(ke=te.x),te.y<be&&(be=te.y),te.y>Se&&(Se=te.y);return{x:xe,y:be,w:ke-xe,h:Se-be,ax:L.ax,ay:L.ay,aw:L.aw,ah:L.ah,r:L.r,g:L.g,b:L.b,a:L.a,expanded:!1,index:J}},m=(S,J)=>{const L=J*f,xe=L*u;return{images:S,desc:`${L}-${L+S.length-1}`,expanded:!1,vertexRangeStart:xe,vertexRangeEnd:xe+S.length*u}},N=(S,J)=>({modelpoint:{...S},expanded:!1,index:J,...S}),z=(S,J)=>({modelpoint:null,expanded:!1,index:J,...S}),se=(S,J)=>{const L=J*f;return{vertices:S,desc:`${L}-${L+S.length-1}`,expanded:!1}},le=(S,J)=>({modelpoint:{...S},expanded:!1,index:J,...S}),ae=(S,J)=>{const L=J*f;return{vertices:S,desc:`${L}-${L+S.length-1}`,expanded:!1}},P=(S,J)=>({vertices:kr(S.vertices,f,le,ae),vertexCount:S.vertices.length,expanded:!1,verticesExpanded:!1,index:J});let q=H(null),Q=H(0),G=H(null),K=H(0),ue=H(null),Ce=H(0);if(e().type==="batch2d"||e().type==="minimap2d"){const S=[...$i(e().vertices,u)];I(Q,S.length),I(q,kr(S,f,v,m))}else if(e().vertices){const S=e().type!=="renderparticles"?N:z;I(K,e().vertices.length),I(G,kr(e().vertices,f,S,se))}e().models&&(I(Ce,e().models.length),I(ue,e().models.map(P)));const Le=S=>{const J=e().textureId,L=i().textures[J];i(i().selectedTextureId=e().uuid,!0),i(i().selectedTexture=L,!0),i(i().textureBoundX=S.ax,!0),i(i().textureBoundY=S.ay,!0),i(i().textureBoundW=S.aw,!0),i(i().textureBoundH=S.ah,!0),i(i().textureViewX=0,!0),i(i().textureViewY=0,!0),i(i().textureViewScale=100,!0),i().redraw()};Lt();var vt=Eo(),Tt=Pe(vt);{var St=S=>{var J=Ji(),L=Pe(J);je(()=>Te(L,`animated: ${e().animated??""}`)),V(S,J)};ee(Tt,S=>{typeof e().animated=="boolean"&&S(St)})}var Rt=j(Tt,2);{var Ut=S=>{var J=to(),L=fe(J);L.__click=[eo,e,i];var xe=Pe(L);je(()=>Te(xe,`texture: #${e().textureId??""}`)),V(S,J)};ee(Rt,S=>{typeof e().textureId=="number"&&S(Ut)})}var xt=j(Rt,2);{var kt=S=>{var J=uo(),L=fe(J);const xe=O(()=>`${e().uuid}-images2d`),ke=O(()=>`2D images (${n(Q)})`);De(L,{get id(){return n(xe)},get text(){return n(ke)},get level(){return o()},get expanded(){return n(g)},set expanded(te){I(g,te)},$$legacy:!0});var be=j(L,2);{var Se=te=>{var he=vr(),tt=fe(he);st(tt,1,()=>n(q),ut,(it,X,ce)=>{var de=oo(),w=Pe(de);{var Re=ye=>{var ge=ao(),Ie=fe(ge),Ke=()=>n(X).images.every(ve=>e().enabledVerticesList[ve.index*u]),we=ve=>{for(let Ae=n(X).vertexRangeStart;Ae<n(X).vertexRangeEnd;Ae+=1)e(e().enabledVerticesList[Ae]=ve,!0)};const He=O(()=>`${e().uuid}-images-${n(X).desc}`),Ee=O(()=>`[Images ${n(X).desc}]`),We=O(()=>o()+1);De(Ie,{get checked(){return Ke()},set checked(ve){we(ve)},get oncheckedchange(){return i().redraw},get id(){return n(He)},get text(){return n(Ee)},get level(){return n(We)},get expanded(){return n(X).expanded},set expanded(ve){n(X).expanded=ve,Ne(()=>n(q))},$$legacy:!0});var pe=j(Ie,2);{var me=ve=>{var Ae=no();st(Ae,5,()=>n(X).images,ut,(x,a,p)=>{var _=ro(),D=fe(_),E=()=>e().enabledVerticesList[n(a).index*u],b=M=>{for(let F=0;F<u;F+=1)e(e().enabledVerticesList[n(a).index*u+F]=M,!0)};const U=O(()=>`${e().uuid}-images-${n(X).desc}-${p}`),A=O(()=>o()+2);De(D,{get checked(){return E()},set checked(M){b(M)},get oncheckedchange(){return i().redraw},get id(){return n(U)},text:`Image ${ce*f+p}`,get level(){return n(A)},get expanded(){return n(a).expanded},set expanded(M){n(a).expanded=M,Ne(()=>(n(q),n(X).images))},$$legacy:!0});var $=j(D,2);{var C=M=>{bn(M,{get image(){return n(a)},view:Le})};ee($,M=>{n(a).expanded&&M(C)})}V(x,_)}),V(ve,Ae)};ee(pe,ve=>{n(X).expanded&&ve(me)})}V(ye,ge)},Ue=ye=>{var ge=io(),Ie=fe(ge),Ke=()=>e().enabledVerticesList[n(X).index*u],we=me=>{for(let ve=0;ve<u;ve+=1)e(e().enabledVerticesList[n(X).index*u+ve]=me,!0)};const He=O(()=>`${e().uuid}-images-${ce}`),Ee=O(()=>o()+1);De(Ie,{get checked(){return Ke()},set checked(me){we(me)},get oncheckedchange(){return i().redraw},get id(){return n(He)},text:`Image ${ce}`,get level(){return n(Ee)},get expanded(){return n(X).expanded},set expanded(me){n(X).expanded=me,Ne(()=>n(q))},$$legacy:!0});var We=j(Ie,2);{var pe=me=>{bn(me,{get image(){return n(X)},view:Le})};ee(We,me=>{n(X).expanded&&me(pe)})}V(ye,ge)};ee(w,ye=>{d(n(X))?ye(Re):ye(Ue,!1)})}V(it,de)}),V(te,he)};ee(be,te=>{n(g)&&te(Se)})}V(S,J)};ee(xt,S=>{n(q)&&n(Q)&&S(kt)})}var Bt=j(xt,2);{var Vt=S=>{var J=vo(),L=fe(J);const xe=O(()=>`${e().uuid}-vertices3d`),ke=O(()=>`3D vertices (${n(K)})`);De(L,{get id(){return n(xe)},get text(){return n(ke)},get level(){return o()},get expanded(){return n(c)},set expanded(te){I(c,te)},$$legacy:!0});var be=j(L,2);{var Se=te=>{var he=vr(),tt=fe(he);st(tt,1,()=>n(G),ut,(it,X,ce)=>{var de=_o(),w=Pe(de);{var Re=ye=>{var ge=fo(),Ie=fe(ge);const Ke=O(()=>`${e().uuid}-vertices-${n(X).desc}`),we=O(()=>`[Vertices ${n(X).desc}]`),He=O(()=>o()+1);De(Ie,{get id(){return n(Ke)},get text(){return n(we)},get level(){return n(He)},get expanded(){return n(X).expanded},set expanded(pe){n(X).expanded=pe,Ne(()=>n(G))},$$legacy:!0});var Ee=j(Ie,2);{var We=pe=>{var me=lo();st(me,5,()=>n(X).vertices,ut,(ve,Ae,x)=>{var a=so(),p=fe(a);const _=O(()=>`${e().uuid}-vertices-${n(X).desc}-${n(Ae).index}`),D=O(()=>`Vertex ${n(Ae).index}`),E=O(()=>o()+2);De(p,{get id(){return n(_)},get text(){return n(D)},get level(){return n(E)},get expanded(){return n(Ae).expanded},set expanded(A){n(Ae).expanded=A,Ne(()=>(n(G),n(X).vertices))},$$legacy:!0});var b=j(p,2);{var U=A=>{yn(A,{get vertex(){return n(Ae)},view:Le})};ee(b,A=>{n(Ae).expanded&&A(U)})}V(ve,a)}),V(pe,me)};ee(Ee,pe=>{n(X).expanded&&pe(We)})}V(ye,ge)},Ue=ye=>{var ge=co(),Ie=fe(ge);const Ke=O(()=>`${e().uuid}-vertices-${n(X).index}`),we=O(()=>`Vertex ${n(X).index}`),He=O(()=>o()+1);De(Ie,{get id(){return n(Ke)},get text(){return n(we)},get level(){return n(He)},get expanded(){return n(X).expanded},set expanded(pe){n(X).expanded=pe,Ne(()=>n(G))},$$legacy:!0});var Ee=j(Ie,2);{var We=pe=>{yn(pe,{get vertex(){return n(X)},view:Le})};ee(Ee,pe=>{n(X).expanded&&pe(We)})}V(ye,ge)};ee(w,ye=>{h(n(X))?ye(Re):ye(Ue,!1)})}V(it,de)}),V(te,he)};ee(be,te=>{n(c)&&te(Se)})}V(S,J)};ee(Bt,S=>{n(G)&&n(K)&&S(Vt)})}var lr=j(Bt,2);{var fr=S=>{var J=yo(),L=fe(J),xe=j(L,3);const ke=O(()=>`${e().uuid}-models`),be=O(()=>`Models (${n(Ce)})`);De(xe,{get id(){return n(ke)},get text(){return n(be)},get level(){return o()},get expanded(){return n(l)},set expanded(he){I(l,he)},$$legacy:!0});var Se=j(xe,2);{var te=he=>{var tt=vr(),it=fe(tt);st(it,1,()=>n(ue),ut,(X,ce,de)=>{var w=bo(),Re=Pe(w);const Ue=O(()=>`${e().uuid}-models`),ye=O(()=>`Model ${n(ce).index}`),ge=O(()=>o()+1);De(Re,{get id(){return n(Ue)},get text(){return n(ye)},get level(){return n(ge)},get expanded(){return n(ce).expanded},set expanded(we){n(ce).expanded=we,Ne(()=>n(ue))},$$legacy:!0});var Ie=j(Re,2);{var Ke=we=>{var He=mo(),Ee=fe(He);const We=O(()=>`${e().uuid}-vertices`),pe=O(()=>`Vertices (${n(ce).vertexCount})`),me=O(()=>o()+2);De(Ee,{get id(){return n(We)},get text(){return n(pe)},get level(){return n(me)},get expanded(){return n(ce).verticesExpanded},set expanded(x){n(ce).verticesExpanded=x,Ne(()=>n(ue))},$$legacy:!0});var ve=j(Ee,2);{var Ae=x=>{var a=vr(),p=fe(a);st(p,1,()=>n(ce).vertices,ut,(_,D,E)=>{var b=wo(),U=Pe(b);{var A=C=>{var M=po(),F=fe(M);const W=O(()=>`${e().uuid}-vertices-${n(D).desc}`),y=O(()=>`[Vertices ${n(D).desc}]`),R=O(()=>o()+3);De(F,{get id(){return n(W)},get text(){return n(y)},get level(){return n(R)},get expanded(){return n(D).expanded},set expanded(B){n(D).expanded=B,Ne(()=>(n(ue),n(ce).vertices))},$$legacy:!0});var k=j(F,2);{var T=B=>{var Z=ho();st(Z,5,()=>n(D).vertices,ut,(ie,re,Ze)=>{var ot=xo(),Nt=fe(ot);const Kt=O(()=>`${e().uuid}-vertices-${n(D).desc}-${n(re).index}`),cr=O(()=>`Vertex ${n(re).index}`),Zt=O(()=>o()+4);De(Nt,{get id(){return n(Kt)},get text(){return n(cr)},get level(){return n(Zt)},get expanded(){return n(re).expanded},set expanded(It){n(re).expanded=It,Ne(()=>(n(ue),n(ce).vertices,n(D).vertices))},$$legacy:!0});var Ot=j(Nt,2);{var dr=It=>{En(It,{get vertex(){return n(re)}})};ee(Ot,It=>{n(re).expanded&&It(dr)})}V(ie,ot)}),V(B,Z)};ee(k,B=>{n(D).expanded&&B(T)})}V(C,M)},$=C=>{var M=go(),F=fe(M);const W=O(()=>`${e().uuid}-${n(ce).index}-vertex-${n(D).index}`),y=O(()=>`Vertex ${n(D).index}`),R=O(()=>o()+3);De(F,{get id(){return n(W)},get text(){return n(y)},get level(){return n(R)},get expanded(){return n(D).expanded},set expanded(B){n(D).expanded=B,Ne(()=>(n(ue),n(ce).vertices))},$$legacy:!0});var k=j(F,2);{var T=B=>{En(B,{get vertex(){return n(D)}})};ee(k,B=>{n(D).expanded&&B(T)})}V(C,M)};ee(U,C=>{s(n(D))?C(A):C($,!1)})}V(_,b)}),V(x,a)};ee(ve,x=>{n(ce).verticesExpanded&&x(Ae)})}V(we,He)};ee(Ie,we=>{n(ce).expanded&&we(Ke)})}V(X,w)}),V(he,tt)};ee(Se,he=>{n(l)&&he(te)})}je(()=>Te(L,`screen: ${e().targetx??""},${e().targety??""}
    ${e().targetw??""}x${e().targeth??""} `)),V(S,J)};ee(lr,S=>{n(ue)&&n(Ce)&&S(fr)})}V(t,vt),Ft()}Gt(["click"]);var Fo=(t,r,e,i)=>r(e(),i()),To=Y('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),So=Y("<div><!> <!></div>"),Ro=Y('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function Uo(t,r){At(r,!1);let e=Be(r,"data",12);const i=(c,l)=>{e().selectedTexture===l?e(e().selectedTexture=null,!0):(e(e().selectedTextureId=c,!0),e(e().selectedTexture=l,!0),e(e().textureBoundX=0,!0),e(e().textureBoundY=0,!0),e(e().textureBoundW=l.width,!0),e(e().textureBoundH=l.height,!0),e(e().textureViewX=0,!0),e(e().textureViewY=0,!0),e(e().textureViewScale=100,!0)),e().redraw()},o=1;Lt();var u=Ro(),f=j(fe(u),2);st(f,1,()=>Object.entries(e().textures),ut,(c,l)=>{let d=()=>n(l)[0],h=()=>n(l)[1];var s=To(),v=Pe(s);v.__click=[Fo,i,d,h];var m=Pe(v);je(()=>{xn(v,1,_i(e().selectedTexture===h()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),Te(m,`#${d()??""}`)}),V(c,s)});var g=j(f,6);st(g,1,()=>e().entities,ut,(c,l,d)=>{var h=So();xn(h,1,`select-none m-0 border-none w-full ${d&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var s=Pe(h);De(s,{id:`menu${d}`,get text(){return e().entities[d].type},get oncheckedchange(){return e().redraw},level:o,get expanded(){return e().entities[d].expanded},set expanded(N){e().entities[d].expanded=N,Ne(()=>e().entities)},get checked(){return e().entities[d].enabled},set checked(N){e().entities[d].enabled=N,Ne(()=>e().entities)},$$legacy:!0});var v=j(s,2);{var m=N=>{Ao(N,{level:o+1,get entity(){return e().entities[d]},set entity(z){e().entities[d]=z,Ne(()=>e().entities)},get menuData(){return e()},set menuData(z){e(z)},$$legacy:!0})};ee(v,N=>{e().entities[d].expanded&&N(m)})}V(c,h)}),V(t,u),Ft()}Gt(["click"]);const Fe=[];for(let t=0;t<256;++t)Fe.push((t+256).toString(16).slice(1));function Bo(t,r=0){return(Fe[t[r+0]]+Fe[t[r+1]]+Fe[t[r+2]]+Fe[t[r+3]]+"-"+Fe[t[r+4]]+Fe[t[r+5]]+"-"+Fe[t[r+6]]+Fe[t[r+7]]+"-"+Fe[t[r+8]]+Fe[t[r+9]]+"-"+Fe[t[r+10]]+Fe[t[r+11]]+Fe[t[r+12]]+Fe[t[r+13]]+Fe[t[r+14]]+Fe[t[r+15]]).toLowerCase()}let Vr;const Io=new Uint8Array(16);function Do(){if(!Vr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Vr=crypto.getRandomValues.bind(crypto)}return Vr(Io)}const Mo=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),An={randomUUID:Mo};function Yt(t,r,e){var o;if(An.randomUUID&&!t)return An.randomUUID();t=t||{};const i=t.random??((o=t.rng)==null?void 0:o.call(t))??Do();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Bo(i)}var Po=(t,r,e)=>I(r,e),$o=(t,r,e)=>I(r,e),Co=(t,r)=>I(r,!1),Lo=Y('<div class="overflow-auto absolute w-60 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),ko=(t,r)=>I(r,!0),Vo=Y('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),No=(t,r,e,i,o)=>{Xe(r,n(r).selectedTexture=null),e(n(i),n(o))},Oo=Y('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),Ho=Y('<canvas class="absolute right-0"></canvas> <!> <!>',1);function Xo(t,r){At(r,!1);let e=H({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",textureBoundX:0,textureBoundY:0,textureBoundW:1,textureBoundH:1,textureViewX:0,textureViewY:0,textureViewScale:100,redraw:()=>Ue(n(de),n(w))});const i=x=>{const a=Ut.get(x);return a?parseInt(a):0},o=0;let u=H(null),f=H(null),g=H(null),c=H(null),l=H(null),d=H(null),h=H(null),s=H(null),v=H(null),m=H(null),N=H(null),z=H(null),se=H(null),le=H(null),ae=H(null),P=H(null),q=H(null),Q=H(null),G=H(null),K=H(null),ue=H(null),Ce=H(null),Le=null;const vt=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),Tt=10,St=1e3,Rt=10,Ut=new URLSearchParams(window.location.search),xt=Ut.get("n"),kt=xt?Math.max(parseInt(xt),1):1,Bt=i("w"),Vt=i("h"),lr=i("gx"),fr=i("gy"),S=i("gw"),J=i("gh");let L=0,xe=H(0),ke=H(),be=null,Se=null,te=0,he=0,tt,it,X=H(!1),ce=H(!1),de=H(null),w=H(null);const Re=(x,a,p,_)=>{x.bindBuffer(x.ARRAY_BUFFER,a.vbo);for(let E=0;E<n(xe);E+=1){const b=a.attribs[E];if(!b){x.disableVertexAttribArray(E);continue}x.enableVertexAttribArray(E),x.vertexAttribPointer(E,b.count,x.FLOAT,!1,a.step,b.offset)}if(!_){x.drawArrays(x.TRIANGLES,0,p);return}let D=null;for(let E=0;E<p;E+=1){const b=_[E];D===null?b&&(D=E):b||(x.drawArrays(x.TRIANGLES,D,E-D),D=null)}D!==null&&x.drawArrays(x.TRIANGLES,D,p-D)},Ue=(x,a)=>{if(a.viewport(0,0,x.width,x.height),a.scissor(0,0,x.width,x.height),a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),!n(X)){a.viewport(0,0,x.width,x.height);const p=()=>{a.clearColor(.525,.968,.495,1),a.clear(a.COLOR_BUFFER_BIT)},_=()=>{a.clearColor(.2,.2,.2,1),a.clear(a.COLOR_BUFFER_BIT)},D=Math.min(L/kt,1),E=Math.floor(x.width*.65)&-2,b=70,U=8,A=U*2,$=E*D;if(p(),x.width<=A||x.height<=A)return;a.scissor(U,U,x.width-A,x.height-A),_(),a.scissor(x.width/2-(E/2+U),x.height/2-(b/2+U),E+A,b+A),p(),a.scissor(x.width/2-E/2+$,x.height/2-b/2,E-$,b),_();return}if(n(e).selectedTexture){n(e).textureViewScale<Tt&&Xe(e,n(e).textureViewScale=Tt),n(e).textureViewScale>St&&Xe(e,n(e).textureViewScale=St);const p=n(e).textureViewScale/100,_=p*2,D=n(e).textureBoundX,E=n(e).textureBoundX+n(e).textureBoundW,b=n(e).textureBoundY,U=n(e).textureBoundY+n(e).textureBoundH;let A=n(e).textureViewX+x.width/_,$=n(e).textureViewY+x.height/_,C=!1;if(A<D&&(A=D,C=!0),$<b&&($=b,C=!0),A>E&&(A=E,C=!0),$>U&&($=U,C=!0),n(e).textureBoundW*p<=x.width&&(A=D+n(e).textureBoundW/2,C=!0),n(e).textureBoundH*p<=x.height&&($=b+n(e).textureBoundH/2,C=!0),C&&(Xe(e,n(e).textureViewX=A-x.width/_),Xe(e,n(e).textureViewY=$-x.height/_)),a.useProgram(n(ue)),a.viewport(0,0,x.width,x.height),a.uniform2fv(n(Ce),[x.width,x.height]),!Le){const Ze=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Ze),a.bufferData(a.ARRAY_BUFFER,vt,a.STATIC_DRAW),Le={vbo:Ze,step:8,attribs:Mi}}Re(a,Le,6);const M=n(e).selectedTexture,F=(n(e).textureBoundX-n(e).textureViewX)*p,W=F+n(e).textureBoundW*p,y=(n(e).textureBoundY-n(e).textureViewY)*p,R=y+n(e).textureBoundH*p,k=D/M.width,T=E/M.width,B=b/M.height,Z=U/M.height;a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST),a.useProgram(n(u)),a.uniform4fv(n(f),[M.width,M.height,x.width,x.height]),a.bindTexture(a.TEXTURE_2D,M.texture),a.uniform1i(n(g),o);const ie=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ie),a.bufferData(a.ARRAY_BUFFER,new Float32Array([F,y,k,B,n(e).textureBoundX,n(e).textureBoundY,n(e).textureBoundW,n(e).textureBoundH,1,1,1,1,0,0,0,W,y,T,B,n(e).textureBoundX,n(e).textureBoundY,n(e).textureBoundW,n(e).textureBoundH,1,1,1,1,0,0,0,F,R,k,Z,n(e).textureBoundX,n(e).textureBoundY,n(e).textureBoundW,n(e).textureBoundH,1,1,1,1,0,0,0,W,y,T,B,n(e).textureBoundX,n(e).textureBoundY,n(e).textureBoundW,n(e).textureBoundH,1,1,1,1,0,0,0,W,R,T,Z,n(e).textureBoundX,n(e).textureBoundY,n(e).textureBoundW,n(e).textureBoundH,1,1,1,1,0,0,0,F,R,k,Z,n(e).textureBoundX,n(e).textureBoundY,n(e).textureBoundW,n(e).textureBoundH,1,1,1,1,0,0,0]),a.STATIC_DRAW),Re(a,{vbo:ie,step:60,attribs:Qt},6),a.deleteBuffer(ie);return}Se&&(a.bindFramebuffer(a.DRAW_FRAMEBUFFER,Se),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)),a.disable(a.SCISSOR_TEST);for(let p of n(e).entities)if(p.enabled){if(p.type==="batch2d"){a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST);const _=n(e).textures[p.textureId];a.useProgram(n(u)),a.viewport(0,0,Bt,Vt),a.uniform4fv(n(f),[_.width,_.height,p.targetWidth,p.targetHeight]),a.bindTexture(a.TEXTURE_2D,_.texture),a.uniform1i(n(g),o),Re(a,p.buffer,p.vertexCount,p.enabledVerticesList)}if(p.type==="render3d"){a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.DEPTH_TEST);const _=n(e).textures[p.textureId];a.useProgram(p.animated?n(m):n(c)),a.viewport(lr,fr,S,J),a.uniformMatrix4fv(p.animated?n(N):n(l),!1,p.modelMatrix),a.uniformMatrix4fv(p.animated?n(z):n(d),!1,tt),a.uniformMatrix4fv(p.animated?n(se):n(h),!1,it),a.uniform2fv(p.animated?n(le):n(s),[_.width,_.height]),a.bindTexture(a.TEXTURE_2D,_.texture),a.uniform1i(p.animated?n(ae):n(v),o),Re(a,p.buffer,p.vertexCount)}if(p.type==="renderparticles"){a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.DEPTH_TEST);const _=n(e).textures[p.textureId];a.useProgram(n(P)),a.viewport(lr,fr,S,J),a.uniformMatrix4fv(n(q),!1,tt),a.uniformMatrix4fv(n(Q),!1,it),a.uniform2fv(n(K),[_.width,_.height]),a.bindTexture(a.TEXTURE_2D,_.texture),a.uniform1i(n(G),o),Re(a,p.buffer,p.vertexCount)}if(p.type==="icon"||p.type==="bigicon"){const _=p.texSize;a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST),a.useProgram(n(u)),a.viewport(0,0,Bt,Vt),a.bindTexture(a.TEXTURE_2D,p.texture),a.uniform1i(n(g),o),a.uniform4fv(n(f),[_,_,p.targetWidth,p.targetHeight]),Re(a,p.buffer,6)}if(p.type==="minimap2d"){!be||!Se?(be=a.createTexture(),a.bindTexture(a.TEXTURE_2D,be),a.texStorage2D(a.TEXTURE_2D,1,a.RGBA8,te,he),Se=a.createFramebuffer(),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,Se),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,be,0)):a.bindFramebuffer(a.DRAW_FRAMEBUFFER,Se),a.viewport(0,0,te,he),a.disable(a.DEPTH_TEST);const _=n(e).textures[p.textureId];a.useProgram(n(u)),a.uniform4fv(n(f),[_.width,_.height,te,he]),a.bindTexture(a.TEXTURE_2D,_.texture),a.uniform1i(n(g),o),Re(a,p.buffer,p.vertexCount,p.enabledVerticesList),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)}if(p.type==="minimap"){if(be===null)continue;a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST),a.useProgram(n(u)),a.viewport(0,0,Bt,Vt),a.uniform4fv(n(f),[te,he,p.targetWidth,p.targetHeight]),a.bindTexture(a.TEXTURE_2D,be),a.uniform1i(n(g),o),Re(a,p.buffer,6)}}},ye=(x,a,p)=>{const _=new DataView(p),D=_.getUint32(0,!0);switch(D){case 0:{I(X,!0),Ue(x,a);break}case 1:{const E=_.getUint32(4,!0),b=_.getUint32(8,!0),U=_.getUint32(12,!0),A=a.createTexture(),$=new Uint8Array(p,16,b*U*4);a.bindTexture(a.TEXTURE_2D,A),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,U,0,a.RGBA,a.UNSIGNED_BYTE,$),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),Xe(e,n(e).textures[E]={texture:A,width:b,height:U,data:$});break}case 2:case 3:{const E=D===3,b=E?104:40,U=E?120:56,A=_.getUint32(4,!0),$=_.getUint32(8,!0),C=new Float32Array(16);C.set(new Float32Array(p,16,16));const M=new DataView(p,80,A*b),F=new Array(A),W=new ArrayBuffer(A*U),y=new DataView(W);for(let k=0;k<A;k+=1){const T=b*k,B=U*k;let Z=null;E&&(Z=new Float32Array(16),Z.set(new Float32Array(p,80+b*k+40,16)));const ie={x:M.getInt16(T,!0),y:M.getInt16(T+2,!0),z:M.getInt16(T+4,!0),u:M.getFloat32(T+8,!0),v:M.getFloat32(T+12,!0),ax:M.getUint16(T+16,!0),ay:M.getUint16(T+18,!0),aw:M.getUint16(T+20,!0),ah:M.getUint16(T+22,!0),r:M.getFloat32(T+24,!0),g:M.getFloat32(T+28,!0),b:M.getFloat32(T+32,!0),a:M.getFloat32(T+36,!0),anim:Z};if(F[k]=ie,y.setFloat32(B,ie.x,!0),y.setFloat32(B+4,ie.y,!0),y.setFloat32(B+8,ie.z,!0),y.setFloat32(B+12,0,!0),y.setFloat32(B+16,ie.u,!0),y.setFloat32(B+20,ie.v,!0),y.setFloat32(B+24,ie.ax,!0),y.setFloat32(B+28,ie.ay,!0),y.setFloat32(B+32,ie.aw,!0),y.setFloat32(B+36,ie.ah,!0),y.setFloat32(B+40,ie.r,!0),y.setFloat32(B+44,ie.g,!0),y.setFloat32(B+48,ie.b,!0),y.setFloat32(B+52,ie.a,!0),Z)for(let re=0;re<16;re+=1)y.setFloat32(B+56+re*4,Z[re],!0)}const R=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,R),a.bufferData(a.ARRAY_BUFFER,y,a.STATIC_DRAW),n(e).entities.push({type:"render3d",animated:E,textureId:$,vertexCount:A,modelMatrix:C,vertices:F,buffer:{vbo:R,step:U,attribs:E?Ii:mn},enabled:!0,expanded:!1,uuid:Yt()}),L+=A,Ue(x,a);break}case 4:{const U=_.getUint32(4,!0),A=_.getUint32(8,!0),$=_.getUint16(12,!0),C=_.getUint16(14,!0),M=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,M);const F=new DataView(p,16,U*40),W=new ArrayBuffer(U*60),y=new DataView(W),R=new Array(U);for(let k=0;k<U;k+=1){const T=40*k,B=60*k,Z={x:F.getInt16(T,!0),y:F.getInt16(T+2,!0),ax:F.getInt16(T+4,!0),ay:F.getInt16(T+6,!0),aw:F.getInt16(T+8,!0),ah:F.getInt16(T+10,!0),discard:F.getUint8(T+12),wrapx:F.getUint8(T+13),wrapy:F.getUint8(T+14),u:F.getFloat32(T+16,!0),v:F.getFloat32(T+20,!0),r:F.getFloat32(T+24,!0),g:F.getFloat32(T+28,!0),b:F.getFloat32(T+32,!0),a:F.getFloat32(T+36,!0)};R[k]=Z,y.setFloat32(B,Z.x,!0),y.setFloat32(B+4,Z.y,!0),y.setFloat32(B+8,Z.u,!0),y.setFloat32(B+12,Z.v,!0),y.setFloat32(B+16,Z.ax,!0),y.setFloat32(B+20,Z.ay,!0),y.setFloat32(B+24,Z.aw,!0),y.setFloat32(B+28,Z.ah,!0),y.setFloat32(B+32,Z.r,!0),y.setFloat32(B+36,Z.g,!0),y.setFloat32(B+40,Z.b,!0),y.setFloat32(B+44,Z.a,!0),y.setFloat32(B+48,Z.discard,!0),y.setFloat32(B+52,Z.wrapx,!0),y.setFloat32(B+56,Z.wrapy,!0)}a.bufferData(a.ARRAY_BUFFER,y,a.STATIC_DRAW),n(e).entities.push({type:"batch2d",textureId:A,vertexCount:U,vertices:R,targetWidth:$,targetHeight:C,buffer:{vbo:M,step:60,attribs:Qt},enabled:!0,expanded:!1,uuid:Yt(),enabledVerticesList:Array(Math.floor(U)).fill(!0)}),L+=U,Ue(x,a);break}case 5:case 8:{const b=D===5?64:512,U=_.getInt16(4,!0),A=_.getInt16(6,!0),$=_.getInt16(8,!0),C=_.getInt16(10,!0),M=_.getUint32(12,!0),F=_.getFloat32(16,!0),W=_.getFloat32(20,!0),y=_.getFloat32(24,!0),R=_.getFloat32(28,!0),k=_.getUint16(32,!0),T=_.getUint16(34,!0),B=a.createTexture(),Z=a.createFramebuffer();a.bindTexture(a.TEXTURE_2D,B),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,Z),a.texStorage2D(a.TEXTURE_2D,1,a.RGBA8,b,b),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,B,0),a.enable(a.CULL_FACE),a.cullFace(a.FRONT),a.viewport(0,0,b,b),a.scissor(0,0,b,b);let ie=Array(M),re=36;for(let Zt=0;Zt<M;Zt+=1){const Ot=_.getUint32(re,!0);let dr=Array(Ot);const It=new ArrayBuffer(Ot*56),ze=new DataView(It),Pr=new Float32Array(16);Pr.set(new Float32Array(p,re+4,16));const $r=new Float32Array(16);$r.set(new Float32Array(p,re+68,16));const Cr=new Float32Array(16);Cr.set(new Float32Array(p,re+132,16)),re+=196;for(let _r=0;_r<Ot;_r+=1){const ht={x:_.getInt16(re,!0),y:_.getInt16(re+2,!0),z:_.getInt16(re+4,!0),r:_.getFloat32(re+8,!0),g:_.getFloat32(re+12,!0),b:_.getFloat32(re+16,!0),a:_.getFloat32(re+20,!0)},Qe=_r*56;ze.setFloat32(Qe,ht.x,!0),ze.setFloat32(Qe+4,ht.y,!0),ze.setFloat32(Qe+8,ht.z,!0),ze.setFloat32(Qe+24,0,!0),ze.setFloat32(Qe+28,0,!0),ze.setFloat32(Qe+32,b,!0),ze.setFloat32(Qe+36,b,!0),ze.setFloat32(Qe+40,ht.r,!0),ze.setFloat32(Qe+44,ht.g,!0),ze.setFloat32(Qe+48,ht.b,!0),ze.setFloat32(Qe+52,ht.a,!0),dr[_r]=ht,re+=24}ie[Zt]={vertices:dr,modelMatrix:Pr,viewMatrix:$r,projMatrix:Cr};const Lr=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Lr),a.bufferData(a.ARRAY_BUFFER,ze,a.STATIC_DRAW),a.useProgram(n(c)),a.uniformMatrix4fv(n(l),!1,Pr),a.uniformMatrix4fv(n(d),!1,$r),a.uniformMatrix4fv(n(h),!1,Cr),a.uniform2fv(n(s),[1,1]),a.bindTexture(a.TEXTURE_2D,n(ke)),a.uniform1i(n(v),o),Re(a,{vbo:Lr,attribs:mn,step:56},Ot),a.deleteBuffer(Lr)}const Ze=U,ot=U+$,Nt=A,Kt=A+C,cr=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,cr),a.bufferData(a.ARRAY_BUFFER,new Float32Array([Ze,Nt,0,1,0,0,b,b,F,y,W,R,0,0,0,ot,Nt,1,1,0,0,b,b,F,y,W,R,0,0,0,Ze,Kt,0,0,0,0,b,b,F,y,W,R,0,0,0,ot,Nt,1,1,0,0,b,b,F,y,W,R,0,0,0,ot,Kt,1,0,0,0,b,b,F,y,W,R,0,0,0,Ze,Kt,0,0,0,0,b,b,F,y,W,R,0,0,0]),a.STATIC_DRAW),n(e).entities.push({type:D===5?"icon":"bigicon",models:ie,texture:B,targetWidth:k,targetHeight:T,texSize:b,buffer:{vbo:cr,step:60,attribs:Qt},targetx:U,targety:A,targetw:$,targeth:C,enabled:!0,expanded:!1,uuid:Yt()}),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.deleteFramebuffer(Z),a.disable(a.CULL_FACE);break}case 6:{const E=_.getUint32(4,!0),b=_.getUint32(8,!0);te=_.getUint16(12,!0),he=_.getUint16(14,!0);const U=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,U);const A=new DataView(p,16,E*40),$=new ArrayBuffer(E*60),C=new DataView($),M=new Array(E);for(let F=0;F<E;F+=1){const W=40*F,y=60*F,R={x:A.getInt16(W,!0),y:A.getInt16(W+2,!0),ax:A.getInt16(W+4,!0),ay:A.getInt16(W+6,!0),aw:A.getInt16(W+8,!0),ah:A.getInt16(W+10,!0),discard:A.getUint8(W+12),wrapx:A.getUint8(W+13),wrapy:A.getUint8(W+14),u:A.getFloat32(W+16,!0),v:A.getFloat32(W+20,!0),r:A.getFloat32(W+24,!0),g:A.getFloat32(W+28,!0),b:A.getFloat32(W+32,!0),a:A.getFloat32(W+36,!0)};M[F]=R,C.setFloat32(y,R.x,!0),C.setFloat32(y+4,R.y,!0),C.setFloat32(y+8,R.u,!0),C.setFloat32(y+12,R.v,!0),C.setFloat32(y+16,R.ax,!0),C.setFloat32(y+20,R.ay,!0),C.setFloat32(y+24,R.aw,!0),C.setFloat32(y+28,R.ah,!0),C.setFloat32(y+32,R.r,!0),C.setFloat32(y+36,R.g,!0),C.setFloat32(y+40,R.b,!0),C.setFloat32(y+44,R.a,!0),C.setFloat32(y+48,R.discard,!0),C.setFloat32(y+52,R.wrapx,!0),C.setFloat32(y+56,R.wrapy,!0)}a.bufferData(a.ARRAY_BUFFER,C,a.STATIC_DRAW),n(e).entities.push({type:"minimap2d",textureId:b,buffer:{vbo:U,attribs:Qt,step:60},vertices:M,vertexCount:E,enabled:!0,expanded:!1,enabledVerticesList:Array(Math.floor(E)).fill(!0),uuid:Yt()}),L+=E,Ue(x,a);break}case 7:{const E=_.getInt16(4,!0),b=_.getInt16(6,!0),U=_.getUint16(8,!0),A=_.getUint16(10,!0),$=_.getInt16(12,!0),C=_.getInt16(14,!0),M=_.getUint16(16,!0),F=_.getUint16(18,!0),W=_.getUint16(20,!0),y=_.getUint16(22,!0),R=$,k=$+M,T=C,B=C+F,Z=E/te,ie=(E+U)/te,re=b/he,Ze=(b+A)/he,ot=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ot),a.bufferData(a.ARRAY_BUFFER,new Float32Array([R,T,Z,Ze,E,b,U,A,1,1,1,1,0,0,0,k,T,ie,Ze,E,b,U,A,1,1,1,1,0,0,0,R,B,Z,re,E,b,U,A,1,1,1,1,0,0,0,k,T,ie,Ze,E,b,U,A,1,1,1,1,0,0,0,k,B,ie,re,E,b,U,A,1,1,1,1,0,0,0,R,B,Z,re,E,b,U,A,1,1,1,1,0,0,0]),a.STATIC_DRAW),n(e).entities.push({type:"minimap",sourcex:E,sourcey:b,sourcew:U,sourceh:A,targetx:$,targety:C,targetw:M,targeth:F,targetWidth:W,targetHeight:y,buffer:{vbo:ot,step:60,attribs:Qt},enabled:!0,expanded:!1,uuid:Yt()}),Ue(x,a);break}case 9:{const E=_.getUint32(4,!0),b=_.getUint32(8,!0),U=64,A=72,$=new DataView(p,16,E*U),C=new Array(E),M=new ArrayBuffer(E*A),F=new DataView(M);for(let y=0;y<E;y+=1){const R=U*y,k=A*y,T={x:$.getFloat32(R,!0),y:$.getFloat32(R+4,!0),z:$.getFloat32(R+8,!0),offsetx2d:$.getFloat32(R+12,!0),offsety2d:$.getFloat32(R+16,!0),offsetx3d:$.getFloat32(R+20,!0),offsety3d:$.getFloat32(R+24,!0),offsetz3d:$.getFloat32(R+28,!0),ax:$.getUint16(R+32,!0),ay:$.getUint16(R+34,!0),aw:$.getUint16(R+36,!0),ah:$.getUint16(R+38,!0),r:$.getFloat32(R+40,!0),g:$.getFloat32(R+44,!0),b:$.getFloat32(R+48,!0),a:$.getFloat32(R+52,!0),u:$.getFloat32(R+56,!0),v:$.getFloat32(R+60,!0)};C[y]=T,F.setFloat32(k,T.x,!0),F.setFloat32(k+4,T.y,!0),F.setFloat32(k+8,T.z,!0),F.setFloat32(k+12,T.ax,!0),F.setFloat32(k+16,T.ay,!0),F.setFloat32(k+20,T.aw,!0),F.setFloat32(k+24,T.ah,!0),F.setFloat32(k+28,T.r,!0),F.setFloat32(k+32,T.g,!0),F.setFloat32(k+36,T.b,!0),F.setFloat32(k+40,T.a,!0),F.setFloat32(k+44,T.offsetx2d,!0),F.setFloat32(k+48,T.offsety2d,!0),F.setFloat32(k+52,T.offsetx3d,!0),F.setFloat32(k+56,T.offsety3d,!0),F.setFloat32(k+60,T.offsetz3d,!0),F.setFloat32(k+64,T.u,!0),F.setFloat32(k+68,T.v,!0)}const W=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,W),a.bufferData(a.ARRAY_BUFFER,F,a.STATIC_DRAW),n(e).entities.push({type:"renderparticles",textureId:b,vertexCount:E,vertices:C,buffer:{vbo:W,step:A,attribs:Di},enabled:!0,expanded:!1,uuid:Yt()}),L+=E,Ue(x,a);break}case 10:{tt=new Float32Array(p,4,16),it=new Float32Array(p,68,16);break}}};window.addEventListener("message",async x=>{if(typeof x.data=="object"&&x.data.type==="pluginMessage"){if(typeof x.data.content!="object"||!n(de)||!n(w))return;ye(n(de),n(w),x.data.content)}});const ge=x=>{const a=n(e).textureViewScale/100,p=Math.floor(n(e).textureViewX+x.offsetX/a-n(e).textureBoundX),_=Math.floor(n(e).textureViewY+x.offsetY/a-n(e).textureBoundY);p<0||_<0||p>=n(e).textureBoundW||_>=n(e).textureBoundH},Ie=x=>{if(ge(x),!(x.buttons&1)){I(we,ge);return}const a=n(e).textureViewScale/100;Xe(e,n(e).textureViewX-=x.movementX/a),Xe(e,n(e).textureViewY-=x.movementY/a),n(e).redraw()},Ke=x=>{const a=n(de),p=n(e).textureViewScale,_=n(e).textureViewScale-Rt*Math.sign(x.deltaY);Xe(e,n(e).textureViewScale=_);const D=2*p/100,E=2*_/100,b=n(e).textureViewX+a.width/D,U=n(e).textureViewY+a.height/D;Xe(e,n(e).textureViewX=b-a.width/E),Xe(e,n(e).textureViewY=U-a.height/E),Ue(a,n(w))};let we=H(ge);Ca(()=>(n(de),n(w),n(ke),n(u),n(c),n(m),n(P),n(ue)),()=>{if(n(de)&&(Xe(de,n(de).width=Bt),Xe(de,n(de).height=Vt),I(w,n(de).getContext("webgl2")),n(w))){I(xe,n(w).getParameter(n(w).MAX_VERTEX_ATTRIBS)),I(ke,n(w).createTexture()),n(w).bindTexture(n(w).TEXTURE_2D,n(ke));const x=new Uint8Array([255,255,255,255]);n(w).texImage2D(n(w).TEXTURE_2D,0,n(w).RGBA,1,1,0,n(w).RGBA,n(w).UNSIGNED_BYTE,x);const a=gt(n(w),n(w).VERTEX_SHADER,Ei,"2D vertex shader"),p=gt(n(w),n(w).FRAGMENT_SHADER,Ai,"2D fragment shader"),_=gt(n(w),n(w).VERTEX_SHADER,Fi,"3D vertex shader"),D=gt(n(w),n(w).VERTEX_SHADER,Ti,"3D anim vertex shader"),E=gt(n(w),n(w).FRAGMENT_SHADER,Si,"3D fragment shader"),b=gt(n(w),n(w).VERTEX_SHADER,Ri,"particle vertex shader"),U=gt(n(w),n(w).VERTEX_SHADER,Ui,"checkers vertex shader"),A=gt(n(w),n(w).FRAGMENT_SHADER,Bi,"checkers fragment shader");I(u,Jt(n(w),a,p,"2D program")),I(f,n(w).getUniformLocation(n(u),"atlas_wh_screen_wh")),I(g,n(w).getUniformLocation(n(u),"tex")),I(c,Jt(n(w),_,E,"3D program")),I(l,n(w).getUniformLocation(n(c),"modelmatrix")),I(d,n(w).getUniformLocation(n(c),"viewmatrix")),I(h,n(w).getUniformLocation(n(c),"projmatrix")),I(s,n(w).getUniformLocation(n(c),"atlas_wh")),I(v,n(w).getUniformLocation(n(c),"tex")),I(m,Jt(n(w),D,E,"3D animated program")),I(N,n(w).getUniformLocation(n(m),"modelmatrix")),I(z,n(w).getUniformLocation(n(m),"viewmatrix")),I(se,n(w).getUniformLocation(n(m),"projmatrix")),I(le,n(w).getUniformLocation(n(m),"atlas_wh")),I(ae,n(w).getUniformLocation(n(m),"tex")),I(P,Jt(n(w),b,E,"Particles program")),I(q,n(w).getUniformLocation(n(P),"viewmatrix")),I(Q,n(w).getUniformLocation(n(P),"projmatrix")),I(G,n(w).getUniformLocation(n(P),"tex")),I(K,n(w).getUniformLocation(n(P),"atlas_wh")),I(ue,Jt(n(w),U,A,"Checkers program")),I(Ce,n(w).getUniformLocation(n(ue),"screen_wh")),n(w).deleteShader(a),n(w).deleteShader(p),n(w).deleteShader(_),n(w).deleteShader(E),n(w).deleteShader(D),n(w).deleteShader(b),n(w).deleteShader(U),n(w).deleteShader(A),n(w).activeTexture(n(w).TEXTURE0+o),n(w).enable(n(w).SCISSOR_TEST),n(w).disable(n(w).CULL_FACE),n(w).disable(n(w).DEPTH_TEST),n(w).enable(n(w).BLEND),n(w).blendEquationSeparate(n(w).FUNC_ADD,n(w).FUNC_ADD),n(w).depthFunc(n(w).LEQUAL),Ue(n(de),n(w))}}),La(),Lt();var He=Ho(),Ee=fe(He);Ee.__mousedown=[Po,we,Ie],Ee.__mouseup=[$o,we,ge],Ee.__mousemove=function(...x){var a;(a=n(we))==null||a.apply(this,x)},mi(Ee,x=>I(de,x),()=>n(de));var We=j(Ee,2);{var pe=x=>{var a=Lo(),p=fe(a),_=Pe(p);Uo(_,{get data(){return n(e)},set data(E){I(e,E)},$$legacy:!0});var D=j(p,2);D.__click=[Co,ce],V(x,a)},me=(x,a)=>{{var p=_=>{var D=Vo();D.__click=[ko,ce],V(_,D)};ee(x,_=>{n(X)&&_(p)},a)}};ee(We,x=>{n(ce)?x(pe):x(me,!1)})}var ve=j(We,2);{var Ae=x=>{var a=Oo();a.__click=[No,e,Ue,de,w],V(x,a)};ee(ve,x=>{n(e).selectedTexture&&x(Ae)})}Dt("wheel",Ee,Ke),V(t,He),Ft()}Gt(["mousedown","mouseup","mousemove","click"]);ii(Xo,{target:document.body});
