(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();const an=!1;var Yr=Array.isArray,Zn=Array.prototype.indexOf,zr=Array.from,Qn=Object.defineProperty,Wt=Object.getOwnPropertyDescriptor,Fn=Object.getOwnPropertyDescriptors,Jn=Object.prototype,ea=Array.prototype,qr=Object.getPrototypeOf,on=Object.isExtensible;function ta(e){return e()}function Nr(e){for(var r=0;r<e.length;r++)e[r]()}const Qe=2,Tn=4,Fr=8,jr=16,ft=32,Yt=64,hr=128,qe=256,pr=512,Oe=1024,ct=2048,Pt=4096,ut=8192,Tr=16384,ra=32768,Gr=65536,Rn=1<<17,na=1<<19,Sn=1<<20,Vr=1<<21,Dt=Symbol("$state"),aa=Symbol("legacy props"),ia=Symbol("");function Un(e){return e===this.v}function oa(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Kr(e){return!oa(e,this.v)}function ua(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function sa(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function la(e){throw new Error("https://svelte.dev/e/effect_orphan")}function fa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ca(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function da(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _a(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function va(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let ar=!1,xa=!1;function ha(){ar=!0}const Zr=1,Qr=2,In=4,pa=8,ga=16,wa=1,ma=2,ba=4,ya=8,Ea=16,Aa=1,Fa=2,Ne=Symbol(),Ta="http://www.w3.org/1999/xhtml";let ve=null;function un(e){ve=e}function yt(e,r=!1,t){var i=ve={p:ve,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};ar&&!r&&(ve.l={s:null,u:null,r1:[],r2:er(!1)}),kn(()=>{i.d=!0})}function Et(e){const r=ve;if(r!==null){const f=r.e;if(f!==null){var t=ie,i=re;r.e=null;try{for(var o=0;o<f.length;o++){var u=f[o];bt(u.effect),nt(u.reaction),en(u.fn)}}finally{bt(t),nt(i)}}ve=r.p,r.m=!0}return{}}function Rr(){return!ar||ve!==null&&ve.l===null}function Bt(e,r){if(typeof e!="object"||e===null||Dt in e)return e;const t=qr(e);if(t!==Jn&&t!==ea)return e;var i=new Map,o=Yr(e),u=xt(0),f=re,w=c=>{var l=re;nt(f);var d;return d=c(),nt(l),d};return o&&i.set("length",xt(e.length)),new Proxy(e,{defineProperty(c,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&da();var p=i.get(l);return p===void 0?(p=w(()=>xt(d.value)),i.set(l,p)):B(p,w(()=>Bt(d.value))),!0},deleteProperty(c,l){var d=i.get(l);if(d===void 0)l in c&&i.set(l,w(()=>xt(Ne)));else{if(o&&typeof l=="string"){var p=i.get("length"),s=Number(l);Number.isInteger(s)&&s<p.v&&B(p,s)}B(d,Ne),sn(u)}return!0},get(c,l,d){var b;if(l===Dt)return e;var p=i.get(l),s=l in c;if(p===void 0&&(!s||(b=Wt(c,l))!=null&&b.writable)&&(p=w(()=>xt(Bt(s?c[l]:Ne))),i.set(l,p)),p!==void 0){var v=n(p);return v===Ne?void 0:v}return Reflect.get(c,l,d)},getOwnPropertyDescriptor(c,l){var d=Reflect.getOwnPropertyDescriptor(c,l);if(d&&"value"in d){var p=i.get(l);p&&(d.value=n(p))}else if(d===void 0){var s=i.get(l),v=s==null?void 0:s.v;if(s!==void 0&&v!==Ne)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return d},has(c,l){var v;if(l===Dt)return!0;var d=i.get(l),p=d!==void 0&&d.v!==Ne||Reflect.has(c,l);if(d!==void 0||ie!==null&&(!p||(v=Wt(c,l))!=null&&v.writable)){d===void 0&&(d=w(()=>xt(p?Bt(c[l]):Ne)),i.set(l,d));var s=n(d);if(s===Ne)return!1}return p},set(c,l,d,p){var ae;var s=i.get(l),v=l in c;if(o&&l==="length")for(var b=d;b<s.v;b+=1){var O=i.get(b+"");O!==void 0?B(O,Ne):b in c&&(O=w(()=>xt(Ne)),i.set(b+"",O))}s===void 0?(!v||(ae=Wt(c,l))!=null&&ae.writable)&&(s=w(()=>xt(void 0)),B(s,w(()=>Bt(d))),i.set(l,s)):(v=s.v!==Ne,B(s,w(()=>Bt(d))));var z=Reflect.getOwnPropertyDescriptor(c,l);if(z!=null&&z.set&&z.set.call(p,d),!v){if(o&&typeof l=="string"){var se=i.get("length"),le=Number(l);Number.isInteger(le)&&le>=se.v&&B(se,le+1)}sn(u)}return!0},ownKeys(c){n(u);var l=Reflect.ownKeys(c).filter(s=>{var v=i.get(s);return v===void 0||v.v!==Ne});for(var[d,p]of i)p.v!==Ne&&!(d in c)&&l.push(d);return l},setPrototypeOf(){_a()}})}function sn(e,r=1){B(e,e.v+r)}const Jt=new Map;function er(e,r){var t={f:0,v:e,reactions:null,equals:Un,rv:0,wv:0};return t}function xt(e,r){const t=er(e);return Va(t),t}function X(e,r=!1){var i;const t=er(e);return r||(t.equals=Kr),ar&&ve!==null&&ve.l!==null&&((i=ve.l).s??(i.s=[])).push(t),t}function Xe(e,r){return B(e,lt(()=>n(e))),r}function B(e,r,t=!1){re!==null&&!rt&&Rr()&&(re.f&(Qe|jr))!==0&&!($e!=null&&$e.includes(e))&&va();let i=t?Bt(r):r;return tr(e,i)}function tr(e,r){if(!e.equals(r)){var t=e.v;or?Jt.set(e,r):Jt.set(e,t),e.v=r,e.wv=Yn(),Bn(e,ct),Rr()&&ie!==null&&(ie.f&Oe)!==0&&(ie.f&(ft|Yt))===0&&(Ye===null?Oa([e]):Ye.push(e))}return r}function Bn(e,r){var t=e.reactions;if(t!==null)for(var i=Rr(),o=t.length,u=0;u<o;u++){var f=t[u],w=f.f;(w&ct)===0&&(!i&&f===ie||(Je(f,r),(w&(Oe|qe))!==0&&((w&Qe)!==0?Bn(f,Pt):Br(f))))}}let Ra=!1;var ln,Dn,Mn,Pn;function Sa(){if(ln===void 0){ln=window,Dn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,t=Text.prototype;Mn=Wt(r,"firstChild").get,Pn=Wt(r,"nextSibling").get,on(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),on(t)&&(t.__t=void 0)}}function Jr(e=""){return document.createTextNode(e)}function gr(e){return Mn.call(e)}function Sr(e){return Pn.call(e)}function Pe(e,r){return gr(e)}function ce(e,r){{var t=gr(e);return t instanceof Comment&&t.data===""?Sr(t):t}}function G(e,r=1,t=!1){let i=e;for(;r--;)i=Sr(i);return i}function Ua(e){e.textContent=""}function rr(e){var r=Qe|ct,t=re!==null&&(re.f&Qe)!==0?re:null;return ie===null||t!==null&&(t.f&qe)!==0?r|=qe:ie.f|=Sn,{ctx:ve,deps:null,effects:null,equals:Un,f:r,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??ie}}function H(e){const r=rr(e);return r.equals=Kr,r}function $n(e){var r=e.effects;if(r!==null){e.effects=null;for(var t=0;t<r.length;t+=1)mt(r[t])}}function Ia(e){for(var r=e.parent;r!==null;){if((r.f&Qe)===0)return r;r=r.parent}return null}function Ba(e){var r,t=ie;bt(Ia(e));try{$n(e),r=qn(e)}finally{bt(t)}return r}function Cn(e){var r=Ba(e),t=(wt||(e.f&qe)!==0)&&e.deps!==null?Pt:Oe;Je(e,t),e.equals(r)||(e.v=r,e.wv=Yn())}function Ln(e){ie===null&&re===null&&la(),re!==null&&(re.f&qe)!==0&&ie===null&&sa(),or&&ua()}function Da(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function zt(e,r,t,i=!0){var o=ie,u={ctx:ve,deps:null,nodes_start:null,nodes_end:null,f:e|ct,first:null,fn:r,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(t)try{Ir(u),u.f|=ra}catch(c){throw mt(u),c}else r!==null&&Br(u);var f=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(Sn|hr))===0;if(!f&&i&&(o!==null&&Da(u,o),re!==null&&(re.f&Qe)!==0)){var w=re;(w.effects??(w.effects=[])).push(u)}return u}function kn(e){const r=zt(Fr,null,!1);return Je(r,Oe),r.teardown=e,r}function fn(e){Ln();var r=ie!==null&&(ie.f&ft)!==0&&ve!==null&&!ve.m;if(r){var t=ve;(t.e??(t.e=[])).push({fn:e,effect:ie,reaction:re})}else{var i=en(e);return i}}function Ma(e){return Ln(),ir(e)}function Pa(e){const r=zt(Yt,e,!0);return(t={})=>new Promise(i=>{t.outro?wr(r,()=>{mt(r),i(void 0)}):(mt(r),i(void 0))})}function en(e){return zt(Tn,e,!1)}function $a(e,r){var t=ve,i={effect:null,ran:!1};t.l.r1.push(i),i.effect=ir(()=>{e(),!i.ran&&(i.ran=!0,B(t.l.r2,!0),lt(r))})}function Ca(){var e=ve;ir(()=>{if(n(e.l.r2)){for(var r of e.l.r1){var t=r.effect;(t.f&Oe)!==0&&Je(t,Pt),qt(t)&&Ir(t),r.ran=!1}e.l.r2.v=!1}})}function ir(e){return zt(Fr,e,!0)}function ze(e,r=[],t=rr){const i=r.map(t);return tn(()=>e(...i.map(n)))}function tn(e,r=0){return zt(Fr|jr|r,e,!0)}function nr(e,r=!0){return zt(Fr|ft,e,!0,r)}function Nn(e){var r=e.teardown;if(r!==null){const t=or,i=re;cn(!0),nt(null);try{r.call(null)}finally{cn(t),nt(i)}}}function Vn(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var i=t.next;(t.f&Yt)!==0?t.parent=null:mt(t,r),t=i}}function La(e){for(var r=e.first;r!==null;){var t=r.next;(r.f&ft)===0&&mt(r),r=t}}function mt(e,r=!0){var t=!1;if((r||(e.f&na)!==0)&&e.nodes_start!==null){for(var i=e.nodes_start,o=e.nodes_end;i!==null;){var u=i===o?null:Sr(i);i.remove(),i=u}t=!0}Vn(e,r&&!t),Ar(e,0),Je(e,Tr);var f=e.transitions;if(f!==null)for(const c of f)c.stop();Nn(e);var w=e.parent;w!==null&&w.first!==null&&On(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function On(e){var r=e.parent,t=e.prev,i=e.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),r!==null&&(r.first===e&&(r.first=i),r.last===e&&(r.last=t))}function wr(e,r){var t=[];rn(e,t,!0),Hn(t,()=>{mt(e),r&&r()})}function Hn(e,r){var t=e.length;if(t>0){var i=()=>--t||r();for(var o of e)o.out(i)}else r()}function rn(e,r,t){if((e.f&ut)===0){if(e.f^=ut,e.transitions!==null)for(const f of e.transitions)(f.is_global||t)&&r.push(f);for(var i=e.first;i!==null;){var o=i.next,u=(i.f&Gr)!==0||(i.f&ft)!==0;rn(i,r,u?t:!1),i=o}}}function mr(e){Xn(e,!0)}function Xn(e,r){if((e.f&ut)!==0){e.f^=ut,(e.f&Oe)===0&&(e.f^=Oe),qt(e)&&(Je(e,ct),Br(e));for(var t=e.first;t!==null;){var i=t.next,o=(t.f&Gr)!==0||(t.f&ft)!==0;Xn(t,o?r:!1),t=i}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||r)&&u.in()}}let br=[];function ka(){var e=br;br=[],Nr(e)}function nn(e){br.length===0&&queueMicrotask(ka),br.push(e)}let vr=!1,Or=!1,yr=null,Mt=!1,or=!1;function cn(e){or=e}let xr=[];let re=null,rt=!1;function nt(e){re=e}let ie=null;function bt(e){ie=e}let $e=null;function Na(e){$e=e}function Va(e){re!==null&&re.f&Vr&&($e===null?Na([e]):$e.push(e))}let Me=null,We=0,Ye=null;function Oa(e){Ye=e}let Wn=1,Er=0,wt=!1,gt=null;function Yn(){return++Wn}function qt(e){var p;var r=e.f;if((r&ct)!==0)return!0;if((r&Pt)!==0){var t=e.deps,i=(r&qe)!==0;if(t!==null){var o,u,f=(r&pr)!==0,w=i&&ie!==null&&!wt,c=t.length;if(f||w){var l=e,d=l.parent;for(o=0;o<c;o++)u=t[o],(f||!((p=u==null?void 0:u.reactions)!=null&&p.includes(l)))&&(u.reactions??(u.reactions=[])).push(l);f&&(l.f^=pr),w&&d!==null&&(d.f&qe)===0&&(l.f^=qe)}for(o=0;o<c;o++)if(u=t[o],qt(u)&&Cn(u),u.wv>e.wv)return!0}(!i||ie!==null&&!wt)&&Je(e,Oe)}return!1}function Ha(e,r){for(var t=r;t!==null;){if((t.f&hr)!==0)try{t.fn(e);return}catch{t.f^=hr}t=t.parent}throw vr=!1,e}function Xa(e){return(e.f&Tr)===0&&(e.parent===null||(e.parent.f&hr)===0)}function Ur(e,r,t,i){if(vr){if(t===null&&(vr=!1),Xa(r))throw e;return}t!==null&&(vr=!0);{Ha(e,r);return}}function zn(e,r,t=!0){var i=e.reactions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];$e!=null&&$e.includes(e)||((u.f&Qe)!==0?zn(u,r,!1):r===u&&(t?Je(u,ct):(u.f&Oe)!==0&&Je(u,Pt),Br(u)))}}function qn(e){var v;var r=Me,t=We,i=Ye,o=re,u=wt,f=$e,w=ve,c=rt,l=e.f;Me=null,We=0,Ye=null,wt=(l&qe)!==0&&(rt||!Mt||re===null),re=(l&(ft|Yt))===0?e:null,$e=null,un(e.ctx),rt=!1,Er++,e.f|=Vr;try{var d=(0,e.fn)(),p=e.deps;if(Me!==null){var s;if(Ar(e,We),p!==null&&We>0)for(p.length=We+Me.length,s=0;s<Me.length;s++)p[We+s]=Me[s];else e.deps=p=Me;if(!wt)for(s=We;s<p.length;s++)((v=p[s]).reactions??(v.reactions=[])).push(e)}else p!==null&&We<p.length&&(Ar(e,We),p.length=We);if(Rr()&&Ye!==null&&!rt&&p!==null&&(e.f&(Qe|Pt|ct))===0)for(s=0;s<Ye.length;s++)zn(Ye[s],e);return o!==null&&(Er++,Ye!==null&&(i===null?i=Ye:i.push(...Ye))),d}finally{Me=r,We=t,Ye=i,re=o,wt=u,$e=f,un(w),rt=c,e.f^=Vr}}function Wa(e,r){let t=r.reactions;if(t!==null){var i=Zn.call(t,e);if(i!==-1){var o=t.length-1;o===0?t=r.reactions=null:(t[i]=t[o],t.pop())}}t===null&&(r.f&Qe)!==0&&(Me===null||!Me.includes(r))&&(Je(r,Pt),(r.f&(qe|pr))===0&&(r.f^=pr),$n(r),Ar(r,0))}function Ar(e,r){var t=e.deps;if(t!==null)for(var i=r;i<t.length;i++)Wa(e,t[i])}function Ir(e){var r=e.f;if((r&Tr)===0){Je(e,Oe);var t=ie,i=ve,o=Mt;ie=e,Mt=!0;try{(r&jr)!==0?La(e):Vn(e),Nn(e);var u=qn(e);e.teardown=typeof u=="function"?u:null,e.wv=Wn;var f=e.deps,w;an&&xa&&e.f&ct}catch(c){Ur(c,e,t,i||e.ctx)}finally{Mt=o,ie=t}}}function Ya(){try{fa()}catch(e){if(yr!==null)Ur(e,yr,null);else throw e}}function za(){var e=Mt;try{var r=0;for(Mt=!0;xr.length>0;){r++>1e3&&Ya();var t=xr,i=t.length;xr=[];for(var o=0;o<i;o++){var u=ja(t[o]);qa(u)}}}finally{Or=!1,Mt=e,yr=null,Jt.clear()}}function qa(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var i=e[t];if((i.f&(Tr|ut))===0)try{qt(i)&&(Ir(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?On(i):i.fn=null))}catch(o){Ur(o,i,null,i.ctx)}}}function Br(e){Or||(Or=!0,queueMicrotask(za));for(var r=yr=e;r.parent!==null;){r=r.parent;var t=r.f;if((t&(Yt|ft))!==0){if((t&Oe)===0)return;r.f^=Oe}}xr.push(r)}function ja(e){for(var r=[],t=e;t!==null;){var i=t.f,o=(i&(ft|Yt))!==0,u=o&&(i&Oe)!==0;if(!u&&(i&ut)===0){if((i&Tn)!==0)r.push(t);else if(o)t.f^=Oe;else{var f=re;try{re=t,qt(t)&&Ir(t)}catch(l){Ur(l,t,null,t.ctx)}finally{re=f}}var w=t.first;if(w!==null){t=w;continue}}var c=t.parent;for(t=t.next;t===null&&c!==null;)t=c.next,c=c.parent}return r}function n(e){var r=e.f,t=(r&Qe)!==0;if(gt!==null&&gt.add(e),re!==null&&!rt){if(!($e!=null&&$e.includes(e))){var i=re.deps;e.rv<Er&&(e.rv=Er,Me===null&&i!==null&&i[We]===e?We++:Me===null?Me=[e]:(!wt||!Me.includes(e))&&Me.push(e))}}else if(t&&e.deps===null&&e.effects===null){var o=e,u=o.parent;u!==null&&(u.f&qe)===0&&(o.f^=qe)}return t&&(o=e,qt(o)&&Cn(o)),or&&Jt.has(e)?Jt.get(e):e.v}function Ga(e){var r=gt;gt=new Set;var t=gt,i;try{if(lt(e),r!==null)for(i of gt)r.add(i)}finally{gt=r}return t}function Ve(e){var r=Ga(()=>lt(e));for(var t of r)if((t.f&Rn)!==0)for(const i of t.deps||[])(i.f&Qe)===0&&tr(i,i.v);else tr(t,t.v)}function lt(e){var r=rt;try{return rt=!0,e()}finally{rt=r}}const Ka=-7169;function Je(e,r){e.f=e.f&Ka|r}function Za(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Dt in e)Hr(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&Dt in t&&Hr(t)}}}function Hr(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Hr(e[i],r)}catch{}const t=qr(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=Fn(t);for(let o in i){const u=i[o].get;if(u)try{u.call(e)}catch{}}}}}const Qa=["touchstart","touchmove"];function Ja(e){return Qa.includes(e)}let dn=!1;function ei(){dn||(dn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function jn(e){var r=re,t=ie;nt(null),bt(null);try{return e()}finally{nt(r),bt(t)}}function ti(e,r,t,i=t){e.addEventListener(r,()=>jn(t));const o=e.__on_r;o?e.__on_r=()=>{o(),i(!0)}:e.__on_r=()=>i(!0),ei()}const Gn=new Set,Xr=new Set;function ri(e,r,t,i={}){function o(u){if(i.capture||Qt.call(r,u),!u.cancelBubble)return jn(()=>t==null?void 0:t.call(this,u))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?nn(()=>{r.addEventListener(e,o,i)}):r.addEventListener(e,o,i),o}function It(e,r,t,i,o){var u={capture:i,passive:o},f=ri(e,r,t,u);(r===document.body||r===window||r===document)&&kn(()=>{r.removeEventListener(e,f,u)})}function jt(e){for(var r=0;r<e.length;r++)Gn.add(e[r]);for(var t of Xr)t(e)}function Qt(e){var le;var r=this,t=r.ownerDocument,i=e.type,o=((le=e.composedPath)==null?void 0:le.call(e))||[],u=o[0]||e.target,f=0,w=e.__root;if(w){var c=o.indexOf(w);if(c!==-1&&(r===document||r===window)){e.__root=r;return}var l=o.indexOf(r);if(l===-1)return;c<=l&&(f=c)}if(u=o[f]||e.target,u!==r){Qn(e,"currentTarget",{configurable:!0,get(){return u||t}});var d=re,p=ie;nt(null),bt(null);try{for(var s,v=[];u!==null;){var b=u.assignedSlot||u.parentNode||u.host||null;try{var O=u["__"+i];if(O!=null&&(!u.disabled||e.target===u))if(Yr(O)){var[z,...se]=O;z.apply(u,[e,...se])}else O.call(u,e)}catch(ae){s?v.push(ae):s=ae}if(e.cancelBubble||b===r||b===null)break;u=b}if(s){for(let ae of v)queueMicrotask(()=>{throw ae});throw s}}finally{e.__root=r,delete e.currentTarget,nt(d),bt(p)}}}function ni(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Wr(e,r){var t=ie;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function Y(e,r){var t=(r&Aa)!==0,i=(r&Fa)!==0,o,u=!e.startsWith("<!>");return()=>{o===void 0&&(o=ni(u?e:"<!>"+e),t||(o=gr(o)));var f=i||Dn?document.importNode(o,!0):o.cloneNode(!0);if(t){var w=gr(f),c=f.lastChild;Wr(w,c)}else Wr(f,f);return f}}function dr(){var e=document.createDocumentFragment(),r=document.createComment(""),t=Jr();return e.append(r,t),Wr(r,t),e}function N(e,r){e!==null&&e.before(r)}function Fe(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function ai(e,r){return ii(e,r)}const Ot=new Map;function ii(e,{target:r,anchor:t,props:i={},events:o,context:u,intro:f=!0}){Sa();var w=new Set,c=p=>{for(var s=0;s<p.length;s++){var v=p[s];if(!w.has(v)){w.add(v);var b=Ja(v);r.addEventListener(v,Qt,{passive:b});var O=Ot.get(v);O===void 0?(document.addEventListener(v,Qt,{passive:b}),Ot.set(v,1)):Ot.set(v,O+1)}}};c(zr(Gn)),Xr.add(c);var l=void 0,d=Pa(()=>{var p=t??r.appendChild(Jr());return nr(()=>{if(u){yt({});var s=ve;s.c=u}o&&(i.$$events=o),l=e(p,i)||{},u&&Et()}),()=>{var b;for(var s of w){r.removeEventListener(s,Qt);var v=Ot.get(s);--v===0?(document.removeEventListener(s,Qt),Ot.delete(s)):Ot.set(s,v)}Xr.delete(c),p!==t&&((b=p.parentNode)==null||b.removeChild(p))}});return oi.set(l,d),l}let oi=new WeakMap;function ee(e,r,[t,i]=[0,0]){var o=e,u=null,f=null,w=Ne,c=t>0?Gr:0,l=!1;const d=(s,v=!0)=>{l=!0,p(v,s)},p=(s,v)=>{w!==(w=s)&&(w?(u?mr(u):v&&(u=nr(()=>v(o))),f&&wr(f,()=>{f=null})):(f?mr(f):v&&(f=nr(()=>v(o,[t+1,i]))),u&&wr(u,()=>{u=null})))};tn(()=>{l=!1,r(d),l||p(null,null)},c)}function it(e,r){return r}function ui(e,r,t,i){for(var o=[],u=r.length,f=0;f<u;f++)rn(r[f].e,o,!0);var w=u>0&&o.length===0&&t!==null;if(w){var c=t.parentNode;Ua(c),c.append(t),i.clear(),pt(e,r[0].prev,r[u-1].next)}Hn(o,()=>{for(var l=0;l<u;l++){var d=r[l];w||(i.delete(d.k),pt(e,d.prev,d.next)),mt(d.e,!w)}})}function ot(e,r,t,i,o,u=null){var f=e,w={flags:r,items:new Map,first:null},c=(r&In)!==0;if(c){var l=e;f=l.appendChild(Jr())}var d=null,p=!1,s=H(()=>{var v=t();return Yr(v)?v:v==null?[]:zr(v)});tn(()=>{var v=n(s),b=v.length;p&&b===0||(p=b===0,si(v,w,f,o,r,i,t),u!==null&&(b===0?d?mr(d):d=nr(()=>u(f)):d!==null&&wr(d,()=>{d=null})),n(s))})}function si(e,r,t,i,o,u,f){var Ft,Tt,Rt,_t;var w=(o&pa)!==0,c=(o&(Zr|Qr))!==0,l=e.length,d=r.items,p=r.first,s=p,v,b=null,O,z=[],se=[],le,ae,D,q;if(w)for(q=0;q<l;q+=1)le=e[q],ae=u(le,q),D=d.get(ae),D!==void 0&&((Ft=D.a)==null||Ft.measure(),(O??(O=new Set)).add(D));for(q=0;q<l;q+=1){if(le=e[q],ae=u(le,q),D=d.get(ae),D===void 0){var Q=s?s.e.nodes_start:t;b=fi(Q,r,b,b===null?r.first:b.next,le,ae,q,i,o,f),d.set(ae,b),z=[],se=[],s=b.next;continue}if(c&&li(D,le,q,o),(D.e.f&ut)!==0&&(mr(D.e),w&&((Tt=D.a)==null||Tt.unfix(),(O??(O=new Set)).delete(D))),D!==s){if(v!==void 0&&v.has(D)){if(z.length<se.length){var K=se[0],Z;b=K.prev;var oe=z[0],Ce=z[z.length-1];for(Z=0;Z<z.length;Z+=1)_n(z[Z],K,t);for(Z=0;Z<se.length;Z+=1)v.delete(se[Z]);pt(r,oe.prev,Ce.next),pt(r,b,oe),pt(r,Ce,K),s=K,b=Ce,q-=1,z=[],se=[]}else v.delete(D),_n(D,s,t),pt(r,D.prev,D.next),pt(r,D,b===null?r.first:b.next),pt(r,b,D),b=D;continue}for(z=[],se=[];s!==null&&s.k!==ae;)(s.e.f&ut)===0&&(v??(v=new Set)).add(s),se.push(s),s=s.next;if(s===null)continue;D=s}z.push(D),b=D,s=D.next}if(s!==null||v!==void 0){for(var Le=v===void 0?[]:zr(v);s!==null;)(s.e.f&ut)===0&&Le.push(s),s=s.next;var dt=Le.length;if(dt>0){var At=(o&In)!==0&&l===0?t:null;if(w){for(q=0;q<dt;q+=1)(Rt=Le[q].a)==null||Rt.measure();for(q=0;q<dt;q+=1)(_t=Le[q].a)==null||_t.fix()}ui(r,Le,At,d)}}w&&nn(()=>{var Ct;if(O!==void 0)for(D of O)(Ct=D.a)==null||Ct.apply()}),ie.first=r.first&&r.first.e,ie.last=b&&b.e}function li(e,r,t,i){(i&Zr)!==0&&tr(e.v,r),(i&Qr)!==0?tr(e.i,t):e.i=t}function fi(e,r,t,i,o,u,f,w,c,l){var d=(c&Zr)!==0,p=(c&ga)===0,s=d?p?X(o):er(o):o,v=(c&Qr)===0?f:er(f),b={i:v,v:s,k:u,a:null,e:null,prev:t,next:i};try{return b.e=nr(()=>w(e,s,v,l),Ra),b.e.prev=t&&t.e,b.e.next=i&&i.e,t===null?r.first=b:(t.next=b,t.e.next=b.e),i!==null&&(i.prev=b,i.e.prev=b.e),b}finally{}}function _n(e,r,t){for(var i=e.next?e.next.e.nodes_start:t,o=r?r.e.nodes_start:t,u=e.e.nodes_start;u!==i;){var f=Sr(u);o.before(u),u=f}}function pt(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Kn(e){var r,t,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(t=Kn(e[r]))&&(i&&(i+=" "),i+=t)}else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function ci(){for(var e,r,t=0,i="",o=arguments.length;t<o;t++)(e=arguments[t])&&(r=Kn(e))&&(i&&(i+=" "),i+=r);return i}function di(e){return typeof e=="object"?ci(e):e??""}function _i(e,r,t){var i=e==null?"":""+e;return i===""?null:i}function vn(e,r,t,i,o,u){var f=e.__className;if(f!==t){var w=_i(t);w==null?e.removeAttribute("class"):e.className=w,e.__className=t}return u}const vi=Symbol("is custom element"),xi=Symbol("is html");function Ht(e,r,t,i){var o=hi(e);o[r]!==(o[r]=t)&&(r==="loading"&&(e[ia]=t),t==null?e.removeAttribute(r):typeof t!="string"&&pi(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function hi(e){return e.__attributes??(e.__attributes={[vi]:e.nodeName.includes("-"),[xi]:e.namespaceURI===Ta})}var xn=new Map;function pi(e){var r=xn.get(e.nodeName);if(r)return r;xn.set(e.nodeName,r=[]);for(var t,i=e,o=Element.prototype;o!==i;){t=Fn(i);for(var u in t)t[u].set&&r.push(u);i=qr(i)}return r}function gi(e,r,t=r){ti(e,"change",i=>{var o=i?e.defaultChecked:e.checked;t(o)}),lt(r)==null&&t(e.checked),ir(()=>{var i=r();e.checked=!!i})}function hn(e,r){return e===r||(e==null?void 0:e[Dt])===r}function wi(e={},r,t,i){return en(()=>{var o,u;return ir(()=>{o=u,u=[],lt(()=>{e!==t(...u)&&(r(e,...u),o&&hn(t(...o),e)&&r(null,...o))})}),()=>{nn(()=>{u&&hn(t(...u),e)&&r(null,...u)})}}),e}function $t(e=!1){const r=ve,t=r.l.u;if(!t)return;let i=()=>Za(r.s);if(e){let o=0,u={};const f=rr(()=>{let w=!1;const c=r.s;for(const l in c)c[l]!==u[l]&&(u[l]=c[l],w=!0);return w&&o++,o});i=()=>n(f)}t.b.length&&Ma(()=>{pn(r,i),Nr(t.b)}),fn(()=>{const o=lt(()=>t.m.map(ta));return()=>{for(const u of o)typeof u=="function"&&u()}}),t.a.length&&fn(()=>{pn(r,i),Nr(t.a)})}function pn(e,r){if(e.l.s)for(const t of e.l.s)n(t);r()}let _r=!1;function mi(e){var r=_r;try{return _r=!1,[e(),_r]}finally{_r=r}}function gn(e){var r;return((r=e.ctx)==null?void 0:r.d)??!1}function Se(e,r,t,i){var K;var o=(t&wa)!==0,u=!ar||(t&ma)!==0,f=(t&ya)!==0,w=(t&Ea)!==0,c=!1,l;f?[l,c]=mi(()=>e[r]):l=e[r];var d=Dt in e||aa in e,p=f&&(((K=Wt(e,r))==null?void 0:K.set)??(d&&r in e&&(Z=>e[r]=Z)))||void 0,s=i,v=!0,b=!1,O=()=>(b=!0,v&&(v=!1,w?s=lt(i):s=i),s);l===void 0&&i!==void 0&&(p&&u&&ca(),l=O(),p&&p(l));var z;if(u)z=()=>{var Z=e[r];return Z===void 0?O():(v=!0,b=!1,Z)};else{var se=(o?rr:H)(()=>e[r]);se.f|=Rn,z=()=>{var Z=n(se);return Z!==void 0&&(s=void 0),Z===void 0?s:Z}}if((t&ba)===0)return z;if(p){var le=e.$$legacy;return function(Z,oe){return arguments.length>0?((!u||!oe||le||c)&&p(oe?z():Z),Z):z()}}var ae=!1,D=!1,q=X(l),Q=rr(()=>{var Z=z(),oe=n(q);return ae?(ae=!1,D=!0,oe):(D=!1,q.v=Z)});return f&&n(Q),o||(Q.equals=Kr),function(Z,oe){if(gt!==null&&(ae=D,z(),n(q)),arguments.length>0){const Ce=oe?n(Q):u&&f?Bt(Z):Z;if(!Q.equals(Ce)){if(ae=!0,B(q,Ce),b&&s!==void 0&&(s=Ce),gn(Q))return Z;lt(()=>n(Q))}return Z}return gn(Q)?Q.v:n(Q)}}const bi="5";var An;typeof window<"u"&&((An=window.__svelte??(window.__svelte={})).v??(An.v=new Set)).add(bi);ha();const yi=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,Ei=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,Ai=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,Fi=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,Ti=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,Ri=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,Si=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,Ui=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,Kt=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],wn=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],Ii=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],Bi=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],Di=[{count:2,offset:0}],ht=(e,r,t,i)=>{const o=e.createShader(r);if(!o)throw new Error(`failed to create shader '${i}'`);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(o);throw new Error(`compilation error in shader '${i}':
${u}`)}return o},Zt=(e,r,t,i)=>{const o=e.createProgram();if(!o)throw new Error(`failed to create program '${i}'`);if(e.attachShader(o,r),e.attachShader(o,t),e.linkProgram(o),e.detachShader(o,r),e.detachShader(o,t),!e.getProgramParameter(o,e.LINK_STATUS)){const u=e.getProgramInfoLog(o);throw new Error(`link error in program '${i}':
${u}`)}return o};function*Mi(e,r){let t=0;for(;!(t>e.length);){const i=t+r;yield e.slice(t,i),t=i}}function*Pi(e,r){let t=0;for(;;){const i=t+r;if(i>e.length)break;yield e.slice(t,i),t=i}}function Lr(e,r,t,i){const o=r*2,u=e.map(t);return u.length<o?u:Mi(u,r).map(f=>[...f]).map(i).toArray()}function st(e){return Math.round(e*255)}let tt=null;const $i=(e,r,t,i)=>{tt={value:e,level:r,draggedID:t,set:i}},Ci=()=>{tt=null},Li=(e,r,t)=>{!tt||tt.level!==e||tt.draggedID===r||(tt.set&&(tt.set(tt.value),tt.set=null),t(tt.value))};var ki=(e,r)=>r(!1),Ni=Y('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),Vi=(e,r)=>r(!0),Oi=Y('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),Hi=Y('<input type="checkbox">'),Xi=Y("<!> <!> <label> </label> <br>",1);function De(e,r){yt(r,!1);let t=Se(r,"expanded",12),i=Se(r,"id",8),o=Se(r,"text",8),u=Se(r,"checked",12,null),f=Se(r,"level",8),w=Se(r,"onexpandedchange",8,null),c=Se(r,"oncheckedchange",8,null);const l=Q=>{t(Q),w()&&w()()},d=Q=>{u(Q),c()&&c()()},p=()=>$i(!u(),f(),i(),d),s=()=>Li(f(),i(),d),v=Ci;$t();var b=Xi(),O=ce(b);{var z=Q=>{var K=Ni();K.__click=[ki,l],ze(()=>Ht(K,"id",u()===null?i():null)),N(Q,K)},se=Q=>{var K=Oi();K.__click=[Vi,l],ze(()=>Ht(K,"id",u()===null?i():null)),N(Q,K)};ee(O,Q=>{t()?Q(z):Q(se,!1)})}var le=G(O,2);{var ae=Q=>{var K=Hi();Ht(K,"draggable",!0),K.__change=function(...Z){var oe;(oe=c())==null||oe.apply(this,Z)},ze(()=>Ht(K,"id",i())),It("dragstart",K,p),It("dragenter",K,s),It("dragend",K,v),gi(K,u),N(Q,K)};ee(le,Q=>{u()!==null&&Q(ae)})}var D=G(le,2);Ht(D,"draggable",!0),D.__change=function(...Q){var K;(K=c())==null||K.apply(this,Q)};var q=Pe(D);ze(()=>{Ht(D,"for",i()),Fe(q,o())}),It("dragstart",D,p),It("dragenter",D,s),It("dragend",D,v),N(e,b),Et()}jt(["click","change"]);var Wi=(e,r,t)=>r()(t()),Yi=Y('<button class="px-1 bg-gray-200 hover:bg-gray-100">view image</button> <br>',1),zi=Y('<div class="ml-2 w-full"><!> <br> <br> <br> <br></div>');function mn(e,r){yt(r,!1);let t=Se(r,"image",8),i=Se(r,"view",8,null);$t();var o=zi(),u=Pe(o);{var f=p=>{var s=Yi(),v=ce(s);v.__click=[Wi,i,t],N(p,s)};ee(u,p=>{i()&&p(f)})}var w=G(u),c=G(w,2),l=G(c,2),d=G(l,2);ze((p,s,v,b)=>{Fe(w,` screen: ${t().x??""},${t().y??""}
  ${t().w??""}x${t().h??""} `),Fe(c,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),Fe(l,` rgb: ${p??""}, ${s??""}, ${v??""} `),Fe(d,` alpha: ${b??""} `)},[()=>st(t().r),()=>st(t().g),()=>st(t().b),()=>t().a.toPrecision(4)],H),N(e,o),Et()}jt(["click"]);var qi=(e,r,t)=>r()(t()),ji=Y('<button class="px-1 bg-gray-200 hover:bg-gray-100">view texture</button> <br>',1),Gi=Y(" <br>",1),Ki=Y('<div class="ml-2 w-full"><!> <!> <br> <br> <br> <br></div>');function bn(e,r){yt(r,!1);let t=Se(r,"vertex",8),i=Se(r,"view",8,null);$t();var o=Ki(),u=Pe(o);{var f=v=>{var b=ji(),O=ce(b);O.__click=[qi,i,t],N(v,b)};ee(u,v=>{i()&&v(f)})}var w=G(u,2);{var c=v=>{var b=Gi(),O=ce(b);ze(()=>Fe(O,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `)),N(v,b)};ee(w,v=>{t().modelpoint&&v(c)})}var l=G(w),d=G(l,2),p=G(d,2),s=G(p,2);ze((v,b,O,z,se,le)=>{Fe(l,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),Fe(d,` uv: ${v??""}, ${b??""} `),Fe(p,` rgb: ${O??""}, ${z??""}, ${se??""} `),Fe(s,` alpha: ${le??""} `)},[()=>t().u.toPrecision(4),()=>t().v.toPrecision(4),()=>st(t().r),()=>st(t().g),()=>st(t().b),()=>t().a.toPrecision(4)],H),N(e,o),Et()}jt(["click"]);var Zi=Y('<div class="ml-2 w-full"> <br> <br> <br></div>');function yn(e,r){yt(r,!1);let t=Se(r,"vertex",8);$t();var i=Zi(),o=Pe(i),u=G(o,2),f=G(u,2);ze((w,c,l,d)=>{Fe(o,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `),Fe(u,` rgb: ${w??""}, ${c??""}, ${l??""} `),Fe(f,` alpha: ${d??""} `)},[()=>st(t().r),()=>st(t().g),()=>st(t().b),()=>t().a.toPrecision(4)],H),N(e,i),Et()}var Qi=Y("<div> </div>"),Ji=(e,r,t)=>{const i=r().textureId,o=t().textures[i];t(t().selectedTextureId=i.toString(),!0),t(t().selectedTexture=o,!0),t(t().textureBoundX=0,!0),t(t().textureBoundY=0,!0),t(t().textureBoundW=o.width,!0),t(t().textureBoundH=o.height,!0),t(t().textureViewX=0,!0),t(t().textureViewY=0,!0),t(t().textureViewScale=100,!0),t().redraw()},eo=Y('<button class="px-1 bg-gray-200 hover:bg-gray-100"> </button> <br>',1),to=Y("<!> <!>",1),ro=Y('<div class="ml-1"></div>'),no=Y("<!> <!>",1),ao=Y("<!> <!>",1),io=Y('<div class="ml-1"><!></div>'),oo=Y("<!> <!>",1),uo=Y("<!> <!>",1),so=Y('<div class="ml-1"></div>'),lo=Y("<!> <!>",1),fo=Y("<!> <!>",1),co=Y('<div class="ml-1"><!></div>'),_o=Y("<!> <!>",1),vo=Y("<!> <!>",1),xo=Y('<div class="ml-1"></div>'),ho=Y("<!> <!>",1),po=Y("<!> <!>",1),go=Y('<div class="ml-1"><!></div>'),wo=Y("<!> <!>",1),mo=Y('<div class="ml-1"><!> <!></div>'),bo=Y(" <br> <!> <!>",1),yo=Y('<div class="ml-3 text-sm"><!> <!> <!> <!> <!></div>');function Eo(e,r){yt(r,!1);let t=Se(r,"entity",12),i=Se(r,"menuData",12),o=Se(r,"level",8);const u=6,f=100;let w=X(!1),c=X(!1),l=X(!1);function d(R){return"images"in R}function p(R){return"vertices"in R}function s(R){return"vertices"in R}const v=(R,J)=>{const P=R[0];let he=P.x,ke=P.x,be=P.y,Te=P.y;for(const te of R)te.x<he&&(he=te.x),te.x>ke&&(ke=te.x),te.y<be&&(be=te.y),te.y>Te&&(Te=te.y);return{x:he,y:be,w:ke-he,h:Te-be,ax:P.ax,ay:P.ay,aw:P.aw,ah:P.ah,r:P.r,g:P.g,b:P.b,a:P.a,expanded:!1,index:J}},b=(R,J)=>{const P=J*f,he=P*u;return{images:R,desc:`${P}-${P+R.length-1}`,expanded:!1,vertexRangeStart:he,vertexRangeEnd:he+R.length*u}},O=(R,J)=>({modelpoint:{...R},expanded:!1,index:J,...R}),z=(R,J)=>({modelpoint:null,expanded:!1,index:J,...R}),se=(R,J)=>{const P=J*f;return{vertices:R,desc:`${P}-${P+R.length-1}`,expanded:!1}},le=(R,J)=>({modelpoint:{...R},expanded:!1,index:J,...R}),ae=(R,J)=>{const P=J*f;return{vertices:R,desc:`${P}-${P+R.length-1}`,expanded:!1}},D=(R,J)=>({vertices:Lr(R.vertices,f,le,ae),vertexCount:R.vertices.length,expanded:!1,verticesExpanded:!1,index:J});let q=X(null),Q=X(0),K=X(null),Z=X(0),oe=X(null),Ce=X(0);if(t().type==="batch2d"||t().type==="minimap2d"){const R=[...Pi(t().vertices,u)];B(Q,R.length),B(q,Lr(R,f,v,b))}else if(t().vertices){const R=t().type!=="renderparticles"?O:z;B(Z,t().vertices.length),B(K,Lr(t().vertices,f,R,se))}t().models&&(B(Ce,t().models.length),B(oe,t().models.map(D)));const Le=R=>{const J=t().textureId,P=i().textures[J];i(i().selectedTextureId=t().uuid,!0),i(i().selectedTexture=P,!0),i(i().textureBoundX=R.ax,!0),i(i().textureBoundY=R.ay,!0),i(i().textureBoundW=R.aw,!0),i(i().textureBoundH=R.ah,!0),i(i().textureViewX=0,!0),i(i().textureViewY=0,!0),i(i().textureViewScale=100,!0),i().redraw()};$t();var dt=yo(),At=Pe(dt);{var Ft=R=>{var J=Qi(),P=Pe(J);ze(()=>Fe(P,`animated: ${t().animated??""}`)),N(R,J)};ee(At,R=>{typeof t().animated=="boolean"&&R(Ft)})}var Tt=G(At,2);{var Rt=R=>{var J=eo(),P=ce(J);P.__click=[Ji,t,i];var he=Pe(P);ze(()=>Fe(he,`texture: #${t().textureId??""}`)),N(R,J)};ee(Tt,R=>{typeof t().textureId=="number"&&R(Rt)})}var _t=G(Tt,2);{var Ct=R=>{var J=oo(),P=ce(J);const he=H(()=>`${t().uuid}-images2d`),ke=H(()=>`2D images (${n(Q)})`);De(P,{get id(){return n(he)},get text(){return n(ke)},get level(){return o()},get expanded(){return n(w)},set expanded(te){B(w,te)},$$legacy:!0});var be=G(P,2);{var Te=te=>{var pe=dr(),et=ce(pe);ot(et,1,()=>n(q),it,(at,W,de)=>{var je=io(),_e=Pe(je);{var m=ue=>{var Ie=no(),Be=ce(Ie),Ge=()=>n(W).images.every(xe=>t().enabledVerticesList[xe.index*u]),Re=xe=>{for(let x=n(W).vertexRangeStart;x<n(W).vertexRangeEnd;x+=1)t(t().enabledVerticesList[x]=xe,!0)};const ye=H(()=>`${t().uuid}-images-${n(W).desc}`),He=H(()=>`[Images ${n(W).desc}]`),Ke=H(()=>o()+1);De(Be,{get checked(){return Ge()},set checked(xe){Re(xe)},get oncheckedchange(){return i().redraw},get id(){return n(ye)},get text(){return n(He)},get level(){return n(Ke)},get expanded(){return n(W).expanded},set expanded(xe){n(W).expanded=xe,Ve(()=>n(q))},$$legacy:!0});var ge=G(Be,2);{var we=xe=>{var x=ro();ot(x,5,()=>n(W).images,it,(a,h,_)=>{var j=to(),g=ce(j),A=()=>t().enabledVerticesList[n(h).index*u],U=y=>{for(let $=0;$<u;$+=1)t(t().enabledVerticesList[n(h).index*u+$]=y,!0)};const F=H(()=>`${t().uuid}-images-${n(W).desc}-${_}`),I=H(()=>o()+2);De(g,{get checked(){return A()},set checked(y){U(y)},get oncheckedchange(){return i().redraw},get id(){return n(F)},text:`Image ${de*f+_}`,get level(){return n(I)},get expanded(){return n(h).expanded},set expanded(y){n(h).expanded=y,Ve(()=>(n(q),n(W).images))},$$legacy:!0});var V=G(g,2);{var k=y=>{mn(y,{get image(){return n(h)},view:Le})};ee(V,y=>{n(h).expanded&&y(k)})}N(a,j)}),N(xe,x)};ee(ge,xe=>{n(W).expanded&&xe(we)})}N(ue,Ie)},Ue=ue=>{var Ie=ao(),Be=ce(Ie),Ge=()=>t().enabledVerticesList[n(W).index*u],Re=we=>{for(let xe=0;xe<u;xe+=1)t(t().enabledVerticesList[n(W).index*u+xe]=we,!0)};const ye=H(()=>`${t().uuid}-images-${de}`),He=H(()=>o()+1);De(Be,{get checked(){return Ge()},set checked(we){Re(we)},get oncheckedchange(){return i().redraw},get id(){return n(ye)},text:`Image ${de}`,get level(){return n(He)},get expanded(){return n(W).expanded},set expanded(we){n(W).expanded=we,Ve(()=>n(q))},$$legacy:!0});var Ke=G(Be,2);{var ge=we=>{mn(we,{get image(){return n(W)},view:Le})};ee(Ke,we=>{n(W).expanded&&we(ge)})}N(ue,Ie)};ee(_e,ue=>{d(n(W))?ue(m):ue(Ue,!1)})}N(at,je)}),N(te,pe)};ee(be,te=>{n(w)&&te(Te)})}N(R,J)};ee(_t,R=>{n(q)&&n(Q)&&R(Ct)})}var St=G(_t,2);{var Lt=R=>{var J=_o(),P=ce(J);const he=H(()=>`${t().uuid}-vertices3d`),ke=H(()=>`3D vertices (${n(Z)})`);De(P,{get id(){return n(he)},get text(){return n(ke)},get level(){return o()},get expanded(){return n(c)},set expanded(te){B(c,te)},$$legacy:!0});var be=G(P,2);{var Te=te=>{var pe=dr(),et=ce(pe);ot(et,1,()=>n(K),it,(at,W,de)=>{var je=co(),_e=Pe(je);{var m=ue=>{var Ie=lo(),Be=ce(Ie);const Ge=H(()=>`${t().uuid}-vertices-${n(W).desc}`),Re=H(()=>`[Vertices ${n(W).desc}]`),ye=H(()=>o()+1);De(Be,{get id(){return n(Ge)},get text(){return n(Re)},get level(){return n(ye)},get expanded(){return n(W).expanded},set expanded(ge){n(W).expanded=ge,Ve(()=>n(K))},$$legacy:!0});var He=G(Be,2);{var Ke=ge=>{var we=so();ot(we,5,()=>n(W).vertices,it,(xe,x,a)=>{var h=uo(),_=ce(h);const j=H(()=>`${t().uuid}-vertices-${n(W).desc}-${n(x).index}`),g=H(()=>`Vertex ${n(x).index}`),A=H(()=>o()+2);De(_,{get id(){return n(j)},get text(){return n(g)},get level(){return n(A)},get expanded(){return n(x).expanded},set expanded(I){n(x).expanded=I,Ve(()=>(n(K),n(W).vertices))},$$legacy:!0});var U=G(_,2);{var F=I=>{bn(I,{get vertex(){return n(x)},view:Le})};ee(U,I=>{n(x).expanded&&I(F)})}N(xe,h)}),N(ge,we)};ee(He,ge=>{n(W).expanded&&ge(Ke)})}N(ue,Ie)},Ue=ue=>{var Ie=fo(),Be=ce(Ie);const Ge=H(()=>`${t().uuid}-vertices-${n(W).index}`),Re=H(()=>`Vertex ${n(W).index}`),ye=H(()=>o()+1);De(Be,{get id(){return n(Ge)},get text(){return n(Re)},get level(){return n(ye)},get expanded(){return n(W).expanded},set expanded(ge){n(W).expanded=ge,Ve(()=>n(K))},$$legacy:!0});var He=G(Be,2);{var Ke=ge=>{bn(ge,{get vertex(){return n(W)},view:Le})};ee(He,ge=>{n(W).expanded&&ge(Ke)})}N(ue,Ie)};ee(_e,ue=>{p(n(W))?ue(m):ue(Ue,!1)})}N(at,je)}),N(te,pe)};ee(be,te=>{n(c)&&te(Te)})}N(R,J)};ee(St,R=>{n(K)&&n(Z)&&R(Lt)})}var ur=G(St,2);{var sr=R=>{var J=bo(),P=ce(J),he=G(P,3);const ke=H(()=>`${t().uuid}-models`),be=H(()=>`Models (${n(Ce)})`);De(he,{get id(){return n(ke)},get text(){return n(be)},get level(){return o()},get expanded(){return n(l)},set expanded(pe){B(l,pe)},$$legacy:!0});var Te=G(he,2);{var te=pe=>{var et=dr(),at=ce(et);ot(at,1,()=>n(oe),it,(W,de,je)=>{var _e=mo(),m=Pe(_e);const Ue=H(()=>`${t().uuid}-models`),ue=H(()=>`Model ${n(de).index}`),Ie=H(()=>o()+1);De(m,{get id(){return n(Ue)},get text(){return n(ue)},get level(){return n(Ie)},get expanded(){return n(de).expanded},set expanded(Re){n(de).expanded=Re,Ve(()=>n(oe))},$$legacy:!0});var Be=G(m,2);{var Ge=Re=>{var ye=wo(),He=ce(ye);const Ke=H(()=>`${t().uuid}-vertices`),ge=H(()=>`Vertices (${n(de).vertexCount})`),we=H(()=>o()+2);De(He,{get id(){return n(Ke)},get text(){return n(ge)},get level(){return n(we)},get expanded(){return n(de).verticesExpanded},set expanded(a){n(de).verticesExpanded=a,Ve(()=>n(oe))},$$legacy:!0});var xe=G(He,2);{var x=a=>{var h=dr(),_=ce(h);ot(_,1,()=>n(de).vertices,it,(j,g,A)=>{var U=go(),F=Pe(U);{var I=k=>{var y=ho(),$=ce(y);const E=H(()=>`${t().uuid}-vertices-${n(g).desc}`),S=H(()=>`[Vertices ${n(g).desc}]`),C=H(()=>o()+3);De($,{get id(){return n(E)},get text(){return n(S)},get level(){return n(C)},get expanded(){return n(g).expanded},set expanded(L){n(g).expanded=L,Ve(()=>(n(oe),n(de).vertices))},$$legacy:!0});var T=G($,2);{var M=L=>{var ne=xo();ot(ne,5,()=>n(g).vertices,it,(fe,Ee,Ut)=>{var kt=vo(),Nt=ce(kt);const lr=H(()=>`${t().uuid}-vertices-${n(g).desc}-${n(Ee).index}`),Gt=H(()=>`Vertex ${n(Ee).index}`),Vt=H(()=>o()+4);De(Nt,{get id(){return n(lr)},get text(){return n(Gt)},get level(){return n(Vt)},get expanded(){return n(Ee).expanded},set expanded(me){n(Ee).expanded=me,Ve(()=>(n(oe),n(de).vertices,n(g).vertices))},$$legacy:!0});var fr=G(Nt,2);{var Dr=me=>{yn(me,{get vertex(){return n(Ee)}})};ee(fr,me=>{n(Ee).expanded&&me(Dr)})}N(fe,kt)}),N(L,ne)};ee(T,L=>{n(g).expanded&&L(M)})}N(k,y)},V=k=>{var y=po(),$=ce(y);const E=H(()=>`${t().uuid}-${n(de).index}-vertex-${n(g).index}`),S=H(()=>`Vertex ${n(g).index}`),C=H(()=>o()+3);De($,{get id(){return n(E)},get text(){return n(S)},get level(){return n(C)},get expanded(){return n(g).expanded},set expanded(L){n(g).expanded=L,Ve(()=>(n(oe),n(de).vertices))},$$legacy:!0});var T=G($,2);{var M=L=>{yn(L,{get vertex(){return n(g)}})};ee(T,L=>{n(g).expanded&&L(M)})}N(k,y)};ee(F,k=>{s(n(g))?k(I):k(V,!1)})}N(j,U)}),N(a,h)};ee(xe,a=>{n(de).verticesExpanded&&a(x)})}N(Re,ye)};ee(Be,Re=>{n(de).expanded&&Re(Ge)})}N(W,_e)}),N(pe,et)};ee(Te,pe=>{n(l)&&pe(te)})}ze(()=>Fe(P,`screen: ${t().targetx??""},${t().targety??""}
    ${t().targetw??""}x${t().targeth??""} `)),N(R,J)};ee(ur,R=>{n(oe)&&n(Ce)&&R(sr)})}N(e,dt),Et()}jt(["click"]);var Ao=(e,r,t,i)=>r(t(),i()),Fo=Y('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),To=Y("<div><!> <!></div>"),Ro=Y('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function So(e,r){yt(r,!1);let t=Se(r,"data",12);const i=(c,l)=>{t().selectedTexture===l?t(t().selectedTexture=null,!0):(t(t().selectedTextureId=c,!0),t(t().selectedTexture=l,!0),t(t().textureBoundX=0,!0),t(t().textureBoundY=0,!0),t(t().textureBoundW=l.width,!0),t(t().textureBoundH=l.height,!0),t(t().textureViewX=0,!0),t(t().textureViewY=0,!0),t(t().textureViewScale=100,!0)),t().redraw()},o=1;$t();var u=Ro(),f=G(ce(u),2);ot(f,1,()=>Object.entries(t().textures),it,(c,l)=>{let d=()=>n(l)[0],p=()=>n(l)[1];var s=Fo(),v=Pe(s);v.__click=[Ao,i,d,p];var b=Pe(v);ze(()=>{vn(v,1,di(t().selectedTexture===p()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),Fe(b,`#${d()??""}`)}),N(c,s)});var w=G(f,6);ot(w,1,()=>t().entities,it,(c,l,d)=>{var p=To();vn(p,1,`select-none m-0 border-none w-full ${d&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var s=Pe(p);De(s,{id:`menu${d}`,get text(){return t().entities[d].type},get oncheckedchange(){return t().redraw},level:o,get expanded(){return t().entities[d].expanded},set expanded(O){t().entities[d].expanded=O,Ve(()=>t().entities)},get checked(){return t().entities[d].enabled},set checked(O){t().entities[d].enabled=O,Ve(()=>t().entities)},$$legacy:!0});var v=G(s,2);{var b=O=>{Eo(O,{level:o+1,get entity(){return t().entities[d]},set entity(z){t().entities[d]=z,Ve(()=>t().entities)},get menuData(){return t()},set menuData(z){t(z)},$$legacy:!0})};ee(v,O=>{t().entities[d].expanded&&O(b)})}N(c,p)}),N(e,u),Et()}jt(["click"]);const Ae=[];for(let e=0;e<256;++e)Ae.push((e+256).toString(16).slice(1));function Uo(e,r=0){return(Ae[e[r+0]]+Ae[e[r+1]]+Ae[e[r+2]]+Ae[e[r+3]]+"-"+Ae[e[r+4]]+Ae[e[r+5]]+"-"+Ae[e[r+6]]+Ae[e[r+7]]+"-"+Ae[e[r+8]]+Ae[e[r+9]]+"-"+Ae[e[r+10]]+Ae[e[r+11]]+Ae[e[r+12]]+Ae[e[r+13]]+Ae[e[r+14]]+Ae[e[r+15]]).toLowerCase()}let kr;const Io=new Uint8Array(16);function Bo(){if(!kr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");kr=crypto.getRandomValues.bind(crypto)}return kr(Io)}const Do=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),En={randomUUID:Do};function Xt(e,r,t){var o;if(En.randomUUID&&!e)return En.randomUUID();e=e||{};const i=e.random??((o=e.rng)==null?void 0:o.call(e))??Bo();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Uo(i)}var Mo=(e,r,t)=>B(r,t),Po=(e,r)=>B(r,null),$o=(e,r)=>B(r,!1),Co=Y('<div class="overflow-auto absolute w-60 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),Lo=(e,r)=>B(r,!0),ko=Y('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),No=(e,r,t,i,o)=>{Xe(r,n(r).selectedTexture=null),t(n(i),n(o))},Vo=Y('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),Oo=Y('<canvas class="absolute right-0"></canvas> <!> <!>',1);function Ho(e,r){yt(r,!1);let t=X({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",textureBoundX:0,textureBoundY:0,textureBoundW:1,textureBoundH:1,textureViewX:0,textureViewY:0,textureViewScale:100,redraw:()=>ue(n(_e),n(m))});const i=x=>{const a=Rt.get(x);return a?parseInt(a):0},o=0;let u=X(null),f=X(null),w=X(null),c=X(null),l=X(null),d=X(null),p=X(null),s=X(null),v=X(null),b=X(null),O=X(null),z=X(null),se=X(null),le=X(null),ae=X(null),D=X(null),q=X(null),Q=X(null),K=X(null),Z=X(null),oe=X(null),Ce=X(null),Le=null;const dt=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),At=10,Ft=1e3,Tt=10,Rt=new URLSearchParams(window.location.search),_t=Rt.get("n"),Ct=_t?Math.max(parseInt(_t),1):1,St=i("w"),Lt=i("h"),ur=i("gx"),sr=i("gy"),R=i("gw"),J=i("gh");let P=0,he=X(0),ke=X(),be=null,Te=null,te=0,pe=0,et,at,W=X(!1),de=X(!1),je=X(null),_e=X(null),m=X(null);const Ue=(x,a,h,_)=>{x.bindBuffer(x.ARRAY_BUFFER,a.vbo);for(let g=0;g<n(he);g+=1){const A=a.attribs[g];if(!A){x.disableVertexAttribArray(g);continue}x.enableVertexAttribArray(g),x.vertexAttribPointer(g,A.count,x.FLOAT,!1,a.step,A.offset)}if(!_){x.drawArrays(x.TRIANGLES,0,h);return}let j=null;for(let g=0;g<h;g+=1){const A=_[g];j===null?A&&(j=g):A||(x.drawArrays(x.TRIANGLES,j,g-j),j=null)}j!==null&&x.drawArrays(x.TRIANGLES,j,h-j)},ue=(x,a)=>{if(a.viewport(0,0,x.width,x.height),a.scissor(0,0,x.width,x.height),a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),!n(W)){a.viewport(0,0,x.width,x.height);const h=()=>{a.clearColor(.525,.968,.495,1),a.clear(a.COLOR_BUFFER_BIT)},_=()=>{a.clearColor(.2,.2,.2,1),a.clear(a.COLOR_BUFFER_BIT)},j=Math.min(P/Ct,1),g=Math.floor(x.width*.65)&-2,A=70,U=8,F=U*2,I=g*j;if(h(),x.width<=F||x.height<=F)return;a.scissor(U,U,x.width-F,x.height-F),_(),a.scissor(x.width/2-(g/2+U),x.height/2-(A/2+U),g+F,A+F),h(),a.scissor(x.width/2-g/2+I,x.height/2-A/2,g-I,A),_();return}if(n(t).selectedTexture){n(t).textureViewScale<At&&Xe(t,n(t).textureViewScale=At),n(t).textureViewScale>Ft&&Xe(t,n(t).textureViewScale=Ft);const h=n(t).textureViewScale/100,_=h*2,j=n(t).textureBoundX,g=n(t).textureBoundX+n(t).textureBoundW,A=n(t).textureBoundY,U=n(t).textureBoundY+n(t).textureBoundH;let F=n(t).textureViewX+x.width/_,I=n(t).textureViewY+x.height/_,V=!1;if(F<j&&(F=j,V=!0),I<A&&(I=A,V=!0),F>g&&(F=g,V=!0),I>U&&(I=U,V=!0),n(t).textureBoundW*h<=x.width&&(F=j+n(t).textureBoundW/2,V=!0),n(t).textureBoundH*h<=x.height&&(I=A+n(t).textureBoundH/2,V=!0),V&&(Xe(t,n(t).textureViewX=F-x.width/_),Xe(t,n(t).textureViewY=I-x.height/_)),a.useProgram(n(oe)),a.viewport(0,0,x.width,x.height),a.uniform2fv(n(Ce),[x.width,x.height]),!Le){const Ee=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Ee),a.bufferData(a.ARRAY_BUFFER,dt,a.STATIC_DRAW),Le={vbo:Ee,step:8,attribs:Di}}Ue(a,Le,6);const k=n(t).selectedTexture,y=(n(t).textureBoundX-n(t).textureViewX)*h,$=y+n(t).textureBoundW*h,E=(n(t).textureBoundY-n(t).textureViewY)*h,S=E+n(t).textureBoundH*h,C=j/k.width,T=g/k.width,M=A/k.height,L=U/k.height;a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST),a.useProgram(n(u)),a.uniform4fv(n(f),[k.width,k.height,x.width,x.height]),a.bindTexture(a.TEXTURE_2D,k.texture),a.uniform1i(n(w),o);const ne=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,ne),a.bufferData(a.ARRAY_BUFFER,new Float32Array([y,E,C,M,n(t).textureBoundX,n(t).textureBoundY,n(t).textureBoundW,n(t).textureBoundH,1,1,1,1,0,0,0,$,E,T,M,n(t).textureBoundX,n(t).textureBoundY,n(t).textureBoundW,n(t).textureBoundH,1,1,1,1,0,0,0,y,S,C,L,n(t).textureBoundX,n(t).textureBoundY,n(t).textureBoundW,n(t).textureBoundH,1,1,1,1,0,0,0,$,E,T,M,n(t).textureBoundX,n(t).textureBoundY,n(t).textureBoundW,n(t).textureBoundH,1,1,1,1,0,0,0,$,S,T,L,n(t).textureBoundX,n(t).textureBoundY,n(t).textureBoundW,n(t).textureBoundH,1,1,1,1,0,0,0,y,S,C,L,n(t).textureBoundX,n(t).textureBoundY,n(t).textureBoundW,n(t).textureBoundH,1,1,1,1,0,0,0]),a.STATIC_DRAW),Ue(a,{vbo:ne,step:60,attribs:Kt},6),a.deleteBuffer(ne);return}Te&&(a.bindFramebuffer(a.DRAW_FRAMEBUFFER,Te),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)),a.disable(a.SCISSOR_TEST);for(let h of n(t).entities)if(h.enabled){if(h.type==="batch2d"){a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST);const _=n(t).textures[h.textureId];a.useProgram(n(u)),a.viewport(0,0,St,Lt),a.uniform4fv(n(f),[_.width,_.height,h.targetWidth,h.targetHeight]),a.bindTexture(a.TEXTURE_2D,_.texture),a.uniform1i(n(w),o),Ue(a,h.buffer,h.vertexCount,h.enabledVerticesList)}if(h.type==="render3d"){a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.DEPTH_TEST);const _=n(t).textures[h.textureId];a.useProgram(h.animated?n(b):n(c)),a.viewport(ur,sr,R,J),a.uniformMatrix4fv(h.animated?n(O):n(l),!1,h.modelMatrix),a.uniformMatrix4fv(h.animated?n(z):n(d),!1,et),a.uniformMatrix4fv(h.animated?n(se):n(p),!1,at),a.uniform2fv(h.animated?n(le):n(s),[_.width,_.height]),a.bindTexture(a.TEXTURE_2D,_.texture),a.uniform1i(h.animated?n(ae):n(v),o),Ue(a,h.buffer,h.vertexCount)}if(h.type==="renderparticles"){a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.DEPTH_TEST);const _=n(t).textures[h.textureId];a.useProgram(n(D)),a.viewport(ur,sr,R,J),a.uniformMatrix4fv(n(q),!1,et),a.uniformMatrix4fv(n(Q),!1,at),a.uniform2fv(n(Z),[_.width,_.height]),a.bindTexture(a.TEXTURE_2D,_.texture),a.uniform1i(n(K),o),Ue(a,h.buffer,h.vertexCount)}if(h.type==="icon"||h.type==="bigicon"){const _=h.texSize;a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST),a.useProgram(n(u)),a.viewport(0,0,St,Lt),a.bindTexture(a.TEXTURE_2D,h.texture),a.uniform1i(n(w),o),a.uniform4fv(n(f),[_,_,h.targetWidth,h.targetHeight]),Ue(a,h.buffer,6)}if(h.type==="minimap2d"){!be||!Te?(be=a.createTexture(),a.bindTexture(a.TEXTURE_2D,be),a.texStorage2D(a.TEXTURE_2D,1,a.RGBA8,te,pe),Te=a.createFramebuffer(),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,Te),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,be,0)):a.bindFramebuffer(a.DRAW_FRAMEBUFFER,Te),a.viewport(0,0,te,pe),a.disable(a.DEPTH_TEST);const _=n(t).textures[h.textureId];a.useProgram(n(u)),a.uniform4fv(n(f),[_.width,_.height,te,pe]),a.bindTexture(a.TEXTURE_2D,_.texture),a.uniform1i(n(w),o),Ue(a,h.buffer,h.vertexCount,h.enabledVerticesList),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)}if(h.type==="minimap"){if(be===null)continue;a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST),a.useProgram(n(u)),a.viewport(0,0,St,Lt),a.uniform4fv(n(f),[te,pe,h.targetWidth,h.targetHeight]),a.bindTexture(a.TEXTURE_2D,be),a.uniform1i(n(w),o),Ue(a,h.buffer,6)}}},Ie=(x,a,h)=>{const _=new DataView(h),j=_.getUint32(0,!0);switch(j){case 0:{B(W,!0),ue(x,a);break}case 1:{const g=_.getUint32(4,!0),A=_.getUint32(8,!0),U=_.getUint32(12,!0),F=a.createTexture(),I=new Uint8Array(h,16,A*U*4);a.bindTexture(a.TEXTURE_2D,F),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,A,U,0,a.RGBA,a.UNSIGNED_BYTE,I),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),Xe(t,n(t).textures[g]={texture:F,width:A,height:U,data:I});break}case 2:case 3:{const g=j===3,A=g?104:40,U=g?120:56,F=_.getUint32(4,!0),I=_.getUint32(8,!0),V=new Float32Array(16);V.set(new Float32Array(h,16,16));const k=new DataView(h,80,F*A),y=new Array(F),$=new ArrayBuffer(F*U),E=new DataView($);for(let C=0;C<F;C+=1){const T=A*C,M=U*C;let L=null;g&&(L=new Float32Array(16),L.set(new Float32Array(h,80+A*C+40,16)));const ne={x:k.getInt16(T,!0),y:k.getInt16(T+2,!0),z:k.getInt16(T+4,!0),u:k.getFloat32(T+8,!0),v:k.getFloat32(T+12,!0),ax:k.getUint16(T+16,!0),ay:k.getUint16(T+18,!0),aw:k.getUint16(T+20,!0),ah:k.getUint16(T+22,!0),r:k.getFloat32(T+24,!0),g:k.getFloat32(T+28,!0),b:k.getFloat32(T+32,!0),a:k.getFloat32(T+36,!0),anim:L};if(y[C]=ne,E.setFloat32(M,ne.x,!0),E.setFloat32(M+4,ne.y,!0),E.setFloat32(M+8,ne.z,!0),E.setFloat32(M+12,0,!0),E.setFloat32(M+16,ne.u,!0),E.setFloat32(M+20,ne.v,!0),E.setFloat32(M+24,ne.ax,!0),E.setFloat32(M+28,ne.ay,!0),E.setFloat32(M+32,ne.aw,!0),E.setFloat32(M+36,ne.ah,!0),E.setFloat32(M+40,ne.r,!0),E.setFloat32(M+44,ne.g,!0),E.setFloat32(M+48,ne.b,!0),E.setFloat32(M+52,ne.a,!0),L)for(let fe=0;fe<16;fe+=1)E.setFloat32(M+56+fe*4,L[fe],!0)}const S=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,S),a.bufferData(a.ARRAY_BUFFER,E,a.STATIC_DRAW),n(t).entities.push({type:"render3d",animated:g,textureId:I,vertexCount:F,modelMatrix:V,vertices:y,buffer:{vbo:S,step:U,attribs:g?Ii:wn},enabled:!0,expanded:!1,uuid:Xt()}),P+=F,ue(x,a);break}case 4:{const U=_.getUint32(4,!0),F=_.getUint32(8,!0),I=_.getUint16(12,!0),V=_.getUint16(14,!0),k=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,k);const y=new DataView(h,16,U*40),$=new ArrayBuffer(U*60),E=new DataView($),S=new Array(U);for(let C=0;C<U;C+=1){const T=40*C,M=60*C,L={x:y.getInt16(T,!0),y:y.getInt16(T+2,!0),ax:y.getInt16(T+4,!0),ay:y.getInt16(T+6,!0),aw:y.getInt16(T+8,!0),ah:y.getInt16(T+10,!0),discard:y.getUint8(T+12),wrapx:y.getUint8(T+13),wrapy:y.getUint8(T+14),u:y.getFloat32(T+16,!0),v:y.getFloat32(T+20,!0),r:y.getFloat32(T+24,!0),g:y.getFloat32(T+28,!0),b:y.getFloat32(T+32,!0),a:y.getFloat32(T+36,!0)};S[C]=L,E.setFloat32(M,L.x,!0),E.setFloat32(M+4,L.y,!0),E.setFloat32(M+8,L.u,!0),E.setFloat32(M+12,L.v,!0),E.setFloat32(M+16,L.ax,!0),E.setFloat32(M+20,L.ay,!0),E.setFloat32(M+24,L.aw,!0),E.setFloat32(M+28,L.ah,!0),E.setFloat32(M+32,L.r,!0),E.setFloat32(M+36,L.g,!0),E.setFloat32(M+40,L.b,!0),E.setFloat32(M+44,L.a,!0),E.setFloat32(M+48,L.discard,!0),E.setFloat32(M+52,L.wrapx,!0),E.setFloat32(M+56,L.wrapy,!0)}a.bufferData(a.ARRAY_BUFFER,E,a.STATIC_DRAW),n(t).entities.push({type:"batch2d",textureId:F,vertexCount:U,vertices:S,targetWidth:I,targetHeight:V,buffer:{vbo:k,step:60,attribs:Kt},enabled:!0,expanded:!1,uuid:Xt(),enabledVerticesList:Array(Math.floor(U)).fill(!0)}),P+=U,ue(x,a);break}case 5:case 8:{const A=j===5?64:512,U=_.getInt16(4,!0),F=_.getInt16(6,!0),I=_.getInt16(8,!0),V=_.getInt16(10,!0),k=_.getUint32(12,!0),y=_.getFloat32(16,!0),$=_.getFloat32(20,!0),E=_.getFloat32(24,!0),S=_.getFloat32(28,!0),C=_.getUint16(32,!0),T=_.getUint16(34,!0),M=a.createTexture(),L=a.createFramebuffer();a.bindTexture(a.TEXTURE_2D,M),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,L),a.texStorage2D(a.TEXTURE_2D,1,a.RGBA8,A,A),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,M,0),a.enable(a.CULL_FACE),a.cullFace(a.FRONT),a.viewport(0,0,A,A),a.scissor(0,0,A,A);let ne=Array(k),fe=36;for(let Gt=0;Gt<k;Gt+=1){const Vt=_.getUint32(fe,!0);let fr=Array(Vt);const Dr=new ArrayBuffer(Vt*56),me=new DataView(Dr),Mr=new Float32Array(16);Mr.set(new Float32Array(h,fe+4,16));const Pr=new Float32Array(16);Pr.set(new Float32Array(h,fe+68,16));const $r=new Float32Array(16);$r.set(new Float32Array(h,fe+132,16)),fe+=196;for(let cr=0;cr<Vt;cr+=1){const vt={x:_.getInt16(fe,!0),y:_.getInt16(fe+2,!0),z:_.getInt16(fe+4,!0),r:_.getFloat32(fe+8,!0),g:_.getFloat32(fe+12,!0),b:_.getFloat32(fe+16,!0),a:_.getFloat32(fe+20,!0)},Ze=cr*56;me.setFloat32(Ze,vt.x,!0),me.setFloat32(Ze+4,vt.y,!0),me.setFloat32(Ze+8,vt.z,!0),me.setFloat32(Ze+24,0,!0),me.setFloat32(Ze+28,0,!0),me.setFloat32(Ze+32,A,!0),me.setFloat32(Ze+36,A,!0),me.setFloat32(Ze+40,vt.r,!0),me.setFloat32(Ze+44,vt.g,!0),me.setFloat32(Ze+48,vt.b,!0),me.setFloat32(Ze+52,vt.a,!0),fr[cr]=vt,fe+=24}ne[Gt]={vertices:fr,modelMatrix:Mr,viewMatrix:Pr,projMatrix:$r};const Cr=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Cr),a.bufferData(a.ARRAY_BUFFER,me,a.STATIC_DRAW),a.useProgram(n(c)),a.uniformMatrix4fv(n(l),!1,Mr),a.uniformMatrix4fv(n(d),!1,Pr),a.uniformMatrix4fv(n(p),!1,$r),a.uniform2fv(n(s),[1,1]),a.bindTexture(a.TEXTURE_2D,n(ke)),a.uniform1i(n(v),o),Ue(a,{vbo:Cr,attribs:wn,step:56},Vt),a.deleteBuffer(Cr)}const Ee=U,Ut=U+I,kt=F,Nt=F+V,lr=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,lr),a.bufferData(a.ARRAY_BUFFER,new Float32Array([Ee,kt,0,1,0,0,A,A,y,E,$,S,0,0,0,Ut,kt,1,1,0,0,A,A,y,E,$,S,0,0,0,Ee,Nt,0,0,0,0,A,A,y,E,$,S,0,0,0,Ut,kt,1,1,0,0,A,A,y,E,$,S,0,0,0,Ut,Nt,1,0,0,0,A,A,y,E,$,S,0,0,0,Ee,Nt,0,0,0,0,A,A,y,E,$,S,0,0,0]),a.STATIC_DRAW),n(t).entities.push({type:j===5?"icon":"bigicon",models:ne,texture:M,targetWidth:C,targetHeight:T,texSize:A,buffer:{vbo:lr,step:60,attribs:Kt},targetx:U,targety:F,targetw:I,targeth:V,enabled:!0,expanded:!1,uuid:Xt()}),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.deleteFramebuffer(L),a.disable(a.CULL_FACE);break}case 6:{const g=_.getUint32(4,!0),A=_.getUint32(8,!0);te=_.getUint16(12,!0),pe=_.getUint16(14,!0);const U=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,U);const F=new DataView(h,16,g*40),I=new ArrayBuffer(g*60),V=new DataView(I),k=new Array(g);for(let y=0;y<g;y+=1){const $=40*y,E=60*y,S={x:F.getInt16($,!0),y:F.getInt16($+2,!0),ax:F.getInt16($+4,!0),ay:F.getInt16($+6,!0),aw:F.getInt16($+8,!0),ah:F.getInt16($+10,!0),discard:F.getUint8($+12),wrapx:F.getUint8($+13),wrapy:F.getUint8($+14),u:F.getFloat32($+16,!0),v:F.getFloat32($+20,!0),r:F.getFloat32($+24,!0),g:F.getFloat32($+28,!0),b:F.getFloat32($+32,!0),a:F.getFloat32($+36,!0)};k[y]=S,V.setFloat32(E,S.x,!0),V.setFloat32(E+4,S.y,!0),V.setFloat32(E+8,S.u,!0),V.setFloat32(E+12,S.v,!0),V.setFloat32(E+16,S.ax,!0),V.setFloat32(E+20,S.ay,!0),V.setFloat32(E+24,S.aw,!0),V.setFloat32(E+28,S.ah,!0),V.setFloat32(E+32,S.r,!0),V.setFloat32(E+36,S.g,!0),V.setFloat32(E+40,S.b,!0),V.setFloat32(E+44,S.a,!0),V.setFloat32(E+48,S.discard,!0),V.setFloat32(E+52,S.wrapx,!0),V.setFloat32(E+56,S.wrapy,!0)}a.bufferData(a.ARRAY_BUFFER,V,a.STATIC_DRAW),n(t).entities.push({type:"minimap2d",textureId:A,buffer:{vbo:U,attribs:Kt,step:60},vertices:k,vertexCount:g,enabled:!0,expanded:!1,enabledVerticesList:Array(Math.floor(g)).fill(!0),uuid:Xt()}),P+=g,ue(x,a);break}case 7:{const g=_.getInt16(4,!0),A=_.getInt16(6,!0),U=_.getUint16(8,!0),F=_.getUint16(10,!0),I=_.getInt16(12,!0),V=_.getInt16(14,!0),k=_.getUint16(16,!0),y=_.getUint16(18,!0),$=_.getUint16(20,!0),E=_.getUint16(22,!0),S=I,C=I+k,T=V,M=V+y,L=g/te,ne=(g+U)/te,fe=A/pe,Ee=(A+F)/pe,Ut=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,Ut),a.bufferData(a.ARRAY_BUFFER,new Float32Array([S,T,L,Ee,g,A,U,F,1,1,1,1,0,0,0,C,T,ne,Ee,g,A,U,F,1,1,1,1,0,0,0,S,M,L,fe,g,A,U,F,1,1,1,1,0,0,0,C,T,ne,Ee,g,A,U,F,1,1,1,1,0,0,0,C,M,ne,fe,g,A,U,F,1,1,1,1,0,0,0,S,M,L,fe,g,A,U,F,1,1,1,1,0,0,0]),a.STATIC_DRAW),n(t).entities.push({type:"minimap",sourcex:g,sourcey:A,sourcew:U,sourceh:F,targetx:I,targety:V,targetw:k,targeth:y,targetWidth:$,targetHeight:E,buffer:{vbo:Ut,step:60,attribs:Kt},enabled:!0,expanded:!1,uuid:Xt()}),ue(x,a);break}case 9:{const g=_.getUint32(4,!0),A=_.getUint32(8,!0),U=64,F=72,I=new DataView(h,16,g*U),V=new Array(g),k=new ArrayBuffer(g*F),y=new DataView(k);for(let E=0;E<g;E+=1){const S=U*E,C=F*E,T={x:I.getFloat32(S,!0),y:I.getFloat32(S+4,!0),z:I.getFloat32(S+8,!0),offsetx2d:I.getFloat32(S+12,!0),offsety2d:I.getFloat32(S+16,!0),offsetx3d:I.getFloat32(S+20,!0),offsety3d:I.getFloat32(S+24,!0),offsetz3d:I.getFloat32(S+28,!0),ax:I.getUint16(S+32,!0),ay:I.getUint16(S+34,!0),aw:I.getUint16(S+36,!0),ah:I.getUint16(S+38,!0),r:I.getFloat32(S+40,!0),g:I.getFloat32(S+44,!0),b:I.getFloat32(S+48,!0),a:I.getFloat32(S+52,!0),u:I.getFloat32(S+56,!0),v:I.getFloat32(S+60,!0)};V[E]=T,y.setFloat32(C,T.x,!0),y.setFloat32(C+4,T.y,!0),y.setFloat32(C+8,T.z,!0),y.setFloat32(C+12,T.ax,!0),y.setFloat32(C+16,T.ay,!0),y.setFloat32(C+20,T.aw,!0),y.setFloat32(C+24,T.ah,!0),y.setFloat32(C+28,T.r,!0),y.setFloat32(C+32,T.g,!0),y.setFloat32(C+36,T.b,!0),y.setFloat32(C+40,T.a,!0),y.setFloat32(C+44,T.offsetx2d,!0),y.setFloat32(C+48,T.offsety2d,!0),y.setFloat32(C+52,T.offsetx3d,!0),y.setFloat32(C+56,T.offsety3d,!0),y.setFloat32(C+60,T.offsetz3d,!0),y.setFloat32(C+64,T.u,!0),y.setFloat32(C+68,T.v,!0)}const $=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,$),a.bufferData(a.ARRAY_BUFFER,y,a.STATIC_DRAW),n(t).entities.push({type:"renderparticles",textureId:A,vertexCount:g,vertices:V,buffer:{vbo:$,step:F,attribs:Bi},enabled:!0,expanded:!1,uuid:Xt()}),P+=g,ue(x,a);break}case 10:{et=new Float32Array(h,4,16),at=new Float32Array(h,68,16);break}}};window.addEventListener("message",async x=>{if(typeof x.data=="object"&&x.data.type==="pluginMessage"){if(typeof x.data.content!="object"||!n(_e)||!n(m))return;Ie(n(_e),n(m),x.data.content)}});const Be=x=>{if(!(x.buttons&1)){B(je,null);return}const a=n(t).textureViewScale/100;Xe(t,n(t).textureViewX-=x.movementX/a),Xe(t,n(t).textureViewY-=x.movementY/a),n(t).redraw()},Ge=x=>{const a=n(_e),h=n(t).textureViewScale,_=n(t).textureViewScale-Tt*Math.sign(x.deltaY);Xe(t,n(t).textureViewScale=_);const j=2*h/100,g=2*_/100,A=n(t).textureViewX+a.width/j,U=n(t).textureViewY+a.height/j;Xe(t,n(t).textureViewX=A-a.width/g),Xe(t,n(t).textureViewY=U-a.height/g),ue(a,n(m))};$a(()=>(n(_e),n(m),n(ke),n(u),n(c),n(b),n(D),n(oe)),()=>{if(n(_e)&&(Xe(_e,n(_e).width=St),Xe(_e,n(_e).height=Lt),B(m,n(_e).getContext("webgl2")),n(m))){B(he,n(m).getParameter(n(m).MAX_VERTEX_ATTRIBS)),B(ke,n(m).createTexture()),n(m).bindTexture(n(m).TEXTURE_2D,n(ke));const x=new Uint8Array([255,255,255,255]);n(m).texImage2D(n(m).TEXTURE_2D,0,n(m).RGBA,1,1,0,n(m).RGBA,n(m).UNSIGNED_BYTE,x);const a=ht(n(m),n(m).VERTEX_SHADER,yi,"2D vertex shader"),h=ht(n(m),n(m).FRAGMENT_SHADER,Ei,"2D fragment shader"),_=ht(n(m),n(m).VERTEX_SHADER,Ai,"3D vertex shader"),j=ht(n(m),n(m).VERTEX_SHADER,Fi,"3D anim vertex shader"),g=ht(n(m),n(m).FRAGMENT_SHADER,Ti,"3D fragment shader"),A=ht(n(m),n(m).VERTEX_SHADER,Ri,"particle vertex shader"),U=ht(n(m),n(m).VERTEX_SHADER,Si,"checkers vertex shader"),F=ht(n(m),n(m).FRAGMENT_SHADER,Ui,"checkers fragment shader");B(u,Zt(n(m),a,h,"2D program")),B(f,n(m).getUniformLocation(n(u),"atlas_wh_screen_wh")),B(w,n(m).getUniformLocation(n(u),"tex")),B(c,Zt(n(m),_,g,"3D program")),B(l,n(m).getUniformLocation(n(c),"modelmatrix")),B(d,n(m).getUniformLocation(n(c),"viewmatrix")),B(p,n(m).getUniformLocation(n(c),"projmatrix")),B(s,n(m).getUniformLocation(n(c),"atlas_wh")),B(v,n(m).getUniformLocation(n(c),"tex")),B(b,Zt(n(m),j,g,"3D animated program")),B(O,n(m).getUniformLocation(n(b),"modelmatrix")),B(z,n(m).getUniformLocation(n(b),"viewmatrix")),B(se,n(m).getUniformLocation(n(b),"projmatrix")),B(le,n(m).getUniformLocation(n(b),"atlas_wh")),B(ae,n(m).getUniformLocation(n(b),"tex")),B(D,Zt(n(m),A,g,"Particles program")),B(q,n(m).getUniformLocation(n(D),"viewmatrix")),B(Q,n(m).getUniformLocation(n(D),"projmatrix")),B(K,n(m).getUniformLocation(n(D),"tex")),B(Z,n(m).getUniformLocation(n(D),"atlas_wh")),B(oe,Zt(n(m),U,F,"Checkers program")),B(Ce,n(m).getUniformLocation(n(oe),"screen_wh")),n(m).deleteShader(a),n(m).deleteShader(h),n(m).deleteShader(_),n(m).deleteShader(g),n(m).deleteShader(j),n(m).deleteShader(A),n(m).deleteShader(U),n(m).deleteShader(F),n(m).activeTexture(n(m).TEXTURE0+o),n(m).enable(n(m).SCISSOR_TEST),n(m).disable(n(m).CULL_FACE),n(m).disable(n(m).DEPTH_TEST),n(m).enable(n(m).BLEND),n(m).blendEquationSeparate(n(m).FUNC_ADD,n(m).FUNC_ADD),n(m).depthFunc(n(m).LEQUAL),ue(n(_e),n(m))}}),Ca(),$t();var Re=Oo(),ye=ce(Re);ye.__mousedown=[Mo,je,Be],ye.__mouseup=[Po,je],ye.__mousemove=function(...x){var a;(a=n(je))==null||a.apply(this,x)},wi(ye,x=>B(_e,x),()=>n(_e));var He=G(ye,2);{var Ke=x=>{var a=Co(),h=ce(a),_=Pe(h);So(_,{get data(){return n(t)},set data(g){B(t,g)},$$legacy:!0});var j=G(h,2);j.__click=[$o,de],N(x,a)},ge=(x,a)=>{{var h=_=>{var j=ko();j.__click=[Lo,de],N(_,j)};ee(x,_=>{n(W)&&_(h)},a)}};ee(He,x=>{n(de)?x(Ke):x(ge,!1)})}var we=G(He,2);{var xe=x=>{var a=Vo();a.__click=[No,t,ue,_e,m],N(x,a)};ee(we,x=>{n(t).selectedTexture&&x(xe)})}It("wheel",ye,Ge),N(e,Re),Et()}jt(["mousedown","mouseup","mousemove","click"]);ai(Ho,{target:document.body});
