(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();const zr=!1;var Ir=Array.isArray,Bn=Array.prototype.indexOf,Pr=Array.from,On=Object.defineProperty,Dt=Object.getOwnPropertyDescriptor,dn=Object.getOwnPropertyDescriptors,$n=Object.prototype,Hn=Array.prototype,Mr=Object.getPrototypeOf,Yr=Object.isExtensible;function Vn(e){return e()}function Fr(e){for(var r=0;r<e.length;r++)e[r]()}const ze=2,_n=4,fr=8,Cr=16,it=32,It=64,er=128,Be=256,tr=512,Re=1024,ot=2048,wt=4096,nt=8192,lr=16384,Wn=32768,Lr=65536,vn=1<<17,Xn=1<<19,hn=1<<20,Tr=1<<21,mt=Symbol("$state"),zn=Symbol("legacy props"),Yn=Symbol("");function pn(e){return e===this.v}function jn(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function kr(e){return!jn(e,this.v)}function qn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Gn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Kn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Zn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Qn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Jn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ea(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ta(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Wt=!1,ra=!1;function na(){Wt=!0}const Nr=1,Br=2,xn=4,aa=8,ia=16,oa=1,ua=2,sa=4,fa=8,la=16,ca=1,da=2,Te=Symbol(),_a="http://www.w3.org/1999/xhtml";let ae=null;function jr(e){ae=e}function bt(e,r=!1,t){var i=ae={p:ae,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Wt&&!r&&(ae.l={s:null,u:null,r1:[],r2:Ot(!1)}),wa(()=>{i.d=!0})}function yt(e){const r=ae;if(r!==null){const c=r.e;if(c!==null){var t=Z,i=G;r.e=null;try{for(var o=0;o<c.length;o++){var u=c[o];vt(u.effect),Qe(u.reaction),$r(u.fn)}}finally{vt(t),Qe(i)}}ae=r.p,r.m=!0}return{}}function cr(){return!Wt||ae!==null&&ae.l===null}function xt(e,r){if(typeof e!="object"||e===null||mt in e)return e;const t=Mr(e);if(t!==$n&&t!==Hn)return e;var i=new Map,o=Ir(e),u=st(0),c=G,h=d=>{var s=G;Qe(c);var _;return _=d(),Qe(s),_};return o&&i.set("length",st(e.length)),new Proxy(e,{defineProperty(d,s,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Jn();var x=i.get(s);return x===void 0?(x=h(()=>st(_.value)),i.set(s,x)):M(x,h(()=>xt(_.value))),!0},deleteProperty(d,s){var _=i.get(s);if(_===void 0)s in d&&i.set(s,h(()=>st(Te)));else{if(o&&typeof s=="string"){var x=i.get("length"),f=Number(s);Number.isInteger(f)&&f<x.v&&M(x,f)}M(_,Te),qr(u)}return!0},get(d,s,_){var w;if(s===mt)return e;var x=i.get(s),f=s in d;if(x===void 0&&(!f||(w=Dt(d,s))!=null&&w.writable)&&(x=h(()=>st(xt(f?d[s]:Te))),i.set(s,x)),x!==void 0){var g=a(x);return g===Te?void 0:g}return Reflect.get(d,s,_)},getOwnPropertyDescriptor(d,s){var _=Reflect.getOwnPropertyDescriptor(d,s);if(_&&"value"in _){var x=i.get(s);x&&(_.value=a(x))}else if(_===void 0){var f=i.get(s),g=f==null?void 0:f.v;if(f!==void 0&&g!==Te)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return _},has(d,s){var g;if(s===mt)return!0;var _=i.get(s),x=_!==void 0&&_.v!==Te||Reflect.has(d,s);if(_!==void 0||Z!==null&&(!x||(g=Dt(d,s))!=null&&g.writable)){_===void 0&&(_=h(()=>st(x?xt(d[s]):Te)),i.set(s,_));var f=a(_);if(f===Te)return!1}return x},set(d,s,_,x){var K;var f=i.get(s),g=s in d;if(o&&s==="length")for(var w=_;w<f.v;w+=1){var C=i.get(w+"");C!==void 0?M(C,Te):w in d&&(C=h(()=>st(Te)),i.set(w+"",C))}f===void 0?(!g||(K=Dt(d,s))!=null&&K.writable)&&(f=h(()=>st(void 0)),M(f,h(()=>xt(_))),i.set(s,f)):(g=f.v!==Te,M(f,h(()=>xt(_))));var W=Reflect.getOwnPropertyDescriptor(d,s);if(W!=null&&W.set&&W.set.call(x,_),!g){if(o&&typeof s=="string"){var L=i.get("length"),O=Number(s);Number.isInteger(O)&&O>=L.v&&M(L,O+1)}qr(u)}return!0},ownKeys(d){a(u);var s=Reflect.ownKeys(d).filter(f=>{var g=i.get(f);return g===void 0||g.v!==Te});for(var[_,x]of i)x.v!==Te&&!(_ in d)&&s.push(_);return s},setPrototypeOf(){ea()}})}function qr(e,r=1){M(e,e.v+r)}const Bt=new Map;function Ot(e,r){var t={f:0,v:e,reactions:null,equals:pn,rv:0,wv:0};return t}function st(e,r){const t=Ot(e);return Sa(t),t}function B(e,r=!1){var i;const t=Ot(e);return r||(t.equals=kr),Wt&&ae!==null&&ae.l!==null&&((i=ae.l).s??(i.s=[])).push(t),t}function Zt(e,r){return M(e,at(()=>a(e))),r}function M(e,r,t=!1){G!==null&&!Ge&&cr()&&(G.f&(ze|Cr))!==0&&!(ye!=null&&ye.includes(e))&&ta();let i=t?xt(r):r;return $t(e,i)}function $t(e,r){if(!e.equals(r)){var t=e.v;zt?Bt.set(e,r):Bt.set(e,t),e.v=r,e.wv=Pn(),mn(e,ot),cr()&&Z!==null&&(Z.f&Re)!==0&&(Z.f&(it|It))===0&&(Ne===null?Ua([e]):Ne.push(e))}return r}function mn(e,r){var t=e.reactions;if(t!==null)for(var i=cr(),o=t.length,u=0;u<o;u++){var c=t[u],h=c.f;(h&ot)===0&&(!i&&c===Z||(Ye(c,r),(h&(Re|Be))!==0&&((h&ze)!==0?mn(c,wt):hr(c))))}}let va=!1;var Gr,gn,wn,bn;function ha(){if(Gr===void 0){Gr=window,gn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,t=Text.prototype;wn=Dt(r,"firstChild").get,bn=Dt(r,"nextSibling").get,Yr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Yr(t)&&(t.__t=void 0)}}function Or(e=""){return document.createTextNode(e)}function rr(e){return wn.call(e)}function dr(e){return bn.call(e)}function Ze(e,r){return rr(e)}function le(e,r){{var t=rr(e);return t instanceof Comment&&t.data===""?dr(t):t}}function ee(e,r=1,t=!1){let i=e;for(;r--;)i=dr(i);return i}function pa(e){e.textContent=""}function Ht(e){var r=ze|ot,t=G!==null&&(G.f&ze)!==0?G:null;return Z===null||t!==null&&(t.f&Be)!==0?r|=Be:Z.f|=hn,{ctx:ae,deps:null,effects:null,equals:pn,f:r,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??Z}}function xe(e){const r=Ht(e);return r.equals=kr,r}function yn(e){var r=e.effects;if(r!==null){e.effects=null;for(var t=0;t<r.length;t+=1)_t(r[t])}}function xa(e){for(var r=e.parent;r!==null;){if((r.f&ze)===0)return r;r=r.parent}return null}function ma(e){var r,t=Z;vt(xa(e));try{yn(e),r=Cn(e)}finally{vt(t)}return r}function En(e){var r=ma(e),t=(dt||(e.f&Be)!==0)&&e.deps!==null?wt:Re;Ye(e,t),e.equals(r)||(e.v=r,e.wv=Pn())}function An(e){Z===null&&G===null&&Kn(),G!==null&&(G.f&Be)!==0&&Z===null&&Gn(),zt&&qn()}function ga(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function Pt(e,r,t,i=!0){var o=Z,u={ctx:ae,deps:null,nodes_start:null,nodes_end:null,f:e|ot,first:null,fn:r,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(t)try{vr(u),u.f|=Wn}catch(d){throw _t(u),d}else r!==null&&hr(u);var c=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(hn|er))===0;if(!c&&i&&(o!==null&&ga(u,o),G!==null&&(G.f&ze)!==0)){var h=G;(h.effects??(h.effects=[])).push(u)}return u}function wa(e){const r=Pt(fr,null,!1);return Ye(r,Re),r.teardown=e,r}function Kr(e){An();var r=Z!==null&&(Z.f&it)!==0&&ae!==null&&!ae.m;if(r){var t=ae;(t.e??(t.e=[])).push({fn:e,effect:Z,reaction:G})}else{var i=$r(e);return i}}function ba(e){return An(),Xt(e)}function ya(e){const r=Pt(It,e,!0);return(t={})=>new Promise(i=>{t.outro?nr(r,()=>{_t(r),i(void 0)}):(_t(r),i(void 0))})}function $r(e){return Pt(_n,e,!1)}function Ea(e,r){var t=ae,i={effect:null,ran:!1};t.l.r1.push(i),i.effect=Xt(()=>{e(),!i.ran&&(i.ran=!0,M(t.l.r2,!0),at(r))})}function Aa(){var e=ae;Xt(()=>{if(a(e.l.r2)){for(var r of e.l.r1){var t=r.effect;(t.f&Re)!==0&&Ye(t,wt),Mt(t)&&vr(t),r.ran=!1}e.l.r2.v=!1}})}function Xt(e){return Pt(fr,e,!0)}function Ke(e,r=[],t=Ht){const i=r.map(t);return Hr(()=>e(...i.map(a)))}function Hr(e,r=0){return Pt(fr|Cr|r,e,!0)}function Vt(e,r=!0){return Pt(fr|it,e,!0,r)}function Fn(e){var r=e.teardown;if(r!==null){const t=zt,i=G;Zr(!0),Qe(null);try{r.call(null)}finally{Zr(t),Qe(i)}}}function Tn(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var i=t.next;(t.f&It)!==0?t.parent=null:_t(t,r),t=i}}function Fa(e){for(var r=e.first;r!==null;){var t=r.next;(r.f&it)===0&&_t(r),r=t}}function _t(e,r=!0){var t=!1;if((r||(e.f&Xn)!==0)&&e.nodes_start!==null){for(var i=e.nodes_start,o=e.nodes_end;i!==null;){var u=i===o?null:dr(i);i.remove(),i=u}t=!0}Tn(e,r&&!t),sr(e,0),Ye(e,lr);var c=e.transitions;if(c!==null)for(const d of c)d.stop();Fn(e);var h=e.parent;h!==null&&h.first!==null&&Rn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Rn(e){var r=e.parent,t=e.prev,i=e.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),r!==null&&(r.first===e&&(r.first=i),r.last===e&&(r.last=t))}function nr(e,r){var t=[];Vr(e,t,!0),Sn(t,()=>{_t(e),r&&r()})}function Sn(e,r){var t=e.length;if(t>0){var i=()=>--t||r();for(var o of e)o.out(i)}else r()}function Vr(e,r,t){if((e.f&nt)===0){if(e.f^=nt,e.transitions!==null)for(const c of e.transitions)(c.is_global||t)&&r.push(c);for(var i=e.first;i!==null;){var o=i.next,u=(i.f&Lr)!==0||(i.f&it)!==0;Vr(i,r,u?t:!1),i=o}}}function ar(e){Un(e,!0)}function Un(e,r){if((e.f&nt)!==0){e.f^=nt,(e.f&Re)===0&&(e.f^=Re),Mt(e)&&(Ye(e,ot),hr(e));for(var t=e.first;t!==null;){var i=t.next,o=(t.f&Lr)!==0||(t.f&it)!==0;Un(t,o?r:!1),t=i}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||r)&&u.in()}}let ir=[];function Ta(){var e=ir;ir=[],Fr(e)}function Dn(e){ir.length===0&&queueMicrotask(Ta),ir.push(e)}let Qt=!1,Rr=!1,or=null,gt=!1,zt=!1;function Zr(e){zt=e}let Jt=[];let G=null,Ge=!1;function Qe(e){G=e}let Z=null;function vt(e){Z=e}let ye=null;function Ra(e){ye=e}function Sa(e){G!==null&&G.f&Tr&&(ye===null?Ra([e]):ye.push(e))}let be=null,Ue=0,Ne=null;function Ua(e){Ne=e}let In=1,ur=0,dt=!1,ct=null;function Pn(){return++In}function Mt(e){var x;var r=e.f;if((r&ot)!==0)return!0;if((r&wt)!==0){var t=e.deps,i=(r&Be)!==0;if(t!==null){var o,u,c=(r&tr)!==0,h=i&&Z!==null&&!dt,d=t.length;if(c||h){var s=e,_=s.parent;for(o=0;o<d;o++)u=t[o],(c||!((x=u==null?void 0:u.reactions)!=null&&x.includes(s)))&&(u.reactions??(u.reactions=[])).push(s);c&&(s.f^=tr),h&&_!==null&&(_.f&Be)===0&&(s.f^=Be)}for(o=0;o<d;o++)if(u=t[o],Mt(u)&&En(u),u.wv>e.wv)return!0}(!i||Z!==null&&!dt)&&Ye(e,Re)}return!1}function Da(e,r){for(var t=r;t!==null;){if((t.f&er)!==0)try{t.fn(e);return}catch{t.f^=er}t=t.parent}throw Qt=!1,e}function Ia(e){return(e.f&lr)===0&&(e.parent===null||(e.parent.f&er)===0)}function _r(e,r,t,i){if(Qt){if(t===null&&(Qt=!1),Ia(r))throw e;return}t!==null&&(Qt=!0);{Da(e,r);return}}function Mn(e,r,t=!0){var i=e.reactions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];ye!=null&&ye.includes(e)||((u.f&ze)!==0?Mn(u,r,!1):r===u&&(t?Ye(u,ot):(u.f&Re)!==0&&Ye(u,wt),hr(u)))}}function Cn(e){var g;var r=be,t=Ue,i=Ne,o=G,u=dt,c=ye,h=ae,d=Ge,s=e.f;be=null,Ue=0,Ne=null,dt=(s&Be)!==0&&(Ge||!gt||G===null),G=(s&(it|It))===0?e:null,ye=null,jr(e.ctx),Ge=!1,ur++,e.f|=Tr;try{var _=(0,e.fn)(),x=e.deps;if(be!==null){var f;if(sr(e,Ue),x!==null&&Ue>0)for(x.length=Ue+be.length,f=0;f<be.length;f++)x[Ue+f]=be[f];else e.deps=x=be;if(!dt)for(f=Ue;f<x.length;f++)((g=x[f]).reactions??(g.reactions=[])).push(e)}else x!==null&&Ue<x.length&&(sr(e,Ue),x.length=Ue);if(cr()&&Ne!==null&&!Ge&&x!==null&&(e.f&(ze|wt|ot))===0)for(f=0;f<Ne.length;f++)Mn(Ne[f],e);return o!==null&&(ur++,Ne!==null&&(i===null?i=Ne:i.push(...Ne))),_}finally{be=r,Ue=t,Ne=i,G=o,dt=u,ye=c,jr(h),Ge=d,e.f^=Tr}}function Pa(e,r){let t=r.reactions;if(t!==null){var i=Bn.call(t,e);if(i!==-1){var o=t.length-1;o===0?t=r.reactions=null:(t[i]=t[o],t.pop())}}t===null&&(r.f&ze)!==0&&(be===null||!be.includes(r))&&(Ye(r,wt),(r.f&(Be|tr))===0&&(r.f^=tr),yn(r),sr(r,0))}function sr(e,r){var t=e.deps;if(t!==null)for(var i=r;i<t.length;i++)Pa(e,t[i])}function vr(e){var r=e.f;if((r&lr)===0){Ye(e,Re);var t=Z,i=ae,o=gt;Z=e,gt=!0;try{(r&Cr)!==0?Fa(e):Tn(e),Fn(e);var u=Cn(e);e.teardown=typeof u=="function"?u:null,e.wv=In;var c=e.deps,h;zr&&ra&&e.f&ot}catch(d){_r(d,e,t,i||e.ctx)}finally{gt=o,Z=t}}}function Ma(){try{Zn()}catch(e){if(or!==null)_r(e,or,null);else throw e}}function Ca(){var e=gt;try{var r=0;for(gt=!0;Jt.length>0;){r++>1e3&&Ma();var t=Jt,i=t.length;Jt=[];for(var o=0;o<i;o++){var u=ka(t[o]);La(u)}}}finally{Rr=!1,gt=e,or=null,Bt.clear()}}function La(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var i=e[t];if((i.f&(lr|nt))===0)try{Mt(i)&&(vr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Rn(i):i.fn=null))}catch(o){_r(o,i,null,i.ctx)}}}function hr(e){Rr||(Rr=!0,queueMicrotask(Ca));for(var r=or=e;r.parent!==null;){r=r.parent;var t=r.f;if((t&(It|it))!==0){if((t&Re)===0)return;r.f^=Re}}Jt.push(r)}function ka(e){for(var r=[],t=e;t!==null;){var i=t.f,o=(i&(it|It))!==0,u=o&&(i&Re)!==0;if(!u&&(i&nt)===0){if((i&_n)!==0)r.push(t);else if(o)t.f^=Re;else{var c=G;try{G=t,Mt(t)&&vr(t)}catch(s){_r(s,t,null,t.ctx)}finally{G=c}}var h=t.first;if(h!==null){t=h;continue}}var d=t.parent;for(t=t.next;t===null&&d!==null;)t=d.next,d=d.parent}return r}function a(e){var r=e.f,t=(r&ze)!==0;if(ct!==null&&ct.add(e),G!==null&&!Ge){if(!(ye!=null&&ye.includes(e))){var i=G.deps;e.rv<ur&&(e.rv=ur,be===null&&i!==null&&i[Ue]===e?Ue++:be===null?be=[e]:(!dt||!be.includes(e))&&be.push(e))}}else if(t&&e.deps===null&&e.effects===null){var o=e,u=o.parent;u!==null&&(u.f&Be)===0&&(o.f^=Be)}return t&&(o=e,Mt(o)&&En(o)),zt&&Bt.has(e)?Bt.get(e):e.v}function Na(e){var r=ct;ct=new Set;var t=ct,i;try{if(at(e),r!==null)for(i of ct)r.add(i)}finally{ct=r}return t}function rt(e){var r=Na(()=>at(e));for(var t of r)if((t.f&vn)!==0)for(const i of t.deps||[])(i.f&ze)===0&&$t(i,i.v);else $t(t,t.v)}function at(e){var r=Ge;try{return Ge=!0,e()}finally{Ge=r}}const Ba=-7169;function Ye(e,r){e.f=e.f&Ba|r}function Oa(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(mt in e)Sr(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&mt in t&&Sr(t)}}}function Sr(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Sr(e[i],r)}catch{}const t=Mr(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=dn(t);for(let o in i){const u=i[o].get;if(u)try{u.call(e)}catch{}}}}}const $a=["touchstart","touchmove"];function Ha(e){return $a.includes(e)}let Qr=!1;function Va(){Qr||(Qr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function Wa(e){var r=G,t=Z;Qe(null),vt(null);try{return e()}finally{Qe(r),vt(t)}}function Xa(e,r,t,i=t){e.addEventListener(r,()=>Wa(t));const o=e.__on_r;o?e.__on_r=()=>{o(),i(!0)}:e.__on_r=()=>i(!0),Va()}const Ln=new Set,Ur=new Set;function pr(e){for(var r=0;r<e.length;r++)Ln.add(e[r]);for(var t of Ur)t(e)}function qt(e){var O;var r=this,t=r.ownerDocument,i=e.type,o=((O=e.composedPath)==null?void 0:O.call(e))||[],u=o[0]||e.target,c=0,h=e.__root;if(h){var d=o.indexOf(h);if(d!==-1&&(r===document||r===window)){e.__root=r;return}var s=o.indexOf(r);if(s===-1)return;d<=s&&(c=d)}if(u=o[c]||e.target,u!==r){On(e,"currentTarget",{configurable:!0,get(){return u||t}});var _=G,x=Z;Qe(null),vt(null);try{for(var f,g=[];u!==null;){var w=u.assignedSlot||u.parentNode||u.host||null;try{var C=u["__"+i];if(C!=null&&(!u.disabled||e.target===u))if(Ir(C)){var[W,...L]=C;W.apply(u,[e,...L])}else C.call(u,e)}catch(K){f?g.push(K):f=K}if(e.cancelBubble||w===r||w===null)break;u=w}if(f){for(let K of g)queueMicrotask(()=>{throw K});throw f}}finally{e.__root=r,delete e.currentTarget,Qe(_),vt(x)}}}function za(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Dr(e,r){var t=Z;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function Q(e,r){var t=(r&ca)!==0,i=(r&da)!==0,o,u=!e.startsWith("<!>");return()=>{o===void 0&&(o=za(u?e:"<!>"+e),t||(o=rr(o)));var c=i||gn?document.importNode(o,!0):o.cloneNode(!0);if(t){var h=rr(c),d=c.lastChild;Dr(h,d)}else Dr(c,c);return c}}function Gt(){var e=document.createDocumentFragment(),r=document.createComment(""),t=Or();return e.append(r,t),Dr(r,t),e}function j(e,r){e!==null&&e.before(r)}function De(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function Ya(e,r){return ja(e,r)}const Tt=new Map;function ja(e,{target:r,anchor:t,props:i={},events:o,context:u,intro:c=!0}){ha();var h=new Set,d=x=>{for(var f=0;f<x.length;f++){var g=x[f];if(!h.has(g)){h.add(g);var w=Ha(g);r.addEventListener(g,qt,{passive:w});var C=Tt.get(g);C===void 0?(document.addEventListener(g,qt,{passive:w}),Tt.set(g,1)):Tt.set(g,C+1)}}};d(Pr(Ln)),Ur.add(d);var s=void 0,_=ya(()=>{var x=t??r.appendChild(Or());return Vt(()=>{if(u){bt({});var f=ae;f.c=u}o&&(i.$$events=o),s=e(x,i)||{},u&&yt()}),()=>{var w;for(var f of h){r.removeEventListener(f,qt);var g=Tt.get(f);--g===0?(document.removeEventListener(f,qt),Tt.delete(f)):Tt.set(f,g)}Ur.delete(d),x!==t&&((w=x.parentNode)==null||w.removeChild(x))}});return qa.set(s,_),s}let qa=new WeakMap;function ue(e,r,[t,i]=[0,0]){var o=e,u=null,c=null,h=Te,d=t>0?Lr:0,s=!1;const _=(f,g=!0)=>{s=!0,x(g,f)},x=(f,g)=>{h!==(h=f)&&(h?(u?ar(u):g&&(u=Vt(()=>g(o))),c&&nr(c,()=>{c=null})):(c?ar(c):g&&(c=Vt(()=>g(o,[t+1,i]))),u&&nr(u,()=>{u=null})))};Hr(()=>{s=!1,r(_),s||x(null,null)},d)}function St(e,r){return r}function Ga(e,r,t,i){for(var o=[],u=r.length,c=0;c<u;c++)Vr(r[c].e,o,!0);var h=u>0&&o.length===0&&t!==null;if(h){var d=t.parentNode;pa(d),d.append(t),i.clear(),lt(e,r[0].prev,r[u-1].next)}Sn(o,()=>{for(var s=0;s<u;s++){var _=r[s];h||(i.delete(_.k),lt(e,_.prev,_.next)),_t(_.e,!h)}})}function Ut(e,r,t,i,o,u=null){var c=e,h={flags:r,items:new Map,first:null},d=(r&xn)!==0;if(d){var s=e;c=s.appendChild(Or())}var _=null,x=!1,f=xe(()=>{var g=t();return Ir(g)?g:g==null?[]:Pr(g)});Hr(()=>{var g=a(f),w=g.length;x&&w===0||(x=w===0,Ka(g,h,c,o,r,i,t),u!==null&&(w===0?_?ar(_):_=Vt(()=>u(c)):_!==null&&nr(_,()=>{_=null})),a(f))})}function Ka(e,r,t,i,o,u,c){var H,fe,me,he;var h=(o&aa)!==0,d=(o&(Nr|Br))!==0,s=e.length,_=r.items,x=r.first,f=x,g,w=null,C,W=[],L=[],O,K,k,$;if(h)for($=0;$<s;$+=1)O=e[$],K=u(O,$),k=_.get(K),k!==void 0&&((H=k.a)==null||H.measure(),(C??(C=new Set)).add(k));for($=0;$<s;$+=1){if(O=e[$],K=u(O,$),k=_.get(K),k===void 0){var ce=f?f.e.nodes_start:t;w=Qa(ce,r,w,w===null?r.first:w.next,O,K,$,i,o,c),_.set(K,w),W=[],L=[],f=w.next;continue}if(d&&Za(k,O,$,o),(k.e.f&nt)!==0&&(ar(k.e),h&&((fe=k.a)==null||fe.unfix(),(C??(C=new Set)).delete(k))),k!==f){if(g!==void 0&&g.has(k)){if(W.length<L.length){var Ie=L[0],X;w=Ie.prev;var Ee=W[0],Ae=W[W.length-1];for(X=0;X<W.length;X+=1)Jr(W[X],Ie,t);for(X=0;X<L.length;X+=1)g.delete(L[X]);lt(r,Ee.prev,Ae.next),lt(r,w,Ee),lt(r,Ae,Ie),f=Ie,w=Ae,$-=1,W=[],L=[]}else g.delete(k),Jr(k,f,t),lt(r,k.prev,k.next),lt(r,k,w===null?r.first:w.next),lt(r,w,k),w=k;continue}for(W=[],L=[];f!==null&&f.k!==K;)(f.e.f&nt)===0&&(g??(g=new Set)).add(f),L.push(f),f=f.next;if(f===null)continue;k=f}W.push(k),w=k,f=k.next}if(f!==null||g!==void 0){for(var je=g===void 0?[]:Pr(g);f!==null;)(f.e.f&nt)===0&&je.push(f),f=f.next;var I=je.length;if(I>0){var J=(o&xn)!==0&&s===0?t:null;if(h){for($=0;$<I;$+=1)(me=je[$].a)==null||me.measure();for($=0;$<I;$+=1)(he=je[$].a)==null||he.fix()}Ga(r,je,J,_)}}h&&Dn(()=>{var Se;if(C!==void 0)for(k of C)(Se=k.a)==null||Se.apply()}),Z.first=r.first&&r.first.e,Z.last=w&&w.e}function Za(e,r,t,i){(i&Nr)!==0&&$t(e.v,r),(i&Br)!==0?$t(e.i,t):e.i=t}function Qa(e,r,t,i,o,u,c,h,d,s){var _=(d&Nr)!==0,x=(d&ia)===0,f=_?x?B(o):Ot(o):o,g=(d&Br)===0?c:Ot(c),w={i:g,v:f,k:u,a:null,e:null,prev:t,next:i};try{return w.e=Vt(()=>h(e,f,g,s),va),w.e.prev=t&&t.e,w.e.next=i&&i.e,t===null?r.first=w:(t.next=w,t.e.next=w.e),i!==null&&(i.prev=w,i.e.prev=w.e),w}finally{}}function Jr(e,r,t){for(var i=e.next?e.next.e.nodes_start:t,o=r?r.e.nodes_start:t,u=e.e.nodes_start;u!==i;){var c=dr(u);o.before(u),u=c}}function lt(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function kn(e){var r,t,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(t=kn(e[r]))&&(i&&(i+=" "),i+=t)}else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function Ja(){for(var e,r,t=0,i="",o=arguments.length;t<o;t++)(e=arguments[t])&&(r=kn(e))&&(i&&(i+=" "),i+=r);return i}function ei(e){return typeof e=="object"?Ja(e):e??""}function ti(e,r,t){var i=e==null?"":""+e;return i===""?null:i}function en(e,r,t,i,o,u){var c=e.__className;if(c!==t){var h=ti(t);h==null?e.removeAttribute("class"):e.className=h,e.__className=t}return u}const ri=Symbol("is custom element"),ni=Symbol("is html");function Lt(e,r,t,i){var o=ai(e);o[r]!==(o[r]=t)&&(r==="loading"&&(e[Yn]=t),t==null?e.removeAttribute(r):typeof t!="string"&&ii(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function ai(e){return e.__attributes??(e.__attributes={[ri]:e.nodeName.includes("-"),[ni]:e.namespaceURI===_a})}var tn=new Map;function ii(e){var r=tn.get(e.nodeName);if(r)return r;tn.set(e.nodeName,r=[]);for(var t,i=e,o=Element.prototype;o!==i;){t=dn(i);for(var u in t)t[u].set&&r.push(u);i=Mr(i)}return r}function oi(e,r,t=r){Xa(e,"change",i=>{var o=i?e.defaultChecked:e.checked;t(o)}),at(r)==null&&t(e.checked),Xt(()=>{var i=r();e.checked=!!i})}function rn(e,r){return e===r||(e==null?void 0:e[mt])===r}function ui(e={},r,t,i){return $r(()=>{var o,u;return Xt(()=>{o=u,u=[],at(()=>{e!==t(...u)&&(r(e,...u),o&&rn(t(...o),e)&&r(null,...o))})}),()=>{Dn(()=>{u&&rn(t(...u),e)&&r(null,...u)})}}),e}function Ct(e=!1){const r=ae,t=r.l.u;if(!t)return;let i=()=>Oa(r.s);if(e){let o=0,u={};const c=Ht(()=>{let h=!1;const d=r.s;for(const s in d)d[s]!==u[s]&&(u[s]=d[s],h=!0);return h&&o++,o});i=()=>a(c)}t.b.length&&ba(()=>{nn(r,i),Fr(t.b)}),Kr(()=>{const o=at(()=>t.m.map(Vn));return()=>{for(const u of o)typeof u=="function"&&u()}}),t.a.length&&Kr(()=>{nn(r,i),Fr(t.a)})}function nn(e,r){if(e.l.s)for(const t of e.l.s)a(t);r()}let Kt=!1;function si(e){var r=Kt;try{return Kt=!1,[e(),Kt]}finally{Kt=r}}function an(e){var r;return((r=e.ctx)==null?void 0:r.d)??!1}function Xe(e,r,t,i){var Ie;var o=(t&oa)!==0,u=!Wt||(t&ua)!==0,c=(t&fa)!==0,h=(t&la)!==0,d=!1,s;c?[s,d]=si(()=>e[r]):s=e[r];var _=mt in e||zn in e,x=c&&(((Ie=Dt(e,r))==null?void 0:Ie.set)??(_&&r in e&&(X=>e[r]=X)))||void 0,f=i,g=!0,w=!1,C=()=>(w=!0,g&&(g=!1,h?f=at(i):f=i),f);s===void 0&&i!==void 0&&(x&&u&&Qn(),s=C(),x&&x(s));var W;if(u)W=()=>{var X=e[r];return X===void 0?C():(g=!0,w=!1,X)};else{var L=(o?Ht:xe)(()=>e[r]);L.f|=vn,W=()=>{var X=a(L);return X!==void 0&&(f=void 0),X===void 0?f:X}}if((t&sa)===0)return W;if(x){var O=e.$$legacy;return function(X,Ee){return arguments.length>0?((!u||!Ee||O||d)&&x(Ee?W():X),X):W()}}var K=!1,k=!1,$=B(s),ce=Ht(()=>{var X=W(),Ee=a($);return K?(K=!1,k=!0,Ee):(k=!1,$.v=X)});return c&&a(ce),o||(ce.equals=kr),function(X,Ee){if(ct!==null&&(K=k,W(),a($)),arguments.length>0){const Ae=Ee?a(ce):u&&c?xt(X):X;if(!ce.equals(Ae)){if(K=!0,M($,Ae),w&&f!==void 0&&(f=Ae),an(ce))return X;at(()=>a(ce))}return X}return an(ce)?ce.v:a(ce)}}const fi="5";var cn;typeof window<"u"&&((cn=window.__svelte??(window.__svelte={})).v??(cn.v=new Set)).add(fi);na();const li=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,ci=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,di=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,_i=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,vi=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,hi=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,pi=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,xi=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,kt=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],on=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],mi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],gi=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],wi=[{count:2,offset:0}],ft=(e,r,t,i)=>{const o=e.createShader(r);if(!o)throw new Error(`failed to create shader '${i}'`);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(o);throw new Error(`compilation error in shader '${i}':
${u}`)}return o},Nt=(e,r,t,i)=>{const o=e.createProgram();if(!o)throw new Error(`failed to create program '${i}'`);if(e.attachShader(o,r),e.attachShader(o,t),e.linkProgram(o),e.detachShader(o,r),e.detachShader(o,t),!e.getProgramParameter(o,e.LINK_STATUS)){const u=e.getProgramInfoLog(o);throw new Error(`link error in program '${i}':
${u}`)}return o};function*bi(e,r){let t=0;for(;!(t>e.length);){const i=t+r;yield e.slice(t,i),t=i}}function*yi(e,r){let t=0;for(;;){const i=t+r;if(i>e.length)break;yield e.slice(t,i),t=i}}function un(e,r,t,i){const o=r*2,u=e.map(t);return u.length<o?u:bi(u,r).map(c=>[...c]).map(i).toArray()}var Ei=(e,r)=>r(!1),Ai=Q('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),Fi=(e,r)=>r(!0),Ti=Q('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),Ri=Q('<input type="checkbox">'),Si=Q("<!> <!> <label> </label> <br>",1);function tt(e,r){bt(r,!1);let t=Xe(r,"expanded",12),i=Xe(r,"id",8),o=Xe(r,"text",8),u=Xe(r,"checked",12,null),c=Xe(r,"onexpandedchange",8,null),h=Xe(r,"oncheckedchange",8,null);const d=L=>{t(L),c()&&c()()};Ct();var s=Si(),_=le(s);{var x=L=>{var O=Ai();O.__click=[Ei,d],Ke(()=>Lt(O,"id",u()===null?i():null)),j(L,O)},f=L=>{var O=Ti();O.__click=[Fi,d],Ke(()=>Lt(O,"id",u()===null?i():null)),j(L,O)};ue(_,L=>{t()?L(x):L(f,!1)})}var g=ee(_,2);{var w=L=>{var O=Ri();Lt(O,"draggable",!0),O.__change=function(...K){var k;(k=h())==null||k.apply(this,K)},Ke(()=>Lt(O,"id",i())),oi(O,u),j(L,O)};ue(g,L=>{u()!==null&&L(w)})}var C=ee(g,2),W=Ze(C);Ke(()=>{Lt(C,"for",i()),De(W,o())}),j(e,s),yt()}pr(["click","change"]);var Ui=Q('<div class="ml-4 w-full"> <br> <br> <br> <br></div>');function sn(e,r){bt(r,!1);let t=Xe(r,"image",8);Ct();var i=Ui(),o=Ze(i),u=ee(o,2),c=ee(u,2),h=ee(c,2);Ke((d,s,_,x)=>{De(o,`screen: ${t().x??""},${t().y??""}
  ${t().w??""}x${t().h??""} `),De(u,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),De(c,` rgb: ${d??""}, ${s??""}, ${_??""} `),De(h,` alpha: ${x??""} `)},[()=>t().r.toPrecision(4),()=>t().g.toPrecision(4),()=>t().b.toPrecision(4),()=>t().a.toPrecision(4)],xe),j(e,i),yt()}var Di=Q(" <br>",1),Ii=Q('<div class="ml-4 w-full"><!> <br> <br> <br> <br></div>');function fn(e,r){bt(r,!1);let t=Xe(r,"vertex",8);Ct();var i=Ii(),o=Ze(i);{var u=_=>{var x=Di(),f=le(x);Ke(()=>De(f,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `)),j(_,x)};ue(o,_=>{t().modelpoint&&_(u)})}var c=ee(o),h=ee(c,2),d=ee(h,2),s=ee(d,2);Ke((_,x,f,g,w,C)=>{De(c,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),De(h,` uv: ${_??""}, ${x??""} `),De(d,` rgb: ${f??""}, ${g??""}, ${w??""} `),De(s,` alpha: ${C??""} `)},[()=>t().u.toPrecision(4),()=>t().v.toPrecision(4),()=>t().r.toPrecision(4),()=>t().g.toPrecision(4),()=>t().b.toPrecision(4),()=>t().a.toPrecision(4)],xe),j(e,i),yt()}var Pi=Q("<div> </div>"),Mi=(e,r,t)=>{const i=r().textureId;t(t().selectedTextureId=i.toString(),!0),t(t().selectedTexture=t().textures[i],!0),t().redraw()},Ci=Q('<button class="hover:bg-gray-200"> </button> <br>',1),Li=Q("<!> <!>",1),ki=Q('<div class="ml-2"></div>'),Ni=Q("<!> <!>",1),Bi=Q("<!> <!>",1),Oi=Q("<!> <!>",1),$i=Q("<!> <!>",1),Hi=Q('<div class="ml-2"></div>'),Vi=Q("<!> <!>",1),Wi=Q("<!> <!>",1),Xi=Q("<!> <!>",1),zi=Q('<div class="ml-3 text-sm"><!> <!> <!> <!></div>');function Yi(e,r){bt(r,!1);let t=Xe(r,"entity",12),i=Xe(r,"menuData",12);const o=6,u=100;let c=B(!1),h=B(!1);function d(I){return"images"in I}function s(I){return"vertices"in I}const _=(I,J)=>{const H=I[0];let fe=H.x,me=H.x,he=H.y,Se=H.y;for(const re of I)re.x<fe&&(fe=re.x),re.x>me&&(me=re.x),re.y<he&&(he=re.y),re.y>Se&&(Se=re.y);return{x:fe,y:he,w:me-fe,h:Se-he,ax:H.ax,ay:H.ay,aw:H.aw,ah:H.ah,r:H.r,g:H.g,b:H.b,a:H.a,expanded:!1,index:J}},x=(I,J)=>{const H=J*u,fe=H*o;return{images:I,desc:`${H}-${H+I.length-1}`,expanded:!1,vertexRangeStart:fe,vertexRangeEnd:fe+I.length*o}},f=(I,J)=>({modelpoint:{...I},expanded:!1,index:J,...I}),g=(I,J)=>({modelpoint:null,expanded:!1,index:J,...I}),w=(I,J)=>{const H=J*u;return{vertices:I,desc:`${H}-${H+I.length-1}`,expanded:!1}};let C=B(null),W=B(0),L=B(null),O=B(0);if(t().type==="batch2d"||t().type==="minimap2d"){const I=[...yi(t().vertices,o)];M(W,I.length),M(C,un(I,u,_,x))}else if(t().vertices){const I=t().type!=="renderparticles"?f:g;M(O,t().vertices.length),M(L,un(t().vertices,u,I,w))}Ct();var K=zi(),k=Ze(K);{var $=I=>{var J=Pi(),H=Ze(J);Ke(()=>De(H,`animated: ${t().animated??""}`)),j(I,J)};ue(k,I=>{typeof t().animated=="boolean"&&I($)})}var ce=ee(k,2);{var Ie=I=>{var J=Ci(),H=le(J);H.__click=[Mi,t,i];var fe=Ze(H);Ke(()=>De(fe,`texture: #${t().textureId??""}`)),j(I,J)};ue(ce,I=>{typeof t().textureId=="number"&&I(Ie)})}var X=ee(ce,2);{var Ee=I=>{var J=Oi(),H=le(J);const fe=xe(()=>`${t().uuid}-images2d`),me=xe(()=>`2D images (${a(W)})`);tt(H,{get id(){return a(fe)},get text(){return a(me)},get expanded(){return a(c)},set expanded(re){M(c,re)},$$legacy:!0});var he=ee(H,2);{var Se=re=>{var Je=Gt(),ht=le(Je);Ut(ht,1,()=>a(C),St,(et,V,Pe)=>{var Me=Gt(),qe=le(Me);{var Oe=pe=>{var ge=Ni(),we=le(ge),ne=()=>a(V).images.every(se=>t().enabledVerticesList[se.index*o]),p=se=>{for(let Fe=a(V).vertexRangeStart;Fe<a(V).vertexRangeEnd;Fe+=1)t(t().enabledVerticesList[Fe]=se,!0)};const de=xe(()=>`${t().uuid}-images-${a(V).desc}`),ie=xe(()=>`[Images ${a(V).desc}]`);tt(we,{get checked(){return ne()},set checked(se){p(se)},get oncheckedchange(){return i().redraw},get id(){return a(de)},get text(){return a(ie)},get expanded(){return a(V).expanded},set expanded(se){a(V).expanded=se,rt(()=>a(C))},$$legacy:!0});var He=ee(we,2);{var _e=se=>{var Fe=ki();Ut(Fe,5,()=>a(V).images,St,(Et,Ve,pt)=>{var At=Li(),m=le(At),n=()=>t().enabledVerticesList[a(Ve).index*o],l=b=>{for(let D=0;D<o;D+=1)t(t().enabledVerticesList[a(Ve).index*o+D]=b,!0)};const v=xe(()=>`${t().uuid}-images-${a(V).desc}-${pt}`);tt(m,{get checked(){return n()},set checked(b){l(b)},get oncheckedchange(){return i().redraw},get id(){return a(v)},text:`Image ${Pe*u+pt}`,get expanded(){return a(Ve).expanded},set expanded(b){a(Ve).expanded=b,rt(()=>(a(C),a(V).images))},$$legacy:!0});var q=ee(m,2);{var y=b=>{sn(b,{get image(){return a(Ve)}})};ue(q,b=>{a(Ve).expanded&&b(y)})}j(Et,At)}),j(se,Fe)};ue(He,se=>{a(V).expanded&&se(_e)})}j(pe,ge)},$e=pe=>{var ge=Bi(),we=le(ge),ne=()=>t().enabledVerticesList[a(V).index*o],p=_e=>{for(let se=0;se<o;se+=1)t(t().enabledVerticesList[a(V).index*o+se]=_e,!0)};const de=xe(()=>`${t().uuid}-images-${Pe}`);tt(we,{get checked(){return ne()},set checked(_e){p(_e)},get oncheckedchange(){return i().redraw},get id(){return a(de)},text:`Image ${Pe}`,get expanded(){return a(V).expanded},set expanded(_e){a(V).expanded=_e,rt(()=>a(C))},$$legacy:!0});var ie=ee(we,2);{var He=_e=>{sn(_e,{get image(){return a(V)}})};ue(ie,_e=>{a(V).expanded&&_e(He)})}j(pe,ge)};ue(qe,pe=>{d(a(V))?pe(Oe):pe($e,!1)})}j(et,Me)}),j(re,Je)};ue(he,re=>{a(c)&&re(Se)})}j(I,J)};ue(X,I=>{a(C)&&a(W)&&I(Ee)})}var Ae=ee(X,2);{var je=I=>{var J=Xi(),H=le(J);const fe=xe(()=>`${t().uuid}-vertices3d`),me=xe(()=>`3D vertices (${a(O)})`);tt(H,{get id(){return a(fe)},get text(){return a(me)},get expanded(){return a(h)},set expanded(re){M(h,re)},$$legacy:!0});var he=ee(H,2);{var Se=re=>{var Je=Gt(),ht=le(Je);Ut(ht,1,()=>a(L),St,(et,V,Pe)=>{var Me=Gt(),qe=le(Me);{var Oe=pe=>{var ge=Vi(),we=le(ge);const ne=xe(()=>`${t().uuid}-vertices-${a(V).desc}`),p=xe(()=>`[Vertices ${a(V).desc}]`);tt(we,{get id(){return a(ne)},get text(){return a(p)},get expanded(){return a(V).expanded},set expanded(He){a(V).expanded=He,rt(()=>a(L))},$$legacy:!0});var de=ee(we,2);{var ie=He=>{var _e=Hi();Ut(_e,5,()=>a(V).vertices,St,(se,Fe,Et)=>{var Ve=$i(),pt=le(Ve);const At=xe(()=>`${t().uuid}-vertices-${a(V).desc}-${Et}`);tt(pt,{get id(){return a(At)},text:`Vertex ${Pe*u+Et}`,get expanded(){return a(Fe).expanded},set expanded(l){a(Fe).expanded=l,rt(()=>(a(L),a(V).vertices))},$$legacy:!0});var m=ee(pt,2);{var n=l=>{fn(l,{get vertex(){return a(Fe)}})};ue(m,l=>{a(Fe).expanded&&l(n)})}j(se,Ve)}),j(He,_e)};ue(de,He=>{a(V).expanded&&He(ie)})}j(pe,ge)},$e=pe=>{var ge=Wi(),we=le(ge);const ne=xe(()=>`${t().uuid}-vertices-${Pe}`);tt(we,{get id(){return a(ne)},text:`Vertex ${Pe}`,get expanded(){return a(V).expanded},set expanded(ie){a(V).expanded=ie,rt(()=>a(L))},$$legacy:!0});var p=ee(we,2);{var de=ie=>{fn(ie,{get vertex(){return a(V)}})};ue(p,ie=>{a(V).expanded&&ie(de)})}j(pe,ge)};ue(qe,pe=>{s(a(V))?pe(Oe):pe($e,!1)})}j(et,Me)}),j(re,Je)};ue(he,re=>{a(h)&&re(Se)})}j(I,J)};ue(Ae,I=>{a(L)&&a(O)&&I(je)})}j(e,K),yt()}pr(["click"]);var ji=(e,r,t,i)=>r(t(),i()),qi=Q('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),Gi=Q("<div><!> <!></div>"),Ki=Q('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function Zi(e,r){bt(r,!1);let t=Xe(r,"data",12);const i=(h,d)=>{t().selectedTexture===d?t(t().selectedTexture=null,!0):(t(t().selectedTextureId=h,!0),t(t().selectedTexture=d,!0)),t().redraw()};Ct();var o=Ki(),u=ee(le(o),2);Ut(u,1,()=>Object.entries(t().textures),St,(h,d)=>{let s=()=>a(d)[0],_=()=>a(d)[1];var x=qi(),f=Ze(x);f.__click=[ji,i,s,_];var g=Ze(f);Ke(()=>{en(f,1,ei(t().selectedTexture===_()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),De(g,`#${s()??""}`)}),j(h,x)});var c=ee(u,6);Ut(c,1,()=>t().entities,St,(h,d,s)=>{var _=Gi();en(_,1,`select-none m-0 border-none w-full ${s&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var x=Ze(_);tt(x,{id:`menu${s}`,get text(){return t().entities[s].type},get oncheckedchange(){return t().redraw},get expanded(){return t().entities[s].expanded},set expanded(w){t().entities[s].expanded=w,rt(()=>t().entities)},get checked(){return t().entities[s].enabled},set checked(w){t().entities[s].enabled=w,rt(()=>t().entities)},$$legacy:!0});var f=ee(x,2);{var g=w=>{Yi(w,{get entity(){return t().entities[s]},set entity(C){t().entities[s]=C,rt(()=>t().entities)},get menuData(){return t()},set menuData(C){t(C)},$$legacy:!0})};ue(f,w=>{t().entities[s].expanded&&w(g)})}j(h,_)}),j(e,o),yt()}pr(["click"]);const ve=[];for(let e=0;e<256;++e)ve.push((e+256).toString(16).slice(1));function Qi(e,r=0){return(ve[e[r+0]]+ve[e[r+1]]+ve[e[r+2]]+ve[e[r+3]]+"-"+ve[e[r+4]]+ve[e[r+5]]+"-"+ve[e[r+6]]+ve[e[r+7]]+"-"+ve[e[r+8]]+ve[e[r+9]]+"-"+ve[e[r+10]]+ve[e[r+11]]+ve[e[r+12]]+ve[e[r+13]]+ve[e[r+14]]+ve[e[r+15]]).toLowerCase()}let Ar;const Ji=new Uint8Array(16);function eo(){if(!Ar){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ar=crypto.getRandomValues.bind(crypto)}return Ar(Ji)}const to=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ln={randomUUID:to};function Rt(e,r,t){var o;if(ln.randomUUID&&!e)return ln.randomUUID();e=e||{};const i=e.random??((o=e.rng)==null?void 0:o.call(e))??eo();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Qi(i)}var ro=(e,r)=>M(r,!1),no=Q('<div class="overflow-auto absolute w-56 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),ao=(e,r)=>M(r,!0),io=Q('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),oo=(e,r,t,i,o)=>{Zt(r,a(r).selectedTexture=null),t(a(i),a(o))},uo=Q('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),so=Q('<canvas class="absolute right-0"></canvas> <!> <!>',1);function fo(e,r){bt(r,!1);let t=B({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",redraw:()=>ie(a(ne),a(p))});const i=m=>{const n=J.get(m);return n?parseInt(n):0},o=(m,n,l,v,q)=>new Float32Array([l/(m*q),0,0,0,0,l/(n*q),0,0,0,0,(v+l)/(v-l),1,0,0,-2*v*l/(v-l),0]),u=0;let c=B(null),h=B(null),d=B(null),s=B(null),_=B(null),x=B(null),f=B(null),g=B(null),w=B(null),C=B(null),W=B(null),L=B(null),O=B(null),K=B(null),k=B(null),$=B(null),ce=B(null),Ie=B(null),X=B(null),Ee=B(null),Ae=B(null),je=B(null),I=null;const J=new URLSearchParams(window.location.search),H=J.get("n"),fe=H?Math.max(parseInt(H),1):1,me=i("w"),he=i("h"),Se=i("gx"),re=i("gy"),Je=i("gw"),ht=i("gh");let et=0,V=B(0),Pe=B(),Me=null,qe=null,Oe=0,$e=0,pe=o(Je,ht,460,66560,5/16),ge=B(!1),we=B(!1),ne=B(null),p=B(null);const de=(m,n,l,v)=>{m.bindBuffer(m.ARRAY_BUFFER,n.vbo);for(let y=0;y<a(V);y+=1){const b=n.attribs[y];if(!b){m.disableVertexAttribArray(y);continue}m.enableVertexAttribArray(y),m.vertexAttribPointer(y,b.count,m.FLOAT,!1,n.step,b.offset)}if(!v){m.drawArrays(m.TRIANGLES,0,l);return}let q=null;for(let y=0;y<l;y+=1){const b=v[y];q===null?b&&(q=y):b||(m.drawArrays(m.TRIANGLES,q,y-q),q=null)}q!==null&&m.drawArrays(m.TRIANGLES,q,l-q)},ie=(m,n)=>{if(n.viewport(0,0,m.width,m.height),n.scissor(0,0,m.width,m.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),!a(ge)){n.viewport(0,0,m.width,m.height);const l=()=>{n.clearColor(.525,.968,.495,1),n.clear(n.COLOR_BUFFER_BIT)},v=()=>{n.clearColor(.2,.2,.2,1),n.clear(n.COLOR_BUFFER_BIT)},q=Math.min(et/fe,1),y=Math.floor(m.width*.65)&-2,b=70,D=8,E=D*2,te=y*q;if(l(),m.width<=E||m.height<=E)return;n.scissor(D,D,m.width-E,m.height-E),v(),n.scissor(m.width/2-(y/2+D),m.height/2-(b/2+D),y+E,b+E),l(),n.scissor(m.width/2-y/2+te,m.height/2-b/2,y-te,b),v();return}if(a(t).selectedTexture){if(n.useProgram(a(Ae)),n.viewport(0,0,m.width,m.height),n.uniform2fv(a(je),[m.width,m.height]),!I){const U=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,U),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),n.STATIC_DRAW),I={vbo:U,step:8,attribs:wi}}de(n,I,6);const l=a(t).selectedTexture,v=m.width/m.height,q=l.width/l.height,y=v>=q,b=y?l.width*m.height/l.height:m.width,D=y?m.height:l.height*m.width/l.width,E=y?(m.width-m.height)/2:0,te=b+E,T=y?0:(m.height-m.width)/2,oe=D+T;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(a(c)),n.uniform4fv(a(h),[l.width,l.height,m.width,m.height]),n.bindTexture(n.TEXTURE_2D,l.texture),n.uniform1i(a(d),u);const R=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,R),n.bufferData(n.ARRAY_BUFFER,new Float32Array([E,T,0,0,0,0,l.width,l.height,1,1,1,1,0,0,0,te,T,1,0,0,0,l.width,l.height,1,1,1,1,0,0,0,E,oe,0,1,0,0,l.width,l.height,1,1,1,1,0,0,0,te,T,1,0,0,0,l.width,l.height,1,1,1,1,0,0,0,te,oe,1,1,0,0,l.width,l.height,1,1,1,1,0,0,0,E,oe,0,1,0,0,l.width,l.height,1,1,1,1,0,0,0]),n.STATIC_DRAW),de(n,{vbo:R,step:60,attribs:kt},6),n.deleteBuffer(R);return}qe&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,qe),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)),n.disable(n.SCISSOR_TEST);for(let l of a(t).entities)if(l.enabled){if(l.type==="batch2d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST);const v=a(t).textures[l.textureId];n.useProgram(a(c)),n.viewport(0,0,me,he),n.uniform4fv(a(h),[v.width,v.height,l.targetWidth,l.targetHeight]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(a(d),u),de(n,l.buffer,l.vertexCount,l.enabledVerticesList)}if(l.type==="render3d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const v=a(t).textures[l.textureId];n.useProgram(l.animated?a(C):a(s)),n.viewport(Se,re,Je,ht),n.uniformMatrix4fv(l.animated?a(W):a(_),!1,l.modelMatrix),n.uniformMatrix4fv(l.animated?a(L):a(x),!1,l.viewMatrix),n.uniformMatrix4fv(l.animated?a(O):a(f),!1,pe),n.uniform2fv(l.animated?a(K):a(g),[v.width,v.height]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(l.animated?a(k):a(w),u),de(n,l.buffer,l.vertexCount)}if(l.type==="renderparticles"){n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const v=a(t).textures[l.textureId];n.useProgram(a($)),n.viewport(Se,re,Je,ht),n.uniformMatrix4fv(a(ce),!1,l.viewMatrix),n.uniformMatrix4fv(a(Ie),!1,pe),n.uniform2fv(a(Ee),[v.width,v.height]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(a(X),u),de(n,l.buffer,l.vertexCount)}if(l.type==="icon"||l.type==="bigicon"){const v=l.texSize;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(a(c)),n.viewport(0,0,me,he),n.bindTexture(n.TEXTURE_2D,l.texture),n.uniform1i(a(d),u),n.uniform4fv(a(h),[v,v,l.targetWidth,l.targetHeight]),de(n,l.buffer,6)}if(l.type==="minimap2d"){!Me||!qe?(Me=n.createTexture(),n.bindTexture(n.TEXTURE_2D,Me),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,Oe,$e),qe=n.createFramebuffer(),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,qe),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Me,0)):n.bindFramebuffer(n.DRAW_FRAMEBUFFER,qe),n.viewport(0,0,Oe,$e),n.disable(n.DEPTH_TEST);const v=a(t).textures[l.textureId];n.useProgram(a(c)),n.uniform4fv(a(h),[v.width,v.height,Oe,$e]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(a(d),u),de(n,l.buffer,l.vertexCount,l.enabledVerticesList),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)}if(l.type==="minimap"){if(Me===null)continue;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(a(c)),n.viewport(0,0,me,he),n.uniform4fv(a(h),[Oe,$e,l.targetWidth,l.targetHeight]),n.bindTexture(n.TEXTURE_2D,Me),n.uniform1i(a(d),u),de(n,l.buffer,6)}}},He=(m,n,l)=>{const v=new DataView(l),q=v.getUint32(0,!0);switch(q){case 0:{M(ge,!0),ie(m,n);break}case 1:{const y=v.getUint32(4,!0),b=v.getUint32(8,!0),D=v.getUint32(12,!0),E=n.createTexture(),te=new Uint8Array(l,16,b*D*4);n.bindTexture(n.TEXTURE_2D,E),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,b,D,0,n.RGBA,n.UNSIGNED_BYTE,te),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),Zt(t,a(t).textures[y]={texture:E,width:b,height:D,data:te});break}case 2:case 3:{const y=q===3,b=y?104:40,D=y?120:56,E=v.getUint32(4,!0),te=v.getUint32(8,!0),T=new Float32Array(16);T.set(new Float32Array(l,16,16));const oe=new Float32Array(16);oe.set(new Float32Array(l,80,16));const R=new DataView(l,144,E*b),S=new Array(E),U=new ArrayBuffer(E*D),F=new DataView(U);for(let P=0;P<E;P+=1){const A=b*P,N=D*P;let Ce=null;y&&(Ce=new Float32Array(16),Ce.set(new Float32Array(l,144+b*P+40,16)));const Y={x:R.getInt16(A,!0),y:R.getInt16(A+2,!0),z:R.getInt16(A+4,!0),u:R.getFloat32(A+8,!0),v:R.getFloat32(A+12,!0),ax:R.getUint16(A+16,!0),ay:R.getUint16(A+18,!0),aw:R.getUint16(A+20,!0),ah:R.getUint16(A+22,!0),r:R.getFloat32(A+24,!0),g:R.getFloat32(A+28,!0),b:R.getFloat32(A+32,!0),a:R.getFloat32(A+36,!0),anim:Ce};if(S[P]=Y,F.setFloat32(N,Y.x,!0),F.setFloat32(N+4,Y.y,!0),F.setFloat32(N+8,Y.z,!0),F.setFloat32(N+12,0,!0),F.setFloat32(N+16,Y.u,!0),F.setFloat32(N+20,Y.v,!0),F.setFloat32(N+24,Y.ax,!0),F.setFloat32(N+28,Y.ay,!0),F.setFloat32(N+32,Y.aw,!0),F.setFloat32(N+36,Y.ah,!0),F.setFloat32(N+40,Y.r,!0),F.setFloat32(N+44,Y.g,!0),F.setFloat32(N+48,Y.b,!0),F.setFloat32(N+52,Y.a,!0),Ce)for(let Le=0;Le<16;Le+=1)F.setFloat32(N+56+Le*4,Ce[Le],!0)}const z=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,z),n.bufferData(n.ARRAY_BUFFER,F,n.STATIC_DRAW),a(t).entities.push({type:"render3d",animated:y,textureId:te,vertexCount:E,modelMatrix:T,viewMatrix:oe,vertices:S,buffer:{vbo:z,step:D,attribs:y?mi:on},enabled:!0,expanded:!1,uuid:Rt()}),et+=E,ie(m,n);break}case 4:{const D=v.getUint32(4,!0),E=v.getUint32(8,!0),te=v.getUint16(12,!0),T=v.getUint16(14,!0),oe=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,oe);const R=new DataView(l,16,D*40),S=new ArrayBuffer(D*60),U=new DataView(S),F=new Array(D);for(let z=0;z<D;z+=1){const P=40*z,A=60*z,N={x:R.getInt16(P,!0),y:R.getInt16(P+2,!0),ax:R.getInt16(P+4,!0),ay:R.getInt16(P+6,!0),aw:R.getInt16(P+8,!0),ah:R.getInt16(P+10,!0),discard:R.getUint8(P+12),wrapx:R.getUint8(P+13),wrapy:R.getUint8(P+14),u:R.getFloat32(P+16,!0),v:R.getFloat32(P+20,!0),r:R.getFloat32(P+24,!0),g:R.getFloat32(P+28,!0),b:R.getFloat32(P+32,!0),a:R.getFloat32(P+36,!0)};F[z]=N,U.setFloat32(A,N.x,!0),U.setFloat32(A+4,N.y,!0),U.setFloat32(A+8,N.u,!0),U.setFloat32(A+12,N.v,!0),U.setFloat32(A+16,N.ax,!0),U.setFloat32(A+20,N.ay,!0),U.setFloat32(A+24,N.aw,!0),U.setFloat32(A+28,N.ah,!0),U.setFloat32(A+32,N.r,!0),U.setFloat32(A+36,N.g,!0),U.setFloat32(A+40,N.b,!0),U.setFloat32(A+44,N.a,!0),U.setFloat32(A+48,N.discard,!0),U.setFloat32(A+52,N.wrapx,!0),U.setFloat32(A+56,N.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,U,n.STATIC_DRAW),a(t).entities.push({type:"batch2d",textureId:E,vertexCount:D,vertices:F,targetWidth:te,targetHeight:T,buffer:{vbo:oe,step:60,attribs:kt},enabled:!0,expanded:!1,uuid:Rt(),enabledVerticesList:Array(Math.floor(D)).fill(!0)}),et+=D,ie(m,n);break}case 5:case 8:{const b=q===5?64:512,D=v.getInt16(4,!0),E=v.getInt16(6,!0),te=v.getInt16(8,!0),T=v.getInt16(10,!0),oe=v.getUint32(12,!0),R=v.getFloat32(16,!0),S=v.getFloat32(20,!0),U=v.getFloat32(24,!0),F=v.getFloat32(28,!0),z=v.getUint16(32,!0),P=v.getUint16(34,!0),A=n.createTexture(),N=n.createFramebuffer();n.bindTexture(n.TEXTURE_2D,A),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,N),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,b,b),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,A,0),n.enable(n.CULL_FACE),n.cullFace(n.FRONT),n.viewport(0,0,b,b),n.scissor(0,0,b,b);let Ce=Array(oe),Y=36;for(let gr=0;gr<oe;gr+=1){const Yt=v.getUint32(Y,!0);let Xr=Array(Yt);const Nn=new ArrayBuffer(Yt*56),ke=new DataView(Nn),wr=new Float32Array(16);wr.set(new Float32Array(l,Y+4,16));const br=new Float32Array(16);br.set(new Float32Array(l,Y+68,16));const yr=new Float32Array(16);yr.set(new Float32Array(l,Y+132,16)),Y+=196;for(let jt=0;jt<Yt;jt+=1){const ut={x:v.getInt16(Y,!0),y:v.getInt16(Y+2,!0),z:v.getInt16(Y+4,!0),r:v.getFloat32(Y+8,!0),g:v.getFloat32(Y+12,!0),b:v.getFloat32(Y+16,!0),a:v.getFloat32(Y+20,!0)},We=jt*56;ke.setFloat32(We,ut.x,!0),ke.setFloat32(We+4,ut.y,!0),ke.setFloat32(We+8,ut.z,!0),ke.setFloat32(We+24,0,!0),ke.setFloat32(We+28,0,!0),ke.setFloat32(We+32,b,!0),ke.setFloat32(We+36,b,!0),ke.setFloat32(We+40,ut.r,!0),ke.setFloat32(We+44,ut.g,!0),ke.setFloat32(We+48,ut.b,!0),ke.setFloat32(We+52,ut.a,!0),Xr[jt]=ut,Y+=24}Ce[gr]={vertices:Xr,modelMatrix:wr,viewMatrix:br,projMatrix:yr};const Er=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Er),n.bufferData(n.ARRAY_BUFFER,ke,n.STATIC_DRAW),n.useProgram(a(s)),n.uniformMatrix4fv(a(_),!1,wr),n.uniformMatrix4fv(a(x),!1,br),n.uniformMatrix4fv(a(f),!1,yr),n.uniform2fv(a(g),[1,1]),n.bindTexture(n.TEXTURE_2D,a(Pe)),n.uniform1i(a(w),u),de(n,{vbo:Er,attribs:on,step:56},Yt),n.deleteBuffer(Er)}const Le=D,Ft=D+te,xr=E,mr=E+T,Wr=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Wr),n.bufferData(n.ARRAY_BUFFER,new Float32Array([Le,xr,0,1,0,0,b,b,R,U,S,F,0,0,0,Ft,xr,1,1,0,0,b,b,R,U,S,F,0,0,0,Le,mr,0,0,0,0,b,b,R,U,S,F,0,0,0,Ft,xr,1,1,0,0,b,b,R,U,S,F,0,0,0,Ft,mr,1,0,0,0,b,b,R,U,S,F,0,0,0,Le,mr,0,0,0,0,b,b,R,U,S,F,0,0,0]),n.STATIC_DRAW),a(t).entities.push({type:q===5?"icon":"bigicon",models:Ce,texture:A,targetWidth:z,targetHeight:P,texSize:b,buffer:{vbo:Wr,step:60,attribs:kt},enabled:!0,expanded:!1,uuid:Rt()}),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.deleteFramebuffer(N),n.disable(n.CULL_FACE);break}case 6:{const y=v.getUint32(4,!0),b=v.getUint32(8,!0);Oe=v.getUint16(12,!0),$e=v.getUint16(14,!0);const D=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,D);const E=new DataView(l,16,y*40),te=new ArrayBuffer(y*60),T=new DataView(te),oe=new Array(y);for(let R=0;R<y;R+=1){const S=40*R,U=60*R,F={x:E.getInt16(S,!0),y:E.getInt16(S+2,!0),ax:E.getInt16(S+4,!0),ay:E.getInt16(S+6,!0),aw:E.getInt16(S+8,!0),ah:E.getInt16(S+10,!0),discard:E.getUint8(S+12),wrapx:E.getUint8(S+13),wrapy:E.getUint8(S+14),u:E.getFloat32(S+16,!0),v:E.getFloat32(S+20,!0),r:E.getFloat32(S+24,!0),g:E.getFloat32(S+28,!0),b:E.getFloat32(S+32,!0),a:E.getFloat32(S+36,!0)};oe[R]=F,T.setFloat32(U,F.x,!0),T.setFloat32(U+4,F.y,!0),T.setFloat32(U+8,F.u,!0),T.setFloat32(U+12,F.v,!0),T.setFloat32(U+16,F.ax,!0),T.setFloat32(U+20,F.ay,!0),T.setFloat32(U+24,F.aw,!0),T.setFloat32(U+28,F.ah,!0),T.setFloat32(U+32,F.r,!0),T.setFloat32(U+36,F.g,!0),T.setFloat32(U+40,F.b,!0),T.setFloat32(U+44,F.a,!0),T.setFloat32(U+48,F.discard,!0),T.setFloat32(U+52,F.wrapx,!0),T.setFloat32(U+56,F.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,T,n.STATIC_DRAW),a(t).entities.push({type:"minimap2d",textureId:b,buffer:{vbo:D,attribs:kt,step:60},vertices:oe,vertexCount:y,enabled:!0,expanded:!1,enabledVerticesList:Array(Math.floor(y)).fill(!0),uuid:Rt()}),et+=y,ie(m,n);break}case 7:{const y=v.getInt16(4,!0),b=v.getInt16(6,!0),D=v.getUint16(8,!0),E=v.getUint16(10,!0),te=v.getInt16(12,!0),T=v.getInt16(14,!0),oe=v.getUint16(16,!0),R=v.getUint16(18,!0),S=v.getUint16(20,!0),U=v.getUint16(22,!0),F=te,z=te+oe,P=T,A=T+R,N=y/Oe,Ce=(y+D)/Oe,Y=b/$e,Le=(b+E)/$e,Ft=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Ft),n.bufferData(n.ARRAY_BUFFER,new Float32Array([F,P,N,Le,y,b,D,E,1,1,1,1,0,0,0,z,P,Ce,Le,y,b,D,E,1,1,1,1,0,0,0,F,A,N,Y,y,b,D,E,1,1,1,1,0,0,0,z,P,Ce,Le,y,b,D,E,1,1,1,1,0,0,0,z,A,Ce,Y,y,b,D,E,1,1,1,1,0,0,0,F,A,N,Y,y,b,D,E,1,1,1,1,0,0,0]),n.STATIC_DRAW),a(t).entities.push({type:"minimap",sourcex:y,sourcey:b,sourcew:D,sourceh:E,targetx:te,targety:T,targetw:oe,targeth:R,targetWidth:S,targetHeight:U,buffer:{vbo:Ft,step:60,attribs:kt},enabled:!0,expanded:!1,uuid:Rt()}),ie(m,n);break}case 9:{const y=v.getUint32(4,!0),b=v.getUint32(8,!0),D=64,E=72,te=new Float32Array(16);te.set(new Float32Array(l,16,16));const T=new DataView(l,80,y*D),oe=new Array(y),R=new ArrayBuffer(y*E),S=new DataView(R);for(let F=0;F<y;F+=1){const z=D*F,P=E*F,A={x:T.getFloat32(z,!0),y:T.getFloat32(z+4,!0),z:T.getFloat32(z+8,!0),offsetx2d:T.getFloat32(z+12,!0),offsety2d:T.getFloat32(z+16,!0),offsetx3d:T.getFloat32(z+20,!0),offsety3d:T.getFloat32(z+24,!0),offsetz3d:T.getFloat32(z+28,!0),ax:T.getUint16(z+32,!0),ay:T.getUint16(z+34,!0),aw:T.getUint16(z+36,!0),ah:T.getUint16(z+38,!0),r:T.getFloat32(z+40,!0),g:T.getFloat32(z+44,!0),b:T.getFloat32(z+48,!0),a:T.getFloat32(z+52,!0),u:T.getFloat32(z+56,!0),v:T.getFloat32(z+60,!0)};oe[F]=A,S.setFloat32(P,A.x,!0),S.setFloat32(P+4,A.y,!0),S.setFloat32(P+8,A.z,!0),S.setFloat32(P+12,A.ax,!0),S.setFloat32(P+16,A.ay,!0),S.setFloat32(P+20,A.aw,!0),S.setFloat32(P+24,A.ah,!0),S.setFloat32(P+28,A.r,!0),S.setFloat32(P+32,A.g,!0),S.setFloat32(P+36,A.b,!0),S.setFloat32(P+40,A.a,!0),S.setFloat32(P+44,A.offsetx2d,!0),S.setFloat32(P+48,A.offsety2d,!0),S.setFloat32(P+52,A.offsetx3d,!0),S.setFloat32(P+56,A.offsety3d,!0),S.setFloat32(P+60,A.offsetz3d,!0),S.setFloat32(P+64,A.u,!0),S.setFloat32(P+68,A.v,!0)}const U=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,U),n.bufferData(n.ARRAY_BUFFER,S,n.STATIC_DRAW),a(t).entities.push({type:"renderparticles",textureId:b,vertexCount:y,vertices:oe,viewMatrix:te,buffer:{vbo:U,step:E,attribs:gi},enabled:!0,expanded:!1,uuid:Rt()}),et+=y,ie(m,n);break}}};window.addEventListener("message",async m=>{if(typeof m.data=="object"&&m.data.type==="pluginMessage"){if(typeof m.data.content!="object"||!a(ne)||!a(p))return;He(a(ne),a(p),m.data.content)}}),Ea(()=>(a(ne),a(p),a(Pe),a(c),a(s),a(C),a($),a(Ae)),()=>{if(a(ne)&&(Zt(ne,a(ne).width=me),Zt(ne,a(ne).height=he),M(p,a(ne).getContext("webgl2")),a(p))){M(V,a(p).getParameter(a(p).MAX_VERTEX_ATTRIBS)),M(Pe,a(p).createTexture()),a(p).bindTexture(a(p).TEXTURE_2D,a(Pe));const m=new Uint8Array([255,255,255,255]);a(p).texImage2D(a(p).TEXTURE_2D,0,a(p).RGBA,1,1,0,a(p).RGBA,a(p).UNSIGNED_BYTE,m);const n=ft(a(p),a(p).VERTEX_SHADER,li,"2D vertex shader"),l=ft(a(p),a(p).FRAGMENT_SHADER,ci,"2D fragment shader"),v=ft(a(p),a(p).VERTEX_SHADER,di,"3D vertex shader"),q=ft(a(p),a(p).VERTEX_SHADER,_i,"3D anim vertex shader"),y=ft(a(p),a(p).FRAGMENT_SHADER,vi,"3D fragment shader"),b=ft(a(p),a(p).VERTEX_SHADER,hi,"particle vertex shader"),D=ft(a(p),a(p).VERTEX_SHADER,pi,"checkers vertex shader"),E=ft(a(p),a(p).FRAGMENT_SHADER,xi,"checkers fragment shader");M(c,Nt(a(p),n,l,"2D program")),M(h,a(p).getUniformLocation(a(c),"atlas_wh_screen_wh")),M(d,a(p).getUniformLocation(a(c),"tex")),M(s,Nt(a(p),v,y,"3D program")),M(_,a(p).getUniformLocation(a(s),"modelmatrix")),M(x,a(p).getUniformLocation(a(s),"viewmatrix")),M(f,a(p).getUniformLocation(a(s),"projmatrix")),M(g,a(p).getUniformLocation(a(s),"atlas_wh")),M(w,a(p).getUniformLocation(a(s),"tex")),M(C,Nt(a(p),q,y,"3D animated program")),M(W,a(p).getUniformLocation(a(C),"modelmatrix")),M(L,a(p).getUniformLocation(a(C),"viewmatrix")),M(O,a(p).getUniformLocation(a(C),"projmatrix")),M(K,a(p).getUniformLocation(a(C),"atlas_wh")),M(k,a(p).getUniformLocation(a(C),"tex")),M($,Nt(a(p),b,y,"Particles program")),M(ce,a(p).getUniformLocation(a($),"viewmatrix")),M(Ie,a(p).getUniformLocation(a($),"projmatrix")),M(X,a(p).getUniformLocation(a($),"tex")),M(Ee,a(p).getUniformLocation(a($),"atlas_wh")),M(Ae,Nt(a(p),D,E,"Checkers program")),M(je,a(p).getUniformLocation(a(Ae),"screen_wh")),a(p).deleteShader(n),a(p).deleteShader(l),a(p).deleteShader(v),a(p).deleteShader(y),a(p).deleteShader(q),a(p).deleteShader(b),a(p).deleteShader(D),a(p).deleteShader(E),a(p).activeTexture(a(p).TEXTURE0+u),a(p).enable(a(p).SCISSOR_TEST),a(p).disable(a(p).CULL_FACE),a(p).disable(a(p).DEPTH_TEST),a(p).enable(a(p).BLEND),a(p).blendEquationSeparate(a(p).FUNC_ADD,a(p).FUNC_ADD),a(p).depthFunc(a(p).LEQUAL),ie(a(ne),a(p))}}),Aa(),Ct();var _e=so(),se=le(_e);ui(se,m=>M(ne,m),()=>a(ne));var Fe=ee(se,2);{var Et=m=>{var n=no(),l=le(n),v=Ze(l);Zi(v,{get data(){return a(t)},set data(y){M(t,y)},$$legacy:!0});var q=ee(l,2);q.__click=[ro,we],j(m,n)},Ve=(m,n)=>{{var l=v=>{var q=io();q.__click=[ao,we],j(v,q)};ue(m,v=>{a(ge)&&v(l)},n)}};ue(Fe,m=>{a(we)?m(Et):m(Ve,!1)})}var pt=ee(Fe,2);{var At=m=>{var n=uo();n.__click=[oo,t,ie,ne,p],j(m,n)};ue(pt,m=>{a(t).selectedTexture&&m(At)})}j(e,_e),yt()}pr(["click"]);Ya(fo,{target:document.body});
