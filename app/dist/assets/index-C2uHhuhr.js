(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();const Vr=!1;var Rr=Array.isArray,Nn=Array.prototype.indexOf,Sr=Array.from,kn=Object.defineProperty,pt=Object.getOwnPropertyDescriptor,un=Object.getOwnPropertyDescriptors,Bn=Object.prototype,On=Array.prototype,Ur=Object.getPrototypeOf,$r=Object.isExtensible;function Hn(e){return e()}function br(e){for(var r=0;r<e.length;r++)e[r]()}const De=2,sn=4,ar=8,Dr=16,ze=32,mt=64,jt=128,Fe=256,qt=512,xe=1024,Ye=2048,ft=4096,$e=8192,ir=16384,Vn=32768,Ir=65536,fn=1<<17,$n=1<<19,ln=1<<20,yr=1<<21,ut=Symbol("$state"),Wn=Symbol("legacy props"),Xn=Symbol("");function cn(e){return e===this.v}function zn(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Pr(e){return!zn(e,this.v)}function Yn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function jn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function qn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Gn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Kn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Zn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Qn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Jn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Mt=!1,ea=!1;function ta(){Mt=!0}const Mr=1,Cr=2,dn=4,ra=8,na=16,aa=1,ia=2,oa=4,ua=8,sa=16,fa=1,la=2,he=Symbol(),ca="http://www.w3.org/1999/xhtml";let ee=null;function Wr(e){ee=e}function wt(e,r=!1,t){var a=ee={p:ee,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Mt&&!r&&(ee.l={s:null,u:null,r1:[],r2:Ut(!1)}),ma(()=>{a.d=!0})}function gt(e){const r=ee;if(r!==null){const d=r.e;if(d!==null){var t=q,a=z;r.e=null;try{for(var o=0;o<d.length;o++){var u=d[o];at(u.effect),Ne(u.reaction),Nr(u.fn)}}finally{at(t),Ne(a)}}ee=r.p,r.m=!0}return{}}function or(){return!Mt||ee!==null&&ee.l===null}function ot(e,r){if(typeof e!="object"||e===null||ut in e)return e;const t=Ur(e);if(t!==Bn&&t!==On)return e;var a=new Map,o=Rr(e),u=Ke(0),d=z,h=l=>{var s=z;Ne(d);var _;return _=l(),Ne(s),_};return o&&a.set("length",Ke(e.length)),new Proxy(e,{defineProperty(l,s,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&Zn();var x=a.get(s);return x===void 0?(x=h(()=>Ke(_.value)),a.set(s,x)):C(x,h(()=>ot(_.value))),!0},deleteProperty(l,s){var _=a.get(s);if(_===void 0)s in l&&a.set(s,h(()=>Ke(he)));else{if(o&&typeof s=="string"){var x=a.get("length"),f=Number(s);Number.isInteger(f)&&f<x.v&&C(x,f)}C(_,he),Xr(u)}return!0},get(l,s,_){var g;if(s===ut)return e;var x=a.get(s),f=s in l;if(x===void 0&&(!f||(g=pt(l,s))!=null&&g.writable)&&(x=h(()=>Ke(ot(f?l[s]:he))),a.set(s,x)),x!==void 0){var m=i(x);return m===he?void 0:m}return Reflect.get(l,s,_)},getOwnPropertyDescriptor(l,s){var _=Reflect.getOwnPropertyDescriptor(l,s);if(_&&"value"in _){var x=a.get(s);x&&(_.value=i(x))}else if(_===void 0){var f=a.get(s),m=f==null?void 0:f.v;if(f!==void 0&&m!==he)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return _},has(l,s){var m;if(s===ut)return!0;var _=a.get(s),x=_!==void 0&&_.v!==he||Reflect.has(l,s);if(_!==void 0||q!==null&&(!x||(m=pt(l,s))!=null&&m.writable)){_===void 0&&(_=h(()=>Ke(x?ot(l[s]):he)),a.set(s,_));var f=i(_);if(f===he)return!1}return x},set(l,s,_,x){var H;var f=a.get(s),m=s in l;if(o&&s==="length")for(var g=_;g<f.v;g+=1){var O=a.get(g+"");O!==void 0?C(O,he):g in l&&(O=h(()=>Ke(he)),a.set(g+"",O))}f===void 0?(!m||(H=pt(l,s))!=null&&H.writable)&&(f=h(()=>Ke(void 0)),C(f,h(()=>ot(_))),a.set(s,f)):(m=f.v!==he,C(f,h(()=>ot(_))));var W=Reflect.getOwnPropertyDescriptor(l,s);if(W!=null&&W.set&&W.set.call(x,_),!m){if(o&&typeof s=="string"){var T=a.get("length"),L=Number(s);Number.isInteger(L)&&L>=T.v&&C(T,L+1)}Xr(u)}return!0},ownKeys(l){i(u);var s=Reflect.ownKeys(l).filter(f=>{var m=a.get(f);return m===void 0||m.v!==he});for(var[_,x]of a)x.v!==he&&!(_ in l)&&s.push(_);return s},setPrototypeOf(){Qn()}})}function Xr(e,r=1){C(e,e.v+r)}const St=new Map;function Ut(e,r){var t={f:0,v:e,reactions:null,equals:cn,rv:0,wv:0};return t}function Ke(e,r){const t=Ut(e);return Ta(t),t}function V(e,r=!1){var a;const t=Ut(e);return r||(t.equals=Pr),Mt&&ee!==null&&ee.l!==null&&((a=ee.l).s??(a.s=[])).push(t),t}function Xt(e,r){return C(e,Xe(()=>i(e))),r}function C(e,r,t=!1){z!==null&&!Le&&or()&&(z.f&(De|Dr))!==0&&!(ce!=null&&ce.includes(e))&&Jn();let a=t?ot(r):r;return Dt(e,a)}function Dt(e,r){if(!e.equals(r)){var t=e.v;Lt?St.set(e,r):St.set(e,t),e.v=r,e.wv=Rn(),_n(e,Ye),or()&&q!==null&&(q.f&xe)!==0&&(q.f&(ze|mt))===0&&(Ae===null?Ra([e]):Ae.push(e))}return r}function _n(e,r){var t=e.reactions;if(t!==null)for(var a=or(),o=t.length,u=0;u<o;u++){var d=t[u],h=d.f;(h&Ye)===0&&(!a&&d===q||(Ie(d,r),(h&(xe|Fe))!==0&&((h&De)!==0?_n(d,ft):lr(d))))}}let da=!1;var zr,vn,hn,pn;function _a(){if(zr===void 0){zr=window,vn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,t=Text.prototype;hn=pt(r,"firstChild").get,pn=pt(r,"nextSibling").get,$r(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),$r(t)&&(t.__t=void 0)}}function Lr(e=""){return document.createTextNode(e)}function Gt(e){return hn.call(e)}function ur(e){return pn.call(e)}function We(e,r){return Gt(e)}function Ue(e,r){{var t=Gt(e);return t instanceof Comment&&t.data===""?ur(t):t}}function fe(e,r=1,t=!1){let a=e;for(;r--;)a=ur(a);return a}function va(e){e.textContent=""}function It(e){var r=De|Ye,t=z!==null&&(z.f&De)!==0?z:null;return q===null||t!==null&&(t.f&Fe)!==0?r|=Fe:q.f|=ln,{ctx:ee,deps:null,effects:null,equals:cn,f:r,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??q}}function Ve(e){const r=It(e);return r.equals=Pr,r}function xn(e){var r=e.effects;if(r!==null){e.effects=null;for(var t=0;t<r.length;t+=1)nt(r[t])}}function ha(e){for(var r=e.parent;r!==null;){if((r.f&De)===0)return r;r=r.parent}return null}function pa(e){var r,t=q;at(ha(e));try{xn(e),r=Un(e)}finally{at(t)}return r}function mn(e){var r=pa(e),t=(tt||(e.f&Fe)!==0)&&e.deps!==null?ft:xe;Ie(e,t),e.equals(r)||(e.v=r,e.wv=Rn())}function wn(e){q===null&&z===null&&qn(),z!==null&&(z.f&Fe)!==0&&q===null&&jn(),Lt&&Yn()}function xa(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function bt(e,r,t,a=!0){var o=q,u={ctx:ee,deps:null,nodes_start:null,nodes_end:null,f:e|Ye,first:null,fn:r,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(t)try{fr(u),u.f|=Vn}catch(l){throw nt(u),l}else r!==null&&lr(u);var d=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(ln|jt))===0;if(!d&&a&&(o!==null&&xa(u,o),z!==null&&(z.f&De)!==0)){var h=z;(h.effects??(h.effects=[])).push(u)}return u}function ma(e){const r=bt(ar,null,!1);return Ie(r,xe),r.teardown=e,r}function Yr(e){wn();var r=q!==null&&(q.f&ze)!==0&&ee!==null&&!ee.m;if(r){var t=ee;(t.e??(t.e=[])).push({fn:e,effect:q,reaction:z})}else{var a=Nr(e);return a}}function wa(e){return wn(),Ct(e)}function ga(e){const r=bt(mt,e,!0);return(t={})=>new Promise(a=>{t.outro?Kt(r,()=>{nt(r),a(void 0)}):(nt(r),a(void 0))})}function Nr(e){return bt(sn,e,!1)}function ba(e,r){var t=ee,a={effect:null,ran:!1};t.l.r1.push(a),a.effect=Ct(()=>{e(),!a.ran&&(a.ran=!0,C(t.l.r2,!0),Xe(r))})}function ya(){var e=ee;Ct(()=>{if(i(e.l.r2)){for(var r of e.l.r1){var t=r.effect;(t.f&xe)!==0&&Ie(t,ft),yt(t)&&fr(t),r.ran=!1}e.l.r2.v=!1}})}function Ct(e){return bt(ar,e,!0)}function et(e,r=[],t=It){const a=r.map(t);return kr(()=>e(...a.map(i)))}function kr(e,r=0){return bt(ar|Dr|r,e,!0)}function Pt(e,r=!0){return bt(ar|ze,e,!0,r)}function gn(e){var r=e.teardown;if(r!==null){const t=Lt,a=z;jr(!0),Ne(null);try{r.call(null)}finally{jr(t),Ne(a)}}}function bn(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var a=t.next;(t.f&mt)!==0?t.parent=null:nt(t,r),t=a}}function Ea(e){for(var r=e.first;r!==null;){var t=r.next;(r.f&ze)===0&&nt(r),r=t}}function nt(e,r=!0){var t=!1;if((r||(e.f&$n)!==0)&&e.nodes_start!==null){for(var a=e.nodes_start,o=e.nodes_end;a!==null;){var u=a===o?null:ur(a);a.remove(),a=u}t=!0}bn(e,r&&!t),tr(e,0),Ie(e,ir);var d=e.transitions;if(d!==null)for(const l of d)l.stop();gn(e);var h=e.parent;h!==null&&h.first!==null&&yn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function yn(e){var r=e.parent,t=e.prev,a=e.next;t!==null&&(t.next=a),a!==null&&(a.prev=t),r!==null&&(r.first===e&&(r.first=a),r.last===e&&(r.last=t))}function Kt(e,r){var t=[];Br(e,t,!0),En(t,()=>{nt(e),r&&r()})}function En(e,r){var t=e.length;if(t>0){var a=()=>--t||r();for(var o of e)o.out(a)}else r()}function Br(e,r,t){if((e.f&$e)===0){if(e.f^=$e,e.transitions!==null)for(const d of e.transitions)(d.is_global||t)&&r.push(d);for(var a=e.first;a!==null;){var o=a.next,u=(a.f&Ir)!==0||(a.f&ze)!==0;Br(a,r,u?t:!1),a=o}}}function Zt(e){An(e,!0)}function An(e,r){if((e.f&$e)!==0){e.f^=$e,(e.f&xe)===0&&(e.f^=xe),yt(e)&&(Ie(e,Ye),lr(e));for(var t=e.first;t!==null;){var a=t.next,o=(t.f&Ir)!==0||(t.f&ze)!==0;An(t,o?r:!1),t=a}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||r)&&u.in()}}let Qt=[];function Aa(){var e=Qt;Qt=[],br(e)}function Fn(e){Qt.length===0&&queueMicrotask(Aa),Qt.push(e)}let zt=!1,Er=!1,Jt=null,st=!1,Lt=!1;function jr(e){Lt=e}let Yt=[];let z=null,Le=!1;function Ne(e){z=e}let q=null;function at(e){q=e}let ce=null;function Fa(e){ce=e}function Ta(e){z!==null&&z.f&yr&&(ce===null?Fa([e]):ce.push(e))}let le=null,me=0,Ae=null;function Ra(e){Ae=e}let Tn=1,er=0,tt=!1,Je=null;function Rn(){return++Tn}function yt(e){var x;var r=e.f;if((r&Ye)!==0)return!0;if((r&ft)!==0){var t=e.deps,a=(r&Fe)!==0;if(t!==null){var o,u,d=(r&qt)!==0,h=a&&q!==null&&!tt,l=t.length;if(d||h){var s=e,_=s.parent;for(o=0;o<l;o++)u=t[o],(d||!((x=u==null?void 0:u.reactions)!=null&&x.includes(s)))&&(u.reactions??(u.reactions=[])).push(s);d&&(s.f^=qt),h&&_!==null&&(_.f&Fe)===0&&(s.f^=Fe)}for(o=0;o<l;o++)if(u=t[o],yt(u)&&mn(u),u.wv>e.wv)return!0}(!a||q!==null&&!tt)&&Ie(e,xe)}return!1}function Sa(e,r){for(var t=r;t!==null;){if((t.f&jt)!==0)try{t.fn(e);return}catch{t.f^=jt}t=t.parent}throw zt=!1,e}function Ua(e){return(e.f&ir)===0&&(e.parent===null||(e.parent.f&jt)===0)}function sr(e,r,t,a){if(zt){if(t===null&&(zt=!1),Ua(r))throw e;return}t!==null&&(zt=!0);{Sa(e,r);return}}function Sn(e,r,t=!0){var a=e.reactions;if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];ce!=null&&ce.includes(e)||((u.f&De)!==0?Sn(u,r,!1):r===u&&(t?Ie(u,Ye):(u.f&xe)!==0&&Ie(u,ft),lr(u)))}}function Un(e){var m;var r=le,t=me,a=Ae,o=z,u=tt,d=ce,h=ee,l=Le,s=e.f;le=null,me=0,Ae=null,tt=(s&Fe)!==0&&(Le||!st||z===null),z=(s&(ze|mt))===0?e:null,ce=null,Wr(e.ctx),Le=!1,er++,e.f|=yr;try{var _=(0,e.fn)(),x=e.deps;if(le!==null){var f;if(tr(e,me),x!==null&&me>0)for(x.length=me+le.length,f=0;f<le.length;f++)x[me+f]=le[f];else e.deps=x=le;if(!tt)for(f=me;f<x.length;f++)((m=x[f]).reactions??(m.reactions=[])).push(e)}else x!==null&&me<x.length&&(tr(e,me),x.length=me);if(or()&&Ae!==null&&!Le&&x!==null&&(e.f&(De|ft|Ye))===0)for(f=0;f<Ae.length;f++)Sn(Ae[f],e);return o!==null&&(er++,Ae!==null&&(a===null?a=Ae:a.push(...Ae))),_}finally{le=r,me=t,Ae=a,z=o,tt=u,ce=d,Wr(h),Le=l,e.f^=yr}}function Da(e,r){let t=r.reactions;if(t!==null){var a=Nn.call(t,e);if(a!==-1){var o=t.length-1;o===0?t=r.reactions=null:(t[a]=t[o],t.pop())}}t===null&&(r.f&De)!==0&&(le===null||!le.includes(r))&&(Ie(r,ft),(r.f&(Fe|qt))===0&&(r.f^=qt),xn(r),tr(r,0))}function tr(e,r){var t=e.deps;if(t!==null)for(var a=r;a<t.length;a++)Da(e,t[a])}function fr(e){var r=e.f;if((r&ir)===0){Ie(e,xe);var t=q,a=ee,o=st;q=e,st=!0;try{(r&Dr)!==0?Ea(e):bn(e),gn(e);var u=Un(e);e.teardown=typeof u=="function"?u:null,e.wv=Tn;var d=e.deps,h;Vr&&ea&&e.f&Ye}catch(l){sr(l,e,t,a||e.ctx)}finally{st=o,q=t}}}function Ia(){try{Gn()}catch(e){if(Jt!==null)sr(e,Jt,null);else throw e}}function Pa(){var e=st;try{var r=0;for(st=!0;Yt.length>0;){r++>1e3&&Ia();var t=Yt,a=t.length;Yt=[];for(var o=0;o<a;o++){var u=Ca(t[o]);Ma(u)}}}finally{Er=!1,st=e,Jt=null,St.clear()}}function Ma(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var a=e[t];if((a.f&(ir|$e))===0)try{yt(a)&&(fr(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?yn(a):a.fn=null))}catch(o){sr(o,a,null,a.ctx)}}}function lr(e){Er||(Er=!0,queueMicrotask(Pa));for(var r=Jt=e;r.parent!==null;){r=r.parent;var t=r.f;if((t&(mt|ze))!==0){if((t&xe)===0)return;r.f^=xe}}Yt.push(r)}function Ca(e){for(var r=[],t=e;t!==null;){var a=t.f,o=(a&(ze|mt))!==0,u=o&&(a&xe)!==0;if(!u&&(a&$e)===0){if((a&sn)!==0)r.push(t);else if(o)t.f^=xe;else{var d=z;try{z=t,yt(t)&&fr(t)}catch(s){sr(s,t,null,t.ctx)}finally{z=d}}var h=t.first;if(h!==null){t=h;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}return r}function i(e){var r=e.f,t=(r&De)!==0;if(Je!==null&&Je.add(e),z!==null&&!Le){if(!(ce!=null&&ce.includes(e))){var a=z.deps;e.rv<er&&(e.rv=er,le===null&&a!==null&&a[me]===e?me++:le===null?le=[e]:(!tt||!le.includes(e))&&le.push(e))}}else if(t&&e.deps===null&&e.effects===null){var o=e,u=o.parent;u!==null&&(u.f&Fe)===0&&(o.f^=Fe)}return t&&(o=e,yt(o)&&mn(o)),Lt&&St.has(e)?St.get(e):e.v}function La(e){var r=Je;Je=new Set;var t=Je,a;try{if(Xe(e),r!==null)for(a of Je)r.add(a)}finally{Je=r}return t}function xt(e){var r=La(()=>Xe(e));for(var t of r)if((t.f&fn)!==0)for(const a of t.deps||[])(a.f&De)===0&&Dt(a,a.v);else Dt(t,t.v)}function Xe(e){var r=Le;try{return Le=!0,e()}finally{Le=r}}const Na=-7169;function Ie(e,r){e.f=e.f&Na|r}function ka(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ut in e)Ar(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&ut in t&&Ar(t)}}}function Ar(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Ar(e[a],r)}catch{}const t=Ur(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const a=un(t);for(let o in a){const u=a[o].get;if(u)try{u.call(e)}catch{}}}}}const Ba=["touchstart","touchmove"];function Oa(e){return Ba.includes(e)}let qr=!1;function Ha(){qr||(qr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function Va(e){var r=z,t=q;Ne(null),at(null);try{return e()}finally{Ne(r),at(t)}}function $a(e,r,t,a=t){e.addEventListener(r,()=>Va(t));const o=e.__on_r;o?e.__on_r=()=>{o(),a(!0)}:e.__on_r=()=>a(!0),Ha()}const Dn=new Set,Fr=new Set;function cr(e){for(var r=0;r<e.length;r++)Dn.add(e[r]);for(var t of Fr)t(e)}function $t(e){var L;var r=this,t=r.ownerDocument,a=e.type,o=((L=e.composedPath)==null?void 0:L.call(e))||[],u=o[0]||e.target,d=0,h=e.__root;if(h){var l=o.indexOf(h);if(l!==-1&&(r===document||r===window)){e.__root=r;return}var s=o.indexOf(r);if(s===-1)return;l<=s&&(d=l)}if(u=o[d]||e.target,u!==r){kn(e,"currentTarget",{configurable:!0,get(){return u||t}});var _=z,x=q;Ne(null),at(null);try{for(var f,m=[];u!==null;){var g=u.assignedSlot||u.parentNode||u.host||null;try{var O=u["__"+a];if(O!=null&&(!u.disabled||e.target===u))if(Rr(O)){var[W,...T]=O;W.apply(u,[e,...T])}else O.call(u,e)}catch(H){f?m.push(H):f=H}if(e.cancelBubble||g===r||g===null)break;u=g}if(f){for(let H of m)queueMicrotask(()=>{throw H});throw f}}finally{e.__root=r,delete e.currentTarget,Ne(_),at(x)}}}function Wa(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Tr(e,r){var t=q;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function ne(e,r){var t=(r&fa)!==0,a=(r&la)!==0,o,u=!e.startsWith("<!>");return()=>{o===void 0&&(o=Wa(u?e:"<!>"+e),t||(o=Gt(o)));var d=a||vn?document.importNode(o,!0):o.cloneNode(!0);if(t){var h=Gt(d),l=d.lastChild;Tr(h,l)}else Tr(d,d);return d}}function Gr(){var e=document.createDocumentFragment(),r=document.createComment(""),t=Lr();return e.append(r,t),Tr(r,t),e}function J(e,r){e!==null&&e.before(r)}function rt(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function Xa(e,r){return za(e,r)}const vt=new Map;function za(e,{target:r,anchor:t,props:a={},events:o,context:u,intro:d=!0}){_a();var h=new Set,l=x=>{for(var f=0;f<x.length;f++){var m=x[f];if(!h.has(m)){h.add(m);var g=Oa(m);r.addEventListener(m,$t,{passive:g});var O=vt.get(m);O===void 0?(document.addEventListener(m,$t,{passive:g}),vt.set(m,1)):vt.set(m,O+1)}}};l(Sr(Dn)),Fr.add(l);var s=void 0,_=ga(()=>{var x=t??r.appendChild(Lr());return Pt(()=>{if(u){wt({});var f=ee;f.c=u}o&&(a.$$events=o),s=e(x,a)||{},u&&gt()}),()=>{var g;for(var f of h){r.removeEventListener(f,$t);var m=vt.get(f);--m===0?(document.removeEventListener(f,$t),vt.delete(f)):vt.set(f,m)}Fr.delete(l),x!==t&&((g=x.parentNode)==null||g.removeChild(x))}});return Ya.set(s,_),s}let Ya=new WeakMap;function pe(e,r,[t,a]=[0,0]){var o=e,u=null,d=null,h=he,l=t>0?Ir:0,s=!1;const _=(f,m=!0)=>{s=!0,x(m,f)},x=(f,m)=>{h!==(h=f)&&(h?(u?Zt(u):m&&(u=Pt(()=>m(o))),d&&Kt(d,()=>{d=null})):(d?Zt(d):m&&(d=Pt(()=>m(o,[t+1,a]))),u&&Kt(u,()=>{u=null})))};kr(()=>{s=!1,r(_),s||x(null,null)},l)}function rr(e,r){return r}function ja(e,r,t,a){for(var o=[],u=r.length,d=0;d<u;d++)Br(r[d].e,o,!0);var h=u>0&&o.length===0&&t!==null;if(h){var l=t.parentNode;va(l),l.append(t),a.clear(),Qe(e,r[0].prev,r[u-1].next)}En(o,()=>{for(var s=0;s<u;s++){var _=r[s];h||(a.delete(_.k),Qe(e,_.prev,_.next)),nt(_.e,!h)}})}function nr(e,r,t,a,o,u=null){var d=e,h={flags:r,items:new Map,first:null},l=(r&dn)!==0;if(l){var s=e;d=s.appendChild(Lr())}var _=null,x=!1,f=Ve(()=>{var m=t();return Rr(m)?m:m==null?[]:Sr(m)});kr(()=>{var m=i(f),g=m.length;x&&g===0||(x=g===0,qa(m,h,d,o,r,a,t),u!==null&&(g===0?_?Zt(_):_=Pt(()=>u(d)):_!==null&&Kt(_,()=>{_=null})),i(f))})}function qa(e,r,t,a,o,u,d){var re,lt,ke,Be;var h=(o&ra)!==0,l=(o&(Mr|Cr))!==0,s=e.length,_=r.items,x=r.first,f=x,m,g=null,O,W=[],T=[],L,H,D,k;if(h)for(k=0;k<s;k+=1)L=e[k],H=u(L,k),D=_.get(H),D!==void 0&&((re=D.a)==null||re.measure(),(O??(O=new Set)).add(D));for(k=0;k<s;k+=1){if(L=e[k],H=u(L,k),D=_.get(H),D===void 0){var K=f?f.e.nodes_start:t;g=Ka(K,r,g,g===null?r.first:g.next,L,H,k,a,o,d),_.set(H,g),W=[],T=[],f=g.next;continue}if(l&&Ga(D,L,k,o),(D.e.f&$e)!==0&&(Zt(D.e),h&&((lt=D.a)==null||lt.unfix(),(O??(O=new Set)).delete(D))),D!==f){if(m!==void 0&&m.has(D)){if(W.length<T.length){var G=T[0],N;g=G.prev;var ae=W[0],ie=W[W.length-1];for(N=0;N<W.length;N+=1)Kr(W[N],G,t);for(N=0;N<T.length;N+=1)m.delete(T[N]);Qe(r,ae.prev,ie.next),Qe(r,g,ae),Qe(r,ie,G),f=G,g=ie,k-=1,W=[],T=[]}else m.delete(D),Kr(D,f,t),Qe(r,D.prev,D.next),Qe(r,D,g===null?r.first:g.next),Qe(r,g,D),g=D;continue}for(W=[],T=[];f!==null&&f.k!==H;)(f.e.f&$e)===0&&(m??(m=new Set)).add(f),T.push(f),f=f.next;if(f===null)continue;D=f}W.push(D),g=D,f=D.next}if(f!==null||m!==void 0){for(var de=m===void 0?[]:Sr(m);f!==null;)(f.e.f&$e)===0&&de.push(f),f=f.next;var Y=de.length;if(Y>0){var _e=(o&dn)!==0&&s===0?t:null;if(h){for(k=0;k<Y;k+=1)(ke=de[k].a)==null||ke.measure();for(k=0;k<Y;k+=1)(Be=de[k].a)==null||Be.fix()}ja(r,de,_e,_)}}h&&Fn(()=>{var we;if(O!==void 0)for(D of O)(we=D.a)==null||we.apply()}),q.first=r.first&&r.first.e,q.last=g&&g.e}function Ga(e,r,t,a){(a&Mr)!==0&&Dt(e.v,r),(a&Cr)!==0?Dt(e.i,t):e.i=t}function Ka(e,r,t,a,o,u,d,h,l,s){var _=(l&Mr)!==0,x=(l&na)===0,f=_?x?V(o):Ut(o):o,m=(l&Cr)===0?d:Ut(d),g={i:m,v:f,k:u,a:null,e:null,prev:t,next:a};try{return g.e=Pt(()=>h(e,f,m,s),da),g.e.prev=t&&t.e,g.e.next=a&&a.e,t===null?r.first=g:(t.next=g,t.e.next=g.e),a!==null&&(a.prev=g,a.e.prev=g.e),g}finally{}}function Kr(e,r,t){for(var a=e.next?e.next.e.nodes_start:t,o=r?r.e.nodes_start:t,u=e.e.nodes_start;u!==a;){var d=ur(u);o.before(u),u=d}}function Qe(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function In(e){var r,t,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(t=In(e[r]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function Za(){for(var e,r,t=0,a="",o=arguments.length;t<o;t++)(e=arguments[t])&&(r=In(e))&&(a&&(a+=" "),a+=r);return a}function Qa(e){return typeof e=="object"?Za(e):e??""}function Ja(e,r,t){var a=e==null?"":""+e;return a===""?null:a}function Zr(e,r,t,a,o,u){var d=e.__className;if(d!==t){var h=Ja(t);h==null?e.removeAttribute("class"):e.className=h,e.__className=t}return u}const ei=Symbol("is custom element"),ti=Symbol("is html");function At(e,r,t,a){var o=ri(e);o[r]!==(o[r]=t)&&(r==="loading"&&(e[Xn]=t),t==null?e.removeAttribute(r):typeof t!="string"&&ni(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function ri(e){return e.__attributes??(e.__attributes={[ei]:e.nodeName.includes("-"),[ti]:e.namespaceURI===ca})}var Qr=new Map;function ni(e){var r=Qr.get(e.nodeName);if(r)return r;Qr.set(e.nodeName,r=[]);for(var t,a=e,o=Element.prototype;o!==a;){t=un(a);for(var u in t)t[u].set&&r.push(u);a=Ur(a)}return r}function ai(e,r,t=r){$a(e,"change",a=>{var o=a?e.defaultChecked:e.checked;t(o)}),Xe(r)==null&&t(e.checked),Ct(()=>{var a=r();e.checked=!!a})}function Jr(e,r){return e===r||(e==null?void 0:e[ut])===r}function ii(e={},r,t,a){return Nr(()=>{var o,u;return Ct(()=>{o=u,u=[],Xe(()=>{e!==t(...u)&&(r(e,...u),o&&Jr(t(...o),e)&&r(null,...o))})}),()=>{Fn(()=>{u&&Jr(t(...u),e)&&r(null,...u)})}}),e}function Nt(e=!1){const r=ee,t=r.l.u;if(!t)return;let a=()=>ka(r.s);if(e){let o=0,u={};const d=It(()=>{let h=!1;const l=r.s;for(const s in l)l[s]!==u[s]&&(u[s]=l[s],h=!0);return h&&o++,o});a=()=>i(d)}t.b.length&&wa(()=>{en(r,a),br(t.b)}),Yr(()=>{const o=Xe(()=>t.m.map(Hn));return()=>{for(const u of o)typeof u=="function"&&u()}}),t.a.length&&Yr(()=>{en(r,a),br(t.a)})}function en(e,r){if(e.l.s)for(const t of e.l.s)i(t);r()}let Wt=!1;function oi(e){var r=Wt;try{return Wt=!1,[e(),Wt]}finally{Wt=r}}function tn(e){var r;return((r=e.ctx)==null?void 0:r.d)??!1}function Ce(e,r,t,a){var G;var o=(t&aa)!==0,u=!Mt||(t&ia)!==0,d=(t&ua)!==0,h=(t&sa)!==0,l=!1,s;d?[s,l]=oi(()=>e[r]):s=e[r];var _=ut in e||Wn in e,x=d&&(((G=pt(e,r))==null?void 0:G.set)??(_&&r in e&&(N=>e[r]=N)))||void 0,f=a,m=!0,g=!1,O=()=>(g=!0,m&&(m=!1,h?f=Xe(a):f=a),f);s===void 0&&a!==void 0&&(x&&u&&Kn(),s=O(),x&&x(s));var W;if(u)W=()=>{var N=e[r];return N===void 0?O():(m=!0,g=!1,N)};else{var T=(o?It:Ve)(()=>e[r]);T.f|=fn,W=()=>{var N=i(T);return N!==void 0&&(f=void 0),N===void 0?f:N}}if((t&oa)===0)return W;if(x){var L=e.$$legacy;return function(N,ae){return arguments.length>0?((!u||!ae||L||l)&&x(ae?W():N),N):W()}}var H=!1,D=!1,k=V(s),K=It(()=>{var N=W(),ae=i(k);return H?(H=!1,D=!0,ae):(D=!1,k.v=N)});return d&&i(K),o||(K.equals=Pr),function(N,ae){if(Je!==null&&(H=D,W(),i(k)),arguments.length>0){const ie=ae?i(K):u&&d?ot(N):N;if(!K.equals(ie)){if(H=!0,C(k,ie),g&&f!==void 0&&(f=ie),tn(K))return N;Xe(()=>i(K))}return N}return tn(K)?K.v:i(K)}}const ui="5";var on;typeof window<"u"&&((on=window.__svelte??(window.__svelte={})).v??(on.v=new Set)).add(ui);ta();const si=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,fi=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,li=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,ci=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,di=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,_i=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,vi=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,hi=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,Ft=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],rn=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],pi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],xi=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],mi=[{count:2,offset:0}],Ze=(e,r,t,a)=>{const o=e.createShader(r);if(!o)throw new Error(`failed to create shader '${a}'`);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(o);throw new Error(`compilation error in shader '${a}':
${u}`)}return o},Tt=(e,r,t,a)=>{const o=e.createProgram();if(!o)throw new Error(`failed to create program '${a}'`);if(e.attachShader(o,r),e.attachShader(o,t),e.linkProgram(o),e.detachShader(o,r),e.detachShader(o,t),!e.getProgramParameter(o,e.LINK_STATUS)){const u=e.getProgramInfoLog(o);throw new Error(`link error in program '${a}':
${u}`)}return o};var wi=(e,r)=>r(!1),gi=ne('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),bi=(e,r)=>r(!0),yi=ne('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),Ei=ne('<input type="checkbox">'),Ai=ne("<!> <!> <label> </label> <br>",1);function Rt(e,r){wt(r,!1);let t=Ce(r,"expanded",12),a=Ce(r,"id",8),o=Ce(r,"text",8),u=Ce(r,"checked",12,null),d=Ce(r,"onexpandedchange",8,null),h=Ce(r,"oncheckedchange",8,null);const l=T=>{t(T),d()&&d()()};Nt();var s=Ai(),_=Ue(s);{var x=T=>{var L=gi();L.__click=[wi,l],et(()=>At(L,"id",u()===null?a():null)),J(T,L)},f=T=>{var L=yi();L.__click=[bi,l],et(()=>At(L,"id",u()===null?a():null)),J(T,L)};pe(_,T=>{t()?T(x):T(f,!1)})}var m=fe(_,2);{var g=T=>{var L=Ei();At(L,"draggable",!0),L.__change=function(...H){var D;(D=h())==null||D.apply(this,H)},et(()=>At(L,"id",a())),ai(L,u),J(T,L)};pe(m,T=>{u()!==null&&T(g)})}var O=fe(m,2),W=We(O);et(()=>{At(O,"for",a()),rt(W,o())}),J(e,s),gt()}cr(["click","change"]);var Fi=ne('<div class="ml-4 w-full"> <br> <br> <br> <br></div>');function nn(e,r){wt(r,!1);let t=Ce(r,"image",8);Nt();var a=Fi(),o=We(a),u=fe(o,2),d=fe(u,2),h=fe(d,2);et((l,s,_,x)=>{rt(o,`screen: ${t().x??""},${t().y??""}
  ${t().w??""}x${t().h??""} `),rt(u,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),rt(d,` rgb: ${l??""}, ${s??""}, ${_??""} `),rt(h,` alpha: ${x??""} `)},[()=>t().r.toPrecision(4),()=>t().g.toPrecision(4),()=>t().b.toPrecision(4),()=>t().a.toPrecision(4)],Ve),J(e,a),gt()}var Ti=ne("<div> </div>"),Ri=(e,r,t)=>{const a=r().textureId;t(t().selectedTextureId=a.toString(),!0),t(t().selectedTexture=t().textures[a],!0),t().redraw()},Si=ne('<button class="hover:bg-gray-200"> </button> <br>',1),Ui=ne("<!> <!>",1),Di=ne('<div class="ml-2"></div>'),Ii=ne("<!> <!>",1),Pi=ne("<!> <!>",1),Mi=ne("<!> <!>",1),Ci=ne('<div class="ml-3 text-sm"><!> <!> <!></div>');function Li(e,r){wt(r,!1);let t=Ce(r,"entity",12),a=Ce(r,"menuData",12);const o=6,u=100;let d=V(!1);function h(T){return"images"in T}let l=V(null),s=V(0);if(t().type==="batch2d"){const T=t().vertices,L=u*2,H=T.length>=L*o;C(l,[]);let D=[],k=0;for(let K=0;K<T.length-(o-1);K+=o){const G=T[K];let N=G.x,ae=G.x,ie=G.y,de=G.y;for(let _e=1;_e<o;_e+=1){const re=T[K+_e];re.x<N&&(N=re.x),re.x>ae&&(ae=re.x),re.y<ie&&(ie=re.y),re.y>de&&(de=re.y)}const Y={x:N,y:ie,w:ae-N,h:de-ie,ax:G.ax,ay:G.ay,aw:G.aw,ah:G.ah,r:G.r,g:G.g,b:G.b,a:G.a,expanded:!1,index:i(s)};if(H){if(D.push(Y),D.length>=u){const _e=`${i(l).length*u}-${i(l).length*u+D.length-1}`,re=K+o;i(l).push({images:D,desc:_e,expanded:!1,vertexRangeStart:k,vertexRangeEnd:re}),D=[],k=re}}else i(l).push(Y);C(s,i(s)+1)}if(D.length>0){const K=`${i(l).length*u}-${i(l).length*u+D.length-1}`;i(l).push({images:D,desc:K,expanded:!1,vertexRangeStart:k,vertexRangeEnd:T.length})}}Nt();var _=Ci(),x=We(_);{var f=T=>{var L=Ti(),H=We(L);et(()=>rt(H,`animated: ${t().animated??""}`)),J(T,L)};pe(x,T=>{typeof t().animated=="boolean"&&T(f)})}var m=fe(x,2);{var g=T=>{var L=Si(),H=Ue(L);H.__click=[Ri,t,a];var D=We(H);et(()=>rt(D,`texture: #${t().textureId??""}`)),J(T,L)};pe(m,T=>{typeof t().textureId=="number"&&T(g)})}var O=fe(m,2);{var W=T=>{var L=Mi(),H=Ue(L);const D=Ve(()=>`${t().uuid}-images2d`),k=Ve(()=>`2D images (${i(s)})`);Rt(H,{get id(){return i(D)},get text(){return i(k)},get expanded(){return i(d)},set expanded(N){C(d,N)},$$legacy:!0});var K=fe(H,2);{var G=N=>{var ae=Gr(),ie=Ue(ae);nr(ie,1,()=>i(l),rr,(de,Y,_e)=>{var re=Gr(),lt=Ue(re);{var ke=we=>{var je=Ii(),Oe=Ue(je),it=()=>i(Y).images.every(Q=>t().enabledVerticesList[Q.index*o]),He=Q=>{for(let ve=i(Y).vertexRangeStart;ve<i(Y).vertexRangeEnd;ve+=1)t(t().enabledVerticesList[ve]=Q,!0)};const ct=Ve(()=>`${t().uuid}-images-${i(Y).desc}`),qe=Ve(()=>`[Images ${i(Y).desc}]`);Rt(Oe,{get checked(){return it()},set checked(Q){He(Q)},get oncheckedchange(){return a().redraw},get id(){return i(ct)},get text(){return i(qe)},get expanded(){return i(Y).expanded},set expanded(Q){i(Y).expanded=Q,xt(()=>i(l))},$$legacy:!0});var Pe=fe(Oe,2);{var oe=Q=>{var ve=Di();nr(ve,5,()=>i(Y).images,rr,(kt,Me,dt)=>{var ue=Ui(),p=Ue(ue),Te=()=>t().enabledVerticesList[i(Me).index*o],Re=ge=>{for(let Et=0;Et<o;Et+=1)t(t().enabledVerticesList[i(Me).index*o+Et]=ge,!0)};const dr=Ve(()=>`${t().uuid}-images-${i(Y).desc}-${dt}`);Rt(p,{get checked(){return Te()},set checked(ge){Re(ge)},get oncheckedchange(){return a().redraw},get id(){return i(dr)},text:`Image ${_e*u+dt}`,get expanded(){return i(Me).expanded},set expanded(ge){i(Me).expanded=ge,xt(()=>(i(l),i(Y).images))},$$legacy:!0});var Bt=fe(p,2);{var Ot=ge=>{nn(ge,{get image(){return i(Me)}})};pe(Bt,ge=>{i(Me).expanded&&ge(Ot)})}J(kt,ue)}),J(Q,ve)};pe(Pe,Q=>{i(Y).expanded&&Q(oe)})}J(we,je)},Be=we=>{var je=Pi(),Oe=Ue(je),it=()=>t().enabledVerticesList[i(Y).index*o],He=oe=>{for(let Q=0;Q<o;Q+=1)t(t().enabledVerticesList[i(Y).index*o+Q]=oe,!0)};const ct=Ve(()=>`${t().uuid}-images-${_e}`);Rt(Oe,{get checked(){return it()},set checked(oe){He(oe)},get oncheckedchange(){return a().redraw},get id(){return i(ct)},text:`Image ${_e}`,get expanded(){return i(Y).expanded},set expanded(oe){i(Y).expanded=oe,xt(()=>i(l))},$$legacy:!0});var qe=fe(Oe,2);{var Pe=oe=>{nn(oe,{get image(){return i(Y)}})};pe(qe,oe=>{i(Y).expanded&&oe(Pe)})}J(we,je)};pe(lt,we=>{h(i(Y))?we(ke):we(Be,!1)})}J(de,re)}),J(N,ae)};pe(K,N=>{i(d)&&N(G)})}J(T,L)};pe(O,T=>{i(l)&&i(s)&&T(W)})}J(e,_),gt()}cr(["click"]);var Ni=(e,r,t,a)=>r(t(),a()),ki=ne('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),Bi=ne("<div><!> <!></div>"),Oi=ne('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function Hi(e,r){wt(r,!1);let t=Ce(r,"data",12);const a=(h,l)=>{t().selectedTexture===l?t(t().selectedTexture=null,!0):(t(t().selectedTextureId=h,!0),t(t().selectedTexture=l,!0)),t().redraw()};Nt();var o=Oi(),u=fe(Ue(o),2);nr(u,1,()=>Object.entries(t().textures),rr,(h,l)=>{let s=()=>i(l)[0],_=()=>i(l)[1];var x=ki(),f=We(x);f.__click=[Ni,a,s,_];var m=We(f);et(()=>{Zr(f,1,Qa(t().selectedTexture===_()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),rt(m,`#${s()??""}`)}),J(h,x)});var d=fe(u,6);nr(d,1,()=>t().entities,rr,(h,l,s)=>{var _=Bi();Zr(_,1,`select-none m-0 border-none w-full ${s&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var x=We(_);Rt(x,{id:`menu${s}`,get text(){return t().entities[s].type},get oncheckedchange(){return t().redraw},get expanded(){return t().entities[s].expanded},set expanded(g){t().entities[s].expanded=g,xt(()=>t().entities)},get checked(){return t().entities[s].enabled},set checked(g){t().entities[s].enabled=g,xt(()=>t().entities)},$$legacy:!0});var f=fe(x,2);{var m=g=>{Li(g,{get entity(){return t().entities[s]},set entity(O){t().entities[s]=O,xt(()=>t().entities)},get menuData(){return t()},set menuData(O){t(O)},$$legacy:!0})};pe(f,g=>{t().entities[s].expanded&&g(m)})}J(h,_)}),J(e,o),gt()}cr(["click"]);const se=[];for(let e=0;e<256;++e)se.push((e+256).toString(16).slice(1));function Vi(e,r=0){return(se[e[r+0]]+se[e[r+1]]+se[e[r+2]]+se[e[r+3]]+"-"+se[e[r+4]]+se[e[r+5]]+"-"+se[e[r+6]]+se[e[r+7]]+"-"+se[e[r+8]]+se[e[r+9]]+"-"+se[e[r+10]]+se[e[r+11]]+se[e[r+12]]+se[e[r+13]]+se[e[r+14]]+se[e[r+15]]).toLowerCase()}let gr;const $i=new Uint8Array(16);function Wi(){if(!gr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");gr=crypto.getRandomValues.bind(crypto)}return gr($i)}const Xi=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),an={randomUUID:Xi};function ht(e,r,t){var o;if(an.randomUUID&&!e)return an.randomUUID();e=e||{};const a=e.random??((o=e.rng)==null?void 0:o.call(e))??Wi();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Vi(a)}var zi=(e,r)=>C(r,!1),Yi=ne('<div class="overflow-auto absolute w-56 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),ji=(e,r)=>C(r,!0),qi=ne('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),Gi=(e,r,t,a,o)=>{Xt(r,i(r).selectedTexture=null),t(i(a),i(o))},Ki=ne('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),Zi=ne('<canvas class="absolute right-0"></canvas> <!> <!>',1);function Qi(e,r){wt(r,!1);let t=V({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",redraw:()=>Re(i(ue),i(p))});const a=w=>{const n=_e.get(w);return n?parseInt(n):0},o=(w,n,c,v,j)=>new Float32Array([c/(w*j),0,0,0,0,c/(n*j),0,0,0,0,(v+c)/(v-c),1,0,0,-2*v*c/(v-c),0]),u=0;let d=V(null),h=V(null),l=V(null),s=V(null),_=V(null),x=V(null),f=V(null),m=V(null),g=V(null),O=V(null),W=V(null),T=V(null),L=V(null),H=V(null),D=V(null),k=V(null),K=V(null),G=V(null),N=V(null),ae=V(null),ie=V(null),de=V(null),Y=null;const _e=new URLSearchParams(window.location.search),re=_e.get("n"),lt=re?Math.max(parseInt(re),1):1,ke=a("w"),Be=a("h"),we=a("gx"),je=a("gy"),Oe=a("gw"),it=a("gh");let He=0,ct=V(0),qe=V(),Pe=null,oe=null,Q=0,ve=0,kt=o(Oe,it,460,66560,5/16),Me=V(!1),dt=V(!1),ue=V(null),p=V(null);const Te=(w,n,c,v)=>{w.bindBuffer(w.ARRAY_BUFFER,n.vbo);for(let b=0;b<i(ct);b+=1){const y=n.attribs[b];if(!y){w.disableVertexAttribArray(b);continue}w.enableVertexAttribArray(b),w.vertexAttribPointer(b,y.count,w.FLOAT,!1,n.step,y.offset)}if(!v){w.drawArrays(w.TRIANGLES,0,c);return}let j=null;for(let b=0;b<c;b+=1){const y=v[b];j===null?y&&(j=b):y||(w.drawArrays(w.TRIANGLES,j,b-j),j=null)}j!==null&&w.drawArrays(w.TRIANGLES,j,c-j)},Re=(w,n)=>{if(n.viewport(0,0,w.width,w.height),n.scissor(0,0,w.width,w.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),!i(Me)){n.viewport(0,0,w.width,w.height);const c=()=>{n.clearColor(.525,.968,.495,1),n.clear(n.COLOR_BUFFER_BIT)},v=()=>{n.clearColor(.2,.2,.2,1),n.clear(n.COLOR_BUFFER_BIT)},j=Math.min(He/lt,1),b=Math.floor(w.width*.65)&-2,y=70,M=8,E=M*2,Z=b*j;if(c(),w.width<=E||w.height<=E)return;n.scissor(M,M,w.width-E,w.height-E),v(),n.scissor(w.width/2-(b/2+M),w.height/2-(y/2+M),b+E,y+E),c(),n.scissor(w.width/2-b/2+Z,w.height/2-y/2,b-Z,y),v();return}if(i(t).selectedTexture){if(n.useProgram(i(ie)),n.viewport(0,0,w.width,w.height),n.uniform2fv(i(de),[w.width,w.height]),!Y){const I=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,I),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),n.STATIC_DRAW),Y={vbo:I,step:8,attribs:mi}}Te(n,Y,6);const c=i(t).selectedTexture,v=w.width/w.height,j=c.width/c.height,b=v>=j,y=b?c.width*w.height/c.height:w.width,M=b?w.height:c.height*w.width/c.width,E=b?(w.width-w.height)/2:0,Z=y+E,R=b?0:(w.height-w.width)/2,te=M+R;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(d)),n.uniform4fv(i(h),[c.width,c.height,w.width,w.height]),n.bindTexture(n.TEXTURE_2D,c.texture),n.uniform1i(i(l),u);const S=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,S),n.bufferData(n.ARRAY_BUFFER,new Float32Array([E,R,0,0,0,0,c.width,c.height,1,1,1,1,0,0,0,Z,R,1,0,0,0,c.width,c.height,1,1,1,1,0,0,0,E,te,0,1,0,0,c.width,c.height,1,1,1,1,0,0,0,Z,R,1,0,0,0,c.width,c.height,1,1,1,1,0,0,0,Z,te,1,1,0,0,c.width,c.height,1,1,1,1,0,0,0,E,te,0,1,0,0,c.width,c.height,1,1,1,1,0,0,0]),n.STATIC_DRAW),Te(n,{vbo:S,step:60,attribs:Ft},6),n.deleteBuffer(S);return}oe&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,oe),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)),n.disable(n.SCISSOR_TEST);for(let c of i(t).entities)if(c.enabled){if(c.type==="batch2d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST);const v=i(t).textures[c.textureId];n.useProgram(i(d)),n.viewport(0,0,ke,Be),n.uniform4fv(i(h),[v.width,v.height,c.targetWidth,c.targetHeight]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(i(l),u),Te(n,c.buffer,c.vertexCount,c.enabledVerticesList)}if(c.type==="render3d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const v=i(t).textures[c.textureId];n.useProgram(c.animated?i(O):i(s)),n.viewport(we,je,Oe,it),n.uniformMatrix4fv(c.animated?i(W):i(_),!1,c.modelMatrix),n.uniformMatrix4fv(c.animated?i(T):i(x),!1,c.viewMatrix),n.uniformMatrix4fv(c.animated?i(L):i(f),!1,kt),n.uniform2fv(c.animated?i(H):i(m),[v.width,v.height]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(c.animated?i(D):i(g),u),Te(n,c.buffer,c.vertexCount)}if(c.type==="renderparticles"){n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const v=i(t).textures[c.textureId];n.useProgram(i(k)),n.viewport(we,je,Oe,it),n.uniformMatrix4fv(i(K),!1,c.viewMatrix),n.uniformMatrix4fv(i(G),!1,kt),n.uniform2fv(i(ae),[v.width,v.height]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(i(N),u),Te(n,c.buffer,c.vertexCount)}if(c.type==="icon"||c.type==="bigicon"){const v=c.texSize;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(d)),n.viewport(0,0,ke,Be),n.bindTexture(n.TEXTURE_2D,c.texture),n.uniform1i(i(l),u),n.uniform4fv(i(h),[v,v,c.targetWidth,c.targetHeight]),Te(n,c.buffer,6)}if(c.type==="minimap2d"){!Pe||!oe?(Pe=n.createTexture(),n.bindTexture(n.TEXTURE_2D,Pe),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,Q,ve),oe=n.createFramebuffer(),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,oe),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Pe,0)):n.bindFramebuffer(n.DRAW_FRAMEBUFFER,oe),n.viewport(0,0,Q,ve),n.disable(n.DEPTH_TEST);const v=i(t).textures[c.textureId];n.useProgram(i(d)),n.uniform4fv(i(h),[v.width,v.height,Q,ve]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(i(l),u),Te(n,c.buffer,c.vertexCount),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)}if(c.type==="minimap"){if(Pe===null)continue;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(d)),n.viewport(0,0,ke,Be),n.uniform4fv(i(h),[Q,ve,c.targetWidth,c.targetHeight]),n.bindTexture(n.TEXTURE_2D,Pe),n.uniform1i(i(l),u),Te(n,c.buffer,6)}}},dr=(w,n,c)=>{const v=new DataView(c),j=v.getUint32(0,!0);switch(j){case 0:{C(Me,!0),Re(w,n);break}case 1:{const b=v.getUint32(4,!0),y=v.getUint32(8,!0),M=v.getUint32(12,!0),E=n.createTexture(),Z=new Uint8Array(c,16,y*M*4);n.bindTexture(n.TEXTURE_2D,E),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,y,M,0,n.RGBA,n.UNSIGNED_BYTE,Z),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),Xt(t,i(t).textures[b]={texture:E,width:y,height:M,data:Z});break}case 2:case 3:{const b=j===3,y=b?104:40,M=b?120:56,E=v.getUint32(4,!0),Z=v.getUint32(8,!0),R=new Float32Array(16);R.set(new Float32Array(c,16,16));const te=new Float32Array(16);te.set(new Float32Array(c,80,16));const S=new DataView(c,144,E*y),U=new Array(E),I=new ArrayBuffer(E*M),F=new DataView(I);for(let P=0;P<E;P+=1){const A=y*P,B=M*P;let be=null;b&&(be=new Float32Array(16),be.set(new Float32Array(c,144+y*P+40,16)));const X={x:S.getInt16(A,!0),y:S.getInt16(A+2,!0),z:S.getInt16(A+4,!0),u:S.getFloat32(A+8,!0),v:S.getFloat32(A+12,!0),ax:S.getUint16(A+16,!0),ay:S.getUint16(A+18,!0),aw:S.getUint16(A+20,!0),ah:S.getUint16(A+22,!0),r:S.getFloat32(A+24,!0),g:S.getFloat32(A+28,!0),b:S.getFloat32(A+32,!0),a:S.getFloat32(A+36,!0),anim:be};if(U[P]=X,F.setFloat32(B,X.x,!0),F.setFloat32(B+4,X.y,!0),F.setFloat32(B+8,X.z,!0),F.setFloat32(B+12,0,!0),F.setFloat32(B+16,X.u,!0),F.setFloat32(B+20,X.v,!0),F.setFloat32(B+24,X.ax,!0),F.setFloat32(B+28,X.ay,!0),F.setFloat32(B+32,X.aw,!0),F.setFloat32(B+36,X.ah,!0),F.setFloat32(B+40,X.r,!0),F.setFloat32(B+44,X.g,!0),F.setFloat32(B+48,X.b,!0),F.setFloat32(B+52,X.a,!0),be)for(let ye=0;ye<16;ye+=1)F.setFloat32(B+56+ye*4,be[ye],!0)}const $=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,$),n.bufferData(n.ARRAY_BUFFER,F,n.STATIC_DRAW),i(t).entities.push({type:"render3d",animated:b,textureId:Z,vertexCount:E,modelMatrix:R,viewMatrix:te,vertices:U,buffer:{vbo:$,step:M,attribs:b?pi:rn},enabled:!0,expanded:!1,uuid:ht()}),He+=E,Re(w,n);break}case 4:{const M=v.getUint32(4,!0),E=v.getUint32(8,!0),Z=v.getUint16(12,!0),R=v.getUint16(14,!0),te=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,te);const S=new DataView(c,16,M*40),U=new ArrayBuffer(M*60),I=new DataView(U),F=new Array(M);for(let $=0;$<M;$+=1){const P=40*$,A=60*$,B={x:S.getInt16(P,!0),y:S.getInt16(P+2,!0),ax:S.getInt16(P+4,!0),ay:S.getInt16(P+6,!0),aw:S.getInt16(P+8,!0),ah:S.getInt16(P+10,!0),discard:S.getUint8(P+12),wrapx:S.getUint8(P+13),wrapy:S.getUint8(P+14),u:S.getFloat32(P+16,!0),v:S.getFloat32(P+20,!0),r:S.getFloat32(P+24,!0),g:S.getFloat32(P+28,!0),b:S.getFloat32(P+32,!0),a:S.getFloat32(P+36,!0)};F[$]=B,I.setFloat32(A,B.x,!0),I.setFloat32(A+4,B.y,!0),I.setFloat32(A+8,B.u,!0),I.setFloat32(A+12,B.v,!0),I.setFloat32(A+16,B.ax,!0),I.setFloat32(A+20,B.ay,!0),I.setFloat32(A+24,B.aw,!0),I.setFloat32(A+28,B.ah,!0),I.setFloat32(A+32,B.r,!0),I.setFloat32(A+36,B.g,!0),I.setFloat32(A+40,B.b,!0),I.setFloat32(A+44,B.a,!0),I.setFloat32(A+48,B.discard,!0),I.setFloat32(A+52,B.wrapx,!0),I.setFloat32(A+56,B.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,I,n.STATIC_DRAW),i(t).entities.push({type:"batch2d",textureId:E,vertexCount:M,vertices:F,targetWidth:Z,targetHeight:R,buffer:{vbo:te,step:60,attribs:Ft},enabled:!0,expanded:!1,uuid:ht(),enabledVerticesList:Array(Math.floor(M)).fill(!0)}),He+=M,Re(w,n);break}case 5:case 8:{const y=j===5?64:512,M=v.getInt16(4,!0),E=v.getInt16(6,!0),Z=v.getInt16(8,!0),R=v.getInt16(10,!0),te=v.getUint32(12,!0),S=v.getFloat32(16,!0),U=v.getFloat32(20,!0),I=v.getFloat32(24,!0),F=v.getFloat32(28,!0),$=v.getUint16(32,!0),P=v.getUint16(34,!0),A=n.createTexture(),B=n.createFramebuffer();n.bindTexture(n.TEXTURE_2D,A),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,B),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,y,y),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,A,0),n.enable(n.CULL_FACE),n.cullFace(n.FRONT),n.viewport(0,0,y,y),n.scissor(0,0,y,y);let be=Array(te),X=36;for(let hr=0;hr<te;hr+=1){const Ht=v.getUint32(X,!0);let Hr=Array(Ht);const Ln=new ArrayBuffer(Ht*56),Ee=new DataView(Ln),pr=new Float32Array(16);pr.set(new Float32Array(c,X+4,16));const xr=new Float32Array(16);xr.set(new Float32Array(c,X+68,16));const mr=new Float32Array(16);mr.set(new Float32Array(c,X+132,16)),X+=196;for(let Vt=0;Vt<Ht;Vt+=1){const Ge={x:v.getInt16(X,!0),y:v.getInt16(X+2,!0),z:v.getInt16(X+4,!0),r:v.getFloat32(X+8,!0),g:v.getFloat32(X+12,!0),b:v.getFloat32(X+16,!0),a:v.getFloat32(X+20,!0)},Se=Vt*56;Ee.setFloat32(Se,Ge.x,!0),Ee.setFloat32(Se+4,Ge.y,!0),Ee.setFloat32(Se+8,Ge.z,!0),Ee.setFloat32(Se+24,0,!0),Ee.setFloat32(Se+28,0,!0),Ee.setFloat32(Se+32,y,!0),Ee.setFloat32(Se+36,y,!0),Ee.setFloat32(Se+40,Ge.r,!0),Ee.setFloat32(Se+44,Ge.g,!0),Ee.setFloat32(Se+48,Ge.b,!0),Ee.setFloat32(Se+52,Ge.a,!0),Hr[Vt]=Ge,X+=24}be[hr]={vertices:Hr,modelMatrix:pr,viewMatrix:xr,projMatrix:mr};const wr=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,wr),n.bufferData(n.ARRAY_BUFFER,Ee,n.STATIC_DRAW),n.useProgram(i(s)),n.uniformMatrix4fv(i(_),!1,pr),n.uniformMatrix4fv(i(x),!1,xr),n.uniformMatrix4fv(i(f),!1,mr),n.uniform2fv(i(m),[1,1]),n.bindTexture(n.TEXTURE_2D,i(qe)),n.uniform1i(i(g),u),Te(n,{vbo:wr,attribs:rn,step:56},Ht),n.deleteBuffer(wr)}const ye=M,_t=M+Z,_r=E,vr=E+R,Or=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Or),n.bufferData(n.ARRAY_BUFFER,new Float32Array([ye,_r,0,1,0,0,y,y,S,I,U,F,0,0,0,_t,_r,1,1,0,0,y,y,S,I,U,F,0,0,0,ye,vr,0,0,0,0,y,y,S,I,U,F,0,0,0,_t,_r,1,1,0,0,y,y,S,I,U,F,0,0,0,_t,vr,1,0,0,0,y,y,S,I,U,F,0,0,0,ye,vr,0,0,0,0,y,y,S,I,U,F,0,0,0]),n.STATIC_DRAW),i(t).entities.push({type:j===5?"icon":"bigicon",models:be,texture:A,targetWidth:$,targetHeight:P,texSize:y,buffer:{vbo:Or,step:60,attribs:Ft},enabled:!0,expanded:!1,uuid:ht()}),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.deleteFramebuffer(B),n.disable(n.CULL_FACE);break}case 6:{const b=v.getUint32(4,!0),y=v.getUint32(8,!0);Q=v.getUint16(12,!0),ve=v.getUint16(14,!0);const M=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,M);const E=new DataView(c,16,b*40),Z=new ArrayBuffer(b*60),R=new DataView(Z),te=new Array(b);for(let S=0;S<b;S+=1){const U=40*S,I=60*S,F={x:E.getInt16(U,!0),y:E.getInt16(U+2,!0),ax:E.getInt16(U+4,!0),ay:E.getInt16(U+6,!0),aw:E.getInt16(U+8,!0),ah:E.getInt16(U+10,!0),discard:E.getUint8(U+12),wrapx:E.getUint8(U+13),wrapy:E.getUint8(U+14),u:E.getFloat32(U+16,!0),v:E.getFloat32(U+20,!0),r:E.getFloat32(U+24,!0),g:E.getFloat32(U+28,!0),b:E.getFloat32(U+32,!0),a:E.getFloat32(U+36,!0)};te[S]=F,R.setFloat32(I,F.x,!0),R.setFloat32(I+4,F.y,!0),R.setFloat32(I+8,F.u,!0),R.setFloat32(I+12,F.v,!0),R.setFloat32(I+16,F.ax,!0),R.setFloat32(I+20,F.ay,!0),R.setFloat32(I+24,F.aw,!0),R.setFloat32(I+28,F.ah,!0),R.setFloat32(I+32,F.r,!0),R.setFloat32(I+36,F.g,!0),R.setFloat32(I+40,F.b,!0),R.setFloat32(I+44,F.a,!0),R.setFloat32(I+48,F.discard,!0),R.setFloat32(I+52,F.wrapx,!0),R.setFloat32(I+56,F.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,R,n.STATIC_DRAW),i(t).entities.push({type:"minimap2d",textureId:y,buffer:{vbo:M,attribs:Ft,step:60},vertices:te,vertexCount:b,enabled:!0,expanded:!1,uuid:ht()}),He+=b,Re(w,n);break}case 7:{const b=v.getInt16(4,!0),y=v.getInt16(6,!0),M=v.getUint16(8,!0),E=v.getUint16(10,!0),Z=v.getInt16(12,!0),R=v.getInt16(14,!0),te=v.getUint16(16,!0),S=v.getUint16(18,!0),U=v.getUint16(20,!0),I=v.getUint16(22,!0),F=Z,$=Z+te,P=R,A=R+S,B=b/Q,be=(b+M)/Q,X=y/ve,ye=(y+E)/ve,_t=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,_t),n.bufferData(n.ARRAY_BUFFER,new Float32Array([F,P,B,ye,b,y,M,E,1,1,1,1,0,0,0,$,P,be,ye,b,y,M,E,1,1,1,1,0,0,0,F,A,B,X,b,y,M,E,1,1,1,1,0,0,0,$,P,be,ye,b,y,M,E,1,1,1,1,0,0,0,$,A,be,X,b,y,M,E,1,1,1,1,0,0,0,F,A,B,X,b,y,M,E,1,1,1,1,0,0,0]),n.STATIC_DRAW),i(t).entities.push({type:"minimap",sourcex:b,sourcey:y,sourcew:M,sourceh:E,targetx:Z,targety:R,targetw:te,targeth:S,targetWidth:U,targetHeight:I,buffer:{vbo:_t,step:60,attribs:Ft},enabled:!0,expanded:!1,uuid:ht()}),Re(w,n);break}case 9:{const b=v.getUint32(4,!0),y=v.getUint32(8,!0),M=64,E=72,Z=new Float32Array(16);Z.set(new Float32Array(c,16,16));const R=new DataView(c,80,b*M),te=new Array(b),S=new ArrayBuffer(b*E),U=new DataView(S);for(let F=0;F<b;F+=1){const $=M*F,P=E*F,A={x:R.getFloat32($,!0),y:R.getFloat32($+4,!0),z:R.getFloat32($+8,!0),offsetx2d:R.getFloat32($+12,!0),offsety2d:R.getFloat32($+16,!0),offsetx3d:R.getFloat32($+20,!0),offsety3d:R.getFloat32($+24,!0),offsetz3d:R.getFloat32($+28,!0),ax:R.getUint16($+32,!0),ay:R.getUint16($+34,!0),aw:R.getUint16($+36,!0),ah:R.getUint16($+38,!0),r:R.getFloat32($+40,!0),g:R.getFloat32($+44,!0),b:R.getFloat32($+48,!0),a:R.getFloat32($+52,!0),u:R.getFloat32($+56,!0),v:R.getFloat32($+60,!0)};te[F]=A,U.setFloat32(P,A.x,!0),U.setFloat32(P+4,A.y,!0),U.setFloat32(P+8,A.z,!0),U.setFloat32(P+12,A.ax,!0),U.setFloat32(P+16,A.ay,!0),U.setFloat32(P+20,A.aw,!0),U.setFloat32(P+24,A.ah,!0),U.setFloat32(P+28,A.r,!0),U.setFloat32(P+32,A.g,!0),U.setFloat32(P+36,A.b,!0),U.setFloat32(P+40,A.a,!0),U.setFloat32(P+44,A.offsetx2d,!0),U.setFloat32(P+48,A.offsety2d,!0),U.setFloat32(P+52,A.offsetx3d,!0),U.setFloat32(P+56,A.offsety3d,!0),U.setFloat32(P+60,A.offsetz3d,!0),U.setFloat32(P+64,A.u,!0),U.setFloat32(P+68,A.v,!0)}const I=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,I),n.bufferData(n.ARRAY_BUFFER,U,n.STATIC_DRAW),i(t).entities.push({type:"renderparticles",textureId:y,vertexCount:b,vertices:te,viewMatrix:Z,buffer:{vbo:I,step:E,attribs:xi},enabled:!0,expanded:!1,uuid:ht()}),He+=b,Re(w,n);break}}};window.addEventListener("message",async w=>{if(typeof w.data=="object"&&w.data.type==="pluginMessage"){if(typeof w.data.content!="object"||!i(ue)||!i(p))return;dr(i(ue),i(p),w.data.content)}}),ba(()=>(i(ue),i(p),i(qe),i(d),i(s),i(O),i(k),i(ie)),()=>{if(i(ue)&&(Xt(ue,i(ue).width=ke),Xt(ue,i(ue).height=Be),C(p,i(ue).getContext("webgl2")),i(p))){C(ct,i(p).getParameter(i(p).MAX_VERTEX_ATTRIBS)),C(qe,i(p).createTexture()),i(p).bindTexture(i(p).TEXTURE_2D,i(qe));const w=new Uint8Array([255,255,255,255]);i(p).texImage2D(i(p).TEXTURE_2D,0,i(p).RGBA,1,1,0,i(p).RGBA,i(p).UNSIGNED_BYTE,w);const n=Ze(i(p),i(p).VERTEX_SHADER,si,"2D vertex shader"),c=Ze(i(p),i(p).FRAGMENT_SHADER,fi,"2D fragment shader"),v=Ze(i(p),i(p).VERTEX_SHADER,li,"3D vertex shader"),j=Ze(i(p),i(p).VERTEX_SHADER,ci,"3D anim vertex shader"),b=Ze(i(p),i(p).FRAGMENT_SHADER,di,"3D fragment shader"),y=Ze(i(p),i(p).VERTEX_SHADER,_i,"particle vertex shader"),M=Ze(i(p),i(p).VERTEX_SHADER,vi,"checkers vertex shader"),E=Ze(i(p),i(p).FRAGMENT_SHADER,hi,"checkers fragment shader");C(d,Tt(i(p),n,c,"2D program")),C(h,i(p).getUniformLocation(i(d),"atlas_wh_screen_wh")),C(l,i(p).getUniformLocation(i(d),"tex")),C(s,Tt(i(p),v,b,"3D program")),C(_,i(p).getUniformLocation(i(s),"modelmatrix")),C(x,i(p).getUniformLocation(i(s),"viewmatrix")),C(f,i(p).getUniformLocation(i(s),"projmatrix")),C(m,i(p).getUniformLocation(i(s),"atlas_wh")),C(g,i(p).getUniformLocation(i(s),"tex")),C(O,Tt(i(p),j,b,"3D animated program")),C(W,i(p).getUniformLocation(i(O),"modelmatrix")),C(T,i(p).getUniformLocation(i(O),"viewmatrix")),C(L,i(p).getUniformLocation(i(O),"projmatrix")),C(H,i(p).getUniformLocation(i(O),"atlas_wh")),C(D,i(p).getUniformLocation(i(O),"tex")),C(k,Tt(i(p),y,b,"Particles program")),C(K,i(p).getUniformLocation(i(k),"viewmatrix")),C(G,i(p).getUniformLocation(i(k),"projmatrix")),C(N,i(p).getUniformLocation(i(k),"tex")),C(ae,i(p).getUniformLocation(i(k),"atlas_wh")),C(ie,Tt(i(p),M,E,"Checkers program")),C(de,i(p).getUniformLocation(i(ie),"screen_wh")),i(p).deleteShader(n),i(p).deleteShader(c),i(p).deleteShader(v),i(p).deleteShader(b),i(p).deleteShader(j),i(p).deleteShader(y),i(p).deleteShader(M),i(p).deleteShader(E),i(p).activeTexture(i(p).TEXTURE0+u),i(p).enable(i(p).SCISSOR_TEST),i(p).disable(i(p).CULL_FACE),i(p).disable(i(p).DEPTH_TEST),i(p).enable(i(p).BLEND),i(p).blendEquationSeparate(i(p).FUNC_ADD,i(p).FUNC_ADD),i(p).depthFunc(i(p).LEQUAL),Re(i(ue),i(p))}}),ya(),Nt();var Bt=Zi(),Ot=Ue(Bt);ii(Ot,w=>C(ue,w),()=>i(ue));var ge=fe(Ot,2);{var Et=w=>{var n=Yi(),c=Ue(n),v=We(c);Hi(v,{get data(){return i(t)},set data(b){C(t,b)},$$legacy:!0});var j=fe(c,2);j.__click=[zi,dt],J(w,n)},Pn=(w,n)=>{{var c=v=>{var j=qi();j.__click=[ji,dt],J(v,j)};pe(w,v=>{i(Me)&&v(c)},n)}};pe(ge,w=>{i(dt)?w(Et):w(Pn,!1)})}var Mn=fe(ge,2);{var Cn=w=>{var n=Ki();n.__click=[Gi,t,Re,ue,p],J(w,n)};pe(Mn,w=>{i(t).selectedTexture&&w(Cn)})}J(e,Bt),gt()}cr(["click"]);Xa(Qi,{target:document.body});
