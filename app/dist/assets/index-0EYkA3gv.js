(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerPolicy&&(o.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?o.credentials="include":u.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(u){if(u.ep)return;u.ep=!0;const o=r(u);fetch(u.href,o)}})();const Hr=!1;var yr=Array.isArray,Nn=Array.prototype.indexOf,br=Array.from,Bn=Object.defineProperty,pt=Object.getOwnPropertyDescriptor,an=Object.getOwnPropertyDescriptors,kn=Object.prototype,Hn=Array.prototype,Er=Object.getPrototypeOf,$r=Object.isExtensible;function $n(e){return e()}function hr(e){for(var t=0;t<e.length;t++)e[t]()}const Re=2,on=4,er=8,Ar=16,We=32,mt=64,Wt=128,Ae=256,Xt=512,_e=1024,Xe=2048,ft=4096,He=8192,tr=16384,Vn=32768,Fr=65536,un=1<<17,Wn=1<<19,sn=1<<20,pr=1<<21,ut=Symbol("$state"),Xn=Symbol("legacy props"),zn=Symbol("");function fn(e){return e===this.v}function Yn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Tr(e){return!Yn(e,this.v)}function jn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function qn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Gn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Kn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Zn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Qn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Jn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ea(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ct=!1,ta=!1;function ra(){Ct=!0}const Rr=1,Sr=2,ln=4,na=8,aa=16,ia=1,oa=2,ua=4,sa=8,fa=16,la=1,ca=2,ce=Symbol(),da="http://www.w3.org/1999/xhtml";let Q=null;function Vr(e){Q=e}function wt(e,t=!1,r){var a=Q={p:Q,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Ct&&!t&&(Q.l={s:null,u:null,r1:[],r2:Ut(!1)}),mn(()=>{a.d=!0})}function gt(e){const t=Q;if(t!==null){const c=t.e;if(c!==null){var r=q,a=z;t.e=null;try{for(var u=0;u<c.length;u++){var o=c[u];nt(o.effect),Ce(o.reaction),Dr(o.fn)}}finally{nt(r),Ce(a)}}Q=t.p,t.m=!0}return{}}function rr(){return!Ct||Q!==null&&Q.l===null}function ot(e,t){if(typeof e!="object"||e===null||ut in e)return e;const r=Er(e);if(r!==kn&&r!==Hn)return e;var a=new Map,u=yr(e),o=Ge(0),c=z,m=l=>{var s=z;Ce(c);var d;return d=l(),Ce(s),d};return u&&a.set("length",Ge(e.length)),new Proxy(e,{defineProperty(l,s,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Qn();var h=a.get(s);return h===void 0?(h=m(()=>Ge(d.value)),a.set(s,h)):L(h,m(()=>ot(d.value))),!0},deleteProperty(l,s){var d=a.get(s);if(d===void 0)s in l&&a.set(s,m(()=>Ge(ce)));else{if(u&&typeof s=="string"){var h=a.get("length"),f=Number(s);Number.isInteger(f)&&f<h.v&&L(h,f)}L(d,ce),Wr(o)}return!0},get(l,s,d){var g;if(s===ut)return e;var h=a.get(s),f=s in l;if(h===void 0&&(!f||(g=pt(l,s))!=null&&g.writable)&&(h=m(()=>Ge(ot(f?l[s]:ce))),a.set(s,h)),h!==void 0){var x=i(h);return x===ce?void 0:x}return Reflect.get(l,s,d)},getOwnPropertyDescriptor(l,s){var d=Reflect.getOwnPropertyDescriptor(l,s);if(d&&"value"in d){var h=a.get(s);h&&(d.value=i(h))}else if(d===void 0){var f=a.get(s),x=f==null?void 0:f.v;if(f!==void 0&&x!==ce)return{enumerable:!0,configurable:!0,value:x,writable:!0}}return d},has(l,s){var x;if(s===ut)return!0;var d=a.get(s),h=d!==void 0&&d.v!==ce||Reflect.has(l,s);if(d!==void 0||q!==null&&(!h||(x=pt(l,s))!=null&&x.writable)){d===void 0&&(d=m(()=>Ge(h?ot(l[s]):ce)),a.set(s,d));var f=i(d);if(f===ce)return!1}return h},set(l,s,d,h){var V;var f=a.get(s),x=s in l;if(u&&s==="length")for(var g=d;g<f.v;g+=1){var B=a.get(g+"");B!==void 0?L(B,ce):g in l&&(B=m(()=>Ge(ce)),a.set(g+"",B))}f===void 0?(!x||(V=pt(l,s))!=null&&V.writable)&&(f=m(()=>Ge(void 0)),L(f,m(()=>ot(d))),a.set(s,f)):(x=f.v!==ce,L(f,m(()=>ot(d))));var $=Reflect.getOwnPropertyDescriptor(l,s);if($!=null&&$.set&&$.set.call(h,d),!x){if(u&&typeof s=="string"){var F=a.get("length"),M=Number(s);Number.isInteger(M)&&M>=F.v&&L(F,M+1)}Wr(o)}return!0},ownKeys(l){i(o);var s=Reflect.ownKeys(l).filter(f=>{var x=a.get(f);return x===void 0||x.v!==ce});for(var[d,h]of a)h.v!==ce&&!(d in l)&&s.push(d);return s},setPrototypeOf(){Jn()}})}function Wr(e,t=1){L(e,e.v+t)}const St=new Map;function Ut(e,t){var r={f:0,v:e,reactions:null,equals:fn,rv:0,wv:0};return r}function Ge(e,t){const r=Ut(e);return Ta(r),r}function W(e,t=!1){var a;const r=Ut(e);return t||(r.equals=Tr),Ct&&Q!==null&&Q.l!==null&&((a=Q.l).s??(a.s=[])).push(r),r}function Ht(e,t){return L(e,Ve(()=>i(e))),t}function L(e,t,r=!1){z!==null&&!Pe&&rr()&&(z.f&(Re|Ar))!==0&&!(le!=null&&le.includes(e))&&ea();let a=r?ot(t):t;return Dt(e,a)}function Dt(e,t){if(!e.equals(t)){var r=e.v;Mt?St.set(e,t):St.set(e,r),e.v=t,e.wv=Fn(),cn(e,Xe),rr()&&q!==null&&(q.f&_e)!==0&&(q.f&(We|mt))===0&&(Ee===null?Ra([e]):Ee.push(e))}return t}function cn(e,t){var r=e.reactions;if(r!==null)for(var a=rr(),u=r.length,o=0;o<u;o++){var c=r[o],m=c.f;(m&Xe)===0&&(!a&&c===q||(Se(c,t),(m&(_e|Ae))!==0&&((m&Re)!==0?cn(c,ft):or(c))))}}let _a=!1;var Xr,dn,_n,vn;function va(){if(Xr===void 0){Xr=window,dn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;_n=pt(t,"firstChild").get,vn=pt(t,"nextSibling").get,$r(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),$r(r)&&(r.__t=void 0)}}function Ur(e=""){return document.createTextNode(e)}function zt(e){return _n.call(e)}function nr(e){return vn.call(e)}function $e(e,t){return zt(e)}function Te(e,t){{var r=zt(e);return r instanceof Comment&&r.data===""?nr(r):r}}function oe(e,t=1,r=!1){let a=e;for(;t--;)a=nr(a);return a}function ha(e){e.textContent=""}function It(e){var t=Re|Xe,r=z!==null&&(z.f&Re)!==0?z:null;return q===null||r!==null&&(r.f&Ae)!==0?t|=Ae:q.f|=sn,{ctx:Q,deps:null,effects:null,equals:fn,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??q}}function ke(e){const t=It(e);return t.equals=Tr,t}function hn(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)rt(t[r])}}function pa(e){for(var t=e.parent;t!==null;){if((t.f&Re)===0)return t;t=t.parent}return null}function xa(e){var t,r=q;nt(pa(e));try{hn(e),t=Rn(e)}finally{nt(r)}return t}function pn(e){var t=xa(e),r=(et||(e.f&Ae)!==0)&&e.deps!==null?ft:_e;Se(e,r),e.equals(t)||(e.v=t,e.wv=Fn())}function xn(e){q===null&&z===null&&Gn(),z!==null&&(z.f&Ae)!==0&&q===null&&qn(),Mt&&jn()}function ma(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function yt(e,t,r,a=!0){var u=q,o={ctx:Q,deps:null,nodes_start:null,nodes_end:null,f:e|Xe,first:null,fn:t,last:null,next:null,parent:u,prev:null,teardown:null,transitions:null,wv:0};if(r)try{ir(o),o.f|=Vn}catch(l){throw rt(o),l}else t!==null&&or(o);var c=r&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(sn|Wt))===0;if(!c&&a&&(u!==null&&ma(o,u),z!==null&&(z.f&Re)!==0)){var m=z;(m.effects??(m.effects=[])).push(o)}return o}function mn(e){const t=yt(er,null,!1);return Se(t,_e),t.teardown=e,t}function zr(e){xn();var t=q!==null&&(q.f&We)!==0&&Q!==null&&!Q.m;if(t){var r=Q;(r.e??(r.e=[])).push({fn:e,effect:q,reaction:z})}else{var a=Dr(e);return a}}function wa(e){return xn(),Lt(e)}function ga(e){const t=yt(mt,e,!0);return(r={})=>new Promise(a=>{r.outro?Yt(t,()=>{rt(t),a(void 0)}):(rt(t),a(void 0))})}function Dr(e){return yt(on,e,!1)}function ya(e,t){var r=Q,a={effect:null,ran:!1};r.l.r1.push(a),a.effect=Lt(()=>{e(),!a.ran&&(a.ran=!0,L(r.l.r2,!0),Ve(t))})}function ba(){var e=Q;Lt(()=>{if(i(e.l.r2)){for(var t of e.l.r1){var r=t.effect;(r.f&_e)!==0&&Se(r,ft),bt(r)&&ir(r),t.ran=!1}e.l.r2.v=!1}})}function Lt(e){return yt(er,e,!0)}function Je(e,t=[],r=It){const a=t.map(r);return Ir(()=>e(...a.map(i)))}function Ir(e,t=0){return yt(er|Ar|t,e,!0)}function Pt(e,t=!0){return yt(er|We,e,!0,t)}function wn(e){var t=e.teardown;if(t!==null){const r=Mt,a=z;Yr(!0),Ce(null);try{t.call(null)}finally{Yr(r),Ce(a)}}}function gn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var a=r.next;(r.f&mt)!==0?r.parent=null:rt(r,t),r=a}}function Ea(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&We)===0&&rt(t),t=r}}function rt(e,t=!0){var r=!1;if((t||(e.f&Wn)!==0)&&e.nodes_start!==null){for(var a=e.nodes_start,u=e.nodes_end;a!==null;){var o=a===u?null:nr(a);a.remove(),a=o}r=!0}gn(e,t&&!r),Zt(e,0),Se(e,tr);var c=e.transitions;if(c!==null)for(const l of c)l.stop();wn(e);var m=e.parent;m!==null&&m.first!==null&&yn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function yn(e){var t=e.parent,r=e.prev,a=e.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=r))}function Yt(e,t){var r=[];Pr(e,r,!0),bn(r,()=>{rt(e),t&&t()})}function bn(e,t){var r=e.length;if(r>0){var a=()=>--r||t();for(var u of e)u.out(a)}else t()}function Pr(e,t,r){if((e.f&He)===0){if(e.f^=He,e.transitions!==null)for(const c of e.transitions)(c.is_global||r)&&t.push(c);for(var a=e.first;a!==null;){var u=a.next,o=(a.f&Fr)!==0||(a.f&We)!==0;Pr(a,t,o?r:!1),a=u}}}function jt(e){En(e,!0)}function En(e,t){if((e.f&He)!==0){e.f^=He,(e.f&_e)===0&&(e.f^=_e),bt(e)&&(Se(e,Xe),or(e));for(var r=e.first;r!==null;){var a=r.next,u=(r.f&Fr)!==0||(r.f&We)!==0;En(r,u?t:!1),r=a}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let qt=[];function Aa(){var e=qt;qt=[],hr(e)}function Cr(e){qt.length===0&&queueMicrotask(Aa),qt.push(e)}let $t=!1,xr=!1,Gt=null,st=!1,Mt=!1;function Yr(e){Mt=e}let Vt=[];let z=null,Pe=!1;function Ce(e){z=e}let q=null;function nt(e){q=e}let le=null;function Fa(e){le=e}function Ta(e){z!==null&&z.f&pr&&(le===null?Fa([e]):le.push(e))}let fe=null,xe=0,Ee=null;function Ra(e){Ee=e}let An=1,Kt=0,et=!1,Qe=null;function Fn(){return++An}function bt(e){var h;var t=e.f;if((t&Xe)!==0)return!0;if((t&ft)!==0){var r=e.deps,a=(t&Ae)!==0;if(r!==null){var u,o,c=(t&Xt)!==0,m=a&&q!==null&&!et,l=r.length;if(c||m){var s=e,d=s.parent;for(u=0;u<l;u++)o=r[u],(c||!((h=o==null?void 0:o.reactions)!=null&&h.includes(s)))&&(o.reactions??(o.reactions=[])).push(s);c&&(s.f^=Xt),m&&d!==null&&(d.f&Ae)===0&&(s.f^=Ae)}for(u=0;u<l;u++)if(o=r[u],bt(o)&&pn(o),o.wv>e.wv)return!0}(!a||q!==null&&!et)&&Se(e,_e)}return!1}function Sa(e,t){for(var r=t;r!==null;){if((r.f&Wt)!==0)try{r.fn(e);return}catch{r.f^=Wt}r=r.parent}throw $t=!1,e}function Ua(e){return(e.f&tr)===0&&(e.parent===null||(e.parent.f&Wt)===0)}function ar(e,t,r,a){if($t){if(r===null&&($t=!1),Ua(t))throw e;return}r!==null&&($t=!0);{Sa(e,t);return}}function Tn(e,t,r=!0){var a=e.reactions;if(a!==null)for(var u=0;u<a.length;u++){var o=a[u];le!=null&&le.includes(e)||((o.f&Re)!==0?Tn(o,t,!1):t===o&&(r?Se(o,Xe):(o.f&_e)!==0&&Se(o,ft),or(o)))}}function Rn(e){var x;var t=fe,r=xe,a=Ee,u=z,o=et,c=le,m=Q,l=Pe,s=e.f;fe=null,xe=0,Ee=null,et=(s&Ae)!==0&&(Pe||!st||z===null),z=(s&(We|mt))===0?e:null,le=null,Vr(e.ctx),Pe=!1,Kt++,e.f|=pr;try{var d=(0,e.fn)(),h=e.deps;if(fe!==null){var f;if(Zt(e,xe),h!==null&&xe>0)for(h.length=xe+fe.length,f=0;f<fe.length;f++)h[xe+f]=fe[f];else e.deps=h=fe;if(!et)for(f=xe;f<h.length;f++)((x=h[f]).reactions??(x.reactions=[])).push(e)}else h!==null&&xe<h.length&&(Zt(e,xe),h.length=xe);if(rr()&&Ee!==null&&!Pe&&h!==null&&(e.f&(Re|ft|Xe))===0)for(f=0;f<Ee.length;f++)Tn(Ee[f],e);return u!==null&&(Kt++,Ee!==null&&(a===null?a=Ee:a.push(...Ee))),d}finally{fe=t,xe=r,Ee=a,z=u,et=o,le=c,Vr(m),Pe=l,e.f^=pr}}function Da(e,t){let r=t.reactions;if(r!==null){var a=Nn.call(r,e);if(a!==-1){var u=r.length-1;u===0?r=t.reactions=null:(r[a]=r[u],r.pop())}}r===null&&(t.f&Re)!==0&&(fe===null||!fe.includes(t))&&(Se(t,ft),(t.f&(Ae|Xt))===0&&(t.f^=Xt),hn(t),Zt(t,0))}function Zt(e,t){var r=e.deps;if(r!==null)for(var a=t;a<r.length;a++)Da(e,r[a])}function ir(e){var t=e.f;if((t&tr)===0){Se(e,_e);var r=q,a=Q,u=st;q=e,st=!0;try{(t&Ar)!==0?Ea(e):gn(e),wn(e);var o=Rn(e);e.teardown=typeof o=="function"?o:null,e.wv=An;var c=e.deps,m;Hr&&ta&&e.f&Xe}catch(l){ar(l,e,r,a||e.ctx)}finally{st=u,q=r}}}function Ia(){try{Kn()}catch(e){if(Gt!==null)ar(e,Gt,null);else throw e}}function Pa(){var e=st;try{var t=0;for(st=!0;Vt.length>0;){t++>1e3&&Ia();var r=Vt,a=r.length;Vt=[];for(var u=0;u<a;u++){var o=La(r[u]);Ca(o)}}}finally{xr=!1,st=e,Gt=null,St.clear()}}function Ca(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var a=e[r];if((a.f&(tr|He))===0)try{bt(a)&&(ir(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?yn(a):a.fn=null))}catch(u){ar(u,a,null,a.ctx)}}}function or(e){xr||(xr=!0,queueMicrotask(Pa));for(var t=Gt=e;t.parent!==null;){t=t.parent;var r=t.f;if((r&(mt|We))!==0){if((r&_e)===0)return;t.f^=_e}}Vt.push(t)}function La(e){for(var t=[],r=e;r!==null;){var a=r.f,u=(a&(We|mt))!==0,o=u&&(a&_e)!==0;if(!o&&(a&He)===0){if((a&on)!==0)t.push(r);else if(u)r.f^=_e;else{var c=z;try{z=r,bt(r)&&ir(r)}catch(s){ar(s,r,null,r.ctx)}finally{z=c}}var m=r.first;if(m!==null){r=m;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)r=l.next,l=l.parent}return t}function i(e){var t=e.f,r=(t&Re)!==0;if(Qe!==null&&Qe.add(e),z!==null&&!Pe){if(!(le!=null&&le.includes(e))){var a=z.deps;e.rv<Kt&&(e.rv=Kt,fe===null&&a!==null&&a[xe]===e?xe++:fe===null?fe=[e]:(!et||!fe.includes(e))&&fe.push(e))}}else if(r&&e.deps===null&&e.effects===null){var u=e,o=u.parent;o!==null&&(o.f&Ae)===0&&(u.f^=Ae)}return r&&(u=e,bt(u)&&pn(u)),Mt&&St.has(e)?St.get(e):e.v}function Ma(e){var t=Qe;Qe=new Set;var r=Qe,a;try{if(Ve(e),t!==null)for(a of Qe)t.add(a)}finally{Qe=t}return r}function xt(e){var t=Ma(()=>Ve(e));for(var r of t)if((r.f&un)!==0)for(const a of r.deps||[])(a.f&Re)===0&&Dt(a,a.v);else Dt(r,r.v)}function Ve(e){var t=Pe;try{return Pe=!0,e()}finally{Pe=t}}const Oa=-7169;function Se(e,t){e.f=e.f&Oa|t}function Na(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ut in e)mr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&ut in r&&mr(r)}}}function mr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let a in e)try{mr(e[a],t)}catch{}const r=Er(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=an(r);for(let u in a){const o=a[u].get;if(o)try{o.call(e)}catch{}}}}}const Ba=["touchstart","touchmove"];function ka(e){return Ba.includes(e)}let jr=!1;function Ha(){jr||(jr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Sn(e){var t=z,r=q;Ce(null),nt(null);try{return e()}finally{Ce(t),nt(r)}}function $a(e,t,r,a=r){e.addEventListener(t,()=>Sn(r));const u=e.__on_r;u?e.__on_r=()=>{u(),a(!0)}:e.__on_r=()=>a(!0),Ha()}const Un=new Set,wr=new Set;function Va(e,t,r,a={}){function u(o){if(a.capture||Tt.call(t,o),!o.cancelBubble)return Sn(()=>r==null?void 0:r.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Cr(()=>{t.addEventListener(e,u,a)}):t.addEventListener(e,u,a),u}function Wa(e,t,r,a,u){var o={capture:a,passive:u},c=Va(e,t,r,o);(t===document.body||t===window||t===document)&&mn(()=>{t.removeEventListener(e,c,o)})}function ur(e){for(var t=0;t<e.length;t++)Un.add(e[t]);for(var r of wr)r(e)}function Tt(e){var M;var t=this,r=t.ownerDocument,a=e.type,u=((M=e.composedPath)==null?void 0:M.call(e))||[],o=u[0]||e.target,c=0,m=e.__root;if(m){var l=u.indexOf(m);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var s=u.indexOf(t);if(s===-1)return;l<=s&&(c=l)}if(o=u[c]||e.target,o!==t){Bn(e,"currentTarget",{configurable:!0,get(){return o||r}});var d=z,h=q;Ce(null),nt(null);try{for(var f,x=[];o!==null;){var g=o.assignedSlot||o.parentNode||o.host||null;try{var B=o["__"+a];if(B!=null&&(!o.disabled||e.target===o))if(yr(B)){var[$,...F]=B;$.apply(o,[e,...F])}else B.call(o,e)}catch(V){f?x.push(V):f=V}if(e.cancelBubble||g===t||g===null)break;o=g}if(f){for(let V of x)queueMicrotask(()=>{throw V});throw f}}finally{e.__root=t,delete e.currentTarget,Ce(d),nt(h)}}}function Xa(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function gr(e,t){var r=q;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function te(e,t){var r=(t&la)!==0,a=(t&ca)!==0,u,o=!e.startsWith("<!>");return()=>{u===void 0&&(u=Xa(o?e:"<!>"+e),r||(u=zt(u)));var c=a||dn?document.importNode(u,!0):u.cloneNode(!0);if(r){var m=zt(c),l=c.lastChild;gr(m,l)}else gr(c,c);return c}}function qr(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Ur();return e.append(t,r),gr(t,r),e}function Z(e,t){e!==null&&e.before(t)}function tt(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function za(e,t){return Ya(e,t)}const vt=new Map;function Ya(e,{target:t,anchor:r,props:a={},events:u,context:o,intro:c=!0}){va();var m=new Set,l=h=>{for(var f=0;f<h.length;f++){var x=h[f];if(!m.has(x)){m.add(x);var g=ka(x);t.addEventListener(x,Tt,{passive:g});var B=vt.get(x);B===void 0?(document.addEventListener(x,Tt,{passive:g}),vt.set(x,1)):vt.set(x,B+1)}}};l(br(Un)),wr.add(l);var s=void 0,d=ga(()=>{var h=r??t.appendChild(Ur());return Pt(()=>{if(o){wt({});var f=Q;f.c=o}u&&(a.$$events=u),s=e(h,a)||{},o&&gt()}),()=>{var g;for(var f of m){t.removeEventListener(f,Tt);var x=vt.get(f);--x===0?(document.removeEventListener(f,Tt),vt.delete(f)):vt.set(f,x)}wr.delete(l),h!==r&&((g=h.parentNode)==null||g.removeChild(h))}});return ja.set(s,d),s}let ja=new WeakMap;function de(e,t,[r,a]=[0,0]){var u=e,o=null,c=null,m=ce,l=r>0?Fr:0,s=!1;const d=(f,x=!0)=>{s=!0,h(x,f)},h=(f,x)=>{m!==(m=f)&&(m?(o?jt(o):x&&(o=Pt(()=>x(u))),c&&Yt(c,()=>{c=null})):(c?jt(c):x&&(c=Pt(()=>x(u,[r+1,a]))),o&&Yt(o,()=>{o=null})))};Ir(()=>{s=!1,t(d),s||h(null,null)},l)}function Qt(e,t){return t}function qa(e,t,r,a){for(var u=[],o=t.length,c=0;c<o;c++)Pr(t[c].e,u,!0);var m=o>0&&u.length===0&&r!==null;if(m){var l=r.parentNode;ha(l),l.append(r),a.clear(),Ze(e,t[0].prev,t[o-1].next)}bn(u,()=>{for(var s=0;s<o;s++){var d=t[s];m||(a.delete(d.k),Ze(e,d.prev,d.next)),rt(d.e,!m)}})}function Jt(e,t,r,a,u,o=null){var c=e,m={flags:t,items:new Map,first:null},l=(t&ln)!==0;if(l){var s=e;c=s.appendChild(Ur())}var d=null,h=!1,f=ke(()=>{var x=r();return yr(x)?x:x==null?[]:br(x)});Ir(()=>{var x=i(f),g=x.length;h&&g===0||(h=g===0,Ga(x,m,c,u,t,a,r),o!==null&&(g===0?d?jt(d):d=Pt(()=>o(c)):d!==null&&Yt(d,()=>{d=null})),i(f))})}function Ga(e,t,r,a,u,o,c){var ze,lt,Le,Me;var m=(u&na)!==0,l=(u&(Rr|Sr))!==0,s=e.length,d=t.items,h=t.first,f=h,x,g=null,B,$=[],F=[],M,V,U,O;if(m)for(O=0;O<s;O+=1)M=e[O],V=o(M,O),U=d.get(V),U!==void 0&&((ze=U.a)==null||ze.measure(),(B??(B=new Set)).add(U));for(O=0;O<s;O+=1){if(M=e[O],V=o(M,O),U=d.get(V),U===void 0){var Y=f?f.e.nodes_start:r;g=Za(Y,t,g,g===null?t.first:g.next,M,V,O,a,u,c),d.set(V,g),$=[],F=[],f=g.next;continue}if(l&&Ka(U,M,O,u),(U.e.f&He)!==0&&(jt(U.e),m&&((lt=U.a)==null||lt.unfix(),(B??(B=new Set)).delete(U))),U!==f){if(x!==void 0&&x.has(U)){if($.length<F.length){var ne=F[0],k;g=ne.prev;var ee=$[0],re=$[$.length-1];for(k=0;k<$.length;k+=1)Gr($[k],ne,r);for(k=0;k<F.length;k+=1)x.delete(F[k]);Ze(t,ee.prev,re.next),Ze(t,g,ee),Ze(t,re,ne),f=ne,g=re,O-=1,$=[],F=[]}else x.delete(U),Gr(U,f,r),Ze(t,U.prev,U.next),Ze(t,U,g===null?t.first:g.next),Ze(t,g,U),g=U;continue}for($=[],F=[];f!==null&&f.k!==V;)(f.e.f&He)===0&&(x??(x=new Set)).add(f),F.push(f),f=f.next;if(f===null)continue;U=f}$.push(U),g=U,f=U.next}if(f!==null||x!==void 0){for(var ve=x===void 0?[]:br(x);f!==null;)(f.e.f&He)===0&&ve.push(f),f=f.next;var j=ve.length;if(j>0){var ae=(u&ln)!==0&&s===0?r:null;if(m){for(O=0;O<j;O+=1)(Le=ve[O].a)==null||Le.measure();for(O=0;O<j;O+=1)(Me=ve[O].a)==null||Me.fix()}qa(t,ve,ae,d)}}m&&Cr(()=>{var me;if(B!==void 0)for(U of B)(me=U.a)==null||me.apply()}),q.first=t.first&&t.first.e,q.last=g&&g.e}function Ka(e,t,r,a){(a&Rr)!==0&&Dt(e.v,t),(a&Sr)!==0?Dt(e.i,r):e.i=r}function Za(e,t,r,a,u,o,c,m,l,s){var d=(l&Rr)!==0,h=(l&aa)===0,f=d?h?W(u):Ut(u):u,x=(l&Sr)===0?c:Ut(c),g={i:x,v:f,k:o,a:null,e:null,prev:r,next:a};try{return g.e=Pt(()=>m(e,f,x,s),_a),g.e.prev=r&&r.e,g.e.next=a&&a.e,r===null?t.first=g:(r.next=g,r.e.next=g.e),a!==null&&(a.prev=g,a.e.prev=g.e),g}finally{}}function Gr(e,t,r){for(var a=e.next?e.next.e.nodes_start:r,u=t?t.e.nodes_start:r,o=e.e.nodes_start;o!==a;){var c=nr(o);u.before(o),o=c}}function Ze(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Dn(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(r=Dn(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Qa(){for(var e,t,r=0,a="",u=arguments.length;r<u;r++)(e=arguments[r])&&(t=Dn(e))&&(a&&(a+=" "),a+=t);return a}function Ja(e){return typeof e=="object"?Qa(e):e??""}function ei(e,t,r){var a=e==null?"":""+e;return a===""?null:a}function Kr(e,t,r,a,u,o){var c=e.__className;if(c!==r){var m=ei(r);m==null?e.removeAttribute("class"):e.className=m,e.__className=r}return o}const ti=Symbol("is custom element"),ri=Symbol("is html");function At(e,t,r,a){var u=ni(e);u[t]!==(u[t]=r)&&(t==="loading"&&(e[zn]=r),r==null?e.removeAttribute(t):typeof r!="string"&&ai(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function ni(e){return e.__attributes??(e.__attributes={[ti]:e.nodeName.includes("-"),[ri]:e.namespaceURI===da})}var Zr=new Map;function ai(e){var t=Zr.get(e.nodeName);if(t)return t;Zr.set(e.nodeName,t=[]);for(var r,a=e,u=Element.prototype;u!==a;){r=an(a);for(var o in r)r[o].set&&t.push(o);a=Er(a)}return t}function ii(e,t,r=t){$a(e,"change",a=>{var u=a?e.defaultChecked:e.checked;r(u)}),Ve(t)==null&&r(e.checked),Lt(()=>{var a=t();e.checked=!!a})}function Qr(e,t){return e===t||(e==null?void 0:e[ut])===t}function oi(e={},t,r,a){return Dr(()=>{var u,o;return Lt(()=>{u=o,o=[],Ve(()=>{e!==r(...o)&&(t(e,...o),u&&Qr(r(...u),e)&&t(null,...u))})}),()=>{Cr(()=>{o&&Qr(r(...o),e)&&t(null,...o)})}}),e}function Ot(e=!1){const t=Q,r=t.l.u;if(!r)return;let a=()=>Na(t.s);if(e){let u=0,o={};const c=It(()=>{let m=!1;const l=t.s;for(const s in l)l[s]!==o[s]&&(o[s]=l[s],m=!0);return m&&u++,u});a=()=>i(c)}r.b.length&&wa(()=>{Jr(t,a),hr(r.b)}),zr(()=>{const u=Ve(()=>r.m.map($n));return()=>{for(const o of u)typeof o=="function"&&o()}}),r.a.length&&zr(()=>{Jr(t,a),hr(r.a)})}function Jr(e,t){if(e.l.s)for(const r of e.l.s)i(r);t()}let Bt=!1;function ui(e){var t=Bt;try{return Bt=!1,[e(),Bt]}finally{Bt=t}}function en(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function Ie(e,t,r,a){var ne;var u=(r&ia)!==0,o=!Ct||(r&oa)!==0,c=(r&sa)!==0,m=(r&fa)!==0,l=!1,s;c?[s,l]=ui(()=>e[t]):s=e[t];var d=ut in e||Xn in e,h=c&&(((ne=pt(e,t))==null?void 0:ne.set)??(d&&t in e&&(k=>e[t]=k)))||void 0,f=a,x=!0,g=!1,B=()=>(g=!0,x&&(x=!1,m?f=Ve(a):f=a),f);s===void 0&&a!==void 0&&(h&&o&&Zn(),s=B(),h&&h(s));var $;if(o)$=()=>{var k=e[t];return k===void 0?B():(x=!0,g=!1,k)};else{var F=(u?It:ke)(()=>e[t]);F.f|=un,$=()=>{var k=i(F);return k!==void 0&&(f=void 0),k===void 0?f:k}}if((r&ua)===0)return $;if(h){var M=e.$$legacy;return function(k,ee){return arguments.length>0?((!o||!ee||M||l)&&h(ee?$():k),k):$()}}var V=!1,U=!1,O=W(s),Y=It(()=>{var k=$(),ee=i(O);return V?(V=!1,U=!0,ee):(U=!1,O.v=k)});return c&&i(Y),u||(Y.equals=Tr),function(k,ee){if(Qe!==null&&(V=U,$(),i(O)),arguments.length>0){const re=ee?i(Y):o&&c?ot(k):k;if(!Y.equals(re)){if(V=!0,L(O,re),g&&f!==void 0&&(f=re),en(Y))return k;Ve(()=>i(Y))}return k}return en(Y)?Y.v:i(Y)}}const si="5";var nn;typeof window<"u"&&((nn=window.__svelte??(window.__svelte={})).v??(nn.v=new Set)).add(si);ra();const fi=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,li=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,ci=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,di=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,_i=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,vi=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,hi=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,pi=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,kt=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],xi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],mi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],wi=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],gi=[{count:2,offset:0}],Ke=(e,t,r,a)=>{const u=e.createShader(t);if(!u)throw new Error(`failed to create shader '${a}'`);if(e.shaderSource(u,r),e.compileShader(u),!e.getShaderParameter(u,e.COMPILE_STATUS)){const o=e.getShaderInfoLog(u);throw new Error(`compilation error in shader '${a}':
${o}`)}return u},Ft=(e,t,r,a)=>{const u=e.createProgram();if(!u)throw new Error(`failed to create program '${a}'`);if(e.attachShader(u,t),e.attachShader(u,r),e.linkProgram(u),e.detachShader(u,t),e.detachShader(u,r),!e.getProgramParameter(u,e.LINK_STATUS)){const o=e.getProgramInfoLog(u);throw new Error(`link error in program '${a}':
${o}`)}return u};var yi=(e,t)=>t(!1),bi=te('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),Ei=(e,t)=>t(!0),Ai=te('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),Fi=te('<input type="checkbox">'),Ti=te("<!> <!> <label> </label> <br>",1);function Rt(e,t){wt(t,!1);let r=Ie(t,"expanded",12),a=Ie(t,"id",8),u=Ie(t,"text",8),o=Ie(t,"checked",12,null),c=Ie(t,"onexpandedchange",8,null),m=Ie(t,"oncheckedchange",8,null);const l=F=>{r(F),c()&&c()()};Ot();var s=Ti(),d=Te(s);{var h=F=>{var M=bi();M.__click=[yi,l],Je(()=>At(M,"id",o()===null?a():null)),Z(F,M)},f=F=>{var M=Ai();M.__click=[Ei,l],Je(()=>At(M,"id",o()===null?a():null)),Z(F,M)};de(d,F=>{r()?F(h):F(f,!1)})}var x=oe(d,2);{var g=F=>{var M=Fi();At(M,"draggable",!0),M.__change=function(...V){var U;(U=m())==null||U.apply(this,V)},Je(()=>At(M,"id",a())),ii(M,o),Z(F,M)};de(x,F=>{o()!==null&&F(g)})}var B=oe(x,2),$=$e(B);Je(()=>{At(B,"for",a()),tt($,u())}),Z(e,s),gt()}ur(["click","change"]);var Ri=te('<div class="ml-4 w-full"> <br> <br> <br> <br></div>');function tn(e,t){wt(t,!1);let r=Ie(t,"image",8);Ot();var a=Ri(),u=$e(a),o=oe(u,2),c=oe(o,2),m=oe(c,2);Je((l,s,d,h)=>{tt(u,`screen: ${r().x??""},${r().y??""}
  ${r().w??""}x${r().h??""} `),tt(o,` atlas: ${r().ax??""},${r().ay??""}
  ${r().aw??""}x${r().ah??""} `),tt(c,` rgb: ${l??""}, ${s??""}, ${d??""} `),tt(m,` alpha: ${h??""} `)},[()=>r().r.toPrecision(4),()=>r().g.toPrecision(4),()=>r().b.toPrecision(4),()=>r().a.toPrecision(4)],ke),Z(e,a),gt()}var Si=te("<div> </div>"),Ui=(e,t,r)=>{const a=t().textureId;r(r().selectedTextureId=a.toString(),!0),r(r().selectedTexture=r().textures[a],!0),r().redraw()},Di=te('<button class="hover:bg-gray-200"> </button> <br>',1),Ii=te("<!> <!>",1),Pi=te('<div class="ml-2"></div>'),Ci=te("<!> <!>",1),Li=te("<!> <!>",1),Mi=te("<!> <!>",1),Oi=te('<div class="ml-3 text-sm"><!> <!> <!></div>');function Ni(e,t){wt(t,!1);let r=Ie(t,"entity",8),a=Ie(t,"menuData",12);const u=6,o=100;let c=W(!1);function m(F){return"images"in F}let l=W(null),s=W(0);if(r().type==="batch2d"){const F=r().vertices,M=o*2,V=F.length>=M*u;L(l,[]);let U=[];for(let O=0;O<F.length-(u-1);O+=u){const Y=F[O];let ne=Y.x,k=Y.x,ee=Y.y,re=Y.y;for(let j=1;j<u;j+=1){const ae=F[O+j];ae.x<ne&&(ne=ae.x),ae.x>k&&(k=ae.x),ae.y<ee&&(ee=ae.y),ae.y>re&&(re=ae.y)}const ve={x:ne,y:ee,w:k-ne,h:re-ee,ax:Y.ax,ay:Y.ay,aw:Y.aw,ah:Y.ah,r:Y.r,g:Y.g,b:Y.b,a:Y.a,expanded:!1};if(V){if(U.push(ve),U.length>=o){const j=`${i(l).length*o}-${i(l).length*o+U.length-1}`;i(l).push({images:U,desc:j,expanded:!1}),U=[]}}else i(l).push(ve);L(s,i(s)+1)}if(U.length>0){const O=`${i(l).length*o}-${i(l).length*o+U.length-1}`;i(l).push({images:U,desc:O,expanded:!1})}}Ot();var d=Oi(),h=$e(d);{var f=F=>{var M=Si(),V=$e(M);Je(()=>tt(V,`animated: ${r().animated??""}`)),Z(F,M)};de(h,F=>{typeof r().animated=="boolean"&&F(f)})}var x=oe(h,2);{var g=F=>{var M=Di(),V=Te(M);V.__click=[Ui,r,a];var U=$e(V);Je(()=>tt(U,`texture: #${r().textureId??""}`)),Z(F,M)};de(x,F=>{typeof r().textureId=="number"&&F(g)})}var B=oe(x,2);{var $=F=>{var M=Mi(),V=Te(M);const U=ke(()=>`${r().uuid}-images2d`),O=ke(()=>`2D images (${i(s)})`);Rt(V,{get id(){return i(U)},get text(){return i(O)},get expanded(){return i(c)},set expanded(k){L(c,k)},$$legacy:!0});var Y=oe(V,2);{var ne=k=>{var ee=qr(),re=Te(ee);Jt(re,1,()=>i(l),Qt,(ve,j,ae)=>{var ze=qr(),lt=Te(ze);{var Le=me=>{var Ye=Ci(),Oe=Te(Ye);const at=ke(()=>`${r().uuid}-images-${i(j).desc}`),Ne=ke(()=>`[Images ${i(j).desc}]`);Rt(Oe,{get id(){return i(at)},get text(){return i(Ne)},get expanded(){return i(j).expanded},set expanded(he){i(j).expanded=he,xt(()=>i(l))},$$legacy:!0});var je=oe(Oe,2);{var we=he=>{var it=Pi();Jt(it,5,()=>i(j).images,Qt,(Ue,pe,Et)=>{var ct=Ii(),dt=Te(ct);const ue=ke(()=>`${r().uuid}-images-${i(j).desc}-${Et}`);Rt(dt,{get id(){return i(ue)},text:`Image ${ae*o+Et}`,get expanded(){return i(pe).expanded},set expanded(se){i(pe).expanded=se,xt(()=>(i(l),i(j).images))},$$legacy:!0});var p=oe(dt,2);{var Be=se=>{tn(se,{get image(){return i(pe)}})};de(p,se=>{i(pe).expanded&&se(Be)})}Z(Ue,ct)}),Z(he,it)};de(je,he=>{i(j).expanded&&he(we)})}Z(me,Ye)},Me=me=>{var Ye=Li(),Oe=Te(Ye);const at=ke(()=>`${r().uuid}-images-${ae}`);Rt(Oe,{get id(){return i(at)},text:`Image ${ae}`,get expanded(){return i(j).expanded},set expanded(we){i(j).expanded=we,xt(()=>i(l))},$$legacy:!0});var Ne=oe(Oe,2);{var je=we=>{tn(we,{get image(){return i(j)}})};de(Ne,we=>{i(j).expanded&&we(je)})}Z(me,Ye)};de(lt,me=>{m(i(j))?me(Le):me(Me,!1)})}Z(ve,ze)}),Z(k,ee)};de(Y,k=>{i(c)&&k(ne)})}Z(F,M)};de(B,F=>{i(l)&&i(s)&&F($)})}Z(e,d),gt()}ur(["click"]);var Bi=(e,t,r,a)=>t(r(),a()),ki=te('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),Hi=te("<div><!> <!></div>"),$i=te('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function Vi(e,t){wt(t,!1);let r=Ie(t,"data",12);const a=(l,s)=>{r().selectedTexture===s?r(r().selectedTexture=null,!0):(r(r().selectedTextureId=l,!0),r(r().selectedTexture=s,!0)),r().redraw()},u=l=>{};Ot();var o=$i(),c=oe(Te(o),2);Jt(c,1,()=>Object.entries(r().textures),Qt,(l,s)=>{let d=()=>i(s)[0],h=()=>i(s)[1];var f=ki(),x=$e(f);x.__click=[Bi,a,d,h];var g=$e(x);Je(()=>{Kr(x,1,Ja(r().selectedTexture===h()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),tt(g,`#${d()??""}`)}),Z(l,f)});var m=oe(c,6);Jt(m,1,()=>r().entities,Qt,(l,s,d)=>{var h=Hi();Kr(h,1,`select-none m-0 border-none w-full ${d&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var f=$e(h);Rt(f,{id:`menu${d}`,get text(){return r().entities[d].type},get oncheckedchange(){return r().redraw},get expanded(){return r().entities[d].expanded},set expanded(B){r().entities[d].expanded=B,xt(()=>r().entities)},get checked(){return r().entities[d].enabled},set checked(B){r().entities[d].enabled=B,xt(()=>r().entities)},$$legacy:!0});var x=oe(f,2);{var g=B=>{Ni(B,{get entity(){return r().entities[d]},set entity($){r().entities[d]=$,xt(()=>r().entities)},get menuData(){return r()},set menuData($){r($)},$$legacy:!0})};de(x,B=>{r().entities[d].expanded&&B(g)})}Wa("dragenter",h,()=>u(r().entities[d])),Z(l,h)}),Z(e,o),gt()}ur(["click"]);const ie=[];for(let e=0;e<256;++e)ie.push((e+256).toString(16).slice(1));function Wi(e,t=0){return(ie[e[t+0]]+ie[e[t+1]]+ie[e[t+2]]+ie[e[t+3]]+"-"+ie[e[t+4]]+ie[e[t+5]]+"-"+ie[e[t+6]]+ie[e[t+7]]+"-"+ie[e[t+8]]+ie[e[t+9]]+"-"+ie[e[t+10]]+ie[e[t+11]]+ie[e[t+12]]+ie[e[t+13]]+ie[e[t+14]]+ie[e[t+15]]).toLowerCase()}let vr;const Xi=new Uint8Array(16);function zi(){if(!vr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vr=crypto.getRandomValues.bind(crypto)}return vr(Xi)}const Yi=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rn={randomUUID:Yi};function ht(e,t,r){var u;if(rn.randomUUID&&!e)return rn.randomUUID();e=e||{};const a=e.random??((u=e.rng)==null?void 0:u.call(e))??zi();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Wi(a)}var ji=(e,t)=>L(t,!1),qi=te('<div class="overflow-auto absolute w-56 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),Gi=(e,t)=>L(t,!0),Ki=te('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),Zi=(e,t,r,a,u)=>{Ht(t,i(t).selectedTexture=null),r(i(a),i(u))},Qi=te('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),Ji=te('<canvas class="absolute right-0"></canvas> <!> <!>',1);function eo(e,t){wt(t,!1);let r=W({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",redraw:()=>se(i(ue),i(p))});const a=w=>{const n=ae.get(w);return n?parseInt(n):0},u=(w,n,_,v,K)=>new Float32Array([_/(w*K),0,0,0,0,_/(n*K),0,0,0,0,(v+_)/(v-_),1,0,0,-2*v*_/(v-_),0]),o=0;let c=W(null),m=W(null),l=W(null),s=W(null),d=W(null),h=W(null),f=W(null),x=W(null),g=W(null),B=W(null),$=W(null),F=W(null),M=W(null),V=W(null),U=W(null),O=W(null),Y=W(null),ne=W(null),k=W(null),ee=W(null),re=W(null),ve=W(null),j=null;const ae=new URLSearchParams(window.location.search),ze=ae.get("n"),lt=ze?Math.max(parseInt(ze),1):1,Le=a("w"),Me=a("h"),me=a("gx"),Ye=a("gy"),Oe=a("gw"),at=a("gh");let Ne=0,je=W(0),we=W(),he=null,it=null,Ue=0,pe=0,Et=u(Oe,at,460,66560,5/16),ct=W(!1),dt=W(!1),ue=W(null),p=W(null);const Be=(w,n,_)=>{w.bindBuffer(w.ARRAY_BUFFER,n.vbo);for(let v=0;v<i(je);v+=1){const K=n.attribs[v];if(!K){w.disableVertexAttribArray(v);continue}w.enableVertexAttribArray(v),w.vertexAttribPointer(v,K.count,w.FLOAT,!1,n.step,K.offset)}w.drawArrays(w.TRIANGLES,0,_)},se=(w,n)=>{if(n.viewport(0,0,w.width,w.height),n.scissor(0,0,w.width,w.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),!i(ct)){n.viewport(0,0,w.width,w.height);const _=()=>{n.clearColor(.525,.968,.495,1),n.clear(n.COLOR_BUFFER_BIT)},v=()=>{n.clearColor(.2,.2,.2,1),n.clear(n.COLOR_BUFFER_BIT)},K=Math.min(Ne/lt,1),T=Math.floor(w.width*.65)&-2,E=70,N=8,y=N*2,G=T*K;if(_(),w.width<=y||w.height<=y)return;n.scissor(N,N,w.width-y,w.height-y),v(),n.scissor(w.width/2-(T/2+N),w.height/2-(E/2+N),T+y,E+y),_(),n.scissor(w.width/2-T/2+G,w.height/2-E/2,T-G,E),v();return}if(i(r).selectedTexture){if(n.useProgram(i(re)),n.viewport(0,0,w.width,w.height),n.uniform2fv(i(ve),[w.width,w.height]),!j){const I=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,I),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),n.STATIC_DRAW),j={vbo:I,step:8,attribs:gi}}Be(n,j,6);const _=i(r).selectedTexture,v=w.width/w.height,K=_.width/_.height,T=v>=K,E=T?_.width*w.height/_.height:w.width,N=T?w.height:_.height*w.width/_.width,y=T?(w.width-w.height)/2:0,G=E+y,R=T?0:(w.height-w.width)/2,J=N+R;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(c)),n.uniform4fv(i(m),[_.width,_.height,w.width,w.height]),n.bindTexture(n.TEXTURE_2D,_.texture),n.uniform1i(i(l),o);const D=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,D),n.bufferData(n.ARRAY_BUFFER,new Float32Array([y,R,0,0,0,0,_.width,_.height,1,1,1,1,0,0,0,G,R,1,0,0,0,_.width,_.height,1,1,1,1,0,0,0,y,J,0,1,0,0,_.width,_.height,1,1,1,1,0,0,0,G,R,1,0,0,0,_.width,_.height,1,1,1,1,0,0,0,G,J,1,1,0,0,_.width,_.height,1,1,1,1,0,0,0,y,J,0,1,0,0,_.width,_.height,1,1,1,1,0,0,0]),n.STATIC_DRAW),Be(n,{vbo:D,step:60,attribs:kt},6),n.deleteBuffer(D);return}n.disable(n.SCISSOR_TEST);for(let _ of i(r).entities)if(_.enabled){if(_.type==="batch2d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST);const v=i(r).textures[_.textureId];n.useProgram(i(c)),n.viewport(0,0,Le,Me),n.uniform4fv(i(m),[v.width,v.height,_.targetWidth,_.targetHeight]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(i(l),o),Be(n,_.buffer,_.vertexCount)}if(_.type==="render3d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const v=i(r).textures[_.textureId];n.useProgram(_.animated?i(B):i(s)),n.viewport(me,Ye,Oe,at),n.uniformMatrix4fv(_.animated?i($):i(d),!1,_.modelMatrix),n.uniformMatrix4fv(_.animated?i(F):i(h),!1,_.viewMatrix),n.uniformMatrix4fv(_.animated?i(M):i(f),!1,Et),n.uniform2fv(_.animated?i(V):i(x),[v.width,v.height]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(_.animated?i(U):i(g),o),Be(n,_.buffer,_.vertexCount)}if(_.type==="renderparticles"){n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const v=i(r).textures[_.textureId];n.useProgram(i(O)),n.viewport(me,Ye,Oe,at),n.uniformMatrix4fv(i(Y),!1,_.viewMatrix),n.uniformMatrix4fv(i(ne),!1,Et),n.uniform2fv(i(ee),[v.width,v.height]),n.bindTexture(n.TEXTURE_2D,v.texture),n.uniform1i(i(k),o),Be(n,_.buffer,_.vertexCount)}if(_.type==="icon"||_.type==="bigicon"){const v=_.texSize;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(c)),n.viewport(0,0,Le,Me),n.bindTexture(n.TEXTURE_2D,_.texture),n.uniform1i(i(l),o),n.uniform4fv(i(m),[v,v,_.targetWidth,_.targetHeight]),Be(n,_.buffer,6)}if(_.type==="minimap"){if(he===null)continue;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(i(c)),n.viewport(0,0,Le,Me),n.uniform4fv(i(m),[Ue,pe,_.targetWidth,_.targetHeight]),n.bindTexture(n.TEXTURE_2D,he),n.uniform1i(i(l),o),Be(n,_.buffer,6)}}},In=(w,n,_)=>{const v=new DataView(_),K=v.getUint32(0,!0);switch(K){case 0:{L(ct,!0),se(w,n);break}case 1:{const T=v.getUint32(4,!0),E=v.getUint32(8,!0),N=v.getUint32(12,!0),y=n.createTexture(),G=new Uint8Array(_,16,E*N*4);n.bindTexture(n.TEXTURE_2D,y),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,E,N,0,n.RGBA,n.UNSIGNED_BYTE,G),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),Ht(r,i(r).textures[T]={texture:y,width:E,height:N,data:G});break}case 2:case 3:{const T=K===3,E=T?104:40,N=T?120:56,y=v.getUint32(4,!0),G=v.getUint32(8,!0),R=new Float32Array(16);R.set(new Float32Array(_,16,16));const J=new Float32Array(16);J.set(new Float32Array(_,80,16));const D=new DataView(_,144,y*E),C=new Array(y),I=new ArrayBuffer(y*N),A=new DataView(I);for(let P=0;P<y;P+=1){const b=E*P,H=N*P;let ge=null;T&&(ge=new Float32Array(16),ge.set(new Float32Array(_,144+E*P+40,16)));const X={x:D.getInt16(b,!0),y:D.getInt16(b+2,!0),z:D.getInt16(b+4,!0),u:D.getFloat32(b+8,!0),v:D.getFloat32(b+12,!0),ax:D.getUint16(b+16,!0),ay:D.getUint16(b+18,!0),aw:D.getUint16(b+20,!0),ah:D.getUint16(b+22,!0),r:D.getFloat32(b+24,!0),g:D.getFloat32(b+28,!0),b:D.getFloat32(b+32,!0),a:D.getFloat32(b+36,!0),anim:ge};if(C[P]=X,A.setFloat32(H,X.x,!0),A.setFloat32(H+4,X.y,!0),A.setFloat32(H+8,X.z,!0),A.setFloat32(H+12,0,!0),A.setFloat32(H+16,X.u,!0),A.setFloat32(H+20,X.v,!0),A.setFloat32(H+24,X.ax,!0),A.setFloat32(H+28,X.ay,!0),A.setFloat32(H+32,X.aw,!0),A.setFloat32(H+36,X.ah,!0),A.setFloat32(H+40,X.r,!0),A.setFloat32(H+44,X.g,!0),A.setFloat32(H+48,X.b,!0),A.setFloat32(H+52,X.a,!0),ge)for(let ye=0;ye<16;ye+=1)A.setFloat32(H+56+ye*4,ge[ye],!0)}const S=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,S),n.bufferData(n.ARRAY_BUFFER,A,n.STATIC_DRAW),i(r).entities.push({type:"render3d",animated:T,textureId:G,vertexCount:y,modelMatrix:R,viewMatrix:J,vertices:C,buffer:{vbo:S,step:N,attribs:T?mi:xi},enabled:!0,expanded:!1,uuid:ht()}),Ne+=y,se(w,n);break}case 4:{const N=v.getUint32(4,!0),y=v.getUint32(8,!0),G=v.getUint16(12,!0),R=v.getUint16(14,!0),J=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,J);const D=new DataView(_,16,N*40),C=new ArrayBuffer(N*60),I=new DataView(C),A=new Array(N);for(let S=0;S<N;S+=1){const P=40*S,b=60*S,H={x:D.getInt16(P,!0),y:D.getInt16(P+2,!0),ax:D.getInt16(P+4,!0),ay:D.getInt16(P+6,!0),aw:D.getInt16(P+8,!0),ah:D.getInt16(P+10,!0),discard:D.getUint8(P+12),wrapx:D.getUint8(P+13),wrapy:D.getUint8(P+14),u:D.getFloat32(P+16,!0),v:D.getFloat32(P+20,!0),r:D.getFloat32(P+24,!0),g:D.getFloat32(P+28,!0),b:D.getFloat32(P+32,!0),a:D.getFloat32(P+36,!0)};A[S]=H,I.setFloat32(b,H.x,!0),I.setFloat32(b+4,H.y,!0),I.setFloat32(b+8,H.u,!0),I.setFloat32(b+12,H.v,!0),I.setFloat32(b+16,H.ax,!0),I.setFloat32(b+20,H.ay,!0),I.setFloat32(b+24,H.aw,!0),I.setFloat32(b+28,H.ah,!0),I.setFloat32(b+32,H.r,!0),I.setFloat32(b+36,H.g,!0),I.setFloat32(b+40,H.b,!0),I.setFloat32(b+44,H.a,!0),I.setFloat32(b+48,H.discard,!0),I.setFloat32(b+52,H.wrapx,!0),I.setFloat32(b+56,H.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,I,n.STATIC_DRAW),i(r).entities.push({type:"batch2d",textureId:y,vertexCount:N,vertices:A,targetWidth:G,targetHeight:R,buffer:{vbo:J,step:60,attribs:kt},enabled:!0,expanded:!1,uuid:ht()}),Ne+=N,se(w,n);break}case 5:case 8:{const E=K===5?64:512,N=v.getInt16(4,!0),y=v.getInt16(6,!0),G=v.getInt16(8,!0),R=v.getInt16(10,!0),J=v.getUint32(12,!0),D=v.getFloat32(16,!0),C=v.getFloat32(20,!0),I=v.getFloat32(24,!0),A=v.getFloat32(28,!0),S=v.getUint16(32,!0),P=v.getUint16(34,!0),b=n.createTexture(),H=n.createFramebuffer();n.bindTexture(n.TEXTURE_2D,b),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,H),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,E,E),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,b,0),n.disable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.FRONT),n.viewport(0,0,E,E),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT);let ge=Array(J),X=36;for(let lr=0;lr<J;lr+=1){const Nt=v.getUint32(X,!0);let Br=Array(Nt);const On=new ArrayBuffer(Nt*56),be=new DataView(On),cr=new Float32Array(16);cr.set(new Float32Array(_,X+4,16));const dr=new Float32Array(16);dr.set(new Float32Array(_,X+68,16));const _r=new Float32Array(16);_r.set(new Float32Array(_,X+132,16)),X+=196;for(let De=0;De<Nt;De+=1){const qe={x:v.getInt16(X,!0),y:v.getInt16(X+2,!0),z:v.getInt16(X+4,!0),r:v.getFloat32(X+8,!0),g:v.getFloat32(X+12,!0),b:v.getFloat32(X+16,!0),a:v.getFloat32(X+20,!0)},Fe=De*56;be.setFloat32(Fe,qe.x,!0),be.setFloat32(Fe+4,qe.y,!0),be.setFloat32(Fe+8,qe.z,!0),be.setFloat32(Fe+24,0,!0),be.setFloat32(Fe+28,0,!0),be.setFloat32(Fe+32,E,!0),be.setFloat32(Fe+36,E,!0),be.setFloat32(Fe+40,qe.r,!0),be.setFloat32(Fe+44,qe.g,!0),be.setFloat32(Fe+48,qe.b,!0),be.setFloat32(Fe+52,qe.a,!0),Br[De]=qe,X+=24}ge[lr]={vertices:Br,modelMatrix:cr,viewMatrix:dr,projMatrix:_r};const kr=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,kr),n.bufferData(n.ARRAY_BUFFER,be,n.STATIC_DRAW),n.useProgram(i(s)),n.uniformMatrix4fv(i(d),!1,cr),n.uniformMatrix4fv(i(h),!1,dr),n.uniformMatrix4fv(i(f),!1,_r),n.uniform2fv(i(x),[1,1]),n.bindTexture(n.TEXTURE_2D,i(we)),n.uniform1i(i(g),o);for(let De=0;De<i(je);De+=1)De<4?n.enableVertexAttribArray(De):n.disableVertexAttribArray(De);n.vertexAttribPointer(0,4,n.FLOAT,!1,56,0),n.vertexAttribPointer(1,2,n.FLOAT,!1,56,16),n.vertexAttribPointer(2,4,n.FLOAT,!1,56,24),n.vertexAttribPointer(3,4,n.FLOAT,!1,56,40),n.drawArrays(n.TRIANGLES,0,Nt),n.deleteBuffer(kr)}const ye=N,_t=N+G,sr=y,fr=y+R,Nr=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Nr),n.bufferData(n.ARRAY_BUFFER,new Float32Array([ye,sr,0,1,0,0,E,E,D,I,C,A,0,0,0,_t,sr,1,1,0,0,E,E,D,I,C,A,0,0,0,ye,fr,0,0,0,0,E,E,D,I,C,A,0,0,0,_t,sr,1,1,0,0,E,E,D,I,C,A,0,0,0,_t,fr,1,0,0,0,E,E,D,I,C,A,0,0,0,ye,fr,0,0,0,0,E,E,D,I,C,A,0,0,0]),n.STATIC_DRAW),i(r).entities.push({type:K===5?"icon":"bigicon",models:ge,texture:b,targetWidth:S,targetHeight:P,texSize:E,buffer:{vbo:Nr,step:60,attribs:kt},enabled:!0,expanded:!1,uuid:ht()}),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.deleteFramebuffer(H),n.disable(n.CULL_FACE);break}case 6:{const T=v.getUint32(4,!0),E=v.getUint32(8,!0);Ue=v.getUint16(12,!0),pe=v.getUint16(14,!0);const N=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,N);const y=new DataView(_,16,T*40),G=new ArrayBuffer(T*60),R=new DataView(G),J=new Array(T);for(let C=0;C<T;C+=1){const I=40*C,A=60*C,S={x:y.getInt16(I,!0),y:y.getInt16(I+2,!0),ax:y.getInt16(I+4,!0),ay:y.getInt16(I+6,!0),aw:y.getInt16(I+8,!0),ah:y.getInt16(I+10,!0),discard:y.getUint8(I+12),wrapx:y.getUint8(I+13),wrapy:y.getUint8(I+14),u:y.getFloat32(I+16,!0),v:y.getFloat32(I+20,!0),r:y.getFloat32(I+24,!0),g:y.getFloat32(I+28,!0),b:y.getFloat32(I+32,!0),a:y.getFloat32(I+36,!0)};J[C]=S,R.setFloat32(A,S.x,!0),R.setFloat32(A+4,S.y,!0),R.setFloat32(A+8,S.u,!0),R.setFloat32(A+12,S.v,!0),R.setFloat32(A+16,S.ax,!0),R.setFloat32(A+20,S.ay,!0),R.setFloat32(A+24,S.aw,!0),R.setFloat32(A+28,S.ah,!0),R.setFloat32(A+32,S.r,!0),R.setFloat32(A+36,S.g,!0),R.setFloat32(A+40,S.b,!0),R.setFloat32(A+44,S.a,!0),R.setFloat32(A+48,S.discard,!0),R.setFloat32(A+52,S.wrapx,!0),R.setFloat32(A+56,S.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,R,n.STATIC_DRAW),!he||!it?(he=n.createTexture(),n.bindTexture(n.TEXTURE_2D,he),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,Ue,pe),it=n.createFramebuffer(),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,it),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,he,0),n.bindTexture(n.TEXTURE_2D,null)):n.bindFramebuffer(n.DRAW_FRAMEBUFFER,it),n.viewport(0,0,Ue,pe),n.scissor(0,0,Ue,pe),n.disable(n.DEPTH_TEST);const D=i(r).textures[E];n.useProgram(i(c)),n.uniform4fv(i(m),[D.width,D.height,Ue,pe]),n.bindTexture(n.TEXTURE_2D,D.texture),n.uniform1i(i(l),o);for(let C=0;C<i(je);C+=1)C<4?n.enableVertexAttribArray(C):n.disableVertexAttribArray(C);n.vertexAttribPointer(0,4,n.FLOAT,!1,60,0),n.vertexAttribPointer(1,4,n.FLOAT,!1,60,16),n.vertexAttribPointer(2,4,n.FLOAT,!1,60,32),n.vertexAttribPointer(3,3,n.FLOAT,!1,60,48),n.drawArrays(n.TRIANGLES,0,T),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),i(r).entities.push({type:"minimap2d",textureId:E,vbo:N,vertices:J,enabled:!0,expanded:!1,uuid:ht()}),Ne+=T,se(w,n);break}case 7:{if(!he)break;const T=v.getInt16(4,!0),E=v.getInt16(6,!0),N=v.getUint16(8,!0),y=v.getUint16(10,!0),G=v.getInt16(12,!0),R=v.getInt16(14,!0),J=v.getUint16(16,!0),D=v.getUint16(18,!0),C=v.getUint16(20,!0),I=v.getUint16(22,!0),A=G,S=G+J,P=R,b=R+D,H=T/Ue,ge=(T+N)/Ue,X=E/pe,ye=(E+y)/pe,_t=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,_t),n.bufferData(n.ARRAY_BUFFER,new Float32Array([A,P,H,ye,T,E,N,y,1,1,1,1,0,0,0,S,P,ge,ye,T,E,N,y,1,1,1,1,0,0,0,A,b,H,X,T,E,N,y,1,1,1,1,0,0,0,S,P,ge,ye,T,E,N,y,1,1,1,1,0,0,0,S,b,ge,X,T,E,N,y,1,1,1,1,0,0,0,A,b,H,X,T,E,N,y,1,1,1,1,0,0,0]),n.STATIC_DRAW),i(r).entities.push({type:"minimap",sourcex:T,sourcey:E,sourcew:N,sourceh:y,targetx:G,targety:R,targetw:J,targeth:D,targetWidth:C,targetHeight:I,buffer:{vbo:_t,step:60,attribs:kt},enabled:!0,expanded:!1,uuid:ht()}),se(w,n);break}case 9:{const T=v.getUint32(4,!0),E=v.getUint32(8,!0),N=64,y=72,G=new Float32Array(16);G.set(new Float32Array(_,16,16));const R=new DataView(_,80,T*N),J=new Array(T),D=new ArrayBuffer(T*y),C=new DataView(D);for(let A=0;A<T;A+=1){const S=N*A,P=y*A,b={x:R.getFloat32(S,!0),y:R.getFloat32(S+4,!0),z:R.getFloat32(S+8,!0),offsetx2d:R.getFloat32(S+12,!0),offsety2d:R.getFloat32(S+16,!0),offsetx3d:R.getFloat32(S+20,!0),offsety3d:R.getFloat32(S+24,!0),offsetz3d:R.getFloat32(S+28,!0),ax:R.getUint16(S+32,!0),ay:R.getUint16(S+34,!0),aw:R.getUint16(S+36,!0),ah:R.getUint16(S+38,!0),r:R.getFloat32(S+40,!0),g:R.getFloat32(S+44,!0),b:R.getFloat32(S+48,!0),a:R.getFloat32(S+52,!0),u:R.getFloat32(S+56,!0),v:R.getFloat32(S+60,!0)};J[A]=b,C.setFloat32(P,b.x,!0),C.setFloat32(P+4,b.y,!0),C.setFloat32(P+8,b.z,!0),C.setFloat32(P+12,b.ax,!0),C.setFloat32(P+16,b.ay,!0),C.setFloat32(P+20,b.aw,!0),C.setFloat32(P+24,b.ah,!0),C.setFloat32(P+28,b.r,!0),C.setFloat32(P+32,b.g,!0),C.setFloat32(P+36,b.b,!0),C.setFloat32(P+40,b.a,!0),C.setFloat32(P+44,b.offsetx2d,!0),C.setFloat32(P+48,b.offsety2d,!0),C.setFloat32(P+52,b.offsetx3d,!0),C.setFloat32(P+56,b.offsety3d,!0),C.setFloat32(P+60,b.offsetz3d,!0),C.setFloat32(P+64,b.u,!0),C.setFloat32(P+68,b.v,!0)}const I=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,I),n.bufferData(n.ARRAY_BUFFER,C,n.STATIC_DRAW),i(r).entities.push({type:"renderparticles",textureId:E,vertexCount:T,vertices:J,viewMatrix:G,buffer:{vbo:I,step:y,attribs:wi},enabled:!0,expanded:!1,uuid:ht()}),Ne+=T,se(w,n);break}}};window.addEventListener("message",async w=>{if(typeof w.data=="object"&&w.data.type==="pluginMessage"){if(typeof w.data.content!="object"||!i(ue)||!i(p))return;In(i(ue),i(p),w.data.content)}}),ya(()=>(i(ue),i(p),i(we),i(c),i(s),i(B),i(O),i(re)),()=>{if(i(ue)&&(Ht(ue,i(ue).width=Le),Ht(ue,i(ue).height=Me),L(p,i(ue).getContext("webgl2")),i(p))){L(je,i(p).getParameter(i(p).MAX_VERTEX_ATTRIBS)),L(we,i(p).createTexture()),i(p).bindTexture(i(p).TEXTURE_2D,i(we));const w=new Uint8Array([255,255,255,255]);i(p).texImage2D(i(p).TEXTURE_2D,0,i(p).RGBA,1,1,0,i(p).RGBA,i(p).UNSIGNED_BYTE,w);const n=Ke(i(p),i(p).VERTEX_SHADER,fi,"2D vertex shader"),_=Ke(i(p),i(p).FRAGMENT_SHADER,li,"2D fragment shader"),v=Ke(i(p),i(p).VERTEX_SHADER,ci,"3D vertex shader"),K=Ke(i(p),i(p).VERTEX_SHADER,di,"3D anim vertex shader"),T=Ke(i(p),i(p).FRAGMENT_SHADER,_i,"3D fragment shader"),E=Ke(i(p),i(p).VERTEX_SHADER,vi,"particle vertex shader"),N=Ke(i(p),i(p).VERTEX_SHADER,hi,"checkers vertex shader"),y=Ke(i(p),i(p).FRAGMENT_SHADER,pi,"checkers fragment shader");L(c,Ft(i(p),n,_,"2D program")),L(m,i(p).getUniformLocation(i(c),"atlas_wh_screen_wh")),L(l,i(p).getUniformLocation(i(c),"tex")),L(s,Ft(i(p),v,T,"3D program")),L(d,i(p).getUniformLocation(i(s),"modelmatrix")),L(h,i(p).getUniformLocation(i(s),"viewmatrix")),L(f,i(p).getUniformLocation(i(s),"projmatrix")),L(x,i(p).getUniformLocation(i(s),"atlas_wh")),L(g,i(p).getUniformLocation(i(s),"tex")),L(B,Ft(i(p),K,T,"3D animated program")),L($,i(p).getUniformLocation(i(B),"modelmatrix")),L(F,i(p).getUniformLocation(i(B),"viewmatrix")),L(M,i(p).getUniformLocation(i(B),"projmatrix")),L(V,i(p).getUniformLocation(i(B),"atlas_wh")),L(U,i(p).getUniformLocation(i(B),"tex")),L(O,Ft(i(p),E,T,"Particles program")),L(Y,i(p).getUniformLocation(i(O),"viewmatrix")),L(ne,i(p).getUniformLocation(i(O),"projmatrix")),L(k,i(p).getUniformLocation(i(O),"tex")),L(ee,i(p).getUniformLocation(i(O),"atlas_wh")),L(re,Ft(i(p),N,y,"Checkers program")),L(ve,i(p).getUniformLocation(i(re),"screen_wh")),i(p).deleteShader(n),i(p).deleteShader(_),i(p).deleteShader(v),i(p).deleteShader(T),i(p).deleteShader(K),i(p).deleteShader(E),i(p).deleteShader(N),i(p).deleteShader(y),i(p).activeTexture(i(p).TEXTURE0+o),i(p).enable(i(p).SCISSOR_TEST),i(p).disable(i(p).CULL_FACE),i(p).disable(i(p).DEPTH_TEST),i(p).enable(i(p).BLEND),i(p).blendEquationSeparate(i(p).FUNC_ADD,i(p).FUNC_ADD),i(p).depthFunc(i(p).LEQUAL),se(i(ue),i(p))}}),ba(),Ot();var Lr=Ji(),Mr=Te(Lr);oi(Mr,w=>L(ue,w),()=>i(ue));var Or=oe(Mr,2);{var Pn=w=>{var n=qi(),_=Te(n),v=$e(_);Vi(v,{get data(){return i(r)},set data(T){L(r,T)},$$legacy:!0});var K=oe(_,2);K.__click=[ji,dt],Z(w,n)},Cn=(w,n)=>{{var _=v=>{var K=Ki();K.__click=[Gi,dt],Z(v,K)};de(w,v=>{i(ct)&&v(_)},n)}};de(Or,w=>{i(dt)?w(Pn):w(Cn,!1)})}var Ln=oe(Or,2);{var Mn=w=>{var n=Qi();n.__click=[Zi,r,se,ue,p],Z(w,n)};de(Ln,w=>{i(r).selectedTexture&&w(Mn)})}Z(e,Lr),gt()}ur(["click"]);za(eo,{target:document.body});
