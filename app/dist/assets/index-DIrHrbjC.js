(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();const zr=!1;var Ir=Array.isArray,kn=Array.prototype.indexOf,Pr=Array.from,Bn=Object.defineProperty,Rt=Object.getOwnPropertyDescriptor,cn=Object.getOwnPropertyDescriptors,On=Object.prototype,$n=Array.prototype,Mr=Object.getPrototypeOf,Yr=Object.isExtensible;function Hn(e){return e()}function Fr(e){for(var r=0;r<e.length;r++)e[r]()}const Ve=2,dn=4,ur=8,Cr=16,tt=32,St=64,Qt=128,Be=256,Jt=512,De=1024,rt=2048,mt=4096,Je=8192,sr=16384,Vn=32768,Lr=65536,_n=1<<17,Wn=1<<19,vn=1<<20,Tr=1<<21,pt=Symbol("$state"),Xn=Symbol("legacy props"),zn=Symbol("");function hn(e){return e===this.v}function Yn(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function Nr(e){return!Yn(e,this.v)}function qn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function jn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Gn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Kn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Zn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Qn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Jn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ea(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ht=!1,ta=!1;function ra(){Ht=!0}const kr=1,Br=2,pn=4,na=8,aa=16,ia=1,oa=2,ua=4,sa=8,fa=16,la=1,ca=2,Ue=Symbol(),da="http://www.w3.org/1999/xhtml";let oe=null;function qr(e){oe=e}function gt(e,r=!1,t){var i=oe={p:oe,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Ht&&!r&&(oe.l={s:null,u:null,r1:[],r2:kt(!1)}),ga(()=>{i.d=!0})}function wt(e){const r=oe;if(r!==null){const d=r.e;if(d!==null){var t=J,i=G;r.e=null;try{for(var o=0;o<d.length;o++){var u=d[o];ct(u.effect),je(u.reaction),$r(u.fn)}}finally{ct(t),je(i)}}oe=r.p,r.m=!0}return{}}function fr(){return!Ht||oe!==null&&oe.l===null}function ht(e,r){if(typeof e!="object"||e===null||pt in e)return e;const t=Mr(e);if(t!==On&&t!==$n)return e;var i=new Map,o=Ir(e),u=it(0),d=G,p=v=>{var f=G;je(d);var l;return l=v(),je(f),l};return o&&i.set("length",it(e.length)),new Proxy(e,{defineProperty(v,f,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&Qn();var h=i.get(f);return h===void 0?(h=p(()=>it(l.value)),i.set(f,h)):I(h,p(()=>ht(l.value))),!0},deleteProperty(v,f){var l=i.get(f);if(l===void 0)f in v&&i.set(f,p(()=>it(Ue)));else{if(o&&typeof f=="string"){var h=i.get("length"),s=Number(f);Number.isInteger(s)&&s<h.v&&I(h,s)}I(l,Ue),jr(u)}return!0},get(v,f,l){var w;if(f===pt)return e;var h=i.get(f),s=f in v;if(h===void 0&&(!s||(w=Rt(v,f))!=null&&w.writable)&&(h=p(()=>it(ht(s?v[f]:Ue))),i.set(f,h)),h!==void 0){var m=a(h);return m===Ue?void 0:m}return Reflect.get(v,f,l)},getOwnPropertyDescriptor(v,f){var l=Reflect.getOwnPropertyDescriptor(v,f);if(l&&"value"in l){var h=i.get(f);h&&(l.value=a(h))}else if(l===void 0){var s=i.get(f),m=s==null?void 0:s.v;if(s!==void 0&&m!==Ue)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return l},has(v,f){var m;if(f===pt)return!0;var l=i.get(f),h=l!==void 0&&l.v!==Ue||Reflect.has(v,f);if(l!==void 0||J!==null&&(!h||(m=Rt(v,f))!=null&&m.writable)){l===void 0&&(l=p(()=>it(h?ht(v[f]):Ue)),i.set(f,l));var s=a(l);if(s===Ue)return!1}return h},set(v,f,l,h){var Z;var s=i.get(f),m=f in v;if(o&&f==="length")for(var w=l;w<s.v;w+=1){var C=i.get(w+"");C!==void 0?I(C,Ue):w in v&&(C=p(()=>it(Ue)),i.set(w+"",C))}s===void 0?(!m||(Z=Rt(v,f))!=null&&Z.writable)&&(s=p(()=>it(void 0)),I(s,p(()=>ht(l))),i.set(f,s)):(m=s.v!==Ue,I(s,p(()=>ht(l))));var Y=Reflect.getOwnPropertyDescriptor(v,f);if(Y!=null&&Y.set&&Y.set.call(h,l),!m){if(o&&typeof f=="string"){var H=i.get("length"),V=Number(f);Number.isInteger(V)&&V>=H.v&&I(H,V+1)}jr(u)}return!0},ownKeys(v){a(u);var f=Reflect.ownKeys(v).filter(s=>{var m=i.get(s);return m===void 0||m.v!==Ue});for(var[l,h]of i)h.v!==Ue&&!(l in v)&&f.push(l);return f},setPrototypeOf(){Jn()}})}function jr(e,r=1){I(e,e.v+r)}const Nt=new Map;function kt(e,r){var t={f:0,v:e,reactions:null,equals:hn,rv:0,wv:0};return t}function it(e,r){const t=kt(e);return Ra(t),t}function O(e,r=!1){var i;const t=kt(e);return r||(t.equals=Nr),Ht&&oe!==null&&oe.l!==null&&((i=oe.l).s??(i.s=[])).push(t),t}function Gt(e,r){return I(e,et(()=>a(e))),r}function I(e,r,t=!1){G!==null&&!ze&&fr()&&(G.f&(Ve|Cr))!==0&&!(Te!=null&&Te.includes(e))&&ea();let i=t?ht(r):r;return Bt(e,i)}function Bt(e,r){if(!e.equals(r)){var t=e.v;Wt?Nt.set(e,r):Nt.set(e,t),e.v=r,e.wv=In(),xn(e,rt),fr()&&J!==null&&(J.f&De)!==0&&(J.f&(tt|St))===0&&(ke===null?Sa([e]):ke.push(e))}return r}function xn(e,r){var t=e.reactions;if(t!==null)for(var i=fr(),o=t.length,u=0;u<o;u++){var d=t[u],p=d.f;(p&rt)===0&&(!i&&d===J||(We(d,r),(p&(De|Be))!==0&&((p&Ve)!==0?xn(d,mt):_r(d))))}}let _a=!1;var Gr,mn,gn,wn;function va(){if(Gr===void 0){Gr=window,mn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,t=Text.prototype;gn=Rt(r,"firstChild").get,wn=Rt(r,"nextSibling").get,Yr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Yr(t)&&(t.__t=void 0)}}function Or(e=""){return document.createTextNode(e)}function er(e){return gn.call(e)}function lr(e){return wn.call(e)}function qe(e,r){return er(e)}function he(e,r){{var t=er(e);return t instanceof Comment&&t.data===""?lr(t):t}}function te(e,r=1,t=!1){let i=e;for(;r--;)i=lr(i);return i}function ha(e){e.textContent=""}function Ot(e){var r=Ve|rt,t=G!==null&&(G.f&Ve)!==0?G:null;return J===null||t!==null&&(t.f&Be)!==0?r|=Be:J.f|=vn,{ctx:oe,deps:null,effects:null,equals:hn,f:r,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??J}}function we(e){const r=Ot(e);return r.equals=Nr,r}function bn(e){var r=e.effects;if(r!==null){e.effects=null;for(var t=0;t<r.length;t+=1)lt(r[t])}}function pa(e){for(var r=e.parent;r!==null;){if((r.f&Ve)===0)return r;r=r.parent}return null}function xa(e){var r,t=J;ct(pa(e));try{bn(e),r=Mn(e)}finally{ct(t)}return r}function yn(e){var r=xa(e),t=(ft||(e.f&Be)!==0)&&e.deps!==null?mt:De;We(e,t),e.equals(r)||(e.v=r,e.wv=In())}function En(e){J===null&&G===null&&Gn(),G!==null&&(G.f&Be)!==0&&J===null&&jn(),Wt&&qn()}function ma(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function Ut(e,r,t,i=!0){var o=J,u={ctx:oe,deps:null,nodes_start:null,nodes_end:null,f:e|rt,first:null,fn:r,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(t)try{dr(u),u.f|=Vn}catch(v){throw lt(u),v}else r!==null&&_r(u);var d=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(vn|Qt))===0;if(!d&&i&&(o!==null&&ma(u,o),G!==null&&(G.f&Ve)!==0)){var p=G;(p.effects??(p.effects=[])).push(u)}return u}function ga(e){const r=Ut(ur,null,!1);return We(r,De),r.teardown=e,r}function Kr(e){En();var r=J!==null&&(J.f&tt)!==0&&oe!==null&&!oe.m;if(r){var t=oe;(t.e??(t.e=[])).push({fn:e,effect:J,reaction:G})}else{var i=$r(e);return i}}function wa(e){return En(),Vt(e)}function ba(e){const r=Ut(St,e,!0);return(t={})=>new Promise(i=>{t.outro?tr(r,()=>{lt(r),i(void 0)}):(lt(r),i(void 0))})}function $r(e){return Ut(dn,e,!1)}function ya(e,r){var t=oe,i={effect:null,ran:!1};t.l.r1.push(i),i.effect=Vt(()=>{e(),!i.ran&&(i.ran=!0,I(t.l.r2,!0),et(r))})}function Ea(){var e=oe;Vt(()=>{if(a(e.l.r2)){for(var r of e.l.r1){var t=r.effect;(t.f&De)!==0&&We(t,mt),Dt(t)&&dr(t),r.ran=!1}e.l.r2.v=!1}})}function Vt(e){return Ut(ur,e,!0)}function Ye(e,r=[],t=Ot){const i=r.map(t);return Hr(()=>e(...i.map(a)))}function Hr(e,r=0){return Ut(ur|Cr|r,e,!0)}function $t(e,r=!0){return Ut(ur|tt,e,!0,r)}function An(e){var r=e.teardown;if(r!==null){const t=Wt,i=G;Zr(!0),je(null);try{r.call(null)}finally{Zr(t),je(i)}}}function Fn(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var i=t.next;(t.f&St)!==0?t.parent=null:lt(t,r),t=i}}function Aa(e){for(var r=e.first;r!==null;){var t=r.next;(r.f&tt)===0&&lt(r),r=t}}function lt(e,r=!0){var t=!1;if((r||(e.f&Wn)!==0)&&e.nodes_start!==null){for(var i=e.nodes_start,o=e.nodes_end;i!==null;){var u=i===o?null:lr(i);i.remove(),i=u}t=!0}Fn(e,r&&!t),or(e,0),We(e,sr);var d=e.transitions;if(d!==null)for(const v of d)v.stop();An(e);var p=e.parent;p!==null&&p.first!==null&&Tn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Tn(e){var r=e.parent,t=e.prev,i=e.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),r!==null&&(r.first===e&&(r.first=i),r.last===e&&(r.last=t))}function tr(e,r){var t=[];Vr(e,t,!0),Rn(t,()=>{lt(e),r&&r()})}function Rn(e,r){var t=e.length;if(t>0){var i=()=>--t||r();for(var o of e)o.out(i)}else r()}function Vr(e,r,t){if((e.f&Je)===0){if(e.f^=Je,e.transitions!==null)for(const d of e.transitions)(d.is_global||t)&&r.push(d);for(var i=e.first;i!==null;){var o=i.next,u=(i.f&Lr)!==0||(i.f&tt)!==0;Vr(i,r,u?t:!1),i=o}}}function rr(e){Sn(e,!0)}function Sn(e,r){if((e.f&Je)!==0){e.f^=Je,(e.f&De)===0&&(e.f^=De),Dt(e)&&(We(e,rt),_r(e));for(var t=e.first;t!==null;){var i=t.next,o=(t.f&Lr)!==0||(t.f&tt)!==0;Sn(t,o?r:!1),t=i}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||r)&&u.in()}}let nr=[];function Fa(){var e=nr;nr=[],Fr(e)}function Un(e){nr.length===0&&queueMicrotask(Fa),nr.push(e)}let Kt=!1,Rr=!1,ar=null,xt=!1,Wt=!1;function Zr(e){Wt=e}let Zt=[];let G=null,ze=!1;function je(e){G=e}let J=null;function ct(e){J=e}let Te=null;function Ta(e){Te=e}function Ra(e){G!==null&&G.f&Tr&&(Te===null?Ta([e]):Te.push(e))}let Fe=null,Pe=0,ke=null;function Sa(e){ke=e}let Dn=1,ir=0,ft=!1,st=null;function In(){return++Dn}function Dt(e){var h;var r=e.f;if((r&rt)!==0)return!0;if((r&mt)!==0){var t=e.deps,i=(r&Be)!==0;if(t!==null){var o,u,d=(r&Jt)!==0,p=i&&J!==null&&!ft,v=t.length;if(d||p){var f=e,l=f.parent;for(o=0;o<v;o++)u=t[o],(d||!((h=u==null?void 0:u.reactions)!=null&&h.includes(f)))&&(u.reactions??(u.reactions=[])).push(f);d&&(f.f^=Jt),p&&l!==null&&(l.f&Be)===0&&(f.f^=Be)}for(o=0;o<v;o++)if(u=t[o],Dt(u)&&yn(u),u.wv>e.wv)return!0}(!i||J!==null&&!ft)&&We(e,De)}return!1}function Ua(e,r){for(var t=r;t!==null;){if((t.f&Qt)!==0)try{t.fn(e);return}catch{t.f^=Qt}t=t.parent}throw Kt=!1,e}function Da(e){return(e.f&sr)===0&&(e.parent===null||(e.parent.f&Qt)===0)}function cr(e,r,t,i){if(Kt){if(t===null&&(Kt=!1),Da(r))throw e;return}t!==null&&(Kt=!0);{Ua(e,r);return}}function Pn(e,r,t=!0){var i=e.reactions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Te!=null&&Te.includes(e)||((u.f&Ve)!==0?Pn(u,r,!1):r===u&&(t?We(u,rt):(u.f&De)!==0&&We(u,mt),_r(u)))}}function Mn(e){var m;var r=Fe,t=Pe,i=ke,o=G,u=ft,d=Te,p=oe,v=ze,f=e.f;Fe=null,Pe=0,ke=null,ft=(f&Be)!==0&&(ze||!xt||G===null),G=(f&(tt|St))===0?e:null,Te=null,qr(e.ctx),ze=!1,ir++,e.f|=Tr;try{var l=(0,e.fn)(),h=e.deps;if(Fe!==null){var s;if(or(e,Pe),h!==null&&Pe>0)for(h.length=Pe+Fe.length,s=0;s<Fe.length;s++)h[Pe+s]=Fe[s];else e.deps=h=Fe;if(!ft)for(s=Pe;s<h.length;s++)((m=h[s]).reactions??(m.reactions=[])).push(e)}else h!==null&&Pe<h.length&&(or(e,Pe),h.length=Pe);if(fr()&&ke!==null&&!ze&&h!==null&&(e.f&(Ve|mt|rt))===0)for(s=0;s<ke.length;s++)Pn(ke[s],e);return o!==null&&(ir++,ke!==null&&(i===null?i=ke:i.push(...ke))),l}finally{Fe=r,Pe=t,ke=i,G=o,ft=u,Te=d,qr(p),ze=v,e.f^=Tr}}function Ia(e,r){let t=r.reactions;if(t!==null){var i=kn.call(t,e);if(i!==-1){var o=t.length-1;o===0?t=r.reactions=null:(t[i]=t[o],t.pop())}}t===null&&(r.f&Ve)!==0&&(Fe===null||!Fe.includes(r))&&(We(r,mt),(r.f&(Be|Jt))===0&&(r.f^=Jt),bn(r),or(r,0))}function or(e,r){var t=e.deps;if(t!==null)for(var i=r;i<t.length;i++)Ia(e,t[i])}function dr(e){var r=e.f;if((r&sr)===0){We(e,De);var t=J,i=oe,o=xt;J=e,xt=!0;try{(r&Cr)!==0?Aa(e):Fn(e),An(e);var u=Mn(e);e.teardown=typeof u=="function"?u:null,e.wv=Dn;var d=e.deps,p;zr&&ta&&e.f&rt}catch(v){cr(v,e,t,i||e.ctx)}finally{xt=o,J=t}}}function Pa(){try{Kn()}catch(e){if(ar!==null)cr(e,ar,null);else throw e}}function Ma(){var e=xt;try{var r=0;for(xt=!0;Zt.length>0;){r++>1e3&&Pa();var t=Zt,i=t.length;Zt=[];for(var o=0;o<i;o++){var u=La(t[o]);Ca(u)}}}finally{Rr=!1,xt=e,ar=null,Nt.clear()}}function Ca(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var i=e[t];if((i.f&(sr|Je))===0)try{Dt(i)&&(dr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Tn(i):i.fn=null))}catch(o){cr(o,i,null,i.ctx)}}}function _r(e){Rr||(Rr=!0,queueMicrotask(Ma));for(var r=ar=e;r.parent!==null;){r=r.parent;var t=r.f;if((t&(St|tt))!==0){if((t&De)===0)return;r.f^=De}}Zt.push(r)}function La(e){for(var r=[],t=e;t!==null;){var i=t.f,o=(i&(tt|St))!==0,u=o&&(i&De)!==0;if(!u&&(i&Je)===0){if((i&dn)!==0)r.push(t);else if(o)t.f^=De;else{var d=G;try{G=t,Dt(t)&&dr(t)}catch(f){cr(f,t,null,t.ctx)}finally{G=d}}var p=t.first;if(p!==null){t=p;continue}}var v=t.parent;for(t=t.next;t===null&&v!==null;)t=v.next,v=v.parent}return r}function a(e){var r=e.f,t=(r&Ve)!==0;if(st!==null&&st.add(e),G!==null&&!ze){if(!(Te!=null&&Te.includes(e))){var i=G.deps;e.rv<ir&&(e.rv=ir,Fe===null&&i!==null&&i[Pe]===e?Pe++:Fe===null?Fe=[e]:(!ft||!Fe.includes(e))&&Fe.push(e))}}else if(t&&e.deps===null&&e.effects===null){var o=e,u=o.parent;u!==null&&(u.f&Be)===0&&(o.f^=Be)}return t&&(o=e,Dt(o)&&yn(o)),Wt&&Nt.has(e)?Nt.get(e):e.v}function Na(e){var r=st;st=new Set;var t=st,i;try{if(et(e),r!==null)for(i of st)r.add(i)}finally{st=r}return t}function Qe(e){var r=Na(()=>et(e));for(var t of r)if((t.f&_n)!==0)for(const i of t.deps||[])(i.f&Ve)===0&&Bt(i,i.v);else Bt(t,t.v)}function et(e){var r=ze;try{return ze=!0,e()}finally{ze=r}}const ka=-7169;function We(e,r){e.f=e.f&ka|r}function Ba(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(pt in e)Sr(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&pt in t&&Sr(t)}}}function Sr(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Sr(e[i],r)}catch{}const t=Mr(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=cn(t);for(let o in i){const u=i[o].get;if(u)try{u.call(e)}catch{}}}}}const Oa=["touchstart","touchmove"];function $a(e){return Oa.includes(e)}let Qr=!1;function Ha(){Qr||(Qr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function Va(e){var r=G,t=J;je(null),ct(null);try{return e()}finally{je(r),ct(t)}}function Wa(e,r,t,i=t){e.addEventListener(r,()=>Va(t));const o=e.__on_r;o?e.__on_r=()=>{o(),i(!0)}:e.__on_r=()=>i(!0),Ha()}const Cn=new Set,Ur=new Set;function vr(e){for(var r=0;r<e.length;r++)Cn.add(e[r]);for(var t of Ur)t(e)}function Yt(e){var V;var r=this,t=r.ownerDocument,i=e.type,o=((V=e.composedPath)==null?void 0:V.call(e))||[],u=o[0]||e.target,d=0,p=e.__root;if(p){var v=o.indexOf(p);if(v!==-1&&(r===document||r===window)){e.__root=r;return}var f=o.indexOf(r);if(f===-1)return;v<=f&&(d=v)}if(u=o[d]||e.target,u!==r){Bn(e,"currentTarget",{configurable:!0,get(){return u||t}});var l=G,h=J;je(null),ct(null);try{for(var s,m=[];u!==null;){var w=u.assignedSlot||u.parentNode||u.host||null;try{var C=u["__"+i];if(C!=null&&(!u.disabled||e.target===u))if(Ir(C)){var[Y,...H]=C;Y.apply(u,[e,...H])}else C.call(u,e)}catch(Z){s?m.push(Z):s=Z}if(e.cancelBubble||w===r||w===null)break;u=w}if(s){for(let Z of m)queueMicrotask(()=>{throw Z});throw s}}finally{e.__root=r,delete e.currentTarget,je(l),ct(h)}}}function Xa(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Dr(e,r){var t=J;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function ee(e,r){var t=(r&la)!==0,i=(r&ca)!==0,o,u=!e.startsWith("<!>");return()=>{o===void 0&&(o=Xa(u?e:"<!>"+e),t||(o=er(o)));var d=i||mn?document.importNode(o,!0):o.cloneNode(!0);if(t){var p=er(d),v=d.lastChild;Dr(p,v)}else Dr(d,d);return d}}function qt(){var e=document.createDocumentFragment(),r=document.createComment(""),t=Or();return e.append(r,t),Dr(r,t),e}function j(e,r){e!==null&&e.before(r)}function Me(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function za(e,r){return Ya(e,r)}const Et=new Map;function Ya(e,{target:r,anchor:t,props:i={},events:o,context:u,intro:d=!0}){va();var p=new Set,v=h=>{for(var s=0;s<h.length;s++){var m=h[s];if(!p.has(m)){p.add(m);var w=$a(m);r.addEventListener(m,Yt,{passive:w});var C=Et.get(m);C===void 0?(document.addEventListener(m,Yt,{passive:w}),Et.set(m,1)):Et.set(m,C+1)}}};v(Pr(Cn)),Ur.add(v);var f=void 0,l=ba(()=>{var h=t??r.appendChild(Or());return $t(()=>{if(u){gt({});var s=oe;s.c=u}o&&(i.$$events=o),f=e(h,i)||{},u&&wt()}),()=>{var w;for(var s of p){r.removeEventListener(s,Yt);var m=Et.get(s);--m===0?(document.removeEventListener(s,Yt),Et.delete(s)):Et.set(s,m)}Ur.delete(v),h!==t&&((w=h.parentNode)==null||w.removeChild(h))}});return qa.set(f,l),f}let qa=new WeakMap;function le(e,r,[t,i]=[0,0]){var o=e,u=null,d=null,p=Ue,v=t>0?Lr:0,f=!1;const l=(s,m=!0)=>{f=!0,h(m,s)},h=(s,m)=>{p!==(p=s)&&(p?(u?rr(u):m&&(u=$t(()=>m(o))),d&&tr(d,()=>{d=null})):(d?rr(d):m&&(d=$t(()=>m(o,[t+1,i]))),u&&tr(u,()=>{u=null})))};Hr(()=>{f=!1,r(l),f||h(null,null)},v)}function Ft(e,r){return r}function ja(e,r,t,i){for(var o=[],u=r.length,d=0;d<u;d++)Vr(r[d].e,o,!0);var p=u>0&&o.length===0&&t!==null;if(p){var v=t.parentNode;ha(v),v.append(t),i.clear(),ut(e,r[0].prev,r[u-1].next)}Rn(o,()=>{for(var f=0;f<u;f++){var l=r[f];p||(i.delete(l.k),ut(e,l.prev,l.next)),lt(l.e,!p)}})}function Tt(e,r,t,i,o,u=null){var d=e,p={flags:r,items:new Map,first:null},v=(r&pn)!==0;if(v){var f=e;d=f.appendChild(Or())}var l=null,h=!1,s=we(()=>{var m=t();return Ir(m)?m:m==null?[]:Pr(m)});Hr(()=>{var m=a(s),w=m.length;h&&w===0||(h=w===0,Ga(m,p,d,o,r,i,t),u!==null&&(w===0?l?rr(l):l=$t(()=>u(d)):l!==null&&tr(l,()=>{l=null})),a(s))})}function Ga(e,r,t,i,o,u,d){var ie,Re,me,be;var p=(o&na)!==0,v=(o&(kr|Br))!==0,f=e.length,l=r.items,h=r.first,s=h,m,w=null,C,Y=[],H=[],V,Z,k,$;if(p)for($=0;$<f;$+=1)V=e[$],Z=u(V,$),k=l.get(Z),k!==void 0&&((ie=k.a)==null||ie.measure(),(C??(C=new Set)).add(k));for($=0;$<f;$+=1){if(V=e[$],Z=u(V,$),k=l.get(Z),k===void 0){var xe=s?s.e.nodes_start:t;w=Za(xe,r,w,w===null?r.first:w.next,V,Z,$,i,o,d),l.set(Z,w),Y=[],H=[],s=w.next;continue}if(v&&Ka(k,V,$,o),(k.e.f&Je)!==0&&(rr(k.e),p&&((Re=k.a)==null||Re.unfix(),(C??(C=new Set)).delete(k))),k!==s){if(m!==void 0&&m.has(k)){if(Y.length<H.length){var B=H[0],P;w=B.prev;var W=Y[0],X=Y[Y.length-1];for(P=0;P<Y.length;P+=1)Jr(Y[P],B,t);for(P=0;P<H.length;P+=1)m.delete(H[P]);ut(r,W.prev,X.next),ut(r,w,W),ut(r,X,B),s=B,w=X,$-=1,Y=[],H=[]}else m.delete(k),Jr(k,s,t),ut(r,k.prev,k.next),ut(r,k,w===null?r.first:w.next),ut(r,w,k),w=k;continue}for(Y=[],H=[];s!==null&&s.k!==Z;)(s.e.f&Je)===0&&(m??(m=new Set)).add(s),H.push(s),s=s.next;if(s===null)continue;k=s}Y.push(k),w=k,s=k.next}if(s!==null||m!==void 0){for(var ce=m===void 0?[]:Pr(m);s!==null;)(s.e.f&Je)===0&&ce.push(s),s=s.next;var ae=ce.length;if(ae>0){var ne=(o&pn)!==0&&f===0?t:null;if(p){for($=0;$<ae;$+=1)(me=ce[$].a)==null||me.measure();for($=0;$<ae;$+=1)(be=ce[$].a)==null||be.fix()}ja(r,ce,ne,l)}}p&&Un(()=>{var L;if(C!==void 0)for(k of C)(L=k.a)==null||L.apply()}),J.first=r.first&&r.first.e,J.last=w&&w.e}function Ka(e,r,t,i){(i&kr)!==0&&Bt(e.v,r),(i&Br)!==0?Bt(e.i,t):e.i=t}function Za(e,r,t,i,o,u,d,p,v,f){var l=(v&kr)!==0,h=(v&aa)===0,s=l?h?O(o):kt(o):o,m=(v&Br)===0?d:kt(d),w={i:m,v:s,k:u,a:null,e:null,prev:t,next:i};try{return w.e=$t(()=>p(e,s,m,f),_a),w.e.prev=t&&t.e,w.e.next=i&&i.e,t===null?r.first=w:(t.next=w,t.e.next=w.e),i!==null&&(i.prev=w,i.e.prev=w.e),w}finally{}}function Jr(e,r,t){for(var i=e.next?e.next.e.nodes_start:t,o=r?r.e.nodes_start:t,u=e.e.nodes_start;u!==i;){var d=lr(u);o.before(u),u=d}}function ut(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Ln(e){var r,t,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(t=Ln(e[r]))&&(i&&(i+=" "),i+=t)}else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function Qa(){for(var e,r,t=0,i="",o=arguments.length;t<o;t++)(e=arguments[t])&&(r=Ln(e))&&(i&&(i+=" "),i+=r);return i}function Ja(e){return typeof e=="object"?Qa(e):e??""}function ei(e,r,t){var i=e==null?"":""+e;return i===""?null:i}function en(e,r,t,i,o,u){var d=e.__className;if(d!==t){var p=ei(t);p==null?e.removeAttribute("class"):e.className=p,e.__className=t}return u}const ti=Symbol("is custom element"),ri=Symbol("is html");function Mt(e,r,t,i){var o=ni(e);o[r]!==(o[r]=t)&&(r==="loading"&&(e[zn]=t),t==null?e.removeAttribute(r):typeof t!="string"&&ai(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function ni(e){return e.__attributes??(e.__attributes={[ti]:e.nodeName.includes("-"),[ri]:e.namespaceURI===da})}var tn=new Map;function ai(e){var r=tn.get(e.nodeName);if(r)return r;tn.set(e.nodeName,r=[]);for(var t,i=e,o=Element.prototype;o!==i;){t=cn(i);for(var u in t)t[u].set&&r.push(u);i=Mr(i)}return r}function ii(e,r,t=r){Wa(e,"change",i=>{var o=i?e.defaultChecked:e.checked;t(o)}),et(r)==null&&t(e.checked),Vt(()=>{var i=r();e.checked=!!i})}function rn(e,r){return e===r||(e==null?void 0:e[pt])===r}function oi(e={},r,t,i){return $r(()=>{var o,u;return Vt(()=>{o=u,u=[],et(()=>{e!==t(...u)&&(r(e,...u),o&&rn(t(...o),e)&&r(null,...o))})}),()=>{Un(()=>{u&&rn(t(...u),e)&&r(null,...u)})}}),e}function It(e=!1){const r=oe,t=r.l.u;if(!t)return;let i=()=>Ba(r.s);if(e){let o=0,u={};const d=Ot(()=>{let p=!1;const v=r.s;for(const f in v)v[f]!==u[f]&&(u[f]=v[f],p=!0);return p&&o++,o});i=()=>a(d)}t.b.length&&wa(()=>{nn(r,i),Fr(t.b)}),Kr(()=>{const o=et(()=>t.m.map(Hn));return()=>{for(const u of o)typeof u=="function"&&u()}}),t.a.length&&Kr(()=>{nn(r,i),Fr(t.a)})}function nn(e,r){if(e.l.s)for(const t of e.l.s)a(t);r()}let jt=!1;function ui(e){var r=jt;try{return jt=!1,[e(),jt]}finally{jt=r}}function an(e){var r;return((r=e.ctx)==null?void 0:r.d)??!1}function He(e,r,t,i){var B;var o=(t&ia)!==0,u=!Ht||(t&oa)!==0,d=(t&sa)!==0,p=(t&fa)!==0,v=!1,f;d?[f,v]=ui(()=>e[r]):f=e[r];var l=pt in e||Xn in e,h=d&&(((B=Rt(e,r))==null?void 0:B.set)??(l&&r in e&&(P=>e[r]=P)))||void 0,s=i,m=!0,w=!1,C=()=>(w=!0,m&&(m=!1,p?s=et(i):s=i),s);f===void 0&&i!==void 0&&(h&&u&&Zn(),f=C(),h&&h(f));var Y;if(u)Y=()=>{var P=e[r];return P===void 0?C():(m=!0,w=!1,P)};else{var H=(o?Ot:we)(()=>e[r]);H.f|=_n,Y=()=>{var P=a(H);return P!==void 0&&(s=void 0),P===void 0?s:P}}if((t&ua)===0)return Y;if(h){var V=e.$$legacy;return function(P,W){return arguments.length>0?((!u||!W||V||v)&&h(W?Y():P),P):Y()}}var Z=!1,k=!1,$=O(f),xe=Ot(()=>{var P=Y(),W=a($);return Z?(Z=!1,k=!0,W):(k=!1,$.v=P)});return d&&a(xe),o||(xe.equals=Nr),function(P,W){if(st!==null&&(Z=k,Y(),a($)),arguments.length>0){const X=W?a(xe):u&&d?ht(P):P;if(!xe.equals(X)){if(Z=!0,I($,X),w&&s!==void 0&&(s=X),an(xe))return P;et(()=>a(xe))}return P}return an(xe)?xe.v:a(xe)}}const si="5";var ln;typeof window<"u"&&((ln=window.__svelte??(window.__svelte={})).v??(ln.v=new Set)).add(si);ra();const fi=`#version 300 es
layout (location = 0) in highp vec4 xy_uv;
layout (location = 1) in highp vec4 in_image_xywh;
layout (location = 2) in highp vec4 in_rgba;
layout (location = 3) in lowp vec3 in_discard_wrapx_wrapy;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
out lowp vec3 discard_wrapx_wrapy;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    rgba = in_rgba;
    uv = xy_uv.pq;
    image_xywh = in_image_xywh;
    discard_wrapx_wrapy = in_discard_wrapx_wrapy;
    gl_Position = vec4(
        (xy_uv.x * 2.0 / atlas_wh_screen_wh.p) - 1.0,
        1.0 - (xy_uv.y * 2.0 / atlas_wh_screen_wh.q),
        0.0,
        1.0
    );
}
`,li=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
in lowp vec3 discard_wrapx_wrapy;
out highp vec4 col;
uniform sampler2D tex;
uniform highp vec4 atlas_wh_screen_wh;
void main() {
    if (discard_wrapx_wrapy.x > 0.5) {
        col = rgba;
    } else {
        highp vec2 atlas_wh = atlas_wh_screen_wh.st;
        highp vec2 mod_atlas_uv = (image_xywh.st + (fract((uv - (image_xywh.st / atlas_wh)) / (image_xywh.pq / atlas_wh)) * image_xywh.pq)) / atlas_wh;
        highp vec2 clamp_atlas_uv = min(max(uv * atlas_wh, image_xywh.st), image_xywh.st + image_xywh.pq) / atlas_wh;
        col = texture(tex, mix(clamp_atlas_uv, mod_atlas_uv, discard_wrapx_wrapy.yz)) * rgba;
    }
}
`,ci=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * vec4(xyz_and_bone.xyz, 1.0);
}
`,di=`#version 300 es
layout (location = 0) in highp vec4 xyz_and_bone;
layout (location = 1) in highp vec2 in_uv;
layout (location = 2) in highp vec4 in_image_xywh;
layout (location = 3) in highp vec4 in_rgba;
layout (location = 4) in highp mat4 anim;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 modelmatrix;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * viewmatrix * modelmatrix * anim * vec4(xyz_and_bone.xyz, 1.0);
}
`,_i=`#version 300 es
in highp vec4 rgba;
in highp vec2 uv;
in highp vec4 image_xywh;
out highp vec4 col;
uniform sampler2D tex;
void main() {
    col = texture(tex, image_xywh.st + (fract(uv) * image_xywh.pq)) * rgba;
}
`,vi=`#version 300 es
layout (location = 0) in highp vec3 xyz;
layout (location = 1) in highp vec4 in_rgba;
layout (location = 2) in highp vec2 offset2d;
layout (location = 3) in highp vec3 offset3d;
layout (location = 4) in highp vec2 in_uv;
layout (location = 5) in highp vec4 in_image_xywh;
out highp vec4 rgba;
out highp vec2 uv;
out highp vec4 image_xywh;
uniform mat4 viewmatrix;
uniform mat4 projmatrix;
uniform highp vec2 atlas_wh;
void main() {
    rgba = in_rgba;
    uv = in_uv;
    image_xywh = vec4(
        in_image_xywh.s / atlas_wh.s,
        in_image_xywh.t / atlas_wh.t,
        in_image_xywh.p / atlas_wh.s,
        in_image_xywh.q / atlas_wh.t
    );
    gl_Position = projmatrix * (vec4(offset2d, 0.0, 0.0) + (viewmatrix * vec4(xyz + offset3d, 1.0)));
}
`,hi=`#version 300 es
layout (location = 0) in highp vec2 in_xy;
out highp vec2 xy;
uniform highp vec2 screen_wh;
void main() {
    xy = in_xy;
    gl_Position = vec4(
        in_xy.x * 2.0 - 1.0,
        in_xy.y * 2.0 - 1.0,
        0.0,
        1.0
    );
}
`,pi=`#version 300 es
in highp vec2 xy;
out highp vec4 col;
uniform highp vec2 screen_wh;
void main() {
    highp float xpixel = xy.x * screen_wh.s;
    highp float ypixel = xy.y * screen_wh.t;
    highp float rgb = mod(floor(xpixel / 24.0) + floor(ypixel / 24.0), 2.0) >= 1.0 ? 0.8 : 0.7;
    col = vec4(rgb, rgb, rgb, 1.0);
}
`,Ct=[{count:4,offset:0},{count:4,offset:16},{count:4,offset:32},{count:3,offset:48}],on=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40}],xi=[{count:4,offset:0},{count:2,offset:16},{count:4,offset:24},{count:4,offset:40},{count:4,offset:56},{count:4,offset:72},{count:4,offset:88},{count:4,offset:104}],mi=[{count:3,offset:0},{count:4,offset:28},{count:2,offset:44},{count:3,offset:52},{count:2,offset:64},{count:4,offset:12}],gi=[{count:2,offset:0}],ot=(e,r,t,i)=>{const o=e.createShader(r);if(!o)throw new Error(`failed to create shader '${i}'`);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){const u=e.getShaderInfoLog(o);throw new Error(`compilation error in shader '${i}':
${u}`)}return o},Lt=(e,r,t,i)=>{const o=e.createProgram();if(!o)throw new Error(`failed to create program '${i}'`);if(e.attachShader(o,r),e.attachShader(o,t),e.linkProgram(o),e.detachShader(o,r),e.detachShader(o,t),!e.getProgramParameter(o,e.LINK_STATUS)){const u=e.getProgramInfoLog(o);throw new Error(`link error in program '${i}':
${u}`)}return o};var wi=(e,r)=>r(!1),bi=ee('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full" alt="hide"></button>'),yi=(e,r)=>r(!0),Ei=ee('<button class="h-4 w-4 rounded-lg hover:bg-white"><img src="plugin://app/images/caret-down-solid.svg" class="h-full w-full rotate-270" alt="expand"></button>'),Ai=ee('<input type="checkbox">'),Fi=ee("<!> <!> <label> </label> <br>",1);function Ze(e,r){gt(r,!1);let t=He(r,"expanded",12),i=He(r,"id",8),o=He(r,"text",8),u=He(r,"checked",12,null),d=He(r,"onexpandedchange",8,null),p=He(r,"oncheckedchange",8,null);const v=H=>{t(H),d()&&d()()};It();var f=Fi(),l=he(f);{var h=H=>{var V=bi();V.__click=[wi,v],Ye(()=>Mt(V,"id",u()===null?i():null)),j(H,V)},s=H=>{var V=Ei();V.__click=[yi,v],Ye(()=>Mt(V,"id",u()===null?i():null)),j(H,V)};le(l,H=>{t()?H(h):H(s,!1)})}var m=te(l,2);{var w=H=>{var V=Ai();Mt(V,"draggable",!0),V.__change=function(...Z){var k;(k=p())==null||k.apply(this,Z)},Ye(()=>Mt(V,"id",i())),ii(V,u),j(H,V)};le(m,H=>{u()!==null&&H(w)})}var C=te(m,2),Y=qe(C);Ye(()=>{Mt(C,"for",i()),Me(Y,o())}),j(e,f),wt()}vr(["click","change"]);var Ti=ee('<div class="ml-4 w-full"> <br> <br> <br> <br></div>');function un(e,r){gt(r,!1);let t=He(r,"image",8);It();var i=Ti(),o=qe(i),u=te(o,2),d=te(u,2),p=te(d,2);Ye((v,f,l,h)=>{Me(o,`screen: ${t().x??""},${t().y??""}
  ${t().w??""}x${t().h??""} `),Me(u,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),Me(d,` rgb: ${v??""}, ${f??""}, ${l??""} `),Me(p,` alpha: ${h??""} `)},[()=>t().r.toPrecision(4),()=>t().g.toPrecision(4),()=>t().b.toPrecision(4),()=>t().a.toPrecision(4)],we),j(e,i),wt()}var Ri=ee(" <br>",1),Si=ee('<div class="ml-4 w-full"><!> <br> <br> <br> <br></div>');function sn(e,r){gt(r,!1);let t=He(r,"vertex",8);It();var i=Si(),o=qe(i);{var u=l=>{var h=Ri(),s=he(h);Ye(()=>Me(s,`model: ${t().modelpoint.x??""},${t().modelpoint.y??""},${t().modelpoint.z??""} `)),j(l,h)};le(o,l=>{t().modelpoint&&l(u)})}var d=te(o),p=te(d,2),v=te(p,2),f=te(v,2);Ye((l,h,s,m,w,C)=>{Me(d,` atlas: ${t().ax??""},${t().ay??""}
  ${t().aw??""}x${t().ah??""} `),Me(p,` uv: ${l??""}, ${h??""} `),Me(v,` rgb: ${s??""}, ${m??""}, ${w??""} `),Me(f,` alpha: ${C??""} `)},[()=>t().u.toPrecision(4),()=>t().v.toPrecision(4),()=>t().r.toPrecision(4),()=>t().g.toPrecision(4),()=>t().b.toPrecision(4),()=>t().a.toPrecision(4)],we),j(e,i),wt()}var Ui=ee("<div> </div>"),Di=(e,r,t)=>{const i=r().textureId;t(t().selectedTextureId=i.toString(),!0),t(t().selectedTexture=t().textures[i],!0),t().redraw()},Ii=ee('<button class="hover:bg-gray-200"> </button> <br>',1),Pi=ee("<!> <!>",1),Mi=ee('<div class="ml-2"></div>'),Ci=ee("<!> <!>",1),Li=ee("<!> <!>",1),Ni=ee("<!> <!>",1),ki=ee("<!> <!>",1),Bi=ee('<div class="ml-2"></div>'),Oi=ee("<!> <!>",1),$i=ee("<!> <!>",1),Hi=ee("<!> <!>",1),Vi=ee('<div class="ml-3 text-sm"><!> <!> <!> <!></div>');function Wi(e,r){gt(r,!1);let t=He(r,"entity",12),i=He(r,"menuData",12);const o=6,u=100;let d=O(!1),p=O(!1);function v(B){return"images"in B}function f(B){return"vertices"in B}let l=O(null),h=O(0),s=O(null),m=O(0);if(t().type==="batch2d"||t().type==="minimap2d"){const B=t().vertices,P=u*2,W=B.length>=P*o;I(l,[]);let X=[],ce=0;for(let ae=0;ae<B.length-(o-1);ae+=o){const ne=B[ae];let ie=ne.x,Re=ne.x,me=ne.y,be=ne.y;for(let ge=1;ge<o;ge+=1){const ue=B[ae+ge];ue.x<ie&&(ie=ue.x),ue.x>Re&&(Re=ue.x),ue.y<me&&(me=ue.y),ue.y>be&&(be=ue.y)}const L={x:ie,y:me,w:Re-ie,h:be-me,ax:ne.ax,ay:ne.ay,aw:ne.aw,ah:ne.ah,r:ne.r,g:ne.g,b:ne.b,a:ne.a,expanded:!1,index:a(h)};if(W){if(X.push(L),X.length>=u){const ge=`${a(l).length*u}-${a(l).length*u+X.length-1}`,ue=ae+o;a(l).push({images:X,desc:ge,expanded:!1,vertexRangeStart:ce,vertexRangeEnd:ue}),X=[],ce=ue}}else a(l).push(L);I(h,a(h)+1)}if(X.length>0){const ae=`${a(l).length*u}-${a(l).length*u+X.length-1}`;a(l).push({images:X,desc:ae,expanded:!1,vertexRangeStart:ce,vertexRangeEnd:B.length})}}else if(t().vertices){const B=u*2,P=t().vertices.length>=B;I(s,[]);let W=[];for(let X=0;X<t().vertices.length-(o-1);X+=o){const ce=t().vertices[X],ae={modelpoint:t().type!=="renderparticles"?{...ce}:null,expanded:!1,index:a(m),...ce};if(P){if(W.push(ae),W.length>=u){const ne=`${a(s).length*u}-${a(s).length*u+W.length-1}`;a(s).push({vertices:W,desc:ne,expanded:!1}),W=[]}}else a(s).push(ae);I(m,a(m)+1)}if(W.length>0){const X=`${a(s).length*u}-${a(s).length*u+W.length-1}`;a(s).push({vertices:W,desc:X,expanded:!1})}}It();var w=Vi(),C=qe(w);{var Y=B=>{var P=Ui(),W=qe(P);Ye(()=>Me(W,`animated: ${t().animated??""}`)),j(B,P)};le(C,B=>{typeof t().animated=="boolean"&&B(Y)})}var H=te(C,2);{var V=B=>{var P=Ii(),W=he(P);W.__click=[Di,t,i];var X=qe(W);Ye(()=>Me(X,`texture: #${t().textureId??""}`)),j(B,P)};le(H,B=>{typeof t().textureId=="number"&&B(V)})}var Z=te(H,2);{var k=B=>{var P=Ni(),W=he(P);const X=we(()=>`${t().uuid}-images2d`),ce=we(()=>`2D images (${a(h)})`);Ze(W,{get id(){return a(X)},get text(){return a(ce)},get expanded(){return a(d)},set expanded(ie){I(d,ie)},$$legacy:!0});var ae=te(W,2);{var ne=ie=>{var Re=qt(),me=he(Re);Tt(me,1,()=>a(l),Ft,(be,L,ge)=>{var ue=qt(),dt=he(ue);{var Ge=de=>{var _e=Ci(),ve=he(_e),ye=()=>a(L).images.every(_=>t().enabledVerticesList[_.index*o]),Ee=_=>{for(let se=a(L).vertexRangeStart;se<a(L).vertexRangeEnd;se+=1)t(t().enabledVerticesList[se]=_,!0)};const Xe=we(()=>`${t().uuid}-images-${a(L).desc}`),Ae=we(()=>`[Images ${a(L).desc}]`);Ze(ve,{get checked(){return ye()},set checked(_){Ee(_)},get oncheckedchange(){return i().redraw},get id(){return a(Xe)},get text(){return a(Ae)},get expanded(){return a(L).expanded},set expanded(_){a(L).expanded=_,Qe(()=>a(l))},$$legacy:!0});var Ie=te(ve,2);{var K=_=>{var se=Mi();Tt(se,5,()=>a(L).images,Ft,(Se,Oe,nt)=>{var _t=Pi(),vt=he(_t),Pt=()=>t().enabledVerticesList[a(Oe).index*o],Ke=n=>{for(let c=0;c<o;c+=1)t(t().enabledVerticesList[a(Oe).index*o+c]=n,!0)};const hr=we(()=>`${t().uuid}-images-${a(L).desc}-${nt}`);Ze(vt,{get checked(){return Pt()},set checked(n){Ke(n)},get oncheckedchange(){return i().redraw},get id(){return a(hr)},text:`Image ${ge*u+nt}`,get expanded(){return a(Oe).expanded},set expanded(n){a(Oe).expanded=n,Qe(()=>(a(l),a(L).images))},$$legacy:!0});var pr=te(vt,2);{var g=n=>{un(n,{get image(){return a(Oe)}})};le(pr,n=>{a(Oe).expanded&&n(g)})}j(Se,_t)}),j(_,se)};le(Ie,_=>{a(L).expanded&&_(K)})}j(de,_e)},bt=de=>{var _e=Li(),ve=he(_e),ye=()=>t().enabledVerticesList[a(L).index*o],Ee=K=>{for(let _=0;_<o;_+=1)t(t().enabledVerticesList[a(L).index*o+_]=K,!0)};const Xe=we(()=>`${t().uuid}-images-${ge}`);Ze(ve,{get checked(){return ye()},set checked(K){Ee(K)},get oncheckedchange(){return i().redraw},get id(){return a(Xe)},text:`Image ${ge}`,get expanded(){return a(L).expanded},set expanded(K){a(L).expanded=K,Qe(()=>a(l))},$$legacy:!0});var Ae=te(ve,2);{var Ie=K=>{un(K,{get image(){return a(L)}})};le(Ae,K=>{a(L).expanded&&K(Ie)})}j(de,_e)};le(dt,de=>{v(a(L))?de(Ge):de(bt,!1)})}j(be,ue)}),j(ie,Re)};le(ae,ie=>{a(d)&&ie(ne)})}j(B,P)};le(Z,B=>{a(l)&&a(h)&&B(k)})}var $=te(Z,2);{var xe=B=>{var P=Hi(),W=he(P);const X=we(()=>`${t().uuid}-vertices3d`),ce=we(()=>`3D vertices (${a(m)})`);Ze(W,{get id(){return a(X)},get text(){return a(ce)},get expanded(){return a(p)},set expanded(ie){I(p,ie)},$$legacy:!0});var ae=te(W,2);{var ne=ie=>{var Re=qt(),me=he(Re);Tt(me,1,()=>a(s),Ft,(be,L,ge)=>{var ue=qt(),dt=he(ue);{var Ge=de=>{var _e=Oi(),ve=he(_e);const ye=we(()=>`${t().uuid}-vertices-${a(L).desc}`),Ee=we(()=>`[Vertices ${a(L).desc}]`);Ze(ve,{get id(){return a(ye)},get text(){return a(Ee)},get expanded(){return a(L).expanded},set expanded(Ie){a(L).expanded=Ie,Qe(()=>a(s))},$$legacy:!0});var Xe=te(ve,2);{var Ae=Ie=>{var K=Bi();Tt(K,5,()=>a(L).vertices,Ft,(_,se,Se)=>{var Oe=ki(),nt=he(Oe);const _t=we(()=>`${t().uuid}-vertices-${a(L).desc}-${Se}`);Ze(nt,{get id(){return a(_t)},text:`Vertex ${ge*u+Se}`,get expanded(){return a(se).expanded},set expanded(Ke){a(se).expanded=Ke,Qe(()=>(a(s),a(L).vertices))},$$legacy:!0});var vt=te(nt,2);{var Pt=Ke=>{sn(Ke,{get vertex(){return a(se)}})};le(vt,Ke=>{a(se).expanded&&Ke(Pt)})}j(_,Oe)}),j(Ie,K)};le(Xe,Ie=>{a(L).expanded&&Ie(Ae)})}j(de,_e)},bt=de=>{var _e=$i(),ve=he(_e);const ye=we(()=>`${t().uuid}-vertices-${ge}`);Ze(ve,{get id(){return a(ye)},text:`Vertex ${ge}`,get expanded(){return a(L).expanded},set expanded(Ae){a(L).expanded=Ae,Qe(()=>a(s))},$$legacy:!0});var Ee=te(ve,2);{var Xe=Ae=>{sn(Ae,{get vertex(){return a(L)}})};le(Ee,Ae=>{a(L).expanded&&Ae(Xe)})}j(de,_e)};le(dt,de=>{f(a(L))?de(Ge):de(bt,!1)})}j(be,ue)}),j(ie,Re)};le(ae,ie=>{a(p)&&ie(ne)})}j(B,P)};le($,B=>{a(s)&&a(m)&&B(xe)})}j(e,w),wt()}vr(["click"]);var Xi=(e,r,t,i)=>r(t(),i()),zi=ee('<div class="static select-none m-0 border-none w-full text-left"><button> </button></div>'),Yi=ee("<div><!> <!></div>"),qi=ee('<div class="static select-none m-0 border-none w-full"><b>All textures</b></div> <!> <br> <div class="static select-none m-0 border-none w-full"><b>All entities</b></div> <!>',1);function ji(e,r){gt(r,!1);let t=He(r,"data",12);const i=(p,v)=>{t().selectedTexture===v?t(t().selectedTexture=null,!0):(t(t().selectedTextureId=p,!0),t(t().selectedTexture=v,!0)),t().redraw()};It();var o=qi(),u=te(he(o),2);Tt(u,1,()=>Object.entries(t().textures),Ft,(p,v)=>{let f=()=>a(v)[0],l=()=>a(v)[1];var h=zi(),s=qe(h);s.__click=[Xi,i,f,l];var m=qe(s);Ye(()=>{en(s,1,Ja(t().selectedTexture===l()?"bg-rose-400 hover:bg-rose-500 w-full":"bg-slate-300 hover:bg-slate-400 w-full")),Me(m,`#${f()??""}`)}),j(p,h)});var d=te(u,6);Tt(d,1,()=>t().entities,Ft,(p,v,f)=>{var l=Yi();en(l,1,`select-none m-0 border-none w-full ${f&1?"bg-[#c4c4e4]":"bg-[#b8b8d8]"}`);var h=qe(l);Ze(h,{id:`menu${f}`,get text(){return t().entities[f].type},get oncheckedchange(){return t().redraw},get expanded(){return t().entities[f].expanded},set expanded(w){t().entities[f].expanded=w,Qe(()=>t().entities)},get checked(){return t().entities[f].enabled},set checked(w){t().entities[f].enabled=w,Qe(()=>t().entities)},$$legacy:!0});var s=te(h,2);{var m=w=>{Wi(w,{get entity(){return t().entities[f]},set entity(C){t().entities[f]=C,Qe(()=>t().entities)},get menuData(){return t()},set menuData(C){t(C)},$$legacy:!0})};le(s,w=>{t().entities[f].expanded&&w(m)})}j(p,l)}),j(e,o),wt()}vr(["click"]);const pe=[];for(let e=0;e<256;++e)pe.push((e+256).toString(16).slice(1));function Gi(e,r=0){return(pe[e[r+0]]+pe[e[r+1]]+pe[e[r+2]]+pe[e[r+3]]+"-"+pe[e[r+4]]+pe[e[r+5]]+"-"+pe[e[r+6]]+pe[e[r+7]]+"-"+pe[e[r+8]]+pe[e[r+9]]+"-"+pe[e[r+10]]+pe[e[r+11]]+pe[e[r+12]]+pe[e[r+13]]+pe[e[r+14]]+pe[e[r+15]]).toLowerCase()}let Ar;const Ki=new Uint8Array(16);function Zi(){if(!Ar){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ar=crypto.getRandomValues.bind(crypto)}return Ar(Ki)}const Qi=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fn={randomUUID:Qi};function At(e,r,t){var o;if(fn.randomUUID&&!e)return fn.randomUUID();e=e||{};const i=e.random??((o=e.rng)==null?void 0:o.call(e))??Zi();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Gi(i)}var Ji=(e,r)=>I(r,!1),eo=ee('<div class="overflow-auto absolute w-56 h-full left-0 top-0 m-0 p-0 bg-slate-200"><!></div> <input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm mx-61 my-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="hide menu">',1),to=(e,r)=>I(r,!0),ro=ee('<input type="image" src="plugin://app/images/bars-solid.svg" class="absolute rounded-sm m-6 p-1 w-9 h-9 bg-gray-200 opacity-75 hover:opacity-100" alt="show menu">'),no=(e,r,t,i,o)=>{Gt(r,a(r).selectedTexture=null),t(a(i),a(o))},ao=ee('<input type="image" src="plugin://app/images/xmark-solid.svg" class="absolute right-0 rounded-sm m-4 p-1 w-8 h-8 bg-gray-200 opacity-75 hover:opacity-100" alt="close">'),io=ee('<canvas class="absolute right-0"></canvas> <!> <!>',1);function oo(e,r){gt(r,!1);let t=O({textures:{},entities:[],selectedTexture:null,selectedTextureId:"",redraw:()=>Se(a(K),a(_))});const i=g=>{const n=ne.get(g);return n?parseInt(n):0},o=(g,n,c,x,Q)=>new Float32Array([c/(g*Q),0,0,0,0,c/(n*Q),0,0,0,0,(x+c)/(x-c),1,0,0,-2*x*c/(x-c),0]),u=0;let d=O(null),p=O(null),v=O(null),f=O(null),l=O(null),h=O(null),s=O(null),m=O(null),w=O(null),C=O(null),Y=O(null),H=O(null),V=O(null),Z=O(null),k=O(null),$=O(null),xe=O(null),B=O(null),P=O(null),W=O(null),X=O(null),ce=O(null),ae=null;const ne=new URLSearchParams(window.location.search),ie=ne.get("n"),Re=ie?Math.max(parseInt(ie),1):1,me=i("w"),be=i("h"),L=i("gx"),ge=i("gy"),ue=i("gw"),dt=i("gh");let Ge=0,bt=O(0),de=O(),_e=null,ve=null,ye=0,Ee=0,Xe=o(ue,dt,460,66560,5/16),Ae=O(!1),Ie=O(!1),K=O(null),_=O(null);const se=(g,n,c,x)=>{g.bindBuffer(g.ARRAY_BUFFER,n.vbo);for(let b=0;b<a(bt);b+=1){const y=n.attribs[b];if(!y){g.disableVertexAttribArray(b);continue}g.enableVertexAttribArray(b),g.vertexAttribPointer(b,y.count,g.FLOAT,!1,n.step,y.offset)}if(!x){g.drawArrays(g.TRIANGLES,0,c);return}let Q=null;for(let b=0;b<c;b+=1){const y=x[b];Q===null?y&&(Q=b):y||(g.drawArrays(g.TRIANGLES,Q,b-Q),Q=null)}Q!==null&&g.drawArrays(g.TRIANGLES,Q,c-Q)},Se=(g,n)=>{if(n.viewport(0,0,g.width,g.height),n.scissor(0,0,g.width,g.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),!a(Ae)){n.viewport(0,0,g.width,g.height);const c=()=>{n.clearColor(.525,.968,.495,1),n.clear(n.COLOR_BUFFER_BIT)},x=()=>{n.clearColor(.2,.2,.2,1),n.clear(n.COLOR_BUFFER_BIT)},Q=Math.min(Ge/Re,1),b=Math.floor(g.width*.65)&-2,y=70,M=8,E=M*2,re=b*Q;if(c(),g.width<=E||g.height<=E)return;n.scissor(M,M,g.width-E,g.height-E),x(),n.scissor(g.width/2-(b/2+M),g.height/2-(y/2+M),b+E,y+E),c(),n.scissor(g.width/2-b/2+re,g.height/2-y/2,b-re,y),x();return}if(a(t).selectedTexture){if(n.useProgram(a(X)),n.viewport(0,0,g.width,g.height),n.uniform2fv(a(ce),[g.width,g.height]),!ae){const U=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,U),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),n.STATIC_DRAW),ae={vbo:U,step:8,attribs:gi}}se(n,ae,6);const c=a(t).selectedTexture,x=g.width/g.height,Q=c.width/c.height,b=x>=Q,y=b?c.width*g.height/c.height:g.width,M=b?g.height:c.height*g.width/c.width,E=b?(g.width-g.height)/2:0,re=y+E,T=b?0:(g.height-g.width)/2,fe=M+T;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(a(d)),n.uniform4fv(a(p),[c.width,c.height,g.width,g.height]),n.bindTexture(n.TEXTURE_2D,c.texture),n.uniform1i(a(v),u);const R=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,R),n.bufferData(n.ARRAY_BUFFER,new Float32Array([E,T,0,0,0,0,c.width,c.height,1,1,1,1,0,0,0,re,T,1,0,0,0,c.width,c.height,1,1,1,1,0,0,0,E,fe,0,1,0,0,c.width,c.height,1,1,1,1,0,0,0,re,T,1,0,0,0,c.width,c.height,1,1,1,1,0,0,0,re,fe,1,1,0,0,c.width,c.height,1,1,1,1,0,0,0,E,fe,0,1,0,0,c.width,c.height,1,1,1,1,0,0,0]),n.STATIC_DRAW),se(n,{vbo:R,step:60,attribs:Ct},6),n.deleteBuffer(R);return}ve&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,ve),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)),n.disable(n.SCISSOR_TEST);for(let c of a(t).entities)if(c.enabled){if(c.type==="batch2d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST);const x=a(t).textures[c.textureId];n.useProgram(a(d)),n.viewport(0,0,me,be),n.uniform4fv(a(p),[x.width,x.height,c.targetWidth,c.targetHeight]),n.bindTexture(n.TEXTURE_2D,x.texture),n.uniform1i(a(v),u),se(n,c.buffer,c.vertexCount,c.enabledVerticesList)}if(c.type==="render3d"){n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const x=a(t).textures[c.textureId];n.useProgram(c.animated?a(C):a(f)),n.viewport(L,ge,ue,dt),n.uniformMatrix4fv(c.animated?a(Y):a(l),!1,c.modelMatrix),n.uniformMatrix4fv(c.animated?a(H):a(h),!1,c.viewMatrix),n.uniformMatrix4fv(c.animated?a(V):a(s),!1,Xe),n.uniform2fv(c.animated?a(Z):a(m),[x.width,x.height]),n.bindTexture(n.TEXTURE_2D,x.texture),n.uniform1i(c.animated?a(k):a(w),u),se(n,c.buffer,c.vertexCount)}if(c.type==="renderparticles"){n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.DEPTH_TEST);const x=a(t).textures[c.textureId];n.useProgram(a($)),n.viewport(L,ge,ue,dt),n.uniformMatrix4fv(a(xe),!1,c.viewMatrix),n.uniformMatrix4fv(a(B),!1,Xe),n.uniform2fv(a(W),[x.width,x.height]),n.bindTexture(n.TEXTURE_2D,x.texture),n.uniform1i(a(P),u),se(n,c.buffer,c.vertexCount)}if(c.type==="icon"||c.type==="bigicon"){const x=c.texSize;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(a(d)),n.viewport(0,0,me,be),n.bindTexture(n.TEXTURE_2D,c.texture),n.uniform1i(a(v),u),n.uniform4fv(a(p),[x,x,c.targetWidth,c.targetHeight]),se(n,c.buffer,6)}if(c.type==="minimap2d"){!_e||!ve?(_e=n.createTexture(),n.bindTexture(n.TEXTURE_2D,_e),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,ye,Ee),ve=n.createFramebuffer(),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,ve),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,_e,0)):n.bindFramebuffer(n.DRAW_FRAMEBUFFER,ve),n.viewport(0,0,ye,Ee),n.disable(n.DEPTH_TEST);const x=a(t).textures[c.textureId];n.useProgram(a(d)),n.uniform4fv(a(p),[x.width,x.height,ye,Ee]),n.bindTexture(n.TEXTURE_2D,x.texture),n.uniform1i(a(v),u),se(n,c.buffer,c.vertexCount,c.enabledVerticesList),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)}if(c.type==="minimap"){if(_e===null)continue;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST),n.useProgram(a(d)),n.viewport(0,0,me,be),n.uniform4fv(a(p),[ye,Ee,c.targetWidth,c.targetHeight]),n.bindTexture(n.TEXTURE_2D,_e),n.uniform1i(a(v),u),se(n,c.buffer,6)}}},Oe=(g,n,c)=>{const x=new DataView(c),Q=x.getUint32(0,!0);switch(Q){case 0:{I(Ae,!0),Se(g,n);break}case 1:{const b=x.getUint32(4,!0),y=x.getUint32(8,!0),M=x.getUint32(12,!0),E=n.createTexture(),re=new Uint8Array(c,16,y*M*4);n.bindTexture(n.TEXTURE_2D,E),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,y,M,0,n.RGBA,n.UNSIGNED_BYTE,re),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),Gt(t,a(t).textures[b]={texture:E,width:y,height:M,data:re});break}case 2:case 3:{const b=Q===3,y=b?104:40,M=b?120:56,E=x.getUint32(4,!0),re=x.getUint32(8,!0),T=new Float32Array(16);T.set(new Float32Array(c,16,16));const fe=new Float32Array(16);fe.set(new Float32Array(c,80,16));const R=new DataView(c,144,E*y),S=new Array(E),U=new ArrayBuffer(E*M),F=new DataView(U);for(let D=0;D<E;D+=1){const A=y*D,N=M*D;let Ce=null;b&&(Ce=new Float32Array(16),Ce.set(new Float32Array(c,144+y*D+40,16)));const q={x:R.getInt16(A,!0),y:R.getInt16(A+2,!0),z:R.getInt16(A+4,!0),u:R.getFloat32(A+8,!0),v:R.getFloat32(A+12,!0),ax:R.getUint16(A+16,!0),ay:R.getUint16(A+18,!0),aw:R.getUint16(A+20,!0),ah:R.getUint16(A+22,!0),r:R.getFloat32(A+24,!0),g:R.getFloat32(A+28,!0),b:R.getFloat32(A+32,!0),a:R.getFloat32(A+36,!0),anim:Ce};if(S[D]=q,F.setFloat32(N,q.x,!0),F.setFloat32(N+4,q.y,!0),F.setFloat32(N+8,q.z,!0),F.setFloat32(N+12,0,!0),F.setFloat32(N+16,q.u,!0),F.setFloat32(N+20,q.v,!0),F.setFloat32(N+24,q.ax,!0),F.setFloat32(N+28,q.ay,!0),F.setFloat32(N+32,q.aw,!0),F.setFloat32(N+36,q.ah,!0),F.setFloat32(N+40,q.r,!0),F.setFloat32(N+44,q.g,!0),F.setFloat32(N+48,q.b,!0),F.setFloat32(N+52,q.a,!0),Ce)for(let Le=0;Le<16;Le+=1)F.setFloat32(N+56+Le*4,Ce[Le],!0)}const z=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,z),n.bufferData(n.ARRAY_BUFFER,F,n.STATIC_DRAW),a(t).entities.push({type:"render3d",animated:b,textureId:re,vertexCount:E,modelMatrix:T,viewMatrix:fe,vertices:S,buffer:{vbo:z,step:M,attribs:b?xi:on},enabled:!0,expanded:!1,uuid:At()}),Ge+=E,Se(g,n);break}case 4:{const M=x.getUint32(4,!0),E=x.getUint32(8,!0),re=x.getUint16(12,!0),T=x.getUint16(14,!0),fe=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,fe);const R=new DataView(c,16,M*40),S=new ArrayBuffer(M*60),U=new DataView(S),F=new Array(M);for(let z=0;z<M;z+=1){const D=40*z,A=60*z,N={x:R.getInt16(D,!0),y:R.getInt16(D+2,!0),ax:R.getInt16(D+4,!0),ay:R.getInt16(D+6,!0),aw:R.getInt16(D+8,!0),ah:R.getInt16(D+10,!0),discard:R.getUint8(D+12),wrapx:R.getUint8(D+13),wrapy:R.getUint8(D+14),u:R.getFloat32(D+16,!0),v:R.getFloat32(D+20,!0),r:R.getFloat32(D+24,!0),g:R.getFloat32(D+28,!0),b:R.getFloat32(D+32,!0),a:R.getFloat32(D+36,!0)};F[z]=N,U.setFloat32(A,N.x,!0),U.setFloat32(A+4,N.y,!0),U.setFloat32(A+8,N.u,!0),U.setFloat32(A+12,N.v,!0),U.setFloat32(A+16,N.ax,!0),U.setFloat32(A+20,N.ay,!0),U.setFloat32(A+24,N.aw,!0),U.setFloat32(A+28,N.ah,!0),U.setFloat32(A+32,N.r,!0),U.setFloat32(A+36,N.g,!0),U.setFloat32(A+40,N.b,!0),U.setFloat32(A+44,N.a,!0),U.setFloat32(A+48,N.discard,!0),U.setFloat32(A+52,N.wrapx,!0),U.setFloat32(A+56,N.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,U,n.STATIC_DRAW),a(t).entities.push({type:"batch2d",textureId:E,vertexCount:M,vertices:F,targetWidth:re,targetHeight:T,buffer:{vbo:fe,step:60,attribs:Ct},enabled:!0,expanded:!1,uuid:At(),enabledVerticesList:Array(Math.floor(M)).fill(!0)}),Ge+=M,Se(g,n);break}case 5:case 8:{const y=Q===5?64:512,M=x.getInt16(4,!0),E=x.getInt16(6,!0),re=x.getInt16(8,!0),T=x.getInt16(10,!0),fe=x.getUint32(12,!0),R=x.getFloat32(16,!0),S=x.getFloat32(20,!0),U=x.getFloat32(24,!0),F=x.getFloat32(28,!0),z=x.getUint16(32,!0),D=x.getUint16(34,!0),A=n.createTexture(),N=n.createFramebuffer();n.bindTexture(n.TEXTURE_2D,A),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,N),n.texStorage2D(n.TEXTURE_2D,1,n.RGBA8,y,y),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,A,0),n.enable(n.CULL_FACE),n.cullFace(n.FRONT),n.viewport(0,0,y,y),n.scissor(0,0,y,y);let Ce=Array(fe),q=36;for(let gr=0;gr<fe;gr+=1){const Xt=x.getUint32(q,!0);let Xr=Array(Xt);const Nn=new ArrayBuffer(Xt*56),Ne=new DataView(Nn),wr=new Float32Array(16);wr.set(new Float32Array(c,q+4,16));const br=new Float32Array(16);br.set(new Float32Array(c,q+68,16));const yr=new Float32Array(16);yr.set(new Float32Array(c,q+132,16)),q+=196;for(let zt=0;zt<Xt;zt+=1){const at={x:x.getInt16(q,!0),y:x.getInt16(q+2,!0),z:x.getInt16(q+4,!0),r:x.getFloat32(q+8,!0),g:x.getFloat32(q+12,!0),b:x.getFloat32(q+16,!0),a:x.getFloat32(q+20,!0)},$e=zt*56;Ne.setFloat32($e,at.x,!0),Ne.setFloat32($e+4,at.y,!0),Ne.setFloat32($e+8,at.z,!0),Ne.setFloat32($e+24,0,!0),Ne.setFloat32($e+28,0,!0),Ne.setFloat32($e+32,y,!0),Ne.setFloat32($e+36,y,!0),Ne.setFloat32($e+40,at.r,!0),Ne.setFloat32($e+44,at.g,!0),Ne.setFloat32($e+48,at.b,!0),Ne.setFloat32($e+52,at.a,!0),Xr[zt]=at,q+=24}Ce[gr]={vertices:Xr,modelMatrix:wr,viewMatrix:br,projMatrix:yr};const Er=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Er),n.bufferData(n.ARRAY_BUFFER,Ne,n.STATIC_DRAW),n.useProgram(a(f)),n.uniformMatrix4fv(a(l),!1,wr),n.uniformMatrix4fv(a(h),!1,br),n.uniformMatrix4fv(a(s),!1,yr),n.uniform2fv(a(m),[1,1]),n.bindTexture(n.TEXTURE_2D,a(de)),n.uniform1i(a(w),u),se(n,{vbo:Er,attribs:on,step:56},Xt),n.deleteBuffer(Er)}const Le=M,yt=M+re,xr=E,mr=E+T,Wr=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Wr),n.bufferData(n.ARRAY_BUFFER,new Float32Array([Le,xr,0,1,0,0,y,y,R,U,S,F,0,0,0,yt,xr,1,1,0,0,y,y,R,U,S,F,0,0,0,Le,mr,0,0,0,0,y,y,R,U,S,F,0,0,0,yt,xr,1,1,0,0,y,y,R,U,S,F,0,0,0,yt,mr,1,0,0,0,y,y,R,U,S,F,0,0,0,Le,mr,0,0,0,0,y,y,R,U,S,F,0,0,0]),n.STATIC_DRAW),a(t).entities.push({type:Q===5?"icon":"bigicon",models:Ce,texture:A,targetWidth:z,targetHeight:D,texSize:y,buffer:{vbo:Wr,step:60,attribs:Ct},enabled:!0,expanded:!1,uuid:At()}),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.deleteFramebuffer(N),n.disable(n.CULL_FACE);break}case 6:{const b=x.getUint32(4,!0),y=x.getUint32(8,!0);ye=x.getUint16(12,!0),Ee=x.getUint16(14,!0);const M=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,M);const E=new DataView(c,16,b*40),re=new ArrayBuffer(b*60),T=new DataView(re),fe=new Array(b);for(let R=0;R<b;R+=1){const S=40*R,U=60*R,F={x:E.getInt16(S,!0),y:E.getInt16(S+2,!0),ax:E.getInt16(S+4,!0),ay:E.getInt16(S+6,!0),aw:E.getInt16(S+8,!0),ah:E.getInt16(S+10,!0),discard:E.getUint8(S+12),wrapx:E.getUint8(S+13),wrapy:E.getUint8(S+14),u:E.getFloat32(S+16,!0),v:E.getFloat32(S+20,!0),r:E.getFloat32(S+24,!0),g:E.getFloat32(S+28,!0),b:E.getFloat32(S+32,!0),a:E.getFloat32(S+36,!0)};fe[R]=F,T.setFloat32(U,F.x,!0),T.setFloat32(U+4,F.y,!0),T.setFloat32(U+8,F.u,!0),T.setFloat32(U+12,F.v,!0),T.setFloat32(U+16,F.ax,!0),T.setFloat32(U+20,F.ay,!0),T.setFloat32(U+24,F.aw,!0),T.setFloat32(U+28,F.ah,!0),T.setFloat32(U+32,F.r,!0),T.setFloat32(U+36,F.g,!0),T.setFloat32(U+40,F.b,!0),T.setFloat32(U+44,F.a,!0),T.setFloat32(U+48,F.discard,!0),T.setFloat32(U+52,F.wrapx,!0),T.setFloat32(U+56,F.wrapy,!0)}n.bufferData(n.ARRAY_BUFFER,T,n.STATIC_DRAW),a(t).entities.push({type:"minimap2d",textureId:y,buffer:{vbo:M,attribs:Ct,step:60},vertices:fe,vertexCount:b,enabled:!0,expanded:!1,enabledVerticesList:Array(Math.floor(b)).fill(!0),uuid:At()}),Ge+=b,Se(g,n);break}case 7:{const b=x.getInt16(4,!0),y=x.getInt16(6,!0),M=x.getUint16(8,!0),E=x.getUint16(10,!0),re=x.getInt16(12,!0),T=x.getInt16(14,!0),fe=x.getUint16(16,!0),R=x.getUint16(18,!0),S=x.getUint16(20,!0),U=x.getUint16(22,!0),F=re,z=re+fe,D=T,A=T+R,N=b/ye,Ce=(b+M)/ye,q=y/Ee,Le=(y+E)/Ee,yt=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,yt),n.bufferData(n.ARRAY_BUFFER,new Float32Array([F,D,N,Le,b,y,M,E,1,1,1,1,0,0,0,z,D,Ce,Le,b,y,M,E,1,1,1,1,0,0,0,F,A,N,q,b,y,M,E,1,1,1,1,0,0,0,z,D,Ce,Le,b,y,M,E,1,1,1,1,0,0,0,z,A,Ce,q,b,y,M,E,1,1,1,1,0,0,0,F,A,N,q,b,y,M,E,1,1,1,1,0,0,0]),n.STATIC_DRAW),a(t).entities.push({type:"minimap",sourcex:b,sourcey:y,sourcew:M,sourceh:E,targetx:re,targety:T,targetw:fe,targeth:R,targetWidth:S,targetHeight:U,buffer:{vbo:yt,step:60,attribs:Ct},enabled:!0,expanded:!1,uuid:At()}),Se(g,n);break}case 9:{const b=x.getUint32(4,!0),y=x.getUint32(8,!0),M=64,E=72,re=new Float32Array(16);re.set(new Float32Array(c,16,16));const T=new DataView(c,80,b*M),fe=new Array(b),R=new ArrayBuffer(b*E),S=new DataView(R);for(let F=0;F<b;F+=1){const z=M*F,D=E*F,A={x:T.getFloat32(z,!0),y:T.getFloat32(z+4,!0),z:T.getFloat32(z+8,!0),offsetx2d:T.getFloat32(z+12,!0),offsety2d:T.getFloat32(z+16,!0),offsetx3d:T.getFloat32(z+20,!0),offsety3d:T.getFloat32(z+24,!0),offsetz3d:T.getFloat32(z+28,!0),ax:T.getUint16(z+32,!0),ay:T.getUint16(z+34,!0),aw:T.getUint16(z+36,!0),ah:T.getUint16(z+38,!0),r:T.getFloat32(z+40,!0),g:T.getFloat32(z+44,!0),b:T.getFloat32(z+48,!0),a:T.getFloat32(z+52,!0),u:T.getFloat32(z+56,!0),v:T.getFloat32(z+60,!0)};fe[F]=A,S.setFloat32(D,A.x,!0),S.setFloat32(D+4,A.y,!0),S.setFloat32(D+8,A.z,!0),S.setFloat32(D+12,A.ax,!0),S.setFloat32(D+16,A.ay,!0),S.setFloat32(D+20,A.aw,!0),S.setFloat32(D+24,A.ah,!0),S.setFloat32(D+28,A.r,!0),S.setFloat32(D+32,A.g,!0),S.setFloat32(D+36,A.b,!0),S.setFloat32(D+40,A.a,!0),S.setFloat32(D+44,A.offsetx2d,!0),S.setFloat32(D+48,A.offsety2d,!0),S.setFloat32(D+52,A.offsetx3d,!0),S.setFloat32(D+56,A.offsety3d,!0),S.setFloat32(D+60,A.offsetz3d,!0),S.setFloat32(D+64,A.u,!0),S.setFloat32(D+68,A.v,!0)}const U=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,U),n.bufferData(n.ARRAY_BUFFER,S,n.STATIC_DRAW),a(t).entities.push({type:"renderparticles",textureId:y,vertexCount:b,vertices:fe,viewMatrix:re,buffer:{vbo:U,step:E,attribs:mi},enabled:!0,expanded:!1,uuid:At()}),Ge+=b,Se(g,n);break}}};window.addEventListener("message",async g=>{if(typeof g.data=="object"&&g.data.type==="pluginMessage"){if(typeof g.data.content!="object"||!a(K)||!a(_))return;Oe(a(K),a(_),g.data.content)}}),ya(()=>(a(K),a(_),a(de),a(d),a(f),a(C),a($),a(X)),()=>{if(a(K)&&(Gt(K,a(K).width=me),Gt(K,a(K).height=be),I(_,a(K).getContext("webgl2")),a(_))){I(bt,a(_).getParameter(a(_).MAX_VERTEX_ATTRIBS)),I(de,a(_).createTexture()),a(_).bindTexture(a(_).TEXTURE_2D,a(de));const g=new Uint8Array([255,255,255,255]);a(_).texImage2D(a(_).TEXTURE_2D,0,a(_).RGBA,1,1,0,a(_).RGBA,a(_).UNSIGNED_BYTE,g);const n=ot(a(_),a(_).VERTEX_SHADER,fi,"2D vertex shader"),c=ot(a(_),a(_).FRAGMENT_SHADER,li,"2D fragment shader"),x=ot(a(_),a(_).VERTEX_SHADER,ci,"3D vertex shader"),Q=ot(a(_),a(_).VERTEX_SHADER,di,"3D anim vertex shader"),b=ot(a(_),a(_).FRAGMENT_SHADER,_i,"3D fragment shader"),y=ot(a(_),a(_).VERTEX_SHADER,vi,"particle vertex shader"),M=ot(a(_),a(_).VERTEX_SHADER,hi,"checkers vertex shader"),E=ot(a(_),a(_).FRAGMENT_SHADER,pi,"checkers fragment shader");I(d,Lt(a(_),n,c,"2D program")),I(p,a(_).getUniformLocation(a(d),"atlas_wh_screen_wh")),I(v,a(_).getUniformLocation(a(d),"tex")),I(f,Lt(a(_),x,b,"3D program")),I(l,a(_).getUniformLocation(a(f),"modelmatrix")),I(h,a(_).getUniformLocation(a(f),"viewmatrix")),I(s,a(_).getUniformLocation(a(f),"projmatrix")),I(m,a(_).getUniformLocation(a(f),"atlas_wh")),I(w,a(_).getUniformLocation(a(f),"tex")),I(C,Lt(a(_),Q,b,"3D animated program")),I(Y,a(_).getUniformLocation(a(C),"modelmatrix")),I(H,a(_).getUniformLocation(a(C),"viewmatrix")),I(V,a(_).getUniformLocation(a(C),"projmatrix")),I(Z,a(_).getUniformLocation(a(C),"atlas_wh")),I(k,a(_).getUniformLocation(a(C),"tex")),I($,Lt(a(_),y,b,"Particles program")),I(xe,a(_).getUniformLocation(a($),"viewmatrix")),I(B,a(_).getUniformLocation(a($),"projmatrix")),I(P,a(_).getUniformLocation(a($),"tex")),I(W,a(_).getUniformLocation(a($),"atlas_wh")),I(X,Lt(a(_),M,E,"Checkers program")),I(ce,a(_).getUniformLocation(a(X),"screen_wh")),a(_).deleteShader(n),a(_).deleteShader(c),a(_).deleteShader(x),a(_).deleteShader(b),a(_).deleteShader(Q),a(_).deleteShader(y),a(_).deleteShader(M),a(_).deleteShader(E),a(_).activeTexture(a(_).TEXTURE0+u),a(_).enable(a(_).SCISSOR_TEST),a(_).disable(a(_).CULL_FACE),a(_).disable(a(_).DEPTH_TEST),a(_).enable(a(_).BLEND),a(_).blendEquationSeparate(a(_).FUNC_ADD,a(_).FUNC_ADD),a(_).depthFunc(a(_).LEQUAL),Se(a(K),a(_))}}),Ea(),It();var nt=io(),_t=he(nt);oi(_t,g=>I(K,g),()=>a(K));var vt=te(_t,2);{var Pt=g=>{var n=eo(),c=he(n),x=qe(c);ji(x,{get data(){return a(t)},set data(b){I(t,b)},$$legacy:!0});var Q=te(c,2);Q.__click=[Ji,Ie],j(g,n)},Ke=(g,n)=>{{var c=x=>{var Q=ro();Q.__click=[to,Ie],j(x,Q)};le(g,x=>{a(Ae)&&x(c)},n)}};le(vt,g=>{a(Ie)?g(Pt):g(Ke,!1)})}var hr=te(vt,2);{var pr=g=>{var n=ao();n.__click=[no,t,Se,K,_],j(g,n)};le(hr,g=>{a(t).selectedTexture&&g(pr)})}j(e,nt),wt()}vr(["click"]);za(oo,{target:document.body});
